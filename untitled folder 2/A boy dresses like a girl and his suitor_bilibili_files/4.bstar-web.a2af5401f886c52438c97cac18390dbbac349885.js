(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{424:function(e,t,i){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(n,r,a){var o=r.prototype;a.utc=function(e){var t={date:e,utc:!0,args:arguments};return new r(t)},o.utc=function(t){var i=a(this.toDate(),{locale:this.$L,utc:!0});return t?i.add(this.utcOffset(),e):i},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=o.utcOffset;o.utcOffset=function(n,r){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var r=(""+n[0]).match(i)||["-",0,0],a=r[0],o=60*+r[1]+ +r[2];return 0===o?0:"+"===a?o:-o}(n)))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(r)return s.$offset=o,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,e)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=o.diff;o.diff=function(e,t,i){if(e&&this.$u===e.$u)return h.call(this,e,t,i);var n=this.local(),r=a(e).local();return h.call(n,r,t,i)}}}()},425:function(e,t,i){e.exports=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(i,n,r){var a,o=function(e,i,n){void 0===n&&(n={});var r=new Date(e);return function(e,i){void 0===i&&(i={});var n=i.timeZoneName||"short",r=e+"|"+n,a=t[r];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[r]=a),a}(i,n).formatToParts(r)},s=function(t,i){for(var n=o(t,i),a=[],s=0;s<n.length;s+=1){var l=n[s],u=l.type,c=l.value,d=e[u];d>=0&&(a[d]=parseInt(c,10))}var h=a[3],f=24===h?0:h,p=a[0]+"-"+a[1]+"-"+a[2]+" "+f+":"+a[4]+":"+a[5]+":000",g=+t;return(r.utc(p).valueOf()-(g-=g%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=a);var i=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),l=r(o).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var u=l.utcOffset();l=l.add(i-u,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||r.tz.guess(),i=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return i&&i.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var i=r(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(i,e,t).tz(this.$x.$timezone,!0)},r.tz=function(e,t,i){var n=i&&t,o=i||t||a,l=s(+r(),o);if("string"!=typeof e)return r(e).tz(o);var u=function(e,t,i){var n=e-60*t*1e3,r=s(n,i);if(t===r)return[n,t];var a=s(n-=60*(r-t)*1e3,i);return r===a?[n,r]:[e-60*Math.min(r,a)*1e3,Math.max(r,a)]}(r.utc(e,n).valueOf(),l,o),c=u[0],d=u[1],h=r(c).utcOffset(d);return h.$x.$timezone=o,h},r.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},r.tz.setDefault=function(e){a=e}}}()},426:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return ya}));var n=i(47),r=i.n(n),a=i(42),o=i.n(a),s=i(501),l=i.n(s),u=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,g=Math.pow,y=(e,t,i)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,m=(e,t)=>{for(var i in t||(t={}))f.call(t,i)&&y(e,i,t[i]);if(h)for(var i of h(t))p.call(t,i)&&y(e,i,t[i]);return e},E=(e,t,i)=>new Promise((n,r)=>{var a=e=>{try{s(i.next(e))}catch(e){r(e)}},o=e=>{try{s(i.throw(e))}catch(e){r(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,o);s((i=i.apply(e,t)).next())});function T(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if("default"!==i&&!(i in e)){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(e)}function M(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})})),t}var N,I={};(N=I).defaults={},N.set=function(e,t,i){var n=i||{},r=N.defaults,a=n.expires||r.expires,o=n.domain||r.domain,s=void 0!==n.path?n.path:void 0!==r.path?r.path:"/",l=void 0!==n.secure?n.secure:r.secure,u=void 0!==n.httponly?n.httponly:r.httponly,c=void 0!==n.samesite?n.samesite:r.samesite,d=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(d&&d.getTime()>=0?";expires="+d.toUTCString():"")+(o?";domain="+o:"")+(s?";path="+s:"")+(l?";secure":"")+(u?";httponly":"")+(c?";samesite="+c:"")},N.get=function(e){for(var t=document.cookie.split(";");t.length;){var i=t.pop(),n=i.indexOf("=");if(n=n<0?i.length:n,decodeURIComponent(i.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(i.slice(n+1))}return null},N.erase=function(e,t){N.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},N.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var i=t.pop(),n=i.indexOf("=");n=n<0?i.length:n,e[decodeURIComponent(i.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(i.slice(n+1))}return e},I.defaults={expires:365,path:"/",domain:".bilibili.com"},function(){const e=document.createElement("canvas");let t,i,n="",r="";try{t=e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl"),t&&(i=t.getExtension("WEBGL_debug_renderer_info"),i&&(n=t.getParameter(i.UNMASKED_VENDOR_WEBGL),r=t.getParameter(i.UNMASKED_RENDERER_WEBGL)))}catch(e){console.warn(e)}}(),function(){const e=document.createElement("canvas");let t;try{t=e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}}();var v,D={exports:{}},_="object"==typeof Reflect?Reflect:null,A=_&&"function"==typeof _.apply?_.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};v=_&&"function"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var S=Number.isNaN||function(e){return e!=e};function w(){w.init.call(this)}D.exports=w,D.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,a),n(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}k(e,t,a,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&k(e,"error",t,i)}(e,r,{once:!0})}))},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var O=10;function L(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function C(e){return void 0===e._maxListeners?w.defaultMaxListeners:e._maxListeners}function b(e,t,i,n){var r,a,o;if(L(i),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),o=a[t]),void 0===o)o=a[t]=i,++e._eventsCount;else if("function"==typeof o?o=a[t]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(r=C(e))>0&&o.length>r&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=R.bind(n);return r.listener=i,n.wrapFn=r,r}function P(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):z(r,r.length)}function j(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function z(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function k(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){n.once&&e.removeEventListener(t,r),i(a)}))}}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return O},set:function(e){if("number"!=typeof e||e<0||S(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");O=e}}),w.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||S(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},w.prototype.getMaxListeners=function(){return C(this)},w.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)A(s,this,t);else{var l=s.length,u=z(s,l);for(i=0;i<l;++i)A(u[i],this,t)}return!0},w.prototype.addListener=function(e,t){return b(this,e,t,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(e,t){return b(this,e,t,!0)},w.prototype.once=function(e,t){return L(t),this.on(e,x(this,e,t)),this},w.prototype.prependOnceListener=function(e,t){return L(t),this.prependListener(e,x(this,e,t)),this},w.prototype.removeListener=function(e,t){var i,n,r,a,o;if(L(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){o=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,a=Object.keys(i);for(n=0;n<a.length;++n)"removeListener"!==(r=a[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},w.prototype.listeners=function(e){return P(this,e,!0)},w.prototype.rawListeners=function(e){return P(this,e,!1)},w.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):j.call(e,t)},w.prototype.listenerCount=j,w.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]};var U,F=D.exports;function B(...e){}(function(e){e[e.error=1]="error",e[e.warn=2]="warn",e[e.info=4]="info",e[e.debug=8]="debug",e[e.log=16]="log"})(U||(U={})),new F;var Y={exports:{}},Q={exports:{}};!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var i=0;i<e.length;i++)e[i]=t.endian(e[i]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(t){for(var i=[],n=0;n<t.length;n+=3)for(var r=t[n]<<16|t[n+1]<<8|t[n+2],a=0;a<4;a++)8*n+6*a<=8*t.length?i.push(e.charAt(r>>>6*(3-a)&63)):i.push("=");return i.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,r=0;n<t.length;r=++n%4)0!=r&&i.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(n))>>>6-2*r);return i}};Q.exports=t}();var G=Q.exports,V=M(Object.freeze(T({__proto__:null,[Symbol.toStringTag]:"Module",default:G},[Q.exports]))),H={utf8:{stringToBytes:function(e){return H.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(H.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}},W=H,q=M(Object.freeze(T({__proto__:null,[Symbol.toStringTag]:"Module",default:W},[W]))),Z=function(e){return null!=e&&(K(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&K(e.slice(0,0))}(e)||!!e._isBuffer)};
/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/function K(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var $=M(Object.freeze(T({__proto__:null,[Symbol.toStringTag]:"Module",default:Z},[Z])));!function(){var e=V,t=q.utf8,i=$,n=q.bin,r=function(a,o){a.constructor==String?a=o&&"binary"===o.encoding?n.stringToBytes(a):t.stringToBytes(a):i(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var s=e.bytesToWords(a),l=8*a.length,u=1732584193,c=-271733879,d=-1732584194,h=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var p=r._ff,g=r._gg,y=r._hh,m=r._ii;for(f=0;f<s.length;f+=16){var E=u,T=c,M=d,N=h;u=p(u,c,d,h,s[f+0],7,-680876936),h=p(h,u,c,d,s[f+1],12,-389564586),d=p(d,h,u,c,s[f+2],17,606105819),c=p(c,d,h,u,s[f+3],22,-1044525330),u=p(u,c,d,h,s[f+4],7,-176418897),h=p(h,u,c,d,s[f+5],12,1200080426),d=p(d,h,u,c,s[f+6],17,-1473231341),c=p(c,d,h,u,s[f+7],22,-45705983),u=p(u,c,d,h,s[f+8],7,1770035416),h=p(h,u,c,d,s[f+9],12,-1958414417),d=p(d,h,u,c,s[f+10],17,-42063),c=p(c,d,h,u,s[f+11],22,-1990404162),u=p(u,c,d,h,s[f+12],7,1804603682),h=p(h,u,c,d,s[f+13],12,-40341101),d=p(d,h,u,c,s[f+14],17,-1502002290),u=g(u,c=p(c,d,h,u,s[f+15],22,1236535329),d,h,s[f+1],5,-165796510),h=g(h,u,c,d,s[f+6],9,-1069501632),d=g(d,h,u,c,s[f+11],14,643717713),c=g(c,d,h,u,s[f+0],20,-373897302),u=g(u,c,d,h,s[f+5],5,-701558691),h=g(h,u,c,d,s[f+10],9,38016083),d=g(d,h,u,c,s[f+15],14,-660478335),c=g(c,d,h,u,s[f+4],20,-405537848),u=g(u,c,d,h,s[f+9],5,568446438),h=g(h,u,c,d,s[f+14],9,-1019803690),d=g(d,h,u,c,s[f+3],14,-187363961),c=g(c,d,h,u,s[f+8],20,1163531501),u=g(u,c,d,h,s[f+13],5,-1444681467),h=g(h,u,c,d,s[f+2],9,-51403784),d=g(d,h,u,c,s[f+7],14,1735328473),u=y(u,c=g(c,d,h,u,s[f+12],20,-1926607734),d,h,s[f+5],4,-378558),h=y(h,u,c,d,s[f+8],11,-2022574463),d=y(d,h,u,c,s[f+11],16,1839030562),c=y(c,d,h,u,s[f+14],23,-35309556),u=y(u,c,d,h,s[f+1],4,-1530992060),h=y(h,u,c,d,s[f+4],11,1272893353),d=y(d,h,u,c,s[f+7],16,-155497632),c=y(c,d,h,u,s[f+10],23,-1094730640),u=y(u,c,d,h,s[f+13],4,681279174),h=y(h,u,c,d,s[f+0],11,-358537222),d=y(d,h,u,c,s[f+3],16,-722521979),c=y(c,d,h,u,s[f+6],23,76029189),u=y(u,c,d,h,s[f+9],4,-640364487),h=y(h,u,c,d,s[f+12],11,-421815835),d=y(d,h,u,c,s[f+15],16,530742520),u=m(u,c=y(c,d,h,u,s[f+2],23,-995338651),d,h,s[f+0],6,-198630844),h=m(h,u,c,d,s[f+7],10,1126891415),d=m(d,h,u,c,s[f+14],15,-1416354905),c=m(c,d,h,u,s[f+5],21,-57434055),u=m(u,c,d,h,s[f+12],6,1700485571),h=m(h,u,c,d,s[f+3],10,-1894986606),d=m(d,h,u,c,s[f+10],15,-1051523),c=m(c,d,h,u,s[f+1],21,-2054922799),u=m(u,c,d,h,s[f+8],6,1873313359),h=m(h,u,c,d,s[f+15],10,-30611744),d=m(d,h,u,c,s[f+6],15,-1560198380),c=m(c,d,h,u,s[f+13],21,1309151649),u=m(u,c,d,h,s[f+4],6,-145523070),h=m(h,u,c,d,s[f+11],10,-1120210379),d=m(d,h,u,c,s[f+2],15,718787259),c=m(c,d,h,u,s[f+9],21,-343485551),u=u+E>>>0,c=c+T>>>0,d=d+M>>>0,h=h+N>>>0}return e.endian([u,c,d,h])};r._ff=function(e,t,i,n,r,a,o){var s=e+(t&i|~t&n)+(r>>>0)+o;return(s<<a|s>>>32-a)+t},r._gg=function(e,t,i,n,r,a,o){var s=e+(t&n|i&~n)+(r>>>0)+o;return(s<<a|s>>>32-a)+t},r._hh=function(e,t,i,n,r,a,o){var s=e+(t^i^n)+(r>>>0)+o;return(s<<a|s>>>32-a)+t},r._ii=function(e,t,i,n,r,a,o){var s=e+(i^(t|~n))+(r>>>0)+o;return(s<<a|s>>>32-a)+t},r._blocksize=16,r._digestsize=16,Y.exports=function(t,i){if(null==t)throw new Error("Illegal argument "+t);var a=e.wordsToBytes(r(t,i));return i&&i.asBytes?a:i&&i.asString?n.bytesToString(a):e.bytesToHex(a)}}();var X=Y.exports;function J(){return X(String(ne("buvid3")||Math.floor(1e5*Math.random()).toString(16))+ +new Date)}function ee(e){let t;return null==e&&(e=0),t=("0"+(e=Math.ceil(e)>>0)%60).slice(-2),t=Math.floor(e/60)+":"+t,t.length<5&&(t="0"+t),t}function te(e){return"#"+("00000"+e.toString(16)).slice(-6)}function ie(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;").replace(/\n/g,"<br>")}function ne(e){if(null==e)return"";const t=document.cookie.split(";"),i=decodeURIComponent(e);for(let e=0;e<t.length;e++){const[n,r]=t[e].trim().split("=");if(decodeURIComponent(n)===i)return decodeURIComponent(r)}return""}function re(e){return window.localStorage&&localStorage.getItem?localStorage.getItem(e):ne(e)}function ae(e,t){if(!window.localStorage||!localStorage.setItem)return function(e,t,i=365){const n=new Date,r=encodeURIComponent(e),a=encodeURIComponent(t);n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=`${r}=${a}; expires=${n.toUTCString()}; path=/; domain=.bilibili.com`}(e,t);try{return localStorage.setItem(e,t)}catch(e){}}function oe(e,t="",i=!0){let n=new Date(e);n=new Date(+n+60*((new Date).getTimezoneOffset()+480)*1e3);const r=n.getFullYear()+"";return`${i?r+t:""}${("0"+(n.getMonth()+1)).slice(-2)}${t}${("0"+n.getDate()).slice(-2)}`}const se={get version(){const e=navigator.userAgent.toLowerCase(),t=/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.test(e)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.test(e),i=/(chrome)[ /]([\w.]+)/.exec(e)||"",n={browser:i[5]||i[3]||i[1]||"",version:i[4]||i[2]||"0"};let r=0;return n.browser&&(r=parseInt(n.version,10)),{browser:n.browser,version:r,linux:/Linux/i.test(e),tesla:/Tesla/i.test(e),webKit:/AppleWebKit/i.test(e),gecko:/Gecko/i.test(e)&&!/KHTML/i.test(e),trident:/Trident/i.test(e),presto:/Presto/i.test(e),mobile:/AppleWebKit.*Mobile.*/i.test(e),iOS:/Mac OS X[\s_\-/](\d+[.\-_]\d+[.\-_]?\d*)/i.test(e),iPhone:/iPhone/i.test(e),iPad:/iPad/i.test(e)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,webApp:!/Safari/i.test(e),android:/Android/i.test(e),windowsPhone:/Windows Phone/i.test(e),microMessenger:/MicroMessenger/i.test(e),microWorkMessenger:/wxwork/i.test(e),wx:/MicroMessenger/i.test(e)&&!/wxwork/i.test(e),mqq:/MQQBrowser/i.test(e)||/MicroMessenger/i.test(e)||/MMWEBSDK/i.test(e)||/WeChat/i.test(e),vivo:/VivoBrowser/i.test(e),msie:/msie [\w.]+/i.test(e),edge:/edge/i.test(e),edgeBuild16299:/(\s|^)edge\/16.16299(\s|$)/i.test(e),safari:t,safariSupportMSE:t&&/Version\/1\d/i.test(e)}}};function le(){const e=document.createElement("canvas");let t,i,n="",r="";try{t=e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl"),t&&(i=t.getExtension("WEBGL_debug_renderer_info"),i&&(n=t.getParameter(i.UNMASKED_VENDOR_WEBGL),r=t.getParameter(i.UNMASKED_RENDERER_WEBGL)))}catch(e){console.warn(e)}return!(!r&&!n)}function ue(e){const t=parseInt(e,10);return t<0||null==e||void 0===e?"--":-1!==String(e).indexOf(".")||-1!==String(e).indexOf("-")?e:0===t?0:(e=t)>=1e4&&e<1e8?(e/1e4).toFixed(e%1e4>500&&e%1e4<9500?1:0)+"万":e>=1e8?(e/1e8).toFixed(e%1e8>5e6&&e%1e8<95e6?1:0)+"亿":e}function ce(e,t,i){if(!e)return;e.style.transform="bottom"===i?"translate(-50%, 100%)":"translateX(-50%)";const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.right,o=r.right,s=Math.floor(Math.abs(a-o)),l=Math.floor(n.width/2),u=l+18+s,c=l+18-s;a>=o?e.style.transform="bottom"===i?`translate(-${u}px, 100%)`:`translateX(-${u}px)`:a<o&&s<18&&(e.style.transform="bottom"===i?`translate(-${c}px, 100%)`:`translateX(-${c}px)`)}const de={hashManage:{prependHash:"!",_change(e,t){let i,n=location.hash,r=[],a="",o=0;const s={};n&&(n=n.substring(1),this.prependHash&&(n=n.replace(new RegExp("^"+this.prependHash.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),""))),r=n.split("&");for(let e=0;e<r.length;e++){const t=r[e].split("=")[0],i=r[e].split("=")[1];t&&(s[t]=decodeURIComponent(i))}if("object"==typeof e){i=Object.keys(e).length;for(let t=0;t<i;t++){const n=e[i[t]];n?s[i[t]]=encodeURIComponent(n):!1===n&&delete s[i[t]]}}else if(t)s[e]=encodeURIComponent(""+t);else{if(!1!==t)return void 0===e?s:s[e]||null;delete s[e]}i=Object.keys(s);for(let e=0;e<i.length;e++)a+=0!==o?"&":this.prependHash,a+=`${i[e]}=${s[i[e]]}`,o+=1;return location.hash=a,s},get(e){return this._change(e,null)},set(e,t){return this._change(e,t)},clear(){location.hash=""}},isUndefined:e=>void 0===e,cookie:{get:function(e){const t={},i=document.cookie?document.cookie.split("; "):[];for(let n=0;n<i.length;n++){const r=i[n].split("=");let a=r.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{const i=this.decode(r[0]);if(a=this.decode(a),t[i]=a,e===i)break}catch(e){console.warn(e)}}return t[e]},decode:function(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},set:function(e,t,i=365){const n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=`${e}=${escape(""+t)};expires=${n.toUTCString()}; path=/; domain=.bilibili.com`},delete:function(e){this.set(e,"",-1)}},ChatGetSettings(e){return this.localStorage._support?this.localStorage.getItem(e):this.cookie.get(e)},ChatSaveSettings(e,t,i){return this.localStorage._support?this.localStorage.setItem(e,t):this.cookie.set(e,t,i)},ChatRemoveSettings(e){return this.localStorage._support?this.localStorage.removeItem(e):this.cookie.delete(e)},localStorage:{_support:(()=>{try{return!(!window.localStorage||"object"!=typeof window.localStorage)}catch(e){return!1}})(),getItem(e){return this._support?window.localStorage.getItem(e):null},setItem(e,t){this._support&&window.localStorage.setItem(e,""+t)},removeItem(e){window.localStorage.removeItem(e)}},loadLocalStorage(e){const t=["bilibililover","defaulth5","firstentergraytest","bilibili_player_settings"];this._iframe=document.createElement("iframe"),this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;",this._iframe.src="//www.bilibili.com/blackboard/iframemessage.html",document.body.appendChild(this._iframe),this._iframe.addEventListener&&this._iframe.addEventListener("load",()=>{try{for(let e=0;e<t.length;e++)this._iframe&&this._iframe.contentWindow&&window.localStorage.setItem(t[e],this._iframe.contentWindow.localStorage.getItem(t[e]))}catch(e){}clearTimeout(this.storageTimer),e()}),this.storageTimer=window.setTimeout(()=>{e()},500)},getLocalStorage(e){if(this._iframe)try{return this._iframe.contentWindow&&this._iframe.contentWindow.localStorage.getItem(e)}catch(e){}else try{return this.ChatGetSettings(e)}catch(e){}return null},setLocalStorage(e,t){try{this.ChatSaveSettings(e,t)}catch(e){}if(this._iframe)try{this._iframe.contentWindow&&this._iframe.contentWindow.localStorage.setItem(e,""+t)}catch(e){}},removeLocalStorage(e){try{this.ChatRemoveSettings(e)}catch(e){}if(this._iframe)try{this._iframe.contentWindow&&this._iframe.contentWindow.localStorage.removeItem(e)}catch(e){}},GetUrlValue(e){const t=new RegExp(`(^|&)${e}=([^&]*)(&|$)`,"i"),i=window.location.search.substr(1).match(t);if(null!=i)try{return decodeURIComponent(i[2])}catch(e){return null}return null},getIPCrc(e){const t=new he;t.reset(),t.update(e),this.cookie.set("HTML5PlayerCRC32",""+t.finish())},getHiddenProp(){const e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(let t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null},isDocumentHidden(){const e=this._getHiddenProp&&this._getHiddenProp();return!!e&&document[e]},cloneDeep(e,t){if(null===e||"object"!=typeof e)return e;const i=Array.isArray(e)?[]:{};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];i[n]=t&&"object"==typeof r?this.cloneDeep(r,t):r}return i},loadScript:(e,t)=>{const i=t||window,n=i.document.createElement("script");return n.onload=function(){e.success&&e.success()},n.onerror=()=>{e.error&&e.error()},n.src=e.url,i.document.head.appendChild(n),n},parseConfig(e,t,i){switch(t){case"has_danmaku":e.hasDanmaku=i&&"false"!==i||"";break;case"urlparam":e.extra_params=i?decodeURIComponent(i):"",e[t]=i?i+encodeURIComponent("&season_type=")+de.GetUrlValue("season_type"):"";break;case"p":e[t]=+i||1;break;case"page":e.p=+i||1;break;case"epid":e.episodeId=Number(i);break;case"danmaku":e.danmaku="0"!==i||"";break;default:e[t]=i}},defaultSearch(e,t=!1){let i=[];const n={},r=window.location.search;if(-1!==r.indexOf("?")){const e=r.slice(1).split("&");e&&i.push(...e),t&&(i=i.filter(e=>!/(t|dmid)=/.test(e)))}if(e){const t=e.split("&");i.push(...t)}let a;return i.forEach(e=>{a=e.split("="),de.parseConfig(n,a[0],a[1])}),n},objToStr(e){let t="";for(const i in e)t+=`${i}=${e[i]}&`;return t.slice(0,-1)},ajax:e=>new Promise((function(t,i){const n=e.method?e.method.toUpperCase():"GET",r=!!e.async,a=new XMLHttpRequest,o=e.data?de.objToStr(e.data):"";if(a.withCredentials=e.withCredentials||!1,"POST"===n)a.open(n,e.url,r),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(o);else if("GET"===n){const t=`${e.url}?${o}`;a.open(n,t,r),a.send()}else a.open(n,e.url),a.send();a.addEventListener("load",()=>{t(a.response)}),a.addEventListener("error",()=>{i()}),a.addEventListener("abort",()=>{i()})}))};class he{constructor(){this.crc32Table=this.makeTable(),this.value=0}makeTable(){const e=[];for(let t=0;t<256;t++){let i=t;for(let e=0;e<8;e++)1==(1&i)?i=i>>>1^3988292384:i>>>=1;e[t]=i>>>0}return e}updateBytes(e,t){let i=~e;const n=t.length;for(let e=0;e<n;e++)i=this.crc32Table[255&i^t[e]]^i>>>8;return~i>>>0}updateStr(e,t){let i=-1^e;for(let e,n,r=0,a=t.length;r<a;)e=t.charCodeAt(r+=1),e<128?i=i>>>8^this.crc32Table[255&(i^e)]:e<2048?(i=i>>>8^this.crc32Table[255&(i^(192|e>>6&31))],i=i>>>8^this.crc32Table[255&(i^(128|63&e))]):e>=55296&&e<57344?(e=64+(1023&e),n=1023&t.charCodeAt(r+=1),i=i>>>8^this.crc32Table[255&(i^(240|e>>8&7))],i=i>>>8^this.crc32Table[255&(i^(128|e>>2&63))],i=i>>>8^this.crc32Table[255&(i^(128|n>>6&15|(3&e)<<4))],i=i>>>8^this.crc32Table[255&(i^(128|63&n))]):(i=i>>>8^this.crc32Table[255&(i^(224|e>>12&15))],i=i>>>8^this.crc32Table[255&(i^(128|e>>6&63))],i=i>>>8^this.crc32Table[255&(i^(128|63&e))]);return(-1^i)>>>0}reset(){this.value=0}update(e){"string"==typeof e?this.value=this.updateStr(this.value,e):e instanceof Uint8Array||-1!==e.constructor.toString().indexOf("Uint8Array")?this.value=this.updateBytes(this.value,e):(e instanceof ArrayBuffer||-1!==e.constructor.toString().indexOf("ArrayBuffer"))&&(this.value=this.updateBytes(this.value,new Uint8Array(e,0,e.byteLength)))}finish(){return this.value}}var fe,pe,ge,ye;!function(e){e[e.Pugv=0]="Pugv",e[e.Editor=1]="Editor",e[e.OgvPre=2]="OgvPre",e[e.OgvPageList=3]="OgvPageList",e[e.OgvExtraParams=4]="OgvExtraParams",e[e.ogvFollowers=5]="ogvFollowers",e[e.Game=6]="Game",e[e.PugvCenter=7]="PugvCenter"}(fe||(fe={})),function(e){e.pageList="pageList",e.extra="extra",e.followers="followers"}(pe||(pe={})),function(e){e.inited="inited",e.enter="video_media_enter",e.play="video_media_play",e.playing="video_media_playing",e.canplay="video_media_canplay",e.pause="video_media_pause",e.seek="video_media_seek",e.seeking="video_media_seeking",e.seeked="video_media_seeked",e.seekEnd="video_media_seek_end",e.time="video_media_time",e.error="video_media_error",e.buffer="video_media_buffer",e.buffered="video_media_buffer_end",e.bufferFull="video_media_buffer_full",e.loadlag="video_media_loadlag",e.ended="video_media_ended",e.volume="video_media_volume",e.mute="video_media_mute",e.attached="video_media_attached",e.load="video_media_load",e.loaded="video_media_loaded",e.playerLoad="video_player_load",e.playerLoaded="video_player_loaded",e.playurlLoad="video_playurl_load",e.playurlLoaded="video_playurl_loaded",e.danmakuLoad="video_danmaku_load",e.danmakuLoaded="video_danmaku_loaded",e.pagelistLoaded="video_pagelist_loaded",e.websocketLink="video_websocket_link",e.websocketLinked="video_websocket_linked",e.websocketError="video_websocket_error",e.websocketEnd="video_websocket_end",e.initializing="video_initializing",e.initialized="video_initialized",e.scroll="video_scroll",e.resize="video_resize",e.playerResize="video_player_resize",e.progressbarResize="video_progressbar_resize",e.refullscreen="video_refullscreen",e.fullscreenChanged="video_fullscreen_mode_changed",e.mousemove="video_mousemove",e.heartbeat="video_heartbeat",e.controlbar="video_controlbar",e.beforeDestroy="video_before_destroy",e.destroy="video_destroy",e.log="video_log",e.logUpdate="video_log_update",e.logClose="video_log_close",e.promoteInit="video_promote_init",e.preloadError="video_preload_error",e.subtitleChange="video_subtitle_change",e.panelHover="video_panel_hover",e.guide_attention_pos_update="video_guide_attention_pos_update",e.mirror="video_mirror",e.videoResize="video_size_resize",e.dashError="dash_player_error",e.initialCB="initialCallback",e.itEnded="interactive_video_ended",e.itStart="interactive_video_countdown_start",e.playerReload="player_reload",e.playerReloaded="player_reloaded",e.loadedCB="loadedCallback",e.progressUpdate="video_progress_update",e.fullwin="player_fullwin",e.widewin="player_widewin",e.selector="player_selector",e.feedBack="feed_back",e.flashBirdge="flash_birdge",e.heimu="heimu"}(ge||(ge={}));class me{constructor(e){this.player=e}callNextPart(e,t,i){this.player.initPartmanager().load(e,e=>{this.cidLoader(e)},t,i)}cidLoader(e){this.beforeNext(e)||(this.player.pause(),this.player.destroy(),(this.player.config.aid!==e.aid||this.player.config.bvid!==e.bvid)&&this.clearConfigByDiffAid(),this.player.config.show_bv||delete e.bvid,Object.assign(this.player.config,e,{autoplay:!0,isAudio:!e.cid}),e.cid||(this.player.config.cid=null),this.player._init(this.player.state,!0),this.player.window.aid=this.player.config.aid,this.player.window.cid=this.player.config.cid,this.player.window.bvid=this.player.config.bvid,Number(this.player.config.seasonType)>=1?("function"==typeof this.player.window.bangumiCallNext&&this.player.window.bangumiCallNext(this.player.config.episodeId),this.player.window.season_id=this.player.config.seasonId,this.player.window.episode_id=this.player.config.episodeId):(delete this.player.window.season_id,delete this.player.window.episode_id),this.tellPage(this.player.config.p,this.player.config.aid,this.player.config.cid,this.player.config.bvid))}beforeNext(e){if(this.player.config.type===fe.Pugv){this.player.track&&e.pageList&&this.player.track.trackInfoPush("pugvplayer_click",`toepid: ${e.episodeId};toorder: ${e.p}; fromepid: ${this.player.config.episodeId}`);const t=this.player.user.status();if(2===Number(e.badgeType)&&t&&2===t.pugv_pay_status)return this.player.exitFullScreen(),this.player.reloadMedia.tellPage(e.p,e.aid,e.cid,e.bvid),!0}return!1}tellPage(e,t,i,n){if("function"==typeof this.player.window.callAppointPart)try{this.player.window.callAppointPart(e,{aid:t,cid:i,bvid:n})}catch(e){}}clearConfigByDiffAid(){this.player.config.interactiveNode=void 0,this.player.config.interactivePreview=void 0,this.player.config.interactiveGraphId=void 0}}!function(e){e[e.UI_NORMAL=0]="UI_NORMAL",e[e.UI_WIDE=1]="UI_WIDE",e[e.UI_WEB_FULL=2]="UI_WEB_FULL",e[e.UI_FULL=3]="UI_FULL",e[e.UI_MINI=4]="UI_MINI"}(ye||(ye={}));class Ee{}Ee.UI_NORMAL=0,Ee.UI_WIDE=1,Ee.UI_WEB_FULL=2,Ee.UI_FULL=3,Ee.UI_MINI=4,Ee.V_IDEL=0,Ee.V_READY=1,Ee.V_BUFF=2,Ee.V_PLAY=3,Ee.V_PAUSE=4,Ee.V_COMPLETE=5,Ee.videoDesc={0:"空闲状态",1:"加载完毕",2:"加载中",3:"播放中",4:"暂停",5:"播放完毕"},Ee.DM_OFF=!1,Ee.DM_ON=!0,Ee.USER_UNLOGIN=0,Ee.USER_LIMITED=1,Ee.USER_REGISTERED=2,Ee.USER_NORMAL=3,Ee.USER_VIP=4,Ee.USER_ADVANCED=5,Ee.SEND_POOL_NORMAL=[],Ee.SEND_POOL_ADMIN=[1,1],Ee.SEND_FONT_SIZE_UNLOGIN=[0,0,0,0,0,0,0],Ee.SEND_FONT_SIZE_LIMITED=[0,0,1,1,0,0,0],Ee.SEND_FONT_SIZE_REGISTERED=[0,0,1,1,0,0,0],Ee.SEND_FONT_SIZE_NORMAL=[0,0,1,1,0,0,0],Ee.SEND_FONT_SIZE_VIP=[0,1,1,1,1,0,0],Ee.SEND_FONT_SIZE_ADVANCED=[1,1,1,1,1,1,1],Ee.SEND_FONT_SIZE_ADMIN=[0,0,1,1,1,0,0],Ee.SEND_MODE_UNLOGIN=[0,0,0,0],Ee.SEND_MODE_LIMITED=[1,-2,-2,0],Ee.SEND_MODE_REGISTERED=[1,-2,-2,0],Ee.SEND_MODE_NORMAL=[1,-2,-2,0],Ee.SEND_MODE_VIP=[1,1,1,1],Ee.SEND_MODE_ADVANCED=[1,1,1,1],Ee.SEND_MODE_LEVEL_LOW=[1,-2,-2,0],Ee.SEND_MODE_LEVEL_TWO=[1,-2,-2,0],Ee.SEND_MODE_LEVEL_NORMAL=[1,1,1,0],Ee.SEND_COLOR_UNLOGIN=0,Ee.SEND_COLOR_LEVEL_LOW=1,Ee.SEND_COLOR_NORMAL=2,Ee.SEND_STATUS_UNLOGIN=0,Ee.SEND_STATUS_LEVEL_LOW=1,Ee.SEND_STATUS_MORAL_LOW=2,Ee.SEND_STATUS_DISABLED_WORDS=3,Ee.SEND_STATUS_LIMITED=4,Ee.SEND_STATUS_NORMAL=5,Ee.SEND_STATUS_TYPING=6,Ee.SEND_STATUS_BEYOND_WORDS=7,Ee.SEND_STATUS_SENDING=8,Ee.SEND_STATUS_SENT=9,Ee.SEND_STATUS_FREQUENTLY=10,Ee.SEND_STATUS_BLOCKING=11,Ee.SEND_STATUS_BLOCKED=12,Ee.SEND_STATUS_CLOSED=13,Ee.SEND_STATUS_UPDATE=14,Ee.SEND_ANSWER_STATUS_IN=15,Ee.SEND_STATUS_CANNOT_BUY=16,Ee.SEND_INPUT_UNLOGIN=[0,1e5],Ee.SEND_INPUT_LIMITED=[20,1e4],Ee.SEND_INPUT_REGISTERED=[20,1e4],Ee.SEND_INPUT_NORMAL=[100,5e3],Ee.SEND_INPUT_VIP=[100,1e3],Ee.SEND_INPUT_ADVANCED=[100,1e3],Ee.PLAYER_ERROR=1,Ee.PLAYER_NETWORK_ERROR=1101,Ee.PLAYER_FORM_ERROR=1103,Ee.PLAYER_ANALYZE_ERROR=1104,Ee.PLAYURL_ERROR=2,Ee.PLAYURL_NETWORK_ERROR=2101,Ee.PLAYURL_FORM_ERROR=2103,Ee.PLAYURL_RESOLVE_ERROR=2104,Ee.PLAYURL_BANGUMI_NETWORK_ERROR=2108,Ee.PLAYURL_BANGUMI_FORM_ERROR=2110,Ee.PLAYURL_BANGUMI_RESOLVE_ERROR=2111,Ee.VIDEO_ERROR=3,Ee.VIDEO_URL_ERROR=3001,Ee.VIDEO_ANALYZE_ERROR=3002,Ee.VIDEO_PLAY_ERROR=3104,Ee.NETWORK_EXCEPTION=3111,Ee.NETWORK_STATUS_CODE_INVALID=3112,Ee.NETWORK_UNRECOVERABLE_EARLY_EOF=3113,Ee.NETWORK_RECOVERED_EARLY_EOF=3114,Ee.MEDIA_MSE_ERROR=3121,Ee.MEDIA_FORMAT_ERROR=3122,Ee.MEDIA_FORMAT_UNSUPPORTED=3123,Ee.MEDIA_CODEC_UNSUPPORTED=3124,Ee.ABNORMAL_SEGMENT_BYTELENGTH=3125,Ee.EVENT={VIDEO_MEDIA_ENTER:"video_media_enter",VIDEO_MEDIA_PLAY:"video_media_play",VIDEO_MEDIA_PLAY_SUCCESS:"video_media_play_success",VIDEO_MEDIA_FIRST_PLAY_SUCCESS:"video_media_first_play_success",VIDEO_MEDIA_PLAY_FAIL:"video_media_play_fail",VIDEO_MEDIA_PLAYING:"video_media_playing",VIDEO_MEDIA_CANPLAY:"video_media_canplay",VIDEO_MEDIA_PAUSE:"video_media_pause",VIDEO_MEDIA_SEEK:"video_media_seek",VIDEO_MEDIA_SEEKING:"video_media_seeking",VIDEO_MEDIA_SEEKED:"video_media_seeked",VIDEO_MEDIA_SEEK_END:"video_media_seek_end",VIDEO_MEDIA_TIME:"video_media_time",VIDEO_MEDIA_FRAME:"video_media_frame",VIDEO_MEDIA_ERROR:"video_media_error",VIDEO_MEDIA_BUFFER:"video_media_buffer",VIDEO_MEDIA_BUFFER_END:"video_media_buffer_end",VIDEO_MEDIA_BUFFER_FULL:"video_media_buffer_full",VIDEO_MEDIA_LOADLAG:"video_media_loadlag",VIDEO_MEDIA_ENDED:"video_media_ended",VIDEO_MEDIA_VOLUME:"video_media_volume",VIDEO_MEDIA_MUTE:"video_media_mute",VIDEO_MEDIA_ATTACHED:"video_media_attached",VIDEO_PLAYER_LOAD:"video_player_load",VIDEO_PLAYER_LOADED:"video_player_loaded",VIDEO_PLAYURL_LOAD:"video_playurl_load",VIDEO_PLAYURL_LOADED:"video_playurl_loaded",VIDEO_METADATA_LOAD:"video_media_load",VIDEO_METADATA_LOADED:"video_media_loaded",VIDEO_QUALITY_CHANGE:"video_quality_change",VIDEO_DANMAKU_LOAD:"video_danmaku_load",VIDEO_DANMAKU_LOADED:"video_danmaku_loaded",VIDEO_PAGELIST_LOADED:"video_pagelist_loaded",VIDEO_WEBSOCKET_LINK:"video_websocket_link",VIDEO_WEBSOCKET_LINKED:"video_websocket_linked",VIDEO_WEBSOCKET_ERROR:"video_websocket_error",VIDEO_WEBSOCKET_END:"video_websocket_end",VIDEO_INITIALIZING:"video_initializing",VIDEO_INITIALIZED:"video_initialized",VIDEO_SCROLL:"video_scroll",VIDEO_RESIZE:"video_resize",VIDEO_PLAYER_RESIZE:"video_player_resize",VIDEO_PROGRESSBAR_RESIZE:"video_progressbar_resize",VIDEO_REFULLSCREEN:"video_refullscreen",VIDEO_FULLSCREEN_MODE_CHANGED:"video_fullscreen_mode_changed",VIDEO_MOUSEMOVE:"video_mousemove",VIDEO_HEARTBEAT:"video_heartbeat",VIDEO_CONTROLBAR:"video_controlbar",VIDEO_PROGRESS_UPDATE:"video_progress_update",VIDEO_BEFORE_DESTROY:"video_before_destroy",VIDEO_DESTROY:"video_destroy",VIDEO_LOG:"video_log",VIDEO_LOG_UPDATE:"video_log_update",VIDEO_LOG_CLOSE:"video_log_close",VIDEO_PROMOTE_INIT:"video_promote_init",VIDEO_PRELOAD_ERROR:"video_preload_error",VIDEO_SUBTITLE_CHANGE:"video_subtitle_change",VIDEO_PANEL_HOVER:"video_panel_hover",VIDEO_GUIDE_ATTENTION_POS_UPDATE:"video_guide_attention_pos_update",VIDEO_MIRROR:"video_mirror",VIDEO_SIZE_RESIZE:"video_size_resize",DASH_PLAYER_ERROR:"dash_player_error",INTERACTIVE_VIDEO_ENDED:"interactive_video_ended",INTERACTIVE_VIDEO_COUNTDOWN_START:"interactive_video_countdown_start",PLAYER_RELOAD:"player_reload",PLAYER_RELOADED:"player_reloaded",VIDEO_MEDIA_DURATION_CHANGE:"video_media_duration_change",VIDEO_DANMAKU_STATUS_CHANGED:"video_danmaku_status_changed",VIDEO_REQUEST_NEXT_EPISODE:"video_request_next_episode",VIDEO_CLICK_SUBTITLE:"video_click_subtitle",VIDEO_CLICK_REPORT:"video_click_report",VIDEO_CLICK_CC_REPORT:"video_click_cc_report",VIDEO_CLICK_SPEED:"video_click_speed",VIDEO_CHANGE_QUALITY_SUCCESS:"video-change-quality-success",VIDEO_CHANGE_QUALITY_FAIL:"video-change-quality-fail",RECORD_TIME_VISIBLE:"record-time-visible",RECORD_TIME_HIDDEN:"record-time-hidden",VOLUME_CHANGE:"volume-change",MUTED_CHANGE:"muted-change"},Ee.TRACK={OP:"001111",EVENT:"001114",AUDIO:"001156",MISAKA:200002,QUALITYMONITOR:"002879"};const Te=class{};let Me=Te;Me.P_AUTO="//",Me.P_WS="ws://",Me.P_WSS="wss://",Me.D_WWW="www.bilibili.com",Me.D_API="api.bilibili.com",Me.D_MANAGER="manager.bilibili.co",Me.D_CHAT="chat.bilibili.com",Me.D_DATA="data.bilibili.com",Me.D_MISAKA_SW="misaka-sw.bilibili.com",Me.D_MISAKA_APM="apm-misaka.biliapi.net",Me.D_MEMBER="member.bilibili.com",Me.PLAYURL=Te.P_AUTO+Te.D_API+"/x/player/playurl",Me.PLAYURL_PRE=Te.P_AUTO+Te.D_API+"/x/stein/playurl",Me.PLAYURL_PGC=Te.P_AUTO+Te.D_API+"/pgc/player/web/playurl",Me.PLAYURL_PUGV=Te.P_AUTO+Te.D_API+"/pugv/player/web/playurl",Me.PLAYURL_UP=Te.P_AUTO+Te.D_MEMBER+"/x/web/archive/video/playurl",Me.PLAYURL_TOKEN=Te.P_AUTO+Te.D_API+"/x/player/playurl/token",Me.PLAYURL_INNER=Te.P_AUTO+Te.D_MANAGER+"/v2/playurl",Me.PLAYURL_AUDIO=Te.P_AUTO+Te.D_WWW+"/audio/music-service-c/web/url",Me.PLAYURL_PGC_M=Te.P_AUTO+Te.D_API+"/pgc/player/web/playurl/html5",Me.PLAYER=Te.P_AUTO+Te.D_API+"/x/player.so",Me.X_PLAYER_PAGELIST=Te.P_AUTO+Te.D_API+"/x/player/pagelist",Me.WEBAPI_GETEPLIST=Te.P_AUTO+Te.D_API+"/pgc/web/season/section",Me.DM_PB=Te.P_AUTO+Te.D_API+"/x/v2/dm/h5/seg.so",Me.DM_PB_VIEW=Te.P_AUTO+Te.D_API+"/x/v2/dm/web/view",Me.DM_POST=Te.P_AUTO+Te.D_API+"/x/v2/dm/post",Me.RECOMMEND=Te.P_AUTO+Te.D_API+"/x/web-interface/archive/related",Me.CHAT_WS=Te.P_WS+Te.D_CHAT+":88",Me.CHAT_WSS=Te.P_WSS+Te.D_CHAT+":8443",Me.BROADCAST_GET=Te.P_AUTO+Te.D_API+"/x/web-interface/broadcast/servers",Me.MISAKA=Te.P_AUTO+Te.D_MISAKA_SW+"/misaka.gif?",Me.APM_MISAKA=Te.P_AUTO+Te.D_MISAKA_APM+"/misaka/web/report",Me.X_REPORT_HEARTBEAT=Te.P_AUTO+Te.D_API+"/x/click-interface/web/heartbeat",Me.X_REPORT_CLICK_NOW=Te.P_AUTO+Te.D_API+"/x/click-interface/click/now",Me.X_REPORT_CLICK_WEB_H5=Te.P_AUTO+Te.D_API+"/x/click-interface/click/web/h5",Me.X_SHARE_ADD=Te.P_AUTO+Te.D_API+"/x/web-interface/share/add",Me.X_REPORT_HEARTBEAT_M=Te.P_AUTO+Te.D_API+"/x/report/web/heartbeat",Me.X_REPORT_CLICK_NOW_M=Te.P_AUTO+Te.D_API+"/x/report/click/now",Me.X_REPORT_CLICK_H5=Te.P_AUTO+Te.D_API+"/x/click-interface/click/h5",Me.X_REPORT_CLICK_H5_OUTER=Te.P_AUTO+Te.D_API+"/x/click-interface/click/h5/outer",Me.LOG_WEB=Te.P_AUTO+Te.D_DATA+"/log/web",Me.VIEW=Te.P_AUTO+Te.D_API+"/x/web-interface/view";class Ne{constructor(e){this.data=e}}class Ie extends Ne{constructor(e){super(e)}getData(e){const t=this.convertUpload(this.data);r()({url:Me.X_REPORT_HEARTBEAT_M,method:"post",data:o.a.stringify(t),withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{"function"==typeof e.success&&e.success()}).catch(t=>{"function"==typeof e.error&&e.error(t)})}convertUpload(e){const t={aid:e.aid,cid:e.cid,bvid:e.bvid,mid:e.mid,csrf:e.csrf,played_time:e.playedTime,realtime:e.realtime,start_ts:e.startTs,type:e.type,dt:e.dt,play_type:e.playType};return e.spmid&&(t.spmid=e.spmid),t}}class ve extends Ne{constructor(e){super(e)}getData(e){const t=this.convertUpload(this.data);r()({url:Me.X_REPORT_CLICK_NOW_M,method:"GET",params:t,withCredentials:!0}).then(t=>{var i;null==(i=e.success)||i.call(e,this.convertResult(t.data))}).catch(t=>{var i;null==(i=e.error)||i.call(e,t)})}convertUpload(e){return{jsonp:e.jsonp}}convertResult(e){return{code:e.code,data:{now:e.data.now},message:e.message,ttl:e.ttl}}}class De extends Ne{constructor(e){super(e)}getData(){const e=this.convertUpload(this.data);this.data.useBeacon&&window.navigator&&window.navigator.sendBeacon?window.navigator.sendBeacon(`${Me.LOG_WEB}?${this.data.logid}${+new Date}${e.join("|")}`):r()({url:`${Me.LOG_WEB}?${this.data.logid}${+new Date}${e.join("|")}`,method:"get",withCredentials:!0})}convertUpload(e){return[e.ctime,e.fid,e.fver,e.eventid,e.eventparam,e.displayid,e.seasonid,e.epid,e.avid,e.cid,e.pname,e.progress,e.readystate,e.statue,e.playmethod,e.videotype,e.quality,e.realtime,e.url,e.exparam,e.abver,e.labels]}}const _e=new class{getMediaSource(){return self.MediaSource||self.WebKitMediaSource}getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}get isNativeSupported(){const e=document.createElement("video");return!(!e.canPlayType("application/vnd.apple.mpegurl")&&!e.canPlayType('video/mp2t; codecs="avc1.42E01E,mp4a.40.2"'))}get isMseSupported(){const e=this.getMediaSource();if(!e)return!1;const t=this.getSourceBuffer(),i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n}},Ae=/\/player-mobile\.(\w+\.)?js(\?.*)?$/;var Se;!function(e){e[e.enter_s=0]="enter_s",e[e.enter_e=1]="enter_e",e[e.init_s=2]="init_s",e[e.init_e=3]="init_e",e[e.playurl_s=4]="playurl_s",e[e.playurl_e=5]="playurl_e",e[e.meta_s=6]="meta_s",e[e.meta_e=7]="meta_e",e[e.frame=8]="frame",e[e.canplay=9]="canplay",e[e.reload_s=10]="reload_s",e[e.first_play=11]="first_play"}(Se||(Se={}));class we{constructor(e){this.player=e,this.reset()}setStageTiming(e,t){if(10===e&&this.reset(),this.stageTiming[e])return!1;this.stageTiming[e]=null!=t?t:performance.now(),this.perfUp(e)}reset(){this.stageTiming={0:NaN,1:NaN,2:NaN,3:NaN,10:NaN,4:NaN,5:NaN,6:NaN,7:NaN,8:NaN,9:NaN,11:NaN}}perfUp(e){var t;const i=null==(t=this.player)?void 0:t.track;if(!(null==i?void 0:i.trackInfoPush))return;const n=Boolean(this.stageTiming[10]);switch(e){case 7:this.recordEntryPerf(),n||i.trackInfoPush("mb_enter",JSON.stringify(this.initInfo("enter"))),i.trackInfoPush("mb_meta",JSON.stringify(this.initInfo("meta",n)));break;case 9:i.trackInfoPush("mb_canplay",JSON.stringify(this.initInfo("canplay",n)));break;case 11:this.recordEntryPerf(),i.trackInfoPush("mb_first_play",JSON.stringify(this.initInfo("first_play",n)))}}initInfo(e,t){const i=this.stageTiming[2],n=(e,t=i)=>this.toFixed(this.stageTiming[e]-t,2),r={reload:t?1:0};return t||(r.enter_s=n(0,0),r.enter_e=n(1,0),r.init_s=this.toFixed(i,2)),"enter"===e||(r.init_e=n(3),r.playurl_s=n(4),r.playurl_e=n(5),r.meta_s=n(6),r.meta_e=n(7),"meta"===e)||(r.frame=n(8)||0,r.canplay=n(9),"canplay"===e)||(r.first_play=n(11),"first_play"===e)?r:{}}recordEntryPerf(){const e=this.perfFilterLoadTime(Ae);e&&(this.stageTiming[0]=e.requestStart,this.stageTiming[1]=e.requestStart+e.duration)}perfFilterLoadTime(e){const t=this.perfCalcLoadTimes();for(const i of t)if(e.test(i.name))return i;return null}perfCalcLoadTimes(){const e=[];if(null==self.performance)return e;const t=performance.getEntriesByType("resource");if(null==t||t.length<=0)return e;for(const i of t){const t=i.redirectEnd-i.redirectStart,n=i.domainLookupEnd-i.domainLookupStart,r=i.connectEnd-i.connectStart,a=i.secureConnectionStart>0?i.connectEnd-i.secureConnectionStart:0,o=i.responseEnd-i.responseStart,s=i.fetchStart>0?i.responseEnd-i.fetchStart:0;i.requestStart>0&&(i.responseEnd,i.requestStart);const l=i.startTime>0?i.responseEnd-i.startTime:0;e.push({name:i.name,duration:i.duration||l||s,requestStart:i.startTime||i.fetchStart,entryType:i.entryType,initiatorType:i.initiatorType,nextHopProtocol:i.nextHopProtocol,decodedBodySize:i.decodedBodySize,transferSize:i.transferSize,redirectTime:t,dnsTime:n,tcpTime:r,sslTime:a,responseTime:o})}return e}toFixed(e,t){return"number"!=typeof e||isNaN(e)?e:Math.round(g(10,t)*e)/g(10,t)}}class Oe{constructor(e){this.enableHeartBeat=!0,this.seek={start:null,total:0},this.trackInfoList=[],this.inited=!1,this.playerStatue=[3,4,2,1,0],this.loadState=!1,this.player=e}init(){if(this.inited)return;this.inited=!0,this.firstClick=!1,this.destroyed=!1,this.trackInfoPush("enter",document.referrer);const e={native:_e.isNativeSupported,mse:_e.isMseSupported};this.trackInfoPush("checkhls",JSON.stringify(e)),this.player.bind(Ee.EVENT.VIDEO_MEDIA_SEEK,()=>{null===this.seek.start&&(this.seek.start=this.player.currentTime())}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_SEEKED,()=>{null!==this.seek.start&&(this.seek.total+=this.player.currentTime()-this.seek.start,this.seek.start=null),this.nextRestart&&(this.heartBeat(1),this.nextRestart=!1)}),this.player.bind(Ee.EVENT.VIDEO_BEFORE_DESTROY,()=>{this.trackInfoPush("quit",this.player.getBufferRate()*this.player.duration()+"",{useBeacon:!0}),this.isPlayerComplete()||this.heartBeat(4)}),this.player.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.destroy()}),this.player.bind(Ee.EVENT.PLAYER_RELOAD,()=>{this.reset()}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_PLAYING,()=>{this.firstClick&&(this.nextRestart||this.heartBeat(3),this.enableHeartBeat=!0)}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_PAUSE,()=>{this.firstClick&&(this.isPlayerComplete()||this.heartBeat(2),this.enableHeartBeat=!1)});let t=!1;this.player.bind(Ee.EVENT.VIDEO_METADATA_LOADED,()=>{t||(t=!0,this.player.reloadTime?(this.trackInfoPush("reload_time",+new Date-this.player.reloadTime),this.player.reloadTime=0):(this.frameTime=+new Date-this.player.createdTime,this.loadedTime=this.frameTime,window.performance&&window.performance.timing&&window.performance.timing.navigationStart&&(this.loadedTime=+new Date-window.performance.timing.navigationStart),this.trackInfoPush("loaded_time",this.loadedTime),this.trackInfoPush("frame_time",this.frameTime),this.firstClickTime&&this.trackInfoPush("first_waiting_time",Math.max(this.loadedTime-this.firstClickTime,0))))}),this.player.bind(Ee.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED,()=>{this.trackInfoPush("browser_fullscreen")}),this.player.bind(Ee.EVENT.VIDEO_DANMAKU_STATUS_CHANGED,e=>{this.trackInfoPush(e?"ctlbar_danmuku_on":"ctlbar_danmuku_close")})}heartBeat(e=0){if(this.player.config.noId||!this.stime||this.seek.start)return!1;let t;const i=this.player;try{t=this.isPlayerComplete()?-1:Math.floor(i.currentTime())}catch(e){t=Math.floor(i.currentTime())}let n=Math.floor(i.currentTime()-this.seek.total);if(n=Math.max(n,0),0===n&&0===t&&4===e)return!1;const r={aid:i.config.aid||void 0,cid:i.config.cid,bvid:i.config.bvid||"",mid:i.user.status().uid||"",csrf:ne("bili_jct")||"",playedTime:t,realtime:n,startTs:this.stime,type:i.config.seasonType>0?4:3,dt:7,playType:e,spmid:i.config.spmid,from_spmid:i.config.from_spmid};4===e&&(this.nextRestart=!0),i.trigger(Ee.EVENT.VIDEO_HEARTBEAT,{data:r,progress:t}),new Ie(r).getData({success:()=>{}})}isPlayerComplete(){return!this.player.videoDisableTime&&(this.player.state.video_state===Ee.V_COMPLETE||this.player.duration()&&this.player.currentTime().toFixed(1)===this.player.duration().toFixed(1))}getServerTime(e){new ve({jsonp:"jsonp"}).getData({success:t=>{t&&0===t.code&&t.data&&t.data.now?(re("html5PlayerServerTime")||ae("html5PlayerServerTime",String(t.data.now)),e(t.data.now)):e(Math.floor(Date.now()/1e3))},error:t=>{e(Math.floor(Date.now()/1e3))}})}getPointParams(e){const t=this.player;try{t.userLoadedCallback(i=>{this.getServerTime(n=>{const r={aid:t.config.aid||void 0,cid:t.config.cid,bvid:t.config.bvid,part:t.config.p,did:ne("sid")||Math.random().toString(36).slice(-8),mid:i.uid||"",lv:i.error?0:i.level||0,ftime:+re("html5PlayerServerTime")||n,stime:n,jsonp:"jsonp",sub_type:t.config.sub_type,type:t.config.type,spmid:t.config.spmid,from_spmid:t.config.from_spmid};r.aid||delete r.aid,e(r)})})}catch(t){e(!1)}}sendRealtime(e){this.stime=e.stime,this.heartBeat(1),this.heartbeatId=window.setInterval(()=>{this.enableHeartBeat&&this.heartBeat()},15e3)}sendPoint(e){this.player.config.bvid||delete e.bvid;const t=[],i=new XMLHttpRequest;for(const i in e)Object.hasOwnProperty.call(e,i)&&t.push(i+"="+e[i]);i.open("POST",this.player.config.outer?Me.X_REPORT_CLICK_H5_OUTER:Me.X_REPORT_CLICK_H5,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.withCredentials=!0,i.send(t.join("&"))}view(){!this.player.config.noId&&!this.firstClick&&!this.destroyed&&(this.firstClick=!0,this.firstClickTime=+new Date-this.player.createdTime,this.player.perf.setStageTiming(Se.first_play),this.getPointParams(e=>{e&&!this.destroyed&&(this.sendPoint(e),this.sendRealtime(e))}),this.pageReport("click","playFirstTime",{area:this.player.controller.firstClickArea}),this.pageCustomReport("playFirstTime",window.bsource||""),this.trackInfoPush("first_play",window.bsource||""),this.loadedTime&&this.trackInfoPush("first_waiting_time",Math.max(this.loadedTime-this.firstClickTime,0)))}sendService(e=Ee.TRACK.EVENT,t,i="",n="",r=!1,a,o){const s=this.player,l=s.video?Math.floor(s.currentTime()):0;let u=Math.floor((s.currentTime()||0)-this.seek.total);u=Math.max(u,0);const c={logid:e,useBeacon:r,ctime:a,fid:"mobile",fver:oe(bPlayer.metadata.lastCompiled)+"_"+bPlayer.metadata.revision,eventid:t,eventparam:i,displayid:s.session,seasonid:s.config.seasonId||"",epid:s.config.episodeId||"",avid:s.config.aid||void 0,cid:s.config.cid,bvid:s.config.bvid,pname:s.config.p,progress:l,readystate:o,statue:this.playerStatue[s.state.mode],playmethod:s.state.play_type,videotype:s.state.video_type,quality:s.videoQuality,realtime:u,url:n,exparam:"",abver:ne("laboratory")||"",labels:JSON.stringify(s.config.labels)};new De(c).getData()}startTrackReportTask(){let e,t;if(this.trackInfoList.length>0){switch(e=this.trackInfoList.shift(),e.name){case"danmaku_protect_loaded":case"danmaku_protect_loaded_failed":case"enter":case"end":case"quit":case"web_videoload_time":case"web_load_danmuku":case"video_error_event":case"video_error":case"video_log_event":case"start_load":case"end_load":case"seek_end_load":case"web_loadlag":case"web_loadlag_end":case"overtime_change":case"start_time":case"loaded_time":case"web_videoload_fail":case"fram_discard_badcase":case"load_videoerror_code":case"range_early_eof":case"video_filesize_different":case"time_error":case"end_recommend_show":case"recommend_show":case"initial_time":case"frame_time":case"utoken_done_time":case"utoken_fail_time":case"api_playurl_done_time":case"api_playurl_fail_time":case"reload_time":case"video_buffer":case"lag_end_load":case"player_received_bytes":case"http_received_bytes":case"http_connection_time":case"first_audio_frame_decoded":case"first_video_frame_decoded":case"abnormal_segment_bytelength":case"start_time_detail":case"viewTime":case"cdnTime":case"showTime":case"core_initial_time":case"canplay_speed":case"quality_toast_show":case"video_cts_warning":case"load_dash_warning":case"player_received_index":case"p2p_load_info":case"mask_load_start":case"video_retry_success":case"quota_exceeded":case"video_retry_fail":case"verify_segment_warning":case"video_gap":case"fullscreen_disabled":case"first_waiting_time":case"first_play":case"browser_forbid_autoplay":case"checkhls":t=Ee.TRACK.OP;break;default:t=Ee.TRACK.EVENT}switch(e.name){case"canplay_speed":case"showTime":case"loaded_time":case"reload_time":case"http_connection_time":case"first_audio_frame_decoded":case"first_video_frame_decoded":e.url||(e.url=this.player.getPlayurl())}this.send(e.name,e.params,e.url,e.useBeacon,t,e.ctime,e.readyState)}}loadTrackUp(e,t){if(this.inited&&(e&&!this.player.config.noId&&(this.loadState=!0),this.loadState)){if(t){for(;this.trackInfoList.length>0;)this.startTrackReportTask();return}this.upTimer||(this.startTrackReportTask(),this.upTimer=window.setTimeout(()=>{this.upTimer=0,this.loadTrackUp()},100))}}send(e,t,i,n,r,a,o){if("video_error"===e){if(this.videoErrorSymbol)return;this.videoErrorSymbol=!0}if("quit"===e){if(this.videoQuitSymbol)return;this.videoQuitSymbol=!0}this.sendService(r,e,t,i,n,a,o)}trackInfoPush(e,t,i){let n={ctime:+new Date,readyState:this.player.video?this.player.video.readyState:0};"object"==typeof t?(n=Object.assign(n,t),this.trackInfoList.push({name:e,url:n.url,useBeacon:n.useBeacon,ctime:n.ctime,readyState:n.readyState})):(n=Object.assign(n,i),this.trackInfoList.push({name:e,params:t,url:n.url,useBeacon:n.useBeacon,ctime:n.ctime,readyState:n.readyState})),"quit"===e||"player_received_bytes"===e||"http_received_bytes"===e?this.loadTrackUp(void 0,!0):this.loadTrackUp()}pageReport(e,t,i){if(!(["pv","click","show"].indexOf(e)<0)&&window.reportConfig&&window[window.reportConfig.msgObjects]){(!i||"object"==typeof i)&&(i=Object.assign(m({screenStatus:this.player.state.mode===Ee.UI_NORMAL?"half":"full",playStatus:this.player.video&&!this.player.video.paused?"play":"pause",fromTime:this.player.currentTime()||0,avid:this.player.config.aid,cid:this.player.config.cid},window.commonReportMsg||{}),i),i=JSON.stringify(i));window[window.reportConfig.msgObjects][e]={event:t,value:i},window.reportObserver&&window.reportObserver.forceCommit()}}pageCustomReport(e,t){if(window.reportConfig&&window[window.reportConfig.msgObjects]){window[window.reportConfig.msgObjects][e]=t,window.reportObserver&&window.reportObserver.forceCommit()}}destroy(){this.inited=!1,this.destroyed=!0,this.heartbeatId&&clearInterval(this.heartbeatId),this.upTimer&&clearTimeout(this.upTimer)}reset(){this.firstClick=!1,this.heartbeatId&&clearInterval(this.heartbeatId),this.seek={start:null,total:0}}}class Le extends Ne{constructor(e){super(e)}getData(e){return r()({url:Me.PLAYER,method:"get",params:{id:"cid:"+this.data.cid,aid:this.data.aid,bvid:this.data.bvid,buvid:this.data.buvid,graph_version:this.data.graph_version,innersign:this.data.innersign},withCredentials:!0}).then(t=>{var i;null==(i=e.success)||i.call(e,this.convertResult(t.data))}).catch(t=>{var i;null==(i=e.error)||i.call(e,t)})}convertResult(e){return{code:0,message:"0",data:e}}}class Ce{constructor(e){this.player=e,this.init(),this.registerListener()}init(){this.playerNumber={inner:"--",out:"--",danmaku:"--",limit:"--"},this.userStatus={login:!0},this.retry=3,this.initialized=!1,this.player.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.destroy()})}registerListener(){this.player.bind(Ee.EVENT.VIDEO_DESTROY,this.destroy.bind(this))}status(){return this.userStatus}destroy(){}load(e){if(this.player.config.noId)return void this.user(document.createElement("div"),e);this.player.config.bvid?this.url=Me.PLAYER+"?id=cid:"+this.player.config.cid+"&bvid="+this.player.config.bvid+"&aid="+this.player.config.aid:this.url=Me.PLAYER+"?id=cid:"+this.player.config.cid+"&aid="+this.player.config.aid;const t=ne("innersign")||void 0;t&&(this.url+="&innersign="+t),this.player.trigger(Ee.EVENT.VIDEO_PLAYER_LOAD);const i={cid:this.player.config.cid,aid:this.player.config.aid||null,bvid:this.player.config.bvid,buvid:this.player.buvid,innersign:t};this.player.config.bvid||delete i.bvid,new Le(i).getData({success:t=>{if(this.player.destroyed)return;this.userXML=t.data;const i=t.data;if(i)try{this.data=(new window.DOMParser).parseFromString("<userstatus>"+i.replace(/&/g,"&amp;")+"</userstatus>","text/xml"),this.data&&this.data.getElementsByTagName&&this.data.getElementsByTagName("error")[0]?(this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR),this.user(document.createElement("div"),e)):this.data&&this.data.getElementsByTagName&&!this.data.getElementsByTagName("parsererror")[0]?this.user(this.data,e):(this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR),this.user(document.createElement("div"),e))}catch(t){this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR),this.user(document.createElement("div"),e)}else this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR),this.user(document.createElement("div"),e)},error:t=>{this.player.destroyed||(this.retry>0?(setTimeout(()=>{this.retry--,this.load(e)},500),this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR)):(this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYER_ERROR),this.user(document.createElement("div"),e)))}})}reload(e){this.userStatus={login:!0},this.retry=3,this.initialized=!1,this.load(e)}addCallback(e){"function"==typeof e&&(this.player.userLoadedCallbacks.push(e),this.initialized&&e(this.userStatus))}update_number(e){this.playerNumber.danmaku=String(e)}user(e,t){let i={},n={vipType:0,vipStatus:0};const r=this._value(e,"dm_host");if(this.userStatus={name:this._value(e,"name"),uid:this._value(e,"user"),coin:this._value(e,"money"),login:"false"!==this._value(e,"login"),allow_bp:"true"===this._value(e,"allow_bp"),isadmin:"true"===this._value(e,"isadmin"),permission:this._value(e,"permission"),arctype:this._value(e,"arctype"),realtime_dm:this._value(e,"realtime_dm"),new_broadcast:this._value(e,"new_broadcast"),ws:this._value(e,"broadcast_ws"),wss:this._value(e,"broadcast_wss"),default_dm:this._value(e,"default_dm"),chat_id:this._value(e,"chatid"),hash_id:this._value(e,"user_hash"),bottom:this._value(e,"bottom"),p_role:+this._value(e,"role"),typeid:+this._value(e,"typeid"),lastplaytime:+this._value(e,"lastplaytime"),has_next:+this._value(e,"has_next"),lastcid:+this._value(e,"lastcid"),block_time:+this._value(e,"block_time"),subtitle:this._value(e,"subtitle")?JSON.parse(this._value(e,"subtitle")):null,online_count:+this._value(e,"online_count"),pid:+this._value(e,"pid"),mask_new:this._value(e,"mask_new"),player_icon:this._value(e,"player_icon")?JSON.parse(this._value(e,"player_icon")):null,view_points:null,answer_status:+this._value(e,"answer_status")||0,is_pay_preview:"true"===this._value(e,"is_pay_preview"),preview_toast:this._value(e,"preview_toast"),pugv_watch_status:+this._value(e,"pugv_watch_status"),pugv_pay_status:+this._value(e,"pugv_pay_status"),pugv_season_status:+this._value(e,"pugv_season_status"),interaction:this._value(e,"interaction")?JSON.parse(this._value(e,"interaction")):null,pcdn:this._value(e,"pcdn")?JSON.parse(this._value(e,"pcdn")):null,subtitle_submit_switch:this._value(e,"subtitle_submit_switch")?+this._value(e,"subtitle_submit_switch"):1},this._value(e,"level_info")&&(i=JSON.parse(this._value(e,"level_info"))),this._value(e,"vip")&&(n=JSON.parse(this._value(e,"vip"))),this._value(e,"view_points"))try{const t=JSON.parse(this._value(e,"view_points"));this.userStatus.view_points=t.map(e=>({type:e.type,from:e.from,to:e.to,content:e.content}))}catch(e){}if(this._value(e,"options")&&(this.userStatus.is_360=JSON.parse(this._value(e,"options")).is_360),!this.userStatus.view_points&&this.player.config.lightWeight&&(this.userStatus.view_points=[]),void 0===i.current_level&&this.userStatus.login?(this.userStatus.level=3,this.userStatus.error=!0):this.userStatus.level=i.current_level,this.player.config.inner?(this.userStatus.vip_type=2,this.userStatus.vip_status=1,this.userStatus.login=!0):(this.userStatus.vip_type=n.vipType,this.userStatus.vip_status=n.vipStatus),this.userStatus.is_system_admin=!1,this.userStatus.role=this.userStatus.login?this._role(e.getElementsByTagName("permission")[0]):Ee.USER_UNLOGIN,this.userStatus.moral=this._getMoral(),this.playerNumber.inner=String(Math.abs(Number(this._value(e,"click"))-Number(this._value(e,"fw_click"))))||"--",this.playerNumber.out=this._value(e,"fw_click")||"--",this.playerNumber.limit=this._value(e,"maxlimit")||"--",r)try{this.userStatus.dm_host=r.split(",");for(let e=0;e<this.userStatus.dm_host.length;e++)this.userStatus.dm_host[e]=this.userStatus.dm_host[e].substr(2).replace("http:","")}catch(e){this.userStatus.dm_host=[]}0===this.player.config.playerType&&(this.player.config.hasNext=this.player.config.listLoop||!!this.userStatus.has_next),this.player.trigger(Ee.EVENT.VIDEO_PLAYER_LOADED),this.finish(t)}_value(e,t){return e&&e.getElementsByTagName&&e.getElementsByTagName(t)[0]?e.getElementsByTagName(t)[0].innerHTML||e.getElementsByTagName(t)[0].textContent:""}_role(e){if(e&&(e.innerHTML||e.textContent)){const t=(e.innerHTML||e.textContent).split(",");return 0===t.length||-1!==t.indexOf("9999")?Ee.USER_LIMITED:-1!==t.indexOf("5000")?Ee.USER_REGISTERED:-1!==t.indexOf("20000")||-1!==t.indexOf("32000")||-1!==t.indexOf("31300")?(this.userStatus.is_system_admin=-1!==t.indexOf("32000")||-1!==t.indexOf("31300"),Ee.USER_ADVANCED):-1!==t.indexOf("30000")||-1!==t.indexOf("25000")?Ee.USER_VIP:Ee.USER_NORMAL}return Ee.USER_NORMAL}_getMoral(){return window.userStatus&&"function"==typeof window.userStatus.status&&window.userStatus.status()?window.userStatus.status().moral:70}finish(e){if(this.initialized=!0,this.loadCallback(),"function"==typeof e&&e(this.status),window.BILIMessage){const e={type:"login",value:this.userStatus.login};window.BILIMessage(JSON.stringify(e))}}loadCallback(){this._initStatusDanmaku();for(let e=0;e<this.player.userLoadedCallbacks.length;e++)this.player.userLoadedCallbacks[e](this.userStatus)}_initStatusDanmaku(){const e=this.userStatus,t=e.level,i={pool:Ee.SEND_POOL_NORMAL,mode:Ee.SEND_MODE_UNLOGIN,fontsize:Ee.SEND_FONT_SIZE_UNLOGIN,color:Ee.SEND_COLOR_UNLOGIN,initStatus:Ee.SEND_STATUS_NORMAL,input:Ee.SEND_INPUT_UNLOGIN};let n,r;switch((e.isadmin||e.is_system_admin)&&(i.pool=Ee.SEND_POOL_ADMIN,n=Ee.SEND_FONT_SIZE_ADMIN),e.role){case Ee.USER_UNLOGIN:break;case Ee.USER_LIMITED:i.fontsize=Ee.SEND_FONT_SIZE_LIMITED,i.mode=Ee.SEND_MODE_LIMITED,i.initStatus=Ee.SEND_STATUS_LIMITED,i.input=Ee.SEND_INPUT_LIMITED;break;case Ee.USER_REGISTERED:i.fontsize=Ee.SEND_FONT_SIZE_REGISTERED,i.mode=Ee.SEND_MODE_REGISTERED,i.input=Ee.SEND_INPUT_REGISTERED;break;case Ee.USER_NORMAL:i.fontsize=Ee.SEND_FONT_SIZE_NORMAL,i.mode=Ee.SEND_MODE_NORMAL,i.input=Ee.SEND_INPUT_NORMAL;break;case Ee.USER_VIP:i.pool=Ee.SEND_POOL_ADMIN,i.fontsize=Ee.SEND_FONT_SIZE_VIP,i.mode=Ee.SEND_MODE_VIP,i.input=Ee.SEND_INPUT_VIP;break;case Ee.USER_ADVANCED:i.pool=Ee.SEND_POOL_ADMIN,i.fontsize=Ee.SEND_FONT_SIZE_ADVANCED,i.mode=Ee.SEND_MODE_ADVANCED,i.input=Ee.SEND_INPUT_ADVANCED}switch(!0){case 0===t:r=Ee.SEND_MODE_LEVEL_LOW,i.color=Ee.SEND_COLOR_LEVEL_LOW,i.initStatus=Ee.SEND_STATUS_LEVEL_LOW;break;case 1===t:r=Ee.SEND_MODE_LEVEL_LOW,i.color=Ee.SEND_COLOR_LEVEL_LOW;break;case 2===t:r=Ee.SEND_MODE_LEVEL_TWO,i.color=Ee.SEND_COLOR_NORMAL;break;case t>=3:r=Ee.SEND_MODE_LEVEL_NORMAL,i.color=Ee.SEND_COLOR_NORMAL}e.block_time>0&&(i.initStatus=Ee.SEND_STATUS_BLOCKING),e.block_time<0&&(i.initStatus=Ee.SEND_STATUS_BLOCKED),2===e.pugv_season_status&&1===e.pugv_pay_status&&(i.initStatus=Ee.SEND_STATUS_CANNOT_BUY),e.moral<60&&(i.initStatus=Ee.SEND_STATUS_MORAL_LOW),2===e.answer_status&&!t&&(i.initStatus=Ee.SEND_ANSWER_STATUS_IN),e.login||(i.color=Ee.SEND_COLOR_UNLOGIN,i.initStatus=Ee.SEND_STATUS_UNLOGIN),n&&i.fontsize.forEach((e,t,i)=>{i[t]=i[t]||n[t]}),r&&i.mode.forEach((e,t,i)=>{i[t]=1===r[t]||1===i[t]?1:i[t]}),this.userStatus.danmaku=i}}class be{constructor(e){this.events={}}on(e,t){"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}off(e,t){if("function"==typeof t&&this.events[e])if(t){const i=this.events[e].indexOf(t);i>-1&&this.events[e].splice(i,1)}else this.events[e]=[]}one(e,t){if("function"==typeof t){this.events[e]||(this.events[e]=[]);const i=n=>{t(n),this.off(e,i)};this.on(e,i)}}trigger(e,t){this.events[e]&&this.events[e].length&&[...this.events[e]].forEach(e=>{e(t)})}destroy(){this.events={}}}class Re extends Ne{constructor(e){super(e)}getData(e){const t=this.convertUpload(this.data);r()({url:e.url||Me.PLAYURL,method:"get",params:t,withCredentials:!0}).then(t=>{t&&t.data&&"function"==typeof e.success&&e.success(this.convertResult(t.data,e.url),e.url||Me.PLAYURL)}).catch(t=>{"function"==typeof e.error&&e.error(t,e.url||Me.PLAYURL)})}convertUpload(e){const t={avid:e.avid,cid:e.cid,bvid:e.bvid,qn:e.qn,type:e.type,otype:"json",platform:e.platform};return e.highQuality&&(t.high_quality=1),e.episodeId&&(t.ep_id=e.episodeId),e.fourk&&(t.fourk=e.fourk),"number"==typeof e.fnver&&(t.fnver=e.fnver,t.fnval=e.fnval,t.session=e.session),t}convertResult(e,t){if(t===Me.PLAYURL_INNER){const t={code:-1,ttl:0,message:"Unknow error"};return e&&(t.code=0,t.message="",t.data=e),t}const i=t===Me.PLAYURL_PGC_M?"result":"data";return e?e[i]?{code:e.code,message:e.message,ttl:e.ttl,data:e[i]}:{code:e.code,message:e.message}:null}}const xe={network:0,resolve:1};let Pe;function je(e,t){t(e)}function ze(e,t,i,n){let r=null,a=null,o=null,s=null;const l={},u=e.data?e.data:function(e){return!("object"!=typeof e||e.nodeType||null!=e&&e===e.window||e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}(e.result)?e.result:e;if(e.data&&0!==e.code){const t=e.code+": "+e.message;return void(i&&i(xe.resolve,t,n))}if(!u.result){if(void 0===u.durl&&void 0===u.dash_mpd&&void 0===u.dash){let e="Error";return u.error_text&&(e=u.error_code+": "+u.error_text),void(i&&i(xe.resolve,e,n))}u.result="suee"}if("suee"!==u.result)return void("error"===u.result?i&&i(xe.resolve,"Resolve Error: "+u.message,n):i&&i(xe.resolve,"Resolve Error: result is "+u.result,n));if("local"!==u.from||"suee"!==u.result)return void(i&&i(xe.resolve,"Unsupported video source: "+u.from,n));if(!(void 0===u.durl||u.durl&&0!==u.durl.length&&Array.isArray(u.durl)))return void(i&&i(xe.resolve,"Invalid durl",n));r=u.accept_format,a=u.accept_quality,o=u.accept_description,s=u.format,(!r||0===r.length)&&(r=[u.format]),(!a||0===a.length)&&(a=[2]);let c="flv";u.format&&u.format.indexOf("mp4")>-1&&(c="mp4"),(u.dash_mpd||u.dash)&&(c="dash");const d=u.timelength,h=u.quality;l.type=c,l.duration=0;let f="http";if("dash"===c){if(l.url=u.dash_mpd||u.dash,l.duration=u.timelength||0,l.url&&l.url.duration&&(l.url.duration=l.url.duration-1),t)if(f="https","string"==typeof l.url)l.url=l.url.replace(/http:\/\//g,"https://");else if("object"==typeof l.url){l.duration=l.url&&l.url.duration>0?1e3*l.url.duration:u.timelength||0;const e=e=>e&&e.map&&e.map(e=>(e.baseUrl=e.base_url&&e.base_url.replace(/http:\/\//g,"https://"),e.backupUrl=e.backup_url&&e.backup_url.map&&e.backup_url.map(e=>e.replace(/http:\/\//g,"https://")),e));l.url.video=e(l.url.video),l.url.audio=e(l.url.audio)}t&&(f="https")}else if("mp4"===c){const e=u.durl[0];let i=e.url;const n=[];t&&i&&(f="https",i=i.replace("http://","https://")),e.backup_url&&e.backup_url.forEach(e=>{t&&e&&(f="https",e=e.replace("http://","https://")),n.push(e)}),l.url=i,l.backupURL=n,l.duration=e.length}else l.segments=[],l.duration=0,u.durl.forEach((function(e){let i=e.url;const n=[];t&&i&&(f="https",i=i.replace("http://","https://")),e.backup_url&&e.backup_url.forEach(e=>{t&&e&&(f="https",e=e.replace("http://","https://")),n.push(e)});const r={};r.duration=e.length,r.filesize=e.size,r.url=i,r.backupURL=n,l.segments.push(r),l.duration+=r.duration}));const p=u.status,g=u.vip_type,y=u.is_preview,m=u.vip_status,E=u.has_paid,T=u.bp,M=u.abtid;return{streamType:f,mediaDataSource:l,acceptFormat:r,acceptQuality:a,acceptDescription:o,timelength:d,quality:h,status:p,vipType:g,vipStatus:m,hasPaid:E,isPreview:y,format:s,bp:T,abtid:M}}var ke={r:function(e,t,i){const n=e,r=n.player,a={resolve:t,reject:i,enableSSLStream:n.enableSSLStream};let o,s=3;window.__playinfo__&&"object"==typeof window.__playinfo__&&(window.__playinfo__.session&&(r.session=window.__playinfo__.session),"object"==typeof window.__playinfo__.data&&0===window.__playinfo__.code&&(window.__playinfo__=window.__playinfo__.data),!r.allowFlv&&window.__playinfo__.format&&-1===window.__playinfo__.format.indexOf("mp4")||(o=ze(window.__playinfo__,a.enableSSLStream)),delete window.__playinfo__);const l=t=>{const i={avid:r.config.aid,cid:e.cid,bvid:r.config.bvid,qn:e.quality,type:e.type,fnver:e.fnver,fnval:e.fnval,session:e.session,episodeId:e.episodeId,pugv:r.config.type===fe.Pugv,platform:e.platform,highQuality:r.config.highQuality};r.config.bvid&&delete i.avid,r.config.seasonType>=1&&(i.fourk=1),new Re(i).getData({url:t,success:function(t,n){if(i.avid&&i.avid!==r.config.aid||i.bvid&&i.bvid!==r.config.bvid||i.cid!==e.cid)return;const o=ze(t,a.enableSSLStream,a.reject,n);void 0!==o&&(Pe=je(o,(function(e){a.resolve(e)})))},error:function(t,n){if(!(i.avid&&i.avid!==r.config.aid||i.bvid&&i.bvid!==r.config.bvid||i.cid!==e.cid)){if(/^https:/.test(n)||/^\/\//.test(n)&&"https:"===location.protocol){if(s)return s--,l(n);if("http:"===location.protocol){const e=/^\/\//.test(n)?"http:"+n:n.replace(/^https:/,"http:");return l(e)}}a.reject(xe.network,t,n)}}})};o?Pe=je(o,(function(e){a.resolve(e)})):r.config.type===fe.Pugv?l(Me.PLAYURL_PUGV):r.config.interactivePreview?l(Me.PLAYURL_PRE):r.config.upPreview?l(Me.PLAYURL_UP):r.config.seasonType>=1?l(Me.PLAYURL_PGC_M):1===r.config.playerType||(!0===r.config.inner?l(Me.PLAYURL_INNER):l(Me.PLAYURL))},parse:ze,destroy:function(){Pe&&Pe.abort()},domains:{interface:0,bangumi:1,bangumiS:2,dash:3},errorTypes:xe};const Ue=Symbol("solid-proxy"),Fe={equals:(e,t)=>e===t};let Be=pt;const Ye={},Qe={owned:null,cleanups:null,context:null,owner:null};var Ge=null;let Ve=null,He=null,We=null,qe=null,Ze=0;function Ke(e,t){t&&(Ge=t);const i=Ve,n=Ge,r=0===e.length?Qe:{owned:null,cleanups:null,context:null,owner:n};let a;Ge=r,Ve=null;try{ft(()=>a=e(()=>Et(r)),!0)}finally{Ve=i,Ge=n}return a}function $e(e,t){t=t?Object.assign({},Fe,t):Fe;const i={value:e,observers:null,observerSlots:null,pending:Ye,comparator:t.equals||void 0};return[lt.bind(i),e=>("function"==typeof e&&(e=e(i.pending!==Ye?i.pending:i.value)),ut(i,e))]}function Xe(e,t,i){ct(dt(e,t,!0,1))}function Je(e,t,i){ct(dt(e,t,!1,1))}function et(e,t,i){Be=gt;const n=dt(e,t,!1,1);n.user=!0,qe&&qe.push(n)}function tt(e,t,i){i=i?Object.assign({},Fe,i):Fe;const n=dt(e,t,!0,0);return n.pending=Ye,n.observers=null,n.observerSlots=null,n.comparator=i.equals||void 0,ct(n),lt.bind(n)}function it(e){if(He)return e();let t;const i=He=[];try{t=e()}finally{He=null}return ft(()=>{for(let e=0;e<i.length;e+=1){const t=i[e];if(t.pending!==Ye){const e=t.pending;t.pending=Ye,ut(t,e)}}},!1),t}function nt(e){let t,i=Ve;return Ve=null,t=e(),Ve=i,t}function rt(e,t,i){const n=Array.isArray(e);let r,a=i&&i.defer;return i=>{let o;if(n){o=[];for(let t=0;t<e.length;t++)o.push(e[t]())}else o=e();if(a)return void(a=!1);const s=nt(()=>t(o,r,i));return r=o,s}}function at(e){et(()=>nt(e))}function ot(e){return null===Ge||(null===Ge.cleanups?Ge.cleanups=[e]:Ge.cleanups.push(e)),e}function st(){return Ve}function lt(){if(this.sources&&this.state){const e=We;We=null,1===this.state?ct(this):yt(this),We=e}if(Ve){const e=this.observers?this.observers.length:0;Ve.sources?(Ve.sources.push(this),Ve.sourceSlots.push(e)):(Ve.sources=[this],Ve.sourceSlots=[e]),this.observers?(this.observers.push(Ve),this.observerSlots.push(Ve.sources.length-1)):(this.observers=[Ve],this.observerSlots=[Ve.sources.length-1])}return this.value}function ut(e,t,i){if(e.comparator&&e.comparator(e.value,t))return t;if(He)return e.pending===Ye&&He.push(e),e.pending=t,t;return e.value=t,e.observers&&e.observers.length&&ft(()=>{for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];i.pure?We.push(i):qe.push(i),i.observers&&!i.state&&mt(i),i.state=1}if(We.length>1e6)throw We=[],new Error},!1),t}function ct(e){if(!e.fn)return;Et(e);const t=Ge,i=Ve,n=Ze;Ve=Ge=e,function(e,t,i){let n;try{n=e.fn(t)}catch(e){Tt(e)}(!e.updatedAt||e.updatedAt<=i)&&(e.observers&&e.observers.length?ut(e,n):e.value=n,e.updatedAt=i)}(e,e.value,n),Ve=i,Ge=t}function dt(e,t,i,n=1,r){const a={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Ge,context:null,pure:i};return null===Ge||Ge!==Qe&&(Ge.owned?Ge.owned.push(a):Ge.owned=[a]),a}function ht(e){if(1!==e.state)return e.state=0;if(e.suspense&&nt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ze);)e.state&&t.push(e);for(let i=t.length-1;i>=0;i--)if(1===(e=t[i]).state)ct(e);else if(2===e.state){const t=We;We=null,yt(e),We=t}}function ft(e,t){if(We)return e();let i=!1;t||(We=[]),qe?i=!0:qe=[],Ze++;try{e()}catch(e){Tt(e)}finally{!function(e){We&&(pt(We),We=null),!e&&(qe.length?it(()=>{Be(qe),qe=null}):qe=null)}(i)}}function pt(e){for(let t=0;t<e.length;t++)ht(e[t])}function gt(e){let t,i=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[i++]=n:ht(n)}const n=e.length;for(t=0;t<i;t++)ht(e[t]);for(t=n;t<e.length;t++)ht(e[t])}function yt(e){e.state=0;for(let t=0;t<e.sources.length;t+=1){const i=e.sources[t];i.sources&&(1===i.state?ht(i):2===i.state&&yt(i))}}function mt(e){for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];!i.state&&(i.state=2,i.pure?We.push(i):qe.push(i),i.observers&&mt(i))}}function Et(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),n=t.observers;if(n&&n.length){const e=n.pop(),r=t.observerSlots.pop();i<n.length&&(e.sourceSlots[r]=i,n[i]=e,t.observerSlots[i]=r)}}if(e.owned){for(t=0;t<e.owned.length;t++)Et(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Tt(e){throw e}const Mt=Symbol("fallback");function Nt(e){for(let t=0;t<e.length;t++)e[t]()}function It(e,t){return nt(()=>e(t))}function vt(){return!0}const Dt={get:(e,t,i)=>t===Ue?i:e.get(t),has:(e,t)=>e.has(t),set:vt,deleteProperty:vt,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:vt,deleteProperty:vt}),ownKeys:e=>e.keys()};function _t(e){return"function"==typeof e?e():e}function At(...e){return new Proxy({get(t){for(let i=e.length-1;i>=0;i--){const n=_t(e[i])[t];if(void 0!==n)return n}},has(t){for(let i=e.length-1;i>=0;i--)if(t in _t(e[i]))return!0;return!1},keys(){const t=[];for(let i=0;i<e.length;i++)t.push(...Object.keys(_t(e[i])));return[...new Set(t)]}},Dt)}function St(e){const t="fallback"in e&&{fallback:()=>e.fallback};return tt(function(e,t,i={}){let n=[],r=[],a=[],o=0,s=t.length>1?[]:null;return ot(()=>Nt(a)),()=>{let l,u,c=e()||[];return nt(()=>{let e,t,h,f,p,g,y,m,E,T=c.length;if(0===T)0!==o&&(Nt(a),a=[],n=[],r=[],o=0,s&&(s=[])),i.fallback&&(n=[Mt],r[0]=Ke(e=>(a[0]=e,i.fallback())),o=1);else if(0===o){for(r=new Array(T),u=0;u<T;u++)n[u]=c[u],r[u]=Ke(d);o=T}else{for(h=new Array(T),f=new Array(T),s&&(p=new Array(T)),g=0,y=Math.min(o,T);g<y&&n[g]===c[g];g++);for(y=o-1,m=T-1;y>=g&&m>=g&&n[y]===c[m];y--,m--)h[m]=r[y],f[m]=a[y],s&&(p[m]=s[y]);for(e=new Map,t=new Array(m+1),u=m;u>=g;u--)E=c[u],l=e.get(E),t[u]=void 0===l?-1:l,e.set(E,u);for(l=g;l<=y;l++)E=n[l],u=e.get(E),void 0!==u&&-1!==u?(h[u]=r[l],f[u]=a[l],s&&(p[u]=s[l]),u=t[u],e.set(E,u)):a[l]();for(u=g;u<T;u++)u in h?(r[u]=h[u],a[u]=f[u],s&&(s[u]=p[u],s[u](u))):r[u]=Ke(d);r=r.slice(0,o=T),n=c.slice(0)}return r});function d(e){if(a[u]=e,s){const[e,i]=$e(u);return s[u]=i,t(c[u],e)}return t(c[u])}}}(()=>e.each,e.children,t||void 0))}function wt(e,t){return tt(e,void 0,t?void 0:{equals:t})}function Ot(e,t,i){let n=i.length,r=t.length,a=n,o=0,s=0,l=t[r-1].nextSibling,u=null;for(;o<r||s<a;)if(t[o]!==i[s]){for(;t[r-1]===i[a-1];)r--,a--;if(r===o){const t=a<n?s?i[s-1].nextSibling:i[a-s]:l;for(;s<a;)e.insertBefore(i[s++],t)}else if(a===s)for(;o<r;)(!u||!u.has(t[o]))&&e.removeChild(t[o]),o++;else if(t[o]===i[a-1]&&i[s]===t[r-1]){const n=t[--r].nextSibling;e.insertBefore(i[s++],t[o++].nextSibling),e.insertBefore(i[--a],n),t[r]=i[a]}else{if(!u){u=new Map;let e=s;for(;e<a;)u.set(i[e],e++)}const n=u.get(t[o]);if(null!=n)if(s<n&&n<a){let l,c=o,d=1;for(;++c<r&&c<a&&null!=(l=u.get(t[c]))&&l===n+d;)d++;if(d>n-s){const r=t[o];for(;s<n;)e.insertBefore(i[s++],r)}else e.replaceChild(i[s++],t[o++])}else o++;else e.removeChild(t[o++])}}else o++,s++}const Lt="_$DX_DELEGATE";function Ct(e,t,i){const n=document.createElement("template");n.innerHTML=e;let r=n.content.firstChild;return i&&(r=r.firstChild),r}function bt(e,t=window.document){const i=t[Lt]||(t[Lt]=new Set);for(let n=0,r=e.length;n<r;n++){const r=e[n];i.has(r)||(i.add(r),t.addEventListener(r,kt))}}function Rt(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function xt(e,t,i,n){n?Array.isArray(i)?(e["$$"+t]=i[0],e[`$$${t}Data`]=i[1]):e["$$"+t]=i:Array.isArray(i)?e.addEventListener(t,e=>i[0](i[1],e)):e.addEventListener(t,i)}function Pt(e,t,i={}){const n=Object.keys(t||{}),r=Object.keys(i);let a,o;for(a=0,o=r.length;a<o;a++){const n=r[a];!n||"undefined"===n||t[n]||(zt(e,n,!1),delete i[n])}for(a=0,o=n.length;a<o;a++){const r=n[a],o=!!t[r];!r||"undefined"===r||i[r]===o||!o||(zt(e,r,!0),i[r]=o)}return i}function jt(e,t,i,n){if(void 0!==i&&!n&&(n=[]),"function"!=typeof t)return Ut(e,t,n,i);Je(n=>Ut(e,t(),n,i),n)}function zt(e,t,i){const n=t.trim().split(/\s+/);for(let t=0,r=n.length;t<r;t++)e.classList.toggle(n[t],i)}function kt(e){const t="$$"+e.type;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>i});null!==i;){const n=i[t];if(n&&!i.disabled){const r=i[t+"Data"];if(void 0!==r?n(r,e):n(e),e.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function Ut(e,t,i,n,r){for(;"function"==typeof i;)i=i();if(t===i)return i;const a=typeof t,o=void 0!==n;if(e=o&&i[0]&&i[0].parentNode||e,"string"===a||"number"===a)if("number"===a&&(t=t.toString()),o){let r=i[0];r&&3===r.nodeType?r.data=t:r=document.createTextNode(t),i=Bt(e,i,n,r)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===a)i=Bt(e,i,n);else{if("function"===a)return Je(()=>{let r=t();for(;"function"==typeof r;)r=r();i=Ut(e,r,i,n)}),()=>i;if(Array.isArray(t)){const a=[];if(function e(t,i,n){let r=!1;for(let a=0,o=i.length;a<o;a++){let o,s=i[a];if(s instanceof Node)t.push(s);else if(null!=s&&!0!==s&&!1!==s)if(Array.isArray(s))r=e(t,s)||r;else if("string"==(o=typeof s))t.push(document.createTextNode(s));else if("function"===o)if(n){for(;"function"==typeof s;)s=s();r=e(t,Array.isArray(s)?s:[s])||r}else t.push(s),r=!0;else t.push(document.createTextNode(s.toString()))}return r}(a,t,r))return Je(()=>i=Ut(e,a,i,n,!0)),()=>i;if(0===a.length){if(i=Bt(e,i,n),o)return i}else Array.isArray(i)?0===i.length?Ft(e,a,n):Ot(e,i,a):null==i||""===i?Ft(e,a):Ot(e,o&&i||[e.firstChild],a);i=a}else if(t instanceof Node){if(Array.isArray(i)){if(o)return i=Bt(e,i,n,t);Bt(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}}return i}function Ft(e,t,i){for(let n=0,r=t.length;n<r;n++)e.insertBefore(t[n],i)}function Bt(e,t,i,n){if(void 0===i)return e.textContent="";const r=n||document.createTextNode("");if(t.length){let n=!1;for(let a=t.length-1;a>=0;a--){const o=t[a];if(r!==o){const t=o.parentNode===e;n||a?t&&e.removeChild(o):t?e.replaceChild(r,o):e.insertBefore(r,i)}else n=!0}}else e.insertBefore(r,i);return[r]}const Yt=Symbol("store-raw"),Qt=Symbol("store-node"),Gt=Symbol("store-name");function Vt(e,t){let i=e[Ue];if(!i){Object.defineProperty(e,Ue,{value:i=new Proxy(e,Kt)});const t=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let r=0,a=t.length;r<a;r++){const a=t[r];if(n[a].get){const t=n[a].get.bind(i);Object.defineProperty(e,a,{get:t})}}}return i}function Ht(e){return null!=e&&"object"==typeof e&&(e[Ue]||!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function Wt(e,t=new Set){let i,n,r,a;if(i=null!=e&&e[Yt])return i;if(!Ht(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)r=e[i],(n=Wt(r,t))!==r&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let s=0,l=i.length;s<l;s++)a=i[s],!o[a].get&&(r=e[a],(n=Wt(r,t))!==r&&(e[a]=n))}return e}function qt(e){let t=e[Qt];return t||Object.defineProperty(e,Qt,{value:t={}}),t}function Zt(){const[e,t]=$e(void 0,{equals:!1,internal:!0});return e.$=t,e}const Kt={get(e,t,i){if(t===Yt)return e;if(t===Ue)return i;const n=e[t];if(t===Qt||"__proto__"===t)return n;const r=Ht(n);if(st()&&("function"!=typeof n||e.hasOwnProperty(t))){let i,a;r&&(i=qt(n))&&(a=i._||(i._=Zt()),a()),i=qt(e),a=i[t]||(i[t]=Zt()),a()}return r?Vt(n):n},set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){if(st()){const t=qt(e);(t._||(t._=Zt()))()}return Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const i=Reflect.getOwnPropertyDescriptor(e,t);return!i||i.get||!i.configurable||t===Ue||t===Qt||t===Gt||(delete i.value,delete i.writable,i.get=()=>e[Ue][t]),i}};function $t(e,t,i){if(e[t]===i)return;const n=Array.isArray(e),r=e.length,a=void 0===i,o=n||a===t in e;a?delete e[t]:e[t]=i;let s,l=qt(e);(s=l[t])&&s.$(),n&&e.length!==r&&(s=l.length)&&s.$(),o&&(s=l._)&&s.$()}function Xt(e,t,i=[]){let n,r=e;if(t.length>1){n=t.shift();const a=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let r=0;r<n.length;r++)Xt(e,[n[r]].concat(t),[n[r]].concat(i));return}if(o&&"function"===a){for(let r=0;r<e.length;r++)n(e[r],r)&&Xt(e,[r].concat(t),[r].concat(i));return}if(o&&"object"===a){const{from:r=0,to:a=e.length-1,by:o=1}=n;for(let n=r;n<=a;n+=o)Xt(e,[n].concat(t),[n].concat(i));return}if(t.length>1)return void Xt(e[n],t,[n].concat(i));r=e[n],i=[n].concat(i)}let a=t[0];"function"==typeof a&&(a=a(r,i),a===r)||void 0===n&&null==a||(a=Wt(a),void 0===n||Ht(r)&&Ht(a)&&!Array.isArray(a)?function(e,t){const i=Object.keys(t);for(let n=0;n<i.length;n+=1){const r=i[n];$t(e,r,t[r])}}(r,a):$t(e,n,a))}var Jt=Object.defineProperty,ei=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,ii=Object.prototype.propertyIsEnumerable,ni=(e,t,i)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ri=(e,t)=>{for(var i in t||(t={}))ti.call(t,i)&&ni(e,i,t[i]);if(ei)for(var i of ei(t))ii.call(t,i)&&ni(e,i,t[i]);return e},ai=(e,t,i)=>(ni(e,"symbol"!=typeof t?t+"":t,i),i);var oi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjIuMC4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iJiN4NTZGRTsmI3g1QzQyO18xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIyIDIyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjx0aXRsZT5Lbm9iTWluaVRWPC90aXRsZT4KPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CjxwYXRoIGlkPSJDb21iaW5lZC1TaGFwZSIgc3R5bGU9ImZpbGw6IzMzMzMzMzsiIGQ9Ik0xNi4xMTgsMy42NjdIMTYuNWMyLjAyNSwwLDMuNjY3LDEuNjQyLDMuNjY3LDMuNjY3djcuMzMzCgljMCwyLjAyNS0xLjY0MiwzLjY2Ny0zLjY2NywzLjY2N2gtMTFjLTIuMDI1LDAtMy42NjctMS42NDItMy42NjctMy42NjdWNy4zMzNjMC0yLjAyNSwxLjY0Mi0zLjY2NywzLjY2Ny0zLjY2N2gwLjM4Mkw0Ljk1LDIuMDUzCglDNC42NDYsMS41MjcsNC44MjcsMC44NTQsNS4zNTMsMC41NXMxLjE5OS0wLjEyMywxLjUwMywwLjQwM2wxLjU2NywyLjcxNGg1LjE1NmwxLjU2Ny0yLjcxNGMwLjMwNC0wLjUyNiwwLjk3Ny0wLjcwNiwxLjUwMy0wLjQwMwoJYzAuNTI2LDAuMzA0LDAuNzA2LDAuOTc3LDAuNDAzLDEuNTAzTDE2LjExOCwzLjY2N3oiLz4KPHBhdGggaWQ9IlJlY3RhbmdsZSIgc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIGQ9Ik01LjU2MSw1LjE5NGgxMC44NzhjMS4yMTUsMCwyLjIsMC45ODUsMi4yLDIuMnY3LjIxMWMwLDEuMjE1LTAuOTg1LDIuMi0yLjIsMi4yCglINS41NjFjLTEuMjE1LDAtMi4yLTAuOTg1LTIuMi0yLjJWNy4zOTRDMy4zNjEsNi4xNzksNC4zNDYsNS4xOTQsNS41NjEsNS4xOTR6Ii8+CjxwYXRoIGlkPSJFeWUiIHN0eWxlPSJmaWxsOiMzMzMzMzM7IiBkPSJNNi45NjcsOC41NTZMNi45NjcsOC41NTZjMC42MDgsMCwxLjEsMC40OTIsMS4xLDEuMXYyLjY4OWMwLDAuNjA4LTAuNDkyLDEuMS0xLjEsMS4xbDAsMAoJYy0wLjYwOCwwLTEuMS0wLjQ5Mi0xLjEtMS4xVjkuNjU2QzUuODY3LDkuMDQ4LDYuMzU5LDguNTU2LDYuOTY3LDguNTU2eiIvPgo8cGF0aCBpZD0iRXllXzFfIiBzdHlsZT0iZmlsbDojMzMzMzMzOyIgZD0iTTE1LjAzMyw4LjU1NkwxNS4wMzMsOC41NTZjMC42MDgsMCwxLjEsMC40OTIsMS4xLDEuMXYyLjY4OWMwLDAuNjA4LTAuNDkyLDEuMS0xLjEsMS4xCgloMGMtMC42MDgsMC0xLjEtMC40OTItMS4xLTEuMVY5LjY1NkMxMy45MzMsOS4wNDgsMTQuNDI2LDguNTU2LDE1LjAzMyw4LjU1NnoiLz4KPC9zdmc+Cg==";var si={v:"4.10.2",fr:29.9700012207031,ip:0,op:25.0000010182709,w:18,h:18,nm:"tv_combine 1018",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Eye Right",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:0,s:[9.938,9.469,0],e:[13.094,9.469,0],to:[.52604168653488,0,0],ti:[-.52604168653488,0,0]},{t:24.00000097754}],ix:2},a:{a:0,k:[-2.493,1.385,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[1.8,4],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:20,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-2.524,1.385],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Eye Left",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:0,s:[4.906,9.469,0],e:[7.906,9.469,0],to:[.5,0,0],ti:[-.5,0,0]},{t:24.00000097754}],ix:2},a:{a:0,k:[-2.493,1.385,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[1.75,4],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:20,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-2.524,1.385],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Tv",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[8.903,9.401,0],ix:2},a:{a:0,k:[.012,.995,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[14,11],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:2.5,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1.5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[.091,1.101],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Tianxian Right",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:33.382,ix:10},p:{a:0,k:[12.281,2.352,0],ix:2},a:{a:0,k:[-2.493,1.385,0],ix:1},s:{a:0,k:[136.962,114.812,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[1.5,4],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:20,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-2.524,1.385],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:6.85,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Tianxian Left",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-36.359,ix:10},p:{a:0,k:[5.797,2.328,0],ix:2},a:{a:0,k:[-2.493,1.385,0],ix:1},s:{a:0,k:[122.727,114.296,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[1.5,4],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:20,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-2.524,1.385],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-6.395,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Pink 02",sr:1,ks:{o:{a:0,k:28,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[8.99,9.471,0],ix:2},a:{a:0,k:[-.151,.799,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,13],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:3.5,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.98431372549,.447058823529,.6,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-.151,.799],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Pink 01",sr:1,ks:{o:{a:0,k:14,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[9.012,9.463,0],ix:2},a:{a:0,k:[.075,1.213,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[18,15],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:4,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.98431372549,.447058823529,.6,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[.075,1.213],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:27.0000010997325,st:0,bm:0}]};const li={equals:(e,t)=>e===t};let ui=Ai;const ci={},di={owned:null,cleanups:null,context:null,owner:null};var hi=null;let fi=null,pi=null,gi=null,yi=null,mi=0;function Ei(e,t,i){Ii(vi(e,t,!1,1))}function Ti(e){let t,i=fi;return fi=null,t=e(),fi=i,t}function Mi(){if(this.sources&&this.state){const e=gi;gi=null,1===this.state?Ii(this):Si(this),gi=e}if(fi){const e=this.observers?this.observers.length:0;fi.sources?(fi.sources.push(this),fi.sourceSlots.push(e)):(fi.sources=[this],fi.sourceSlots=[e]),this.observers?(this.observers.push(fi),this.observerSlots.push(fi.sources.length-1)):(this.observers=[fi],this.observerSlots=[fi.sources.length-1])}return this.value}function Ni(e,t,i){if(e.comparator&&e.comparator(e.value,t))return t;if(pi)return e.pending===ci&&pi.push(e),e.pending=t,t;return e.value=t,e.observers&&e.observers.length&&_i(()=>{for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];i.pure?gi.push(i):yi.push(i),i.observers&&!i.state&&wi(i),i.state=1}if(gi.length>1e6)throw gi=[],new Error},!1),t}function Ii(e){if(!e.fn)return;Oi(e);const t=hi,i=fi,n=mi;fi=hi=e,function(e,t,i){let n;try{n=e.fn(t)}catch(e){Li(e)}(!e.updatedAt||e.updatedAt<=i)&&(e.observers&&e.observers.length?Ni(e,n):e.value=n,e.updatedAt=i)}(e,e.value,n),fi=i,hi=t}function vi(e,t,i,n=1,r){const a={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:hi,context:null,pure:i};return null===hi||hi!==di&&(hi.owned?hi.owned.push(a):hi.owned=[a]),a}function Di(e){if(1!==e.state)return e.state=0;if(e.suspense&&Ti(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<mi);)e.state&&t.push(e);for(let i=t.length-1;i>=0;i--)if(1===(e=t[i]).state)Ii(e);else if(2===e.state){const t=gi;gi=null,Si(e),gi=t}}function _i(e,t){if(gi)return e();let i=!1;t||(gi=[]),yi?i=!0:yi=[],mi++;try{e()}catch(e){Li(e)}finally{!function(e){gi&&(Ai(gi),gi=null),!e&&(yi.length?function(e){if(pi)return e();let t;const i=pi=[];try{t=e()}finally{pi=null}_i(()=>{for(let e=0;e<i.length;e+=1){const t=i[e];if(t.pending!==ci){const e=t.pending;t.pending=ci,Ni(t,e)}}},!1)}(()=>{ui(yi),yi=null}):yi=null)}(i)}}function Ai(e){for(let t=0;t<e.length;t++)Di(e[t])}function Si(e){e.state=0;for(let t=0;t<e.sources.length;t+=1){const i=e.sources[t];i.sources&&(1===i.state?Di(i):2===i.state&&Si(i))}}function wi(e){for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];!i.state&&(i.state=2,i.pure?gi.push(i):yi.push(i),i.observers&&wi(i))}}function Oi(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),n=t.observers;if(n&&n.length){const e=n.pop(),r=t.observerSlots.pop();i<n.length&&(e.sourceSlots[r]=i,n[i]=e,t.observerSlots[i]=r)}}if(e.owned){for(t=0;t<e.owned.length;t++)Oi(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Li(e){throw e}function Ci(e,t){return function(e,t,i){i=i?Object.assign({},li,i):li;const n=vi(e,t,!0,0);return n.pending=ci,n.observers=null,n.observerSlots=null,n.comparator=i.equals||void 0,Ii(n),Mi.bind(n)}(e,void 0,t?void 0:{equals:t})}function bi(e,t,i){let n=i.length,r=t.length,a=n,o=0,s=0,l=t[r-1].nextSibling,u=null;for(;o<r||s<a;)if(t[o]!==i[s]){for(;t[r-1]===i[a-1];)r--,a--;if(r===o){const t=a<n?s?i[s-1].nextSibling:i[a-s]:l;for(;s<a;)e.insertBefore(i[s++],t)}else if(a===s)for(;o<r;)(!u||!u.has(t[o]))&&e.removeChild(t[o]),o++;else if(t[o]===i[a-1]&&i[s]===t[r-1]){const n=t[--r].nextSibling;e.insertBefore(i[s++],t[o++].nextSibling),e.insertBefore(i[--a],n),t[r]=i[a]}else{if(!u){u=new Map;let e=s;for(;e<a;)u.set(i[e],e++)}const n=u.get(t[o]);if(null!=n)if(s<n&&n<a){let l,c=o,d=1;for(;++c<r&&c<a&&null!=(l=u.get(t[c]))&&l===n+d;)d++;if(d>n-s){const r=t[o];for(;s<n;)e.insertBefore(i[s++],r)}else e.replaceChild(i[s++],t[o++])}else o++;else e.removeChild(t[o++])}}else o++,s++}function Ri(e,t,i){let n;return function(e,t){t&&(hi=t);const i=fi,n=hi,r=0===e.length?di:{owned:null,cleanups:null,context:null,owner:n};let a;hi=r,fi=null;try{_i(()=>a=e(()=>Oi(r)),!0)}finally{fi=i,hi=n}}(r=>{n=r,ki(t,e(),t.firstChild?null:void 0,i)}),()=>{n(),t.textContent=""}}function xi(e,t,i){const n=document.createElement("template");n.innerHTML=e;let r=n.content.firstChild;return i&&(r=r.firstChild),r}function Pi(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function ji(e,t,i={}){const n=Object.keys(t||{}),r=Object.keys(i);let a,o;for(a=0,o=r.length;a<o;a++){const n=r[a];!n||"undefined"===n||t[n]||(Ui(e,n,!1),delete i[n])}for(a=0,o=n.length;a<o;a++){const r=n[a],o=!!t[r];!r||"undefined"===r||i[r]===o||!o||(Ui(e,r,!0),i[r]=o)}return i}function zi(e,t,i={}){const n=e.style;if(null==t||"string"==typeof t)return n.cssText=t;let r,a;for(a in"string"==typeof i&&(i={}),i)null==t[a]&&n.removeProperty(a),delete i[a];for(a in t)r=t[a],r!==i[a]&&(n.setProperty(a,r),i[a]=r);return i}function ki(e,t,i,n){if(void 0!==i&&!n&&(n=[]),"function"!=typeof t)return Fi(e,t,n,i);Ei(n=>Fi(e,t(),n,i),n)}function Ui(e,t,i){const n=t.trim().split(/\s+/);for(let t=0,r=n.length;t<r;t++)e.classList.toggle(n[t],i)}function Fi(e,t,i,n,r){for(;"function"==typeof i;)i=i();if(t===i)return i;const a=typeof t,o=void 0!==n;if(e=o&&i[0]&&i[0].parentNode||e,"string"===a||"number"===a)if("number"===a&&(t=t.toString()),o){let r=i[0];r&&3===r.nodeType?r.data=t:r=document.createTextNode(t),i=Yi(e,i,n,r)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===a)i=Yi(e,i,n);else{if("function"===a)return Ei(()=>{let r=t();for(;"function"==typeof r;)r=r();i=Fi(e,r,i,n)}),()=>i;if(Array.isArray(t)){const a=[];if(function e(t,i,n){let r=!1;for(let a=0,o=i.length;a<o;a++){let o,s=i[a];if(s instanceof Node)t.push(s);else if(null!=s&&!0!==s&&!1!==s)if(Array.isArray(s))r=e(t,s)||r;else if("string"==(o=typeof s))t.push(document.createTextNode(s));else if("function"===o)if(n){for(;"function"==typeof s;)s=s();r=e(t,Array.isArray(s)?s:[s])||r}else t.push(s),r=!0;else t.push(document.createTextNode(s.toString()))}return r}(a,t,r))return Ei(()=>i=Fi(e,a,i,n,!0)),()=>i;if(0===a.length){if(i=Yi(e,i,n),o)return i}else Array.isArray(i)?0===i.length?Bi(e,a,n):bi(e,i,a):null==i||""===i?Bi(e,a):bi(e,o&&i||[e.firstChild],a);i=a}else if(t instanceof Node){if(Array.isArray(i)){if(o)return i=Yi(e,i,n,t);Yi(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}}return i}function Bi(e,t,i){for(let n=0,r=t.length;n<r;n++)e.insertBefore(t[n],i)}function Yi(e,t,i,n){if(void 0===i)return e.textContent="";const r=n||document.createTextNode("");if(t.length){let n=!1;for(let a=t.length-1;a>=0;a--){const o=t[a];if(r!==o){const t=o.parentNode===e;n||a?t&&e.removeChild(o):t?e.replaceChild(r,o):e.insertBefore(r,i)}else n=!0}}else e.insertBefore(r,i);return[r]}const Qi=xi('<div><div><div role="progressbar" style="transform: scaleX(0.001);"></div></div><div></div></div>'),Gi=xi('<div style="transform: scaleX(0.001);"></div>'),Vi=xi("<div></div>"),Hi=xi('<div><img src="" alt=""></div>'),Wi=xi("<div>0</div>"),qi=xi("<img>"),Zi=e=>{const t=e.prefix;return(()=>{const i=Qi.cloneNode(!0),n=i.firstChild,r=n.firstChild,a=n.nextSibling;return n.className=t+"bar-wrap",ki(n,(()=>{const i=Ci(()=>!!e.videoProgress,!0);return()=>i()&&(()=>{const e=Gi.cloneNode(!0);return e.className=`${t}bar ${t}bar-buffer`,e})()})(),r),r.className=`${t}bar ${t}bar-normal`,ki(i,(()=>{const i=Ci(()=>!!e.previewFrame,!0);return()=>i()&&(()=>{const e=Vi.cloneNode(!0);return e.className=t+"preview-indicator",e})()})(),a),ki(i,(()=>{const i=Ci(()=>!!e.previewFrame,!0);return()=>i()&&(()=>{const e=Hi.cloneNode(!0),i=e.firstChild;return e.className=t+"popover",Pi(i,"id",t+"preview-img"),e})()})(),a),ki(i,(()=>{const i=Ci(()=>!!e.showTooltip,!0);return()=>i()&&(()=>{const e=Wi.cloneNode(!0);return e.className=t+"timestamp-tooltip",e})()})(),a),a.className=t+"thumb",ki(a,(()=>{const i=Ci(()=>!!e.thumbSpecial,!0);return()=>i()?(()=>{const i=Vi.cloneNode(!0);return i.className=t+"thumb-dot-special",Ei(t=>{const n=e.thumbWidth?e.thumbWidth+"px":"12px",r=e.thumbHeight?e.thumbHeight+"px":"12px";return n!==t._v$4&&i.style.setProperty("width",t._v$4=n),r!==t._v$5&&i.style.setProperty("height",t._v$5=r),t},{_v$4:void 0,_v$5:void 0}),i})():(()=>{const i=Vi.cloneNode(!0);return i.className=t+"thumb-dot",ki(i,(()=>{const t=Ci(()=>!e.pure,!0);return()=>t()&&(()=>{const e=qi.cloneNode(!0);return Pi(e,"src",oi),e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})()})()),Ei(t=>{const n=e.thumbWidth?e.thumbWidth+"px":"12px",r=e.thumbHeight?e.thumbHeight+"px":"12px";return n!==t._v$6&&i.style.setProperty("width",t._v$6=n),r!==t._v$7&&i.style.setProperty("height",t._v$7=r),t},{_v$6:void 0,_v$7:void 0}),i})()})()),Ei(n=>{const r={[t+"track"]:!0,[t+"track-vertical"]:e.vertical,[t+"track-autohide-thumb"]:e.autohideThumb,[t+"track-video-progress"]:e.videoProgress},o=e.trackBreadth?`${e.vertical?"width":"height"}: ${e.trackBreadth}px`:null,s=e.vertical?((e.trackBreadth||2)-(e.thumbWidth||12))/2+"px":void 0;return n._v$=ji(i,r,n._v$),n._v$2=zi(i,o,n._v$2),s!==n._v$3&&a.style.setProperty("left",n._v$3=s),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i})()},Ki=(e,t)=>{Ri(()=>function(e,t){return Ti(()=>e(t))}(Zi,e),t)};class $i extends class{constructor(e,t,i,n){ai(this,"state",{}),ai(this,"container"),ai(this,"events"),ai(this,"prefix","bui-"),ai(this,"options"),ai(this,"elements"),this.container=e||document.createElement("div"),this.options=ri(ri({},n),t),this.events={},this.container.classList.add(this.prefix.slice(0,-1)),this.container.classList.add(`${this.prefix}${i}`),this.options.dark&&this.container.classList.add(this.prefix+"dark")}on(e,t){return"string"==typeof e&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t)),this}tpl(e){this.container.innerHTML=e.tpl(ri({prefix:this.prefix,getObject:e=>e},e))}off(e,t){if(t){const i=this.events[e].indexOf(t);i>-1&&this.events[e].splice(i,1)}else this.events[e]=[];return this}trigger(e,t){this.events[e]&&this.events[e].length&&this.events[e].forEach(e=>{e(t)})}destroy(){this.events={},this.container.innerHTML=""}}{constructor(e,t){super(e,t,"slider",{value:0,vertical:!1,trackLength:null,trackBreadth:null,thumbCenter:!1,thumbWidth:null,thumbHeight:null,autohideThumb:!1,videoProgress:!1,valueSetAnalyze:null,valueGetAnalyze:null,thumbSpecial:!1,showTooltip:!1,formatTooltip:e=>parseInt(100*e+"",10)+"",shadow:!1,previewFrame:!1}),ai(this,"containerLength"),ai(this,"thumbLength"),ai(this,"valueIn"),ai(this,"valueOut"),ai(this,"valueBuffer"),ai(this,"direction"),ai(this,"disabled"),ai(this,"thumbDropAnimation"),ai(this,"thumbDragAnimation"),ai(this,"thumbDragContainer"),ai(this,"thumbDropContainer"),ai(this,"hasDropData"),ai(this,"delayScaleThumb",300),ai(this,"delayScaleThumbInterval"),ai(this,"rotate"),ai(this,"moved"),ai(this,"containerX"),ai(this,"thumbDirection",0),ai(this,"oldThumbClientX"),ai(this,"previewContainerPos"),ai(this,"thumbUpBindSelf"),ai(this,"thumbMoveBindSelf"),ai(this,"onSelfContainerTouchstart"),ai(this,"onSelfContainerMousedown"),ai(this,"onSelfContainerMousemove"),ai(this,"onSelfContainerMouseenter"),ai(this,"onSelfContainerMouseleave"),ai(this,"window"),ai(this,"rect"),this.init()}init(){try{this.window=window.parent&&window.parent.document&&window.parent}catch(e){}this.valueOut=this.options.value,this.direction=this.options.vertical?"Y":"X",this.thumbUpBindSelf=this.thumbUp.bind(this),this.thumbMoveBindSelf=this.thumbMove.bind(this),this.onSelfContainerTouchstart=this.onContainerMousedown.bind(this),this.onSelfContainerMousedown=this.onContainerTouchstart.bind(this),this.onSelfContainerMousemove=this.onContainerMousemove.bind(this),this.onSelfContainerMouseenter=this.onContainerMouseenter.bind(this),this.onSelfContainerMouseleave=this.onContainerMouseleave.bind(this),this.initElements(),this.updateThumb(si),this.containerLength=this.options.trackLength||(this.options.vertical?this.container.clientHeight:this.container.clientWidth),this.thumbLength=this.elements.thumb.clientWidth||this.options.thumbWidth||12,this.containerX=this.container.getBoundingClientRect().left,this.move(this.options.value),this.container.addEventListener("mousedown",this.onSelfContainerTouchstart),this.container.addEventListener("touchstart",this.onSelfContainerMousedown),this.container.addEventListener("mousemove",this.onSelfContainerMousemove),this.container.addEventListener("mouseenter",this.onSelfContainerMouseenter),this.container.addEventListener("mouseleave",this.onSelfContainerMouseleave)}thumbUp(e){this.window&&(this.window.removeEventListener("mouseup",this.thumbUpBindSelf),this.window.removeEventListener("mousemove",this.thumbMoveBindSelf),this.window.removeEventListener("touchend",this.thumbUpBindSelf),this.window.removeEventListener("touchmove",this.thumbMoveBindSelf)),document.removeEventListener("mouseleave",this.thumbUpBindSelf),window.removeEventListener("mouseup",this.thumbUpBindSelf),window.removeEventListener("mousemove",this.thumbMoveBindSelf),window.removeEventListener("touchend",this.thumbUpBindSelf),window.removeEventListener("touchmove",this.thumbMoveBindSelf),this.onContainerMouseleave(),this.options.autohideThumb?this.options.thumbSpecial&&this.hasDropData?this.delayScaleThumbInterval=window.setTimeout(()=>{this.elements.track.classList.remove(this.prefix+"track-moving")},this.delayScaleThumb):this.elements.track.classList.remove(this.prefix+"track-moving"):this.options.showTooltip&&this.elements.track.classList.remove(this.prefix+"track-moving"),(this.valueOut!==this.valueIn||this.moved)&&(this.valueOut=this.valueIn,this.trigger("change",{value:this.getAnalyzedValue(this.options.valueGetAnalyze,this.valueIn),manual:!0})),this.thumbDropAnimation&&(this.elements.dotSpecial.innerHTML="",this.elements.dotSpecial.appendChild(this.thumbDropContainer),this.hasDropData?this.thumbDropAnimation.goToAndPlay(0,!0):this.thumbDropAnimation.goToAndStop(Math.floor(this.thumbDropAnimation.totalFrames/2),!0),this.thumbDirection=0),this.elements.preview&&(this.elements.preview.style.display="block"),this.trigger("end"),this.moved=!1}thumbMove(e){this.move(this.handleEvent(e).percentage);const t=e.clientX||e.changedTouches&&e.changedTouches[0].clientX;this.thumbDragAnimation&&0===this.thumbDirection&&(this.elements.dotSpecial.innerHTML="",this.elements.dotSpecial.appendChild(this.thumbDragContainer),this.thumbDragAnimation.goToAndStop(Math.floor(this.thumbDragAnimation.totalFrames/2),!0)),this.thumbDragAnimation&&t>this.oldThumbClientX&&this.thumbDirection<1?(this.thumbDirection=1,this.thumbDragAnimation.setDirection(this.thumbDirection),this.thumbDragAnimation.play()):this.thumbDragAnimation&&t<this.oldThumbClientX&&this.thumbDirection>-1&&(this.thumbDirection=-1,this.thumbDragAnimation.setDirection(this.thumbDirection),this.thumbDragAnimation.play()),e.x&&(this.elements.preview&&(this.elements.preview.style.display=""),this.onContainerMousemove(e)),this.oldThumbClientX=t,this.moved=!0}onContainerTouchstart(e){this.disabled||(e.cancelable&&e.preventDefault(),this.trigger("start"),this.container.addEventListener("touchmove",this.thumbMoveBindSelf),this.container.addEventListener("touchend",this.thumbUpBindSelf),this.container.addEventListener("touchcancel",this.thumbUpBindSelf),(this.options.autohideThumb||this.options.showTooltip)&&(clearTimeout(this.delayScaleThumbInterval),this.elements.track.classList.add(this.prefix+"track-moving")),this.move(this.handleEvent(e).percentage))}onContainerMousedown(e){!this.disabled&&0===e.button&&(e.preventDefault(),this.trigger("start"),window.addEventListener("mousemove",this.thumbMoveBindSelf),window.addEventListener("mouseup",this.thumbUpBindSelf),document.addEventListener("mouseleave",this.thumbUpBindSelf),this.window&&(this.window.addEventListener("mousemove",this.thumbMoveBindSelf),this.window.addEventListener("mouseup",this.thumbUpBindSelf),this.rect=window.frameElement&&window.frameElement.getBoundingClientRect()),(this.options.autohideThumb||this.options.showTooltip)&&(clearTimeout(this.delayScaleThumbInterval),this.elements.track.classList.add(this.prefix+"track-moving")),this.move(this.handleEvent(e).percentage))}onContainerMousemove(e){const t=80,i=e.x||e.clientX,n=this.containerX,r=i-n;let a=0;const o=Number((r/this.containerLength).toFixed(3)),s=o<0?0:o>1?1:o;if(this.previewContainerPos){const e=this.previewContainerPos.x,o=e+t+18-n,s=e+this.previewContainerPos.width-160-18;a=r<=o?e+18-n:i>s+t?s-n:r-t}else a=r<t?0:r>this.containerLength-t?this.containerLength-160:r-t;const l=r>this.containerLength?this.containerLength-4:r<0?0:r;this.options.showTooltip&&(this.elements.timestampTooltip.style.transform=`translateX(calc(${l}px - 50%))`,this.elements.timestampTooltip.innerHTML=this.options.formatTooltip(s),this.trigger("preview-change",{value:s,manual:!1})),this.options.previewFrame&&(this.elements.preview.style.transform=`translateX(${l}px)`,this.elements.previewPopover.style.transform=`translateX(${a}px)`)}onContainerMouseenter(){if(this.options.previewFrame){const e=this.elements.preview,t=this.elements.previewPopover;e.style.display||(e.style.display="block",t.style.display="block")}if(this.options.showTooltip){const e=this.elements.timestampTooltip;e.style.display||(e.style.display="block")}}onContainerMouseleave(){if(!this.moved){if(this.options.previewFrame){const e=this.elements.preview,t=this.elements.previewPopover;e.style.display&&(e.style.display="",t.style.display="")}if(this.options.showTooltip){const e=this.elements.timestampTooltip;e.style.display&&(e.style.display="")}}}updateThumb(e,t){!this.options.thumbSpecial||!e||(t?this.hasDropData=!0:(this.hasDropData=!1,t=e),this.thumbDragAnimation&&this.thumbDragAnimation.destroy(),this.thumbDragContainer||(this.thumbDragContainer=document.createElement("div")),this.thumbDropAnimation&&this.thumbDropAnimation.destroy(),this.thumbDropContainer||(this.thumbDropContainer=document.createElement("div")),this.thumbDragAnimation=window.lottie.loadAnimation({container:this.thumbDragContainer,renderer:"svg",loop:!1,autoplay:!1,animationData:e}),this.thumbDropAnimation=window.lottie.loadAnimation({container:this.thumbDropContainer,renderer:"svg",loop:!1,autoplay:!1,animationData:t}),this.elements.dotSpecial.innerHTML="",this.elements.dotSpecial.appendChild(this.thumbDropContainer),this.delayScaleThumb=300,this.hasDropData?(this.thumbDropAnimation.goToAndStop(0,!0),this.thumbDropAnimation.totalFrames>0&&this.thumbDropAnimation.animationData&&this.thumbDropAnimation.animationData.fr>0&&(this.delayScaleThumb=Math.floor(this.thumbDropAnimation.totalFrames/this.thumbDropAnimation.animationData.fr*1e3)+200)):this.thumbDropAnimation.goToAndStop(Math.floor(this.thumbDropAnimation.totalFrames/2),!0))}initElements(){Ki(ri({prefix:this.prefix,getObject:e=>e,thumb:this.options.videoProgress&&!this.options.thumbSpecial?oi:""},this.options),this.container),this.elements={wrap:this.container.querySelector(`.${this.prefix}bar-wrap`),bar:this.container.querySelector(`.${this.prefix}bar-normal`),thumb:this.container.querySelector(`.${this.prefix}thumb`),track:this.container.querySelector(`.${this.prefix}track`),dotSpecial:this.container.querySelector(`.${this.prefix}thumb-dot-special`),bufferBar:this.options.videoProgress?this.container.querySelector(`.${this.prefix}bar-buffer`):null,thumbTooltip:this.container.querySelector(`.${this.prefix}thumb-tooltip`),preview:this.container.querySelector(`.${this.prefix}preview-indicator`),previewPopover:this.container.querySelector(`.${this.prefix}popover`),timestampTooltip:this.container.querySelector(`.${this.prefix}timestamp-tooltip`),previewImg:this.container.querySelector(`#${this.prefix}preview-img`)}}handleEvent(e){let t,i,n=0,r=0;if(this.window===e.currentTarget&&this.rect&&(n=+this.rect[this.rotate?"top":"left"]||0,r=+this.rect[this.rotate?"right":"top"]||0),this.options.vertical){const n=this.rotate?"clientX":"clientY";i=this.elements.track.getBoundingClientRect()[this.rotate?"left":"bottom"]-(e[n]||e.changedTouches&&e.changedTouches[0][n]||0)+r,t=i/this.elements.track.clientHeight}else{const r=this.rotate?"clientY":"clientX";i=(e[r]||e.changedTouches&&e.changedTouches[0][r]||0)-this.elements.track.getBoundingClientRect()[this.rotate?"top":"left"]-n,t=i/this.elements.track.clientWidth}return t=Math.max(t,0),t=Math.min(t,1),{percentage:t,distance:i}}value(e,t=!1,i){return void 0!==e&&("number"==typeof(e=parseFloat(e))&&(e=this.getAnalyzedValue(this.options.valueSetAnalyze,e),e=Math.max(e,0),(e=Math.min(e,1))!==this.valueOut&&(this.move(e,t,i),this.valueOut=e,t||this.trigger("change",{value:this.getAnalyzedValue(this.options.valueGetAnalyze,e),manual:!1})))),this.getAnalyzedValue(this.options.valueGetAnalyze,this.valueIn)}getAnalyzedValue(e,t){return e?parseFloat(e(t).toFixed(5)):t}resize(){this.containerX=this.container.getBoundingClientRect().x,this.containerLength=this.options.vertical?this.container.clientHeight:this.container.clientWidth,this.thumbX()}bufferValue(e){if(this.options.videoProgress)return void 0!==e&&"number"==typeof e&&(e=Math.max(e,0),e=Math.min(e,1),this.valueBuffer=e,this.elements.bufferBar.style.webkitTransform=`scale${this.direction}(${Math.max(e,.001)})`,this.elements.bufferBar.style.transform=`scale${this.direction}(${Math.max(e,.001)})`),this.valueBuffer}disable(){this.disabled=!0}enable(){this.disabled=!1}move(e,t=!1,i){e=Math.max(e,0),e=Math.min(e,1),this.valueIn!==e&&(this.valueIn=e,this.elements.bar&&(this.elements.bar.style.webkitTransform=`scale${this.direction}(${Math.max(e,.001)})`,this.elements.bar.style.transform=`scale${this.direction}(${Math.max(e,.001)})`),this.thumbX(),t||this.trigger("move",{value:this.getAnalyzedValue(this.options.valueGetAnalyze,e)}))}setRotate(e){this.rotate=e}setPreviewContainerPosition(e,t){this.previewContainerPos={x:e,width:t}}getBufferValue(){return this.valueBuffer}thumbX(e=this.valueIn,t){const i=(this.containerLength-this.thumbLength)*e*(this.options.vertical?-1:1);this.elements.thumb.style.webkitTransform=`translate${this.direction}(${i}px)`,this.elements.thumb.style.transform=`translate${this.direction}(${i}px)`}dispose(){this.container.removeEventListener("mousedown",this.onSelfContainerTouchstart),this.container.removeEventListener("touchstart",this.onSelfContainerMousedown),this.container.removeEventListener("mousemove",this.onSelfContainerMousemove),this.container.removeEventListener("mouseenter",this.onSelfContainerMouseenter),this.container.removeEventListener("mouseleave",this.onSelfContainerMouseleave)}setPreviewImg(e){!this.elements.previewImg||(this.elements.previewImg.src=e)}}const Xi=()=>{const[e,t]=function(e,t){t=t?Object.assign({},li,t):li;const i={value:e,observers:null,observerSlots:null,pending:ci,comparator:t.equals||void 0};return[Mi.bind(i),e=>("function"==typeof e&&(e=e(i.pending!==ci?i.pending:i.value)),Ni(i,e))]}(!1);let i=null,n=null;const r=e=>{i&&clearTimeout(i),n&&(clearTimeout(n),n=null,e||t(!1))};return function(e){null===hi||(null===hi.cleanups?hi.cleanups=[e]:hi.cleanups.push(e))}(()=>{i&&(i=null,clearTimeout(i)),n&&(n=null,clearTimeout(n))}),[e,(e,a=!1)=>{if(e)r(!0),i=setTimeout(()=>{t(!0)},300);else{if(a)return i&&clearTimeout(i),n&&(clearTimeout(n),n=null),void t(!1);n=setTimeout(()=>{r()},300)}}]},Ji=xi('<div><div class="ip-tooltip--placeholder"></div><div></div></div>'),en=e=>{const[t,i]=Xi(),n=()=>{e.isH5||i(!0)},r=()=>{e.isH5||i(!1)};return(()=>{const i=Ji.cloneNode(!0),a=i.firstChild,o=a.nextSibling;i.addEventListener("mouseleave",r),i.addEventListener("mouseenter",n),ki(a,()=>e.renderPlaceHolder());const s=e.ref;return"function"==typeof s?s(o):e.ref=o,ki(o,()=>e.children),Ei(n=>{const r="ip-tooltip "+(t()?"show":""),a={"ip-tooltip--wrap":!0,["ip-tooltip--wrap--"+e.direction]:!0};return r!==n._v$&&(i.className=n._v$=r),n._v$2=ji(o,a,n._v$2),n},{_v$:void 0,_v$2:void 0}),i})()},tn=xi('<div><div class="ip-dropdown--placeholder"></div><div class="ip-dropdown--wrap"><div class="ip-dropdown--content"></div></div></div>'),nn=e=>{const t={width:"auto"};return(()=>{const i=tn.cloneNode(!0),n=i.firstChild,r=n.nextSibling,a=r.firstChild;i.addEventListener("mouseleave",()=>{e.hide()}),i.addEventListener("mouseenter",()=>{e.show()}),ki(n,()=>e.renderPlaceHolder());const o=e.ref;return"function"==typeof o?o(r):e.ref=r,zi(a,t),ki(a,()=>e.children),Ei(()=>i.className="ip-dropdown "+(e.visible?"show":"")),i})()},rn=xi('<div><span class="ip-loading-dot"></span><span class="ip-loading-dot"></span><span class="ip-loading-dot"></span></div>'),an=e=>(()=>{const t=rn.cloneNode(!0);return Ei(i=>ji(t,{"ip-loading":!0,["ip-loading--"+e.size]:!0},i)),t})()
/*!
* screenfull
* v3.0.0 - 2015-11-24
* (c) Sindre Sorhus; MIT License
*/,on=(()=>{let e;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=t.length,n={};for(let r=0;r<i;r++)if(e=t[r],e&&e[1]in document){for(let i=0,r=e.length;i<r;i++)n[t[0][i]]=e[i];return n}return!1})(),sn="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,ln=document,un={request(e){const t=on.requestFullscreen;if(e=e||document.documentElement,/5\.1[.\d]* Safari/.test(navigator.userAgent))e[t]();else try{const i=Element;e[t](sn?i.ALLOW_KEYBOARD_INPUT:{})}catch(i){e[t]()}},exit(e){(e||document)[on.exitFullscreen]()},toggle(e){(e||document)[on.fullscreenElement]?this.exit(e):this.request(e)},judgeFullscreen:e=>Boolean((e||document)[on.fullscreenElement]),enabled:Boolean(ln[on.fullscreenEnabled]),raw:on};Object.defineProperties(un,{isFullscreen:{get:()=>Boolean(ln[on.fullscreenElement])},element:{enumerable:!0,get:()=>ln[on.fullscreenElement]},enabled:{enumerable:!0,get:()=>Boolean(ln[on.fullscreenEnabled])}});var cn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuXyB3ZWJfcGxheTwvdGl0bGU+CiAgICA8ZyBpZD0iYnRuXy13ZWJfcGxheSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb24tLy00NHB4LS8td2ViX3BsYXkiPgogICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2i5aSH5Lu9LTYiIHg9IjAiIHk9IjAiIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTkuNjM1MTc4NywxMi43MDcxNDE1IEwzMC42Nzk0ODIxLDIwLjAzOTg4NCBDMzIuMDU5ODAzNSwyMC45NTYzMzMxIDMyLjQzNTg0NjQsMjIuODE4MjMzNCAzMS41MTkzOTczLDI0LjE5ODU1NDggQzMxLjI5ODIwMzgsMjQuNTMxNzA4MiAzMS4wMTI2MzU1LDI0LjgxNzI3NjUgMzAuNjc5NDgyMSwyNS4wMzg0NyBMMTkuNjM1MTc4NywzMi4zNzEyMTI1IEMxOC43MTQ5NjQ0LDMyLjk4MjE3ODUgMTcuNDczNjk3NSwzMi43MzE0ODMzIDE2Ljg2MjczMTUsMzEuODExMjY5IEMxNi42NDUwNDIyLDMxLjQ4MzM5MzYgMTYuNTI4OTI2OCwzMS4wOTg1NzkgMTYuNTI4OTI2OCwzMC43MDUwMTcyIEwxNi41Mjg5MjY4LDE0LjM3MzMzNjkgQzE2LjUyODkyNjgsMTMuMjY4NzY3NCAxNy40MjQzNTczLDEyLjM3MzMzNjkgMTguNTI4OTI2OCwxMi4zNzMzMzY5IEMxOC45MjI0ODg3LDEyLjM3MzMzNjkgMTkuMzA3MzAzMiwxMi40ODk0NTIzIDE5LjYzNTE3ODcsMTIuNzA3MTQxNSBaIiBpZD0i5b2i54q257uT5ZCI5aSH5Lu9IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",dn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuX3dlYl9wYXVzZTwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDQiIGhlaWdodD0iNDQiPjwvcmVjdD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJidG5fd2ViX3BhdXNlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iaWNvbi80NHB4L3BhdXNlIj4KICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICA8dXNlIGlkPSJyIiBmaWxsPSIjRkZGRkZGIiBvcGFjaXR5PSIwIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPHBhdGggZD0iTTE2LjUsMTMgQzE3LjYwNDU2OTUsMTMgMTguNSwxMy44OTU0MzA1IDE4LjUsMTUgTDE4LjUsMjkgQzE4LjUsMzAuMTA0NTY5NSAxNy42MDQ1Njk1LDMxIDE2LjUsMzEgQzE1LjM5NTQzMDUsMzEgMTQuNSwzMC4xMDQ1Njk1IDE0LjUsMjkgTDE0LjUsMTUgQzE0LjUsMTMuODk1NDMwNSAxNS4zOTU0MzA1LDEzIDE2LjUsMTMgWiBNMjcuNSwxMyBDMjguNjA0NTY5NSwxMyAyOS41LDEzLjg5NTQzMDUgMjkuNSwxNSBMMjkuNSwyOSBDMjkuNSwzMC4xMDQ1Njk1IDI4LjYwNDU2OTUsMzEgMjcuNSwzMSBDMjYuMzk1NDMwNSwzMSAyNS41LDMwLjEwNDU2OTUgMjUuNSwyOSBMMjUuNSwxNSBDMjUuNSwxMy44OTU0MzA1IDI2LjM5NTQzMDUsMTMgMjcuNSwxMyBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",hn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjEgKDg5NjUwKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT7lvIDlkK/lvLnluZU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iSEgtSDXpobXpnaLlsJ3or5UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJJY29uLUJhcnJhZ2UtT24iPgogICAgICAgICAgICA8cGF0aCBkPSJNMTEuNDUwNDg3OCwxNi44NDM5MDcxIEMxMS4xODIwMDIzLDE2LjU3NTQyMTYgMTEuMTgyMDAyMywxNi4xNDAxMjA3IDExLjQ1MDQ4NzgsMTUuODcxNjM1MiBMMTEuNjY2NTQ4MiwxNS42NTU1NzQ4IEMxMS45MzUwMzM2LDE1LjM4NzA4OTQgMTIuMzcwMzM0NSwxNS4zODcwODk0IDEyLjYzODgyLDE1LjY1NTU3NDggTDE0LjkyNTc5OTcsMTcuOTQxNDU0NiBMMjAuMzgwOTg0NSwxMi40ODY2ODg5IEMyMC42NDk0NywxMi4yMTgyMDM0IDIxLjA4NDc3MDksMTIuMjE4MjAzNCAyMS4zNTMyNTYzLDEyLjQ4NjY4ODkgTDIxLjU2OTMxNjcsMTIuNzAyNzQ5MyBDMjEuODM3ODAyMiwxMi45NzEyMzQ3IDIxLjgzNzgwMjIsMTMuNDA2NTM1NyAyMS41NjkzMTY3LDEzLjY3NTAyMTEgTDE1LjQxMTU5NTIsMTkuODMyNzQyNyBDMTUuMTY3NTE3NSwyMC4wNzY4MjA0IDE0Ljc4NTU3NTgsMjAuMDk5MDA5MiAxNC41MTY0MzE5LDE5Ljg5OTMwOTMgTDE0LjQzOTMyMzQsMTkuODMyNzQyNyBMMTQuNDM5MzIzNCwxOS44MzI3NDI3IEwxMS40NTA0ODc4LDE2Ljg0MzkwNzEgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIiBmaWxsPSIjRkI3Mjk5IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE1LjEwMzE2MTEsMS44NDY2NjI0NyBDMTUuNTE3NjgzOCwyLjE0NDU4OTY4IDE1LjYxMjIwMzEsMi43MjIxNDQ0NCAxNS4zMTQyNzU5LDMuMTM2NjY3MTQgTDE0LjE1ODA0ODQsNC43NDQ5ODIyMyBDMTQuOTMyMDM5OCw0Ljc2NDIwNzM1IDE1Ljc2NjcxMjUsNC43ODk2NDAxMiAxNi42NjIxMjgzLDQuODIxMjc2ODUgQzE4LjMwODY5OTgsNC44Nzk0NTMzNCAxOS41OTQ1Nzk0LDYuMTY5MTM2NzQgMTkuODI4MTgyNiw3LjgwMDA4ODc2IEMxOS45Mjk0ODQzLDguNTA3MzEzOTYgMTkuOTk1ODQyMSwxMS4wMDA4MjM5IDIwLjAyNzgyMSwxMS45MjA1NTAyIEMyMC4wMzk5MTU2LDEyLjI2ODM5NDUgMTkuNzY3NzM2OCwxMi41NjAxODI1IDE5LjQxOTg5MjUsMTIuNTcyMjc3MSBDMTkuMDcyMDQ4MywxMi41ODQzNzE3IDE4Ljc4MDI2MDIsMTIuMzEyMTkyOCAxOC43NjgxNjU2LDExLjk2NDM0ODYgQzE4LjczNzY2ODksMTEuMDg3MjU0IDE4LjY3NDkyNTEsOC42MzgwMTg1MSAxOC41ODA0OTk4LDcuOTc4ODAwMjQgQzE4LjQzMzQxNiw2Ljk1MTkwMjczIDE3LjY1NDM1MzgsNi4xMTc1MzcyIDE2LjYxNzYyMzIsNi4wODA5MDc1NCBDMTQuMzc1MDM0Myw2LjAwMTY3MjYzIDEyLjUxODUzMzMsNS45NjE2NDY5OSAxMS4wNDkxMTI5LDUuOTYwNzcxOTMgQzkuNTgxMTc1MTgsNS45NjE2NDY5OSA3LjcyNDY3NDIxLDYuMDAxNjcyNjMgNS40ODIwODUzNiw2LjA4MDkwNzU0IEM0LjQ0NTM1NDcsNi4xMTc1MzcyIDMuNTgzNzY4NDgsNi44OTE1NzQ1OSAzLjQzNjY4NDY4LDcuOTE4NDcyMSBDMy4yOTc2MjYwNSw4Ljg4OTI5MzA1IDMuMjI3NDMwNTYsMTAuMDk2MTMxMyAzLjIyNzQzMDU2LDExLjUzNjE5MTIgQzMuMjI3NDMwNTYsMTMuMjY0MTEzMiAzLjMyODQ3MjIxLDE0Ljc0NTcxMzcgMy41MjkxMzUxOCwxNS45Nzg5MTAxIEMzLjY5MTQ1MTAxLDE2Ljk3NjQ0IDQuNTI4NzIyMTcsMTcuNzI0OTI0MSA1LjUzODEzNjc2LDE3Ljc3NDg2ODkgQzcuMjU3NzQyNzcsMTcuODU5OTU3NiA5LjExMTY1MTc2LDE3LjkwMjUzMTEgMTEuMDk5NzE1OSwxNy45MDI1MzExIEMxMS40NDc3NzAzLDE3LjkwMjUzMTEgMTEuNzI5OTI0MiwxOC4xODQ2ODQ5IDExLjcyOTkyNDIsMTguNTMyNzM5NCBDMTEuNzI5OTI0MiwxOC44ODA3OTM4IDExLjQ0Nzc3MDMsMTkuMTYyOTQ3NyAxMS4wOTk3MTU5LDE5LjE2Mjk0NzcgQzkuMDkxNTYxNjksMTkuMTYyOTQ3NyA3LjIxNjk4NzU3LDE5LjExOTg5OTcgNS40NzU4NDcyNiwxOS4wMzM3NDU0IEMzLjg3MjY2MDQ0LDE4Ljk1NDQyMTUgMi41NDI4NzYwOCwxNy43NjU2NTE4IDIuMjg1MDgwMzgsMTYuMTgxMzM5OSBDMi4wNzI1NjI2MSwxNC44NzUyODg0IDEuOTY3MDEzODksMTMuMzI3NTk5NyAxLjk2NzAxMzg5LDExLjUzNjE5MTIgQzEuOTY3MDEzODksMTAuMDQwNTk0MyAyLjA0MDU2NTk3LDguNzc2MDQ3OTEgMi4xODkwMDE4OCw3LjczOTc2MDYyIEMyLjQyMjYwNTE0LDYuMTA4ODA4NiAzLjc5MTAwODc1LDQuODc5NDUzMzQgNS40Mzc1ODAyMiw0LjgyMTI3Njg1IEM2LjIwMDE3MzU3LDQuNzk0MzMyOTkgNi45MTg3MDc5NSw0Ljc3MTg4OTA2IDcuNTkzMjIxNzEsNC43NTM5NDczMyBMNi40OTYwNjE3OSwzLjEwOTU5ODg4IEM2LjIxMzA4Mzk4LDIuNjg0NzMwMzggNi4zMjgxMDkxMSwyLjExMDkwNzU2IDYuNzUyOTc3NjEsMS44Mjc5Mjk3NCBDNy4xNzc4NDYxMSwxLjU0NDk1MTkzIDcuNzUxNjY4OTMsMS42NTk5NzcwNiA4LjAzNDY0Njc1LDIuMDg0ODQ1NTYgTDguMDM0NjQ2NzUsMi4wODQ4NDU1NiBMOS42NTQyNTk4NCw0LjUxNjU2NDc3IEM5LjY5NTI4MzI1LDQuNTc4MTU4MTQgOS43Mjc5NDIwNyw0LjY0Mjg4MTk4IDkuNzUyNTA0ODksNC43MDkzOTYzNiBDMTAuMjMyNzAyNyw0LjcwMzUwMDM1IDEwLjY4MTYxNDQsNC43MDAzNDA1OSAxMS4wOTk3MTU5LDQuNzAwMzQwNTkgTDEwLjk5NTkxMjksNC43MDAzNTM1MiBMMTAuOTk1OTEyOSw0LjcwMDM1MzUyIEwxMS4xMDM3OTU2LDQuNzAwMzUzNTIgTDExLjEwMzc5NTYsNC43MDAzNTM1MiBMMTAuOTk5OTkyNiw0LjcwMDM0MDU5IEMxMS4zMDA0NDMsNC43MDAzNDA1OSAxMS42MTY4MDM1LDQuNzAxOTcyMjcgMTEuOTQ5MDgyNyw0LjcwNTIzNTE0IEMxMS45Nzc5NjM4LDQuNjMwNDAwNzEgMTIuMDE2Mzc1LDQuNTU3NzM5MjkgMTIuMDY1NDIyNyw0LjQ4OTQ5NjUxIEwxMy44MTMxNTY0LDIuMDU3Nzc3MyBDMTQuMTExMDgzNiwxLjY0MzI1NDYgMTQuNjg4NjM4NCwxLjU0ODczNTI3IDE1LjEwMzE2MTEsMS44NDY2NjI0NyBaIE05LjU5MjQ3MjMyLDcuNjAzMzk4MDcgTDkuNTkyNDcyMzIsMTAuNzA5MDY0NyBMNy43Nzc0NzIzMiwxMC43MDkwNjQ3IEw3LjYzNjMwNTY1LDEyLjA3MDMxNDcgTDkuNjUyOTcyMzIsMTIuMDcwMzE0NyBDOS42NTI5NzIzMiwxMy44MDQ2NDgxIDkuNTkyNDcyMzIsMTQuOTY0MjMxNCA5LjQ5MTYzODk5LDE1LjU0OTA2NDcgQzkuMzcwNjM4OTksMTYuMTMzODk4MSA4Ljg1NjM4ODk5LDE2LjQ1NjU2NDcgNy45Mzg4MDU2NSwxNi41MTcwNjQ3IEM3LjY3NjYzODk5LDE2LjUxNzA2NDcgNy40MTQ0NzIzMiwxNi40OTY4OTgxIDcuMTMyMTM4OTksMTYuNDc2NzMxNCBMNi44NTk4ODg5OSwxNS40OTg2NDgxIEM3LjEyMjA1NTY1LDE1LjUyODg5ODEgNy40MDQzODg5OSwxNS41NDkwNjQ3IDcuNjg2NzIyMzIsMTUuNTQ5MDY0NyBDOC4xOTA4ODg5OSwxNS41NDkwNjQ3IDguNDczMjIyMzIsMTUuMzg3NzMxNCA4LjU0MzgwNTY1LDE1LjA2NTA2NDcgQzguNjE0Mzg4OTksMTQuNzQyMzk4MSA4LjY1NDcyMjMyLDE0LjA0NjY0ODEgOC42NTQ3MjIzMiwxMi45Nzc4MTQ3IEw2LjU2NzQ3MjMyLDEyLjk3NzgxNDcgTDYuODQ5ODA1NjUsOS44MTE2NDgwNyBMOC41NTM4ODg5OSw5LjgxMTY0ODA3IEw4LjU1Mzg4ODk5LDguNTAwODE0NzQgTDYuNjU4MjIyMzIsOC41MDA4MTQ3NCBMNi42NTgyMjIzMiw3LjYwMzM5ODA3IEw5LjU5MjQ3MjMyLDcuNjAzMzk4MDcgWiBNMTMuOTE4MjIyMyw3LjE0OTY0ODA3IEwxNC45MTY0NzIzLDcuNTAyNTY0NzQgQzE0LjcxNDgwNTcsNy45ODY1NjQ3NCAxNC40ODI4ODksOC40MjAxNDgwNyAxNC4yMzA4MDU3LDguODAzMzE0NzQgTDE1LjQwMDQ3MjMsOC44MDMzMTQ3NCBMMTUuNDAwNDcyMywxMy4wNDgzOTgxIEwxMy4zMjMzMDU3LDEzLjA0ODM5ODEgTDEzLjMyMzMwNTcsMTMuODI0ODE0NyBMMTUuNzkzNzIyMywxMy44MjQ4MTQ3IEwxNS43OTM0NzIzLDE0LjgwMzY0ODEgTDE1Ljc4NTQ3MjMsMTQuODEyNjQ4MSBMMTMuMzIxNDcyMywxNC44MTI2NDgxIEwxMy4zMTY5MTY2LDE0LjgwODI5ODMgQzEyLjY4NzI4MjksMTQuMTI2Mzc4MyAxMS42MjQwNTg2LDE0LjA4Mzk5MTggMTAuOTQyMTM4NSwxNC43MTM2MjU1IEwxMC44NDM0NzIzLDE0LjgxMjY0ODEgTDkuODk0OTcyMzIsMTQuODEyOTgxNCBMOS44OTQ5NzIzMiwxMy44MjQ4MTQ3IEwxMi4yOTQ4MDU3LDEzLjgyNDgxNDcgTDEyLjI5NDgwNTcsMTMuMDQ4Mzk4MSBMMTAuMjU3OTcyMywxMy4wNDgzOTgxIEwxMC4yNTc5NzIzLDguODAzMzE0NzQgTDExLjQ2Nzk3MjMsOC44MDMzMTQ3NCBDMTEuMjM2MDU1Nyw4LjMyOTM5ODA3IDEwLjk4Mzk3MjMsNy45MTU5ODE0IDEwLjcxMTcyMjMsNy41NTI5ODE0IEwxMS42Njk2MzksNy4yMzAzMTQ3NCBDMTEuOTUxOTcyMyw3LjYzMzY0ODA3IDEyLjIwNDA1NTcsOC4wNTcxNDgwNyAxMi40MTU4MDU3LDguNTIwOTgxNCBMMTEuNzgwNTU1Nyw4LjgwMzMxNDc0IEwxMy4xNzIwNTU3LDguODAzMzE0NzQgQzEzLjQ1NDM4OSw4LjI4OTA2NDc0IDEzLjY5NjM4OSw3LjczNDQ4MTQgMTMuOTE4MjIyMyw3LjE0OTY0ODA3IFogTTE0LjQ3MjgwNTcsMTEuMzg0NjQ4MSBMMTMuMzIzMzA1NywxMS4zODQ2NDgxIEwxMy4zMjMzMDU3LDEyLjE3MTE0ODEgTDE0LjQ3MjgwNTcsMTIuMTcxMTQ4MSBMMTQuNDcyODA1NywxMS4zODQ2NDgxIFogTTEyLjI5NDgwNTcsMTEuMzg0NjQ4MSBMMTEuMTk1NzIyMywxMS4zODQ2NDgxIEwxMS4xOTU3MjIzLDEyLjE3MTE0ODEgTDEyLjI5NDgwNTcsMTIuMTcxMTQ4MSBMMTIuMjk0ODA1NywxMS4zODQ2NDgxIFogTTEyLjI5NDgwNTcsOS42OTA2NDgwNyBMMTEuMTk1NzIyMyw5LjY5MDY0ODA3IEwxMS4xOTU3MjIzLDEwLjUxNzQ4MTQgTDEyLjI5NDgwNTcsMTAuNTE3NDgxNCBMMTIuMjk0ODA1Nyw5LjY5MDY0ODA3IFogTTE0LjQ3MjgwNTcsOS42OTA2NDgwNyBMMTMuMzIzMzA1Nyw5LjY5MDY0ODA3IEwxMy4zMjMzMDU3LDEwLjUxNzQ4MTQgTDE0LjQ3MjgwNTcsMTAuNTE3NDgxNCBMMTQuNDcyODA1Nyw5LjY5MDY0ODA3IFoiIGlkPSLlvaLnirbnu5PlkIgiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICA8cG9seWxpbmUgaWQ9Iui3r+W+hC00OSIgc3Ryb2tlPSIjRkI3MTk5IiBzdHJva2Utd2lkdGg9IjEuMzgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgcG9pbnRzPSIxMi4yOTg3MDkgMTYuMzQ4MjM0NyAxNS4wMDg2MzI0IDE5LjEyOTgwNCAyMC4zNzUyNDY5IDE0LjAzNjgyNDMiPjwvcG9seWxpbmU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",fn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjEgKDg5NjUwKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT7lhbPpl63lvLnluZU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iSEgtSDXpobXpnaLlsJ3or5UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlm77moIcv5pKt5pS+5ZmoL2ljb24zL2ljb25fcGxheWVyX2JhcnJhZ2VvZmZfMjQiIGZpbGw9IiNGRUZFRkUiPgogICAgICAgICAgICA8ZyBpZD0iSWNvbi1CYXJyYWdlLU9mZiI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTYuODgxOTQ0NCwxMi44OTA2MjUgQzE5LjA4NjI4OTMsMTIuODkwNjI1IDIwLjg3MzI2MzksMTQuNjc3NTk5NiAyMC44NzMyNjM5LDE2Ljg4MTk0NDQgQzIwLjg3MzI2MzksMTkuMDg2Mjg5MyAxOS4wODYyODkzLDIwLjg3MzI2MzkgMTYuODgxOTQ0NCwyMC44NzMyNjM5IEMxNC42Nzc1OTk2LDIwLjg3MzI2MzkgMTIuODkwNjI1LDE5LjA4NjI4OTMgMTIuODkwNjI1LDE2Ljg4MTk0NDQgQzEyLjg5MDYyNSwxNC42Nzc1OTk2IDE0LjY3NzU5OTYsMTIuODkwNjI1IDE2Ljg4MTk0NDQsMTIuODkwNjI1IFogTTE0LjQ3NzIwMjQsMTUuNTg2NTk0OCBDMTQuMjY5MTM4OSwxNS45NzIwNDExIDE0LjE1MTA0MTcsMTYuNDEzMjAxMiAxNC4xNTEwNDE3LDE2Ljg4MTk0NDQgQzE0LjE1MTA0MTcsMTguMzkwMTgwNCAxNS4zNzM3MDg1LDE5LjYxMjg0NzIgMTYuODgxOTQ0NCwxOS42MTI4NDcyIEMxNy4zNTA2ODc3LDE5LjYxMjg0NzIgMTcuNzkxODQ3OCwxOS40OTQ3NSAxOC4xNzcyOTQxLDE5LjI4NjY4NjUgTDE0LjQ3NzIwMjQsMTUuNTg2NTk0OCBaIE0xNS4xMDMxNjExLDEuODQ2NjYyNDcgQzE1LjUxNzY4MzgsMi4xNDQ1ODk2OCAxNS42MTIyMDMxLDIuNzIyMTQ0NDQgMTUuMzE0Mjc1OSwzLjEzNjY2NzE0IEwxNC4xNTYxODM3LDQuNzQ3MDQwNDUgQzE0LjkwNjk5NjYsNC43NjYwMDk4MyAxNS43MTQyODYxLDQuNzkwNzU2MzkgMTYuNTc4MTA3OSw0LjgyMTI3Njg1IEMxOC4yMjQ2Nzk0LDQuODc5NDUzMzQgMTkuNTkzMDgzLDYuMTA4ODA4NiAxOS44MjY2ODYyLDcuNzM5NzYwNjIgQzE5Ljk3NTEyMjEsOC43NzYwNDc5MSAyMC4wNDg2NzQyLDEwLjA0MDU5NDMgMjAuMDQ4Njc0MiwxMS41MzYxOTEyIEMyMC4wNDg2NzQyLDExLjg4NDI0NTYgMTkuNzY2NTIwMywxMi4xNjYzOTk1IDE5LjQxODQ2NTksMTIuMTY2Mzk5NSBDMTkuMDcwNDExNCwxMi4xNjYzOTk1IDE4Ljc4ODI1NzUsMTEuODg0MjQ1NiAxOC43ODgyNTc1LDExLjUzNjE5MTIgQzE4Ljc4ODI1NzUsMTAuMDk2MTMxMyAxOC43MTgwNjIsOC44ODkyOTMwNSAxOC41NzkwMDM0LDcuOTE4NDcyMSBDMTguNDMxOTE5Niw2Ljg5MTU3NDU5IDE3LjU3MDMzMzQsNi4xMTc1MzcyIDE2LjUzMzYwMjcsNi4wODA5MDc1NCBDMTQuMzEyMDY2NCw2LjAwMjQxNjQ1IDEyLjQ2OTQwMyw1Ljk2MjQwMTkzIDExLjAwNjU3NzcsNS45NjA4MDY5MiBDOS41NDYyODUwOCw1Ljk2MjQwMTkzIDcuNzAzNjIxNzQsNi4wMDI0MTY0NSA1LjQ4MjA4NTM2LDYuMDgwOTA3NTQgQzQuNDQ1MzU0Nyw2LjExNzUzNzIgMy41ODM3Njg0OCw2Ljg5MTU3NDU5IDMuNDM2Njg0NjgsNy45MTg0NzIxIEMzLjI5NzYyNjA1LDguODg5MjkzMDUgMy4yMjc0MzA1NiwxMC4wOTYxMzEzIDMuMjI3NDMwNTYsMTEuNTM2MTkxMiBDMy4yMjc0MzA1NiwxMy4yNjQxMTMyIDMuMzI4NDcyMjEsMTQuNzQ1NzEzNyAzLjUyOTEzNTE4LDE1Ljk3ODkxMDEgQzMuNjkxNDUxMDEsMTYuOTc2NDQgNC41Mjg3MjIxNywxNy43MjQ5MjQxIDUuNTM4MTM2NzYsMTcuNzc0ODY4OSBDNy4yNTc3NDI3NywxNy44NTk5NTc2IDkuMTExNjUxNzYsMTcuOTAyNTMxMSAxMS4wOTk3MTU5LDE3LjkwMjUzMTEgQzExLjQ0Nzc3MDMsMTcuOTAyNTMxMSAxMS43Mjk5MjQyLDE4LjE4NDY4NDkgMTEuNzI5OTI0MiwxOC41MzI3Mzk0IEMxMS43Mjk5MjQyLDE4Ljg4MDc5MzggMTEuNDQ3NzcwMywxOS4xNjI5NDc3IDExLjA5OTcxNTksMTkuMTYyOTQ3NyBDOS4wOTE1NjE2OSwxOS4xNjI5NDc3IDcuMjE2OTg3NTcsMTkuMTE5ODk5NyA1LjQ3NTg0NzI2LDE5LjAzMzc0NTQgQzMuODcyNjYwNDQsMTguOTU0NDIxNSAyLjU0Mjg3NjA4LDE3Ljc2NTY1MTggMi4yODUwODAzOCwxNi4xODEzMzk5IEMyLjA3MjU2MjYxLDE0Ljg3NTI4ODQgMS45NjcwMTM4OSwxMy4zMjc1OTk3IDEuOTY3MDEzODksMTEuNTM2MTkxMiBDMS45NjcwMTM4OSwxMC4wNDA1OTQzIDIuMDQwNTY1OTcsOC43NzYwNDc5MSAyLjE4OTAwMTg4LDcuNzM5NzYwNjIgQzIuNDIyNjA1MTQsNi4xMDg4MDg2IDMuNzkxMDA4NzUsNC44Nzk0NTMzNCA1LjQzNzU4MDIyLDQuODIxMjc2ODUgQzYuMjAwMTczNTcsNC43OTQzMzI5OSA2LjkxODcwNzk1LDQuNzcxODg5MDYgNy41OTMyMjE3MSw0Ljc1Mzk0NzMzIEw2LjQ5NjA2MTc5LDMuMTA5NTk4ODggQzYuMjEzMDgzOTgsMi42ODQ3MzAzOCA2LjMyODEwOTExLDIuMTEwOTA3NTYgNi43NTI5Nzc2MSwxLjgyNzkyOTc0IEM3LjE0NTE2MzkyLDEuNTY2NzE5NDUgNy42NjQyNjk4OSwxLjY0NDYzNTkzIDcuOTY0MzgxNDMsMS45OTIzMzkyOSBMOC4wMzQ2NDY3NSwyLjA4NDg0NTU2IEw5LjY1NDI1OTg0LDQuNTE2NTY0NzcgQzkuNjk1MjgzMjUsNC41NzgxNTgxNCA5LjcyNzk0MjA3LDQuNjQyODgxOTggOS43NTI1MDQ4OSw0LjcwOTM5NjM2IEMxMC4wNzI2MzY3LDQuNzA1NDY1NjkgMTAuMzc4ODYzNyw0LjcwMjc1MTEzIDEwLjY3MTMyNjcsNC43MDEzNzgxNiBMMTAuOTk2MDEzOSw0LjY5OTgxODA3IEwxMS4yNDgxMzA1LDQuNzAwOTgwNTggQzExLjQ3MzczMDQsNC43MDE4MzM4NyAxMS43MDc2NTI1LDQuNzAzNTQwNDEgMTEuOTQ5OTAwMiw0LjcwNjEwMDAxIEMxMS45Nzc2Mjg1LDQuNjMxMDM1MzkgMTIuMDE2MTYwOCw0LjU1ODAzNzI5IDEyLjA2NTQyMjcsNC40ODk0OTY1MSBMMTMuODEzMTU2NCwyLjA1Nzc3NzMgQzE0LjExMTA4MzYsMS42NDMyNTQ2IDE0LjY4ODYzODQsMS41NDg3MzUyNyAxNS4xMDMxNjExLDEuODQ2NjYyNDcgWiBNMTYuODgxOTQ0NCwxNC4xNTEwNDE3IEMxNi4zMDAwMjY2LDE0LjE1MTA0MTcgMTUuNzYwNjE5MywxNC4zMzMwNTA3IDE1LjMxNzU0NDcsMTQuNjQzMjQ2NCBMMTkuMTIwNjQyNSwxOC40NDYzNDQyIEMxOS40MzA4MzgyLDE4LjAwMzI2OTYgMTkuNjEyODQ3MiwxNy40NjM4NjIzIDE5LjYxMjg0NzIsMTYuODgxOTQ0NCBDMTkuNjEyODQ3MiwxNS4zNzM3MDg1IDE4LjM5MDE4MDQsMTQuMTUxMDQxNyAxNi44ODE5NDQ0LDE0LjE1MTA0MTcgWiBNOS42MDI0NzgxMSw3LjU5ODEzMjE4IEw5LjYwMjQ3ODExLDEwLjcwMzc5ODkgTDcuNzg3NDc4MTEsMTAuNzAzNzk4OSBMNy42NDYzMTE0NCwxMi4wNjUwNDg5IEw5LjY2Mjk3ODExLDEyLjA2NTA0ODkgQzkuNjYyOTc4MTEsMTMuNzk5MzgyMiA5LjYwMjQ3ODExLDE0Ljk1ODk2NTUgOS41MDE2NDQ3OCwxNS41NDM3OTg5IEM5LjM4MDY0NDc4LDE2LjEyODYzMjIgOC44NjYzOTQ3OCwxNi40NTEyOTg5IDcuOTQ4ODExNDQsMTYuNTExNzk4OSBDNy42ODY2NDQ3OCwxNi41MTE3OTg5IDcuNDI0NDc4MTEsMTYuNDkxNjMyMiA3LjE0MjE0NDc4LDE2LjQ3MTQ2NTUgTDYuODY5ODk0NzgsMTUuNDkzMzgyMiBDNy4xMzIwNjE0NCwxNS41MjM2MzIyIDcuNDE0Mzk0NzgsMTUuNTQzNzk4OSA3LjY5NjcyODExLDE1LjU0Mzc5ODkgQzguMjAwODk0NzgsMTUuNTQzNzk4OSA4LjQ4MzIyODExLDE1LjM4MjQ2NTUgOC41NTM4MTE0NCwxNS4wNTk3OTg5IEM4LjYyNDM5NDc4LDE0LjczNzEzMjIgOC42NjQ3MjgxMSwxNC4wNDEzODIyIDguNjY0NzI4MTEsMTIuOTcyNTQ4OSBMNi41Nzc0NzgxMSwxMi45NzI1NDg5IEw2Ljg1OTgxMTQ0LDkuODA2MzgyMTggTDguNTYzODk0NzgsOS44MDYzODIxOCBMOC41NjM4OTQ3OCw4LjQ5NTU0ODg1IEw2LjY2ODIyODExLDguNDk1NTQ4ODUgTDYuNjY4MjI4MTEsNy41OTgxMzIxOCBMOS42MDI0NzgxMSw3LjU5ODEzMjE4IFogTTEzLjkyODIyODEsNy4xNDQzODIxOCBMMTQuOTI2NDc4MSw3LjQ5NzI5ODg1IEMxNC43MjQ4MTE0LDcuOTgxMjk4ODUgMTQuNDkyODk0OCw4LjQxNDg4MjE4IDE0LjI0MDgxMTQsOC43OTgwNDg4NSBMMTUuNDEwNDc4MSw4Ljc5ODA0ODg1IEwxNS40MTA2NDQ3LDEyLjA1ODM0MTEgQzE0Ljc0MjQxNTIsMTIuMjYxOTA2NSAxNC4xMzMwNDc5LDEyLjYwMDUyMjUgMTMuNjE0MzM3MywxMy4wNDIzOTQxIEwxMy4zMzMzMTE0LDEzLjA0MzEzMjIgTDEzLjMzMjY2MTcsMTMuMzAxMzAyNCBDMTIuODk3NzM5NiwxMy43MzI0MzkxIDEyLjU0MDk0NTMsMTQuMjQyMjYxNyAxMi4yODU0MDA3LDE0LjgwNzY0ODUgTDkuOTA0OTc4MTEsMTQuODA3NzE1NSBMOS45MDQ5NzgxMSwxMy44MTk1NDg5IEwxMi4zMDQ4MTE0LDEzLjgxOTU0ODkgTDEyLjMwNDgxMTQsMTMuMDQzMTMyMiBMMTAuMjY3OTc4MSwxMy4wNDMxMzIyIEwxMC4yNjc5NzgxLDguNzk4MDQ4ODUgTDExLjQ3Nzk3ODEsOC43OTgwNDg4NSBDMTEuMjQ2MDYxNCw4LjMyNDEzMjE4IDEwLjk5Mzk3ODEsNy45MTA3MTU1MiAxMC43MjE3MjgxLDcuNTQ3NzE1NTIgTDExLjY3OTY0NDgsNy4yMjUwNDg4NSBDMTEuOTYxOTc4MSw3LjYyODM4MjE4IDEyLjIxNDA2MTQsOC4wNTE4ODIxOCAxMi40MjU4MTE0LDguNTE1NzE1NTIgTDExLjc5MDU2MTQsOC43OTgwNDg4NSBMMTMuMTgyMDYxNCw4Ljc5ODA0ODg1IEMxMy40NjQzOTQ4LDguMjgzNzk4ODUgMTMuNzA2Mzk0OCw3LjcyOTIxNTUyIDEzLjkyODIyODEsNy4xNDQzODIxOCBaIE0xNC40ODI4MTE0LDExLjM3OTM4MjIgTDEzLjMzMzMxMTQsMTEuMzc5MzgyMiBMMTMuMzMzMzExNCwxMi4xNjU4ODIyIEwxNC40ODI4MTE0LDEyLjE2NTg4MjIgTDE0LjQ4MjgxMTQsMTEuMzc5MzgyMiBaIE0xMi4zMDQ4MTE0LDExLjM3OTM4MjIgTDExLjIwNTcyODEsMTEuMzc5MzgyMiBMMTEuMjA1NzI4MSwxMi4xNjU4ODIyIEwxMi4zMDQ4MTE0LDEyLjE2NTg4MjIgTDEyLjMwNDgxMTQsMTEuMzc5MzgyMiBaIE0xMi4zMDQ4MTE0LDkuNjg1MzgyMTggTDExLjIwNTcyODEsOS42ODUzODIxOCBMMTEuMjA1NzI4MSwxMC41MTIyMTU1IEwxMi4zMDQ4MTE0LDEwLjUxMjIxNTUgTDEyLjMwNDgxMTQsOS42ODUzODIxOCBaIE0xNC40ODI4MTE0LDkuNjg1MzgyMTggTDEzLjMzMzMxMTQsOS42ODUzODIxOCBMMTMuMzMzMzExNCwxMC41MTIyMTU1IEwxNC40ODI4MTE0LDEwLjUxMjIxNTUgTDE0LjQ4MjgxMTQsOS42ODUzODIxOCBaIiBpZD0i5b2i54q257uT5ZCIIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",pn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+5YWo5pmv5pKt5pS+QDF4PC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTEiIHBvaW50cz0iMCAxLjQ3MzY4NDIxZS0wNSAyNy45OTk5MjYzIDEuNDczNjg0MjFlLTA1IDI3Ljk5OTkyNjMgMjggMCAyOCI+PC9wb2x5Z29uPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5LiJ54K55pu05aSaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTMwLjAwMDAwMCwgLTEwNC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IjAxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NDguMDAwMDAwLCA0MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJTZXQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjAwMDAwMCwgNjQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IuWFqOaZr+aSreaUviIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTguMDAwMDAwLCAwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbi0tLeWFqOaZr+aSreaUvi0tLem7mOiupCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjQzOTU3NzQyLDE2LjU3NDEyNDMgQzEuODI4NTg0ODMsMTYuNzE2NDEzMSAyLjAyODU4OTc0LDE3LjE0NzExMzggMS44ODYzMDA4OSwxNy41MzYxMjEyIEMxLjc5NTMyMjc3LDE3Ljc4NDg0ODggMS43NSwxOC4wMzM5MDkgMS43NSwxOC4yODQ1MTA3IEMxLjc1LDIwLjg5NzQzMjEgNi42ODg5ODAzMywyMy4yOTkyMjI0IDEzLjA1MjkzNzMsMjMuNTE4MjY1NiBMMTEuMzU5NjgxNiwyMS45NDAxMjI4IEMxMS4wODQwOTQ3LDIxLjY4MzUxNDkgMTEuMDQ1MDU0NSwyMS4yNjc5Nzg2IDExLjI1MjMwNjUsMjAuOTY2Nzg5NSBMMTEuMzIxODgwNiwyMC44ODAxMzY0IEMxMS41Nzg0ODg1LDIwLjYwNDU0OTUgMTEuOTk0MDI0OCwyMC41NjU1MDkzIDEyLjI5NTIxMzksMjAuNzcyNzYxMyBMMTIuMzgxODY3LDIwLjg0MjMzNTQgTDE1LjUxMTM1NTgsMjMuNzU2MzAzNiBDMTUuODA1NDUzOSwyNC4wMzAxNDc5IDE1LjgyNzcxMywyNC40ODA3MDYyIDE1LjU3OTg1MDQsMjQuNzgxMzkxMyBMMTUuNTA1NTU1NiwyNC44NTk0MzUyIEwxMi4zNzYwNjY3LDI3LjcxMjU1NDggQzEyLjA2OTk2OTYsMjcuOTkxNjIwMSAxMS41OTU2MDE3LDI3Ljk2OTcwNjUgMTEuMzE2NTM2NSwyNy42NjM2MDk0IEMxMS4wNjI4NDA3LDI3LjM4NTMzOTMgMTEuMDU3ODg3OSwyNi45NjgwMDI0IDExLjI4OTA1OTQsMjYuNjg0NzU2OSBMMTEuMzY1NDgxOSwyNi42MDQwNzkxIEwxMy4xMDAxMjU5LDI1LjAyMDg0NiBDNS45Njc3MjkwNywyNC44MDM0NjExIDAuMjUsMjIuMDE1MDg1NyAwLjI1LDE4LjI4NDUxMDcgQzAuMjUsMTcuODU1Njk0MSAwLjMyNzAxMjg4NiwxNy40MzI0ODg2IDAuNDc3NTgwNDY3LDE3LjAyMDg0NzcgQzAuNjE5ODY5MzEsMTYuNjMxODQwMyAxLjA1MDU3MDAyLDE2LjQzMTgzNTQgMS40Mzk1Nzc0MiwxNi41NzQxMjQzIFogTTI3LjU3OTgwNSwxNy4xODk1NjQgQzI3LjY5MjU4MjgsMTcuNTQ3OTg2MiAyNy43NSwxNy45MTQyODA3IDI3Ljc1LDE4LjI4NDUxMDcgQzI3Ljc1LDIxLjQ1ODY4NzkgMjMuNjE2ODg1OCwyMy45ODAwODc0IDE3LjgyNjAyMTQsMjQuNzc3NzM1OCBDMTcuNDE1NjgyMiwyNC44MzQyNTY5IDE3LjAzNzIxNzEsMjQuNTQ3NDMwOCAxNi45ODA2OTYsMjQuMTM3MDkxNiBDMTYuOTI0MTc0OCwyMy43MjY3NTI0IDE3LjIxMTAwMSwyMy4zNDgyODc0IDE3LjYyMTM0MDEsMjMuMjkxNzY2MiBDMjIuNzUzODA4NywyMi41ODQ4MDY5IDI2LjI1LDIwLjQ1MTk2MTIgMjYuMjUsMTguMjg0NTEwNyBDMjYuMjUsMTguMDY4NTc4NiAyNi4yMTYzNjA0LDE3Ljg1Mzk3MzkgMjYuMTQ4OTYzOSwxNy42Mzk3NzkyIEMyNi4wMjQ2NDA0LDE3LjI0NDY2MzQgMjYuMjQ0MTYxLDE2LjgyMzU3NDYgMjYuNjM5Mjc2OCwxNi42OTkyNTExIEMyNy4wMzQzOTI3LDE2LjU3NDkyNzYgMjcuNDU1NDgxNSwxNi43OTQ0NDgyIDI3LjU3OTgwNSwxNy4xODk1NjQgWiBNMTQuMTYxMzgxLDQuMjUgQzE1Ljg0NzM4NzgsNC4yNSAxNy4zMTI0OTEyLDUuMzcyMTkyNzkgMTcuNzY4MDUxNiw2Ljk3MDMzMjA3IEMxNy44ODE2MDI2LDcuMzY4Njc3NDUgMTcuNjUwNzMxMiw3Ljc4MzY1MTQ4IDE3LjI1MjM4NTgsNy44OTcyMDI1MiBDMTYuODU0MDQwNSw4LjAxMDc1MzU2IDE2LjQzOTA2NjQsNy43Nzk4ODIxNCAxNi4zMjU1MTU0LDcuMzgxNTM2NzcgQzE2LjA1MjQ2NjQsNi40MjM2NjA3NiAxNS4xNzI5NTM4LDUuNzUgMTQuMTYxMzgxLDUuNzUgQzEyLjk3MDUxNyw1Ljc1IDExLjk5NTczNjEsNi42NzUxNjE1OSAxMS45MTY1NzE4LDcuODQ1OTUxMTkgTDExLjkxMTM4MSw4IEwxMS45MTA4MDkyLDEwLjAwMDE1NSBDMTIuNTM3NjUyNSw5LjUyOTEyODMzIDEzLjMxNjkxOTgsOS4yNSAxNC4xNjEzODEsOS4yNSBDMTYuMjMyNDQ4OCw5LjI1IDE3LjkxMTM4MSwxMC45Mjg5MzIyIDE3LjkxMTM4MSwxMyBDMTcuOTExMzgxLDE1LjA3MTA2NzggMTYuMjMyNDQ4OCwxNi43NSAxNC4xNjEzODEsMTYuNzUgTDE0LjE2MTM4MSwxNi43NSBDMTIuMTU3MTIxOCwxNi43NSAxMC41MjAxMDcyLDE1LjE3NzYzODkgMTAuNDE2NTc5LDEzLjE5OTE1ODYgTDEwLjQxMTM4MSwxMyBMMTAuNDExMzgxLDggQzEwLjQxMTM4MSw1LjkyODkzMjE5IDEyLjA5MDMxMzIsNC4yNSAxNC4xNjEzODEsNC4yNSBaIE0yMi43NSw0LjI1IEMyNC42ODI5OTY2LDQuMjUgMjYuMjUsNS44MTcwMDMzOCAyNi4yNSw3Ljc1IEwyNi4yNSw3Ljc1IEwyNi4yNSwxMy4yNSBDMjYuMjUsMTUuMTgyOTk2NiAyNC42ODI5OTY2LDE2Ljc1IDIyLjc1LDE2Ljc1IEMyMC44MTcwMDM0LDE2Ljc1IDE5LjI1LDE1LjE4Mjk5NjYgMTkuMjUsMTMuMjUgTDE5LjI1LDEzLjI1IEwxOS4yNSw3Ljc1IEMxOS4yNSw1LjgxNzAwMzM4IDIwLjgxNzAwMzQsNC4yNSAyMi43NSw0LjI1IFogTTUuMjUzMDI5MTEsNC4yMzIwNjA1IEM3LjMyNDA5NjkyLDQuMjMyMDYwNSA5LjAwMzAyOTExLDUuNzk5MDYzODggOS4wMDMwMjkxMSw3LjczMjA2MDUgQzkuMDAzMDI5MTEsOC44NjU3NDQ4MiA4LjQyNTUyNDc4LDkuODY2OTc1OSA3LjUzMDEwOTE2LDEwLjUwMTE2NDEgQzguNDI1NTI0NzgsMTEuMTE0ODkxMSA5LjAwMzAyOTExLDEyLjA5MyA5LjAwMzAyOTExLDEzLjIyNjY4NDMgQzkuMDAzMDI5MTEsMTUuMTU5NjgwOSA3LjMyNDA5NjkyLDE2LjcyNjY4NDMgNS4yNTMwMjkxMSwxNi43MjY2ODQzIEMzLjE4MTk2MTI5LDE2LjcyNjY4NDMgMS41MDMwMjkxMSwxNS4xNTk2ODA5IDEuNTAzMDI5MTEsMTMuMjI2Njg0MyBDMS41MDMwMjkxMSwxMi44NDAwODUgMS44Mzg4MTU1NCwxMi41MjY2ODQzIDIuMjUzMDI5MTEsMTIuNTI2Njg0MyBDMi42NjcyNDI2NywxMi41MjY2ODQzIDMuMDAzMDI5MTEsMTIuODQwMDg1IDMuMDAzMDI5MTEsMTMuMjI2Njg0MyBDMy4wMDMwMjkxMSwxNC4zODY0ODIzIDQuMDEwMzg4NDIsMTUuMzI2Njg0MyA1LjI1MzAyOTExLDE1LjMyNjY4NDMgQzYuNDk1NjY5NzksMTUuMzI2Njg0MyA3LjUwMzAyOTExLDE0LjM4NjQ4MjMgNy41MDMwMjkxMSwxMy4yMjY2ODQzIEM3LjUwMzAyOTExLDEyLjA2Njg4NjMgNi40OTU2Njk3OSwxMS4yMTI5ODMgNS4yNTMwMjkxMSwxMS4yMTI5ODMgQzQuODM4ODE1NTQsMTEuMjEyOTgzIDQuNTAzMDI5MTEsMTAuODk5NTgyNCA0LjUwMzAyOTExLDEwLjUxMjk4MyBDNC41MDMwMjkxMSwxMC40MTA3NjQ5IDQuNTI2NTAzNjMsMTAuMzEzNjY0IDQuNTY4Njk1NjEsMTAuMjI2MTIwMyBMNC41ODgxOTk4LDEwLjE4ODY4MjcgTDQuNTg4MTk5OCwxMC4xODg2ODI3IEM0LjU5NjY0NDU1LDEwLjE3MzYxODggNC42MDU4MDkxLDEwLjE1ODY1MzEgNC42MTU1MzM5LDEwLjE0NDA0NjIgQzQuNjI0NzQ3MjEsMTAuMTMwMjI4OCA0LjYzNDE1NTQyLDEwLjExNzEyOTYgNC42NDQwMTM3OCwxMC4xMDQzNTMxIEM0LjY1MjY4MDQyLDEwLjA5MzEwNzQgNC42NjE5NjU5OCwxMC4wODE4MDE5IDQuNjcxNjA0NDMsMTAuMDcwNzc1NyBDNC42ODIzODA0MywxMC4wNTg0NTM3IDQuNjkzNDg0NzYsMTAuMDQ2NTkyOSA0LjcwNDk5OTYxLDEwLjAzNTA5NDggQzQuNzE4NzE0MDIsMTAuMDIxNDAyNSA0LjczMjk2NjAyLDEwLjAwODI2MjYgNC43NDc3NjAyNSw5Ljk5NTY2ODA4IEM0Ljc1Nzg5NTEsOS45ODcwNDkzMyA0Ljc2Nzk2OTczLDkuOTc4OTI2MzMgNC43NzgyNzI5NSw5Ljk3MTA1NDIzIEM0Ljc5MzEyMTgsOS45NTk2OTg5NyA0LjgwODcxNDg1LDkuOTQ4Njg5ODcgNC44MjQ3NjU3NSw5LjkzODI1MTUxIEM0LjgzNzA5OTksOS45MzAyMzQ0MyA0Ljg0OTU0NjY4LDkuOTIyNjQ0MjcgNC44NjIyNDIzNCw5LjkxNTM5NjY0IEM0Ljg4MjU3ODQsOS45MDM3ODAxNCA0LjkwMzczOTU5LDkuODkyOTU3ODUgNC45MjU0ODg1NSw5Ljg4MzA4NzkgTDQuOTQ3MTMxODQsOS44NzM2NjI0IEw0Ljk0NzEzMTg0LDkuODczNjYyNCBDNS4wNDAyNTQ4LDkuODM0NzI4MjkgNS4xNDM5MjExMyw5LjgxMjk4MzA0IDUuMjUzMDI5MTEsOS44MTI5ODMwNCBDNi40OTU2Njk3OSw5LjgxMjk4MzA0IDcuNTAzMDI5MTEsOC44OTE4NTg0OCA3LjUwMzAyOTExLDcuNzMyMDYwNSBDNy41MDMwMjkxMSw2LjU3MjI2MjUzIDYuNDk1NjY5NzksNS42MzIwNjA1IDUuMjUzMDI5MTEsNS42MzIwNjA1IEM0LjAxMDM4ODQyLDUuNjMyMDYwNSAzLjAwMzAyOTExLDYuNTcyMjYyNTMgMy4wMDMwMjkxMSw3LjczMjA2MDUgQzMuMDAzMDI5MTEsOC4xMTg2NTk4MyAyLjY2NzI0MjY3LDguNDMyMDYwNSAyLjI1MzAyOTExLDguNDMyMDYwNSBDMS44Mzg4MTU1NCw4LjQzMjA2MDUgMS41MDMwMjkxMSw4LjExODY1OTgzIDEuNTAzMDI5MTEsNy43MzIwNjA1IEMxLjUwMzAyOTExLDUuNzk5MDYzODggMy4xODE5NjEyOSw0LjIzMjA2MDUgNS4yNTMwMjkxMSw0LjIzMjA2MDUgWiBNMTQuMTYxMzgxLDEwLjc1IEMxMi45MTg3NDAzLDEwLjc1IDExLjkxMTM4MSwxMS43NTczNTkzIDExLjkxMTM4MSwxMyBDMTEuOTExMzgxLDE0LjI0MjY0MDcgMTIuOTE4NzQwMywxNS4yNSAxNC4xNjEzODEsMTUuMjUgTDE0LjE2MTM4MSwxNS4yNSBDMTUuNDA0MDIxNywxNS4yNSAxNi40MTEzODEsMTQuMjQyNjQwNyAxNi40MTEzODEsMTMgTDE2LjQwNjE5MDIsMTIuODQ1OTUxMiBDMTYuMzI3MDI1OSwxMS42NzUxNjE2IDE1LjM1MjI0NSwxMC43NSAxNC4xNjEzODEsMTAuNzUgWiBNMjIuNzUsNS43NSBDMjEuNjQ1NDMwNSw1Ljc1IDIwLjc1LDYuNjQ1NDMwNSAyMC43NSw3Ljc1IEwyMC43NSw3Ljc1IEwyMC43NSwxMy4yNSBDMjAuNzUsMTQuMzU0NTY5NSAyMS42NDU0MzA1LDE1LjI1IDIyLjc1LDE1LjI1IEMyMy44NTQ1Njk1LDE1LjI1IDI0Ljc1LDE0LjM1NDU2OTUgMjQuNzUsMTMuMjUgTDI0Ljc1LDEzLjI1IEwyNC43NSw3Ljc1IEMyNC43NSw2LjY0NTQzMDUgMjMuODU0NTY5NSw1Ljc1IDIyLjc1LDUuNzUgWiBNMjYuMDAwNDkzOCwwIEMyNy4xMDUwNjMzLDAgMjguMDAwNDkzOCwwLjg5NTQzMDUgMjguMDAwNDkzOCwyIEMyOC4wMDA0OTM4LDMuMTA0NTY5NSAyNy4xMDUwNjMzLDQgMjYuMDAwNDkzOCw0IEMyNC44OTU5MjQzLDQgMjQuMDAwNDkzOCwzLjEwNDU2OTUgMjQuMDAwNDkzOCwyIEMyNC4wMDA0OTM4LDAuODk1NDMwNSAyNC44OTU5MjQzLDAgMjYuMDAwNDkzOCwwIFogTTI2LjAwMDQ5MzgsMS4xNSBDMjUuNTMxMDUxOCwxLjE1IDI1LjE1MDQ5MzgsMS41MzA1NTc5NiAyNS4xNTA0OTM4LDIgQzI1LjE1MDQ5MzgsMi40Njk0NDIwNCAyNS41MzEwNTE4LDIuODUgMjYuMDAwNDkzOCwyLjg1IEMyNi40Njk5MzU5LDIuODUgMjYuODUwNDkzOCwyLjQ2OTQ0MjA0IDI2Ljg1MDQ5MzgsMiBDMjYuODUwNDkzOCwxLjUzMDU1Nzk2IDI2LjQ2OTkzNTksMS4xNSAyNi4wMDA0OTM4LDEuMTUgWiIgaWQ9IuW9oueKtue7k+WQiCIgZmlsbD0iI0ZGRkZGRiIgbWFzaz0idXJsKCNtYXNrLTIpIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",gn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuX2Z1bGxzY3JlZW48L3RpdGxlPgogICAgPGcgaWQ9ImJ0bl9mdWxsc2NyZWVuIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBzdHJva2U9IiM5Nzk3OTciIGZpbGw9IiNEOEQ4RDgiIG9wYWNpdHk9IjAiIHg9IjAuNSIgeT0iMC41IiB3aWR0aD0iNDMiIGhlaWdodD0iNDMiPjwvcmVjdD4KICAgICAgICA8ZyBpZD0i57yW57uEIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNS4yNTAwMDAsIDE1LjI1MDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi43NSw2IEMxMy4xMjk2OTU4LDYgMTMuNDQzNDkxLDYuMjgyMTUzODggMTMuNDkzMTUzNCw2LjY0ODIyOTQ0IEwxMy41LDYuNzUgTDEzLjUsMTIuNzUgQzEzLjUsMTMuMTI5Njk1OCAxMy4yMTc4NDYxLDEzLjQ0MzQ5MSAxMi44NTE3NzA2LDEzLjQ5MzE1MzQgTDEyLjc1LDEzLjUgTDYuNzUsMTMuNSBDNi4zMzU3ODY0NCwxMy41IDYsMTMuMTY0MjEzNiA2LDEyLjc1IEM2LDEyLjM3MDMwNDIgNi4yODIxNTM4OCwxMi4wNTY1MDkgNi42NDgyMjk0NCwxMi4wMDY4NDY2IEw2Ljc1LDEyIEwxMi4wMDEsMTIgTDEyLDYuNzUgQzEyLDYuMzcwMzA0MjMgMTIuMjgyMTUzOSw2LjA1NjUwOTA0IDEyLjY0ODIyOTQsNi4wMDY4NDY2MiBMMTIuNzUsNiBaIE02Ljc1LDAgQzcuMTY0MjEzNTYsMCA3LjUsMC4zMzU3ODY0MzggNy41LDAuNzUgQzcuNSwxLjEyOTY5NTc3IDcuMjE3ODQ2MTIsMS40NDM0OTA5NiA2Ljg1MTc3MDU2LDEuNDkzMTUzMzggTDYuNzUsMS41IEwxLjUsMS41IEwxLjUsNi43NSBDMS41LDcuMTI5Njk1NzcgMS4yMTc4NDYxMiw3LjQ0MzQ5MDk2IDAuODUxNzcwNTU3LDcuNDkzMTUzMzggTDAuNzUsNy41IEMwLjM3MDMwNDIzNCw3LjUgMC4wNTY1MDkwMzkxLDcuMjE3ODQ2MTIgMC4wMDY4NDY2MTYsNi44NTE3NzA1NiBMMCw2Ljc1IEwwLDAuNzUgQzAsMC4zNzAzMDQyMzQgMC4yODIxNTM4ODIsMC4wNTY1MDkwMzkxIDAuNjQ4MjI5NDQzLDAuMDA2ODQ2NjE2IEwwLjc1LDAgTDYuNzUsMCBaIiBpZD0i5b2i54q257uT5ZCIIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",yn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTIwcHgiIGhlaWdodD0iMTIwcHgiIHZpZXdCb3g9IjAgMCAxMjAgMTIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPmljb25fOTZweF9wYXVzZTwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNNjAsMTIgQzg2LjUwOTY2OCwxMiAxMDgsMzMuNDkwMzMyIDEwOCw2MCBDMTA4LDg2LjUwOTY2OCA4Ni41MDk2NjgsMTA4IDYwLDEwOCBDMzMuNDkwMzMyLDEwOCAxMiw4Ni41MDk2NjggMTIsNjAgQzEyLDMzLjQ5MDMzMiAzMy40OTAzMzIsMTIgNjAsMTIgWiBNNjAuNSwxNiBDMzUuOTIzMzI4NiwxNiAxNiwzNS45MjMzMjg2IDE2LDYwLjUgQzE2LDg1LjA3NjY3MTQgMzUuOTIzMzI4NiwxMDUgNjAuNSwxMDUgQzg1LjA3NjY3MTQsMTA1IDEwNSw4NS4wNzY2NzE0IDEwNSw2MC41IEMxMDUsMzUuOTIzMzI4NiA4NS4wNzY2NzE0LDE2IDYwLjUsMTYgWiBNNTAsMzkuNTAzMTMzMSBDNTEuMDk0NzUwMywzOS41MDMxMzMxIDUyLjE2ODYzNywzOS44MDI2NTEzIDUzLjEwNTM1Nyw0MC4zNjkyNDk3IEw3NC4yNDIxNDkyLDUzLjE1NDM2NDIgQzc4LjAyMjYzNjUsNTUuNDQxMDg1OSA3OS4yMzM1NzI3LDYwLjM1OTUzMDYgNzYuOTQ2ODUwOSw2NC4xNDAwMTc5IEM3Ni4yNzcyNTAyLDY1LjI0NzAyNSA3NS4zNDkxNTYzLDY2LjE3NTExODkgNzQuMjQyMTQ5Miw2Ni44NDQ3MTk3IEw1My4xMDUzNTcsNzkuNjI5ODM0MSBDNTAuMjY5OTkxNSw4MS4zNDQ4NzU0IDQ2LjU4MTE1OCw4MC40MzY2NzMyIDQ0Ljg2NjExNjcsNzcuNjAxMzA3OCBDNDQuMjk5NTE4Myw3Ni42NjQ1ODc4IDQ0LDc1LjU5MDcwMSA0NCw3NC40OTU5NTA4IEw0NCw0NS41MDMxMzMxIEM0NCw0Mi4xODk0MjQ2IDQ2LjY4NjI5MTUsMzkuNTAzMTMzMSA1MCwzOS41MDMxMzMxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii0yMS45JSIgeT0iLTIxLjklIiB3aWR0aD0iMTQzLjglIiBoZWlnaHQ9IjE0My44JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI2IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjMgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Imljb25fOTZweF9wYXVzZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb25fOTZweF93ZWJfcGxheSI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJwbGF5OTZweGJnIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCI+PC9yZWN0PgogICAgICAgICAgICA8ZyBpZD0i5b2i54q257uT5ZCIIj4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",mn="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+QDF4aWNvbi80NHB4L2Nsb3NlPC90aXRsZT4KICAgIDxnIGlkPSJpY29uLzQ0cHgvY2xvc2UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCI+PC9yZWN0PgogICAgICAgIDxwYXRoIGQ9Ik0xNi4wODA0NDkyLDE1LjEzMjgyMDkgTDE2LjE1NjQyNzIsMTUuMTk4NDExNSBMMjIsMjEuMDQxNjc3NCBMMjcuODQzNTcyOCwxNS4xOTg0MTE1IEMyOC4xMDgxMjE1LDE0LjkzMzg2MjggMjguNTM3MDM5OCwxNC45MzM4NjI4IDI4LjgwMTU4ODUsMTUuMTk4NDExNSBDMjkuMDQyMDg3MywxNS40Mzg5MTA0IDI5LjA2Mzk1MDgsMTUuODE1MjUxOCAyOC44NjcxNzkxLDE2LjA4MDQ0OTIgTDI4LjgwMTU4ODUsMTYuMTU2NDI3MiBMMjIuOTU4MzIyNiwyMiBMMjguODAxNTg4NSwyNy44NDM1NzI4IEMyOS4wNjYxMzcyLDI4LjEwODEyMTUgMjkuMDY2MTM3MiwyOC41MzcwMzk4IDI4LjgwMTU4ODUsMjguODAxNTg4NSBDMjguNTYxMDg5NiwyOS4wNDIwODczIDI4LjE4NDc0ODIsMjkuMDYzOTUwOCAyNy45MTk1NTA4LDI4Ljg2NzE3OTEgTDI3Ljg0MzU3MjgsMjguODAxNTg4NSBMMjIsMjIuOTU4MzIyNiBMMTYuMTU2NDI3MiwyOC44MDE1ODg1IEMxNS44OTE4Nzg1LDI5LjA2NjEzNzIgMTUuNDYyOTYwMiwyOS4wNjYxMzcyIDE1LjE5ODQxMTUsMjguODAxNTg4NSBDMTQuOTU3OTEyNywyOC41NjEwODk2IDE0LjkzNjA0OTIsMjguMTg0NzQ4MiAxNS4xMzI4MjA5LDI3LjkxOTU1MDggTDE1LjE5ODQxMTUsMjcuODQzNTcyOCBMMjEuMDQxNjc3NCwyMiBMMTUuMTk4NDExNSwxNi4xNTY0MjcyIEMxNC45MzM4NjI4LDE1Ljg5MTg3ODUgMTQuOTMzODYyOCwxNS40NjI5NjAyIDE1LjE5ODQxMTUsMTUuMTk4NDExNSBDMTUuNDEyMTg4MywxNC45ODQ2MzQ4IDE1LjczMzI5NzQsMTQuOTQzNjA2OSAxNS45ODgyNzI0LDE1LjA3NTMyOCBMMTYuMDgwNDQ5MiwxNS4xMzI4MjA5IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg==",En="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbiAvIDQ4cHggLyBwbGF5PC90aXRsZT4KICAgIDxnIGlkPSJpY29uLS8tNDhweC0vLXBsYXkiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJwbGF5ODhweGJnIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMjQsMCBDMzcuMjU0ODM0LDAgNDgsMTAuNzQ1MTY2IDQ4LDI0IEM0OCwzNy4yNTQ4MzQgMzcuMjU0ODM0LDQ4IDI0LDQ4IEMxMC43NDUxNjYsNDggMCwzNy4yNTQ4MzQgMCwyNCBDMCwxMC43NDUxNjYgMTAuNzQ1MTY2LDAgMjQsMCBaIE0yNCwyIEMxMS44NDk3MzU1LDIgMiwxMS44NDk3MzU1IDIsMjQgQzIsMzYuMTUwMjY0NSAxMS44NDk3MzU1LDQ2IDI0LDQ2IEMzNi4xNTAyNjQ1LDQ2IDQ2LDM2LjE1MDI2NDUgNDYsMjQgQzQ2LDExLjg0OTczNTUgMzYuMTUwMjY0NSwyIDI0LDIgWiBNMjAsMTMuNzQ5NTkwMyBDMjAuODE0Mjc4MiwxMy43NDk1OTAzIDIxLjYwOTE2MjcsMTMuOTk4MTA0NyAyMi4yNzg0MzE1LDE0LjQ2MTkyNCBMMzIuMDE4Mjg2LDIxLjIxMTg3NjUgQzMzLjgzNDAxNCwyMi40NzAyMTk1IDM0LjI4NTg2MzgsMjQuOTYyMjQ2NCAzMy4wMjc1MjA4LDI2Ljc3Nzk3NDMgQzMyLjc1NDMzMzksMjcuMTcyMTY5OCAzMi40MTI0ODE0LDI3LjUxNDAyMjMgMzIuMDE4Mjg2LDI3Ljc4NzIwOTEgTDIyLjI3ODQzMTUsMzQuNTM3MTYxNiBDMjAuNDYyNzAzNiwzNS43OTU1MDQ2IDE3Ljk3MDY3NjcsMzUuMzQzNjU0OCAxNi43MTIzMzM3LDMzLjUyNzkyNjkgQzE2LjI0ODUxNDQsMzIuODU4NjU4MSAxNiwzMi4wNjM3NzM2IDE2LDMxLjI0OTQ5NTMgTDE2LDE3Ljc0OTU5MDMgQzE2LDE1LjU0MDQ1MTMgMTcuNzkwODYxLDEzLjc0OTU5MDMgMjAsMTMuNzQ5NTkwMyBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg==";const Tn=Ct('<div class="ip-next-episode"></div>'),Mn=function(e){const t={direction:"top",isH5:e.isH5,renderPlaceHolder:()=>(()=>{const t=Tn.cloneNode(!0);return xt(t,"click",e.onClick,!0),Je(i=>{const n=e.isH5,r=e.disabled;return n!==i._v$&&t.classList.toggle("ip-next-episode-h5",i._v$=n),r!==i._v$2&&t.classList.toggle("disabled",i._v$2=r),i},{_v$:void 0,_v$2:void 0}),t})()};return e.hasNext?It(en,At(t,{get children(){return e.tip}})):null};bt(["click"]);const Nn=Ct('<div class="ip-ccreport-icon"></div>'),In=e=>{let t;const i=e.player;at(()=>{setTimeout(()=>{n()},0),window.addEventListener("resize",n)}),ot(()=>{window.removeEventListener("resize",n)});const n=()=>{ce(t,i.template.display,"bottom")},r=t=>{t.stopPropagation(),e.onClick()},a=t=>{t.cancelable&&!t.defaultPrevented&&t.preventDefault(),e.onClick()};return It(en,At({direction:"bottom",renderPlaceHolder:()=>(()=>{const t=Nn.cloneNode(!0);return t.$$touchend=a,t.$$mouseup=r,Je(()=>t.classList.toggle("ip-ccreport-icon-h5",e.isH5)),t})()},{ref(e){"function"==typeof t?t(e):t=e},get children(){return e.tip}}))};bt(["mouseup","touchend"]);const vn=Ct('<div class="ip-report-icon"></div>'),Dn=e=>{let t;const i=e.player;at(()=>{setTimeout(()=>{n()},0),window.addEventListener("resize",n)}),ot(()=>{window.removeEventListener("resize",n)});const n=()=>{ce(t,i.template.display,"bottom")},r=t=>{t.stopPropagation(),e.onClick()},a=t=>{t.cancelable&&!t.defaultPrevented&&t.preventDefault(),e.onClick()};return It(en,At({direction:"bottom",renderPlaceHolder:()=>(()=>{const t=vn.cloneNode(!0);return t.$$touchend=a,t.$$mouseup=r,Je(()=>t.classList.toggle("ip-report-icon-h5",e.isH5)),t})()},{ref(e){"function"==typeof t?t(e):t=e},get children(){return e.tip}}))};bt(["mouseup","touchend"]);const _n=Ct('<p class="ip-speedList-placeholder"></p>'),An=Ct('<ul class="ip-speedList"></ul>'),Sn=Ct("<div>Loading...</div>"),wn=Ct("<li>X</li>"),On=["0.5","0.75","1.0","1.25","1.5","2.0"].reverse(),Ln=e=>{var t;let i;const n=e.player,[r,a]=$e(""),[o,s]=Xi();et(()=>{a(e.speed+"X")});const l=null!=(t=e.rateList)?t:On;at(()=>{e.isH5||(setTimeout(()=>{u()},0),window.addEventListener("resize",u))});const u=()=>{ce(i,n.template.display,"top")};ot(()=>{e.isH5||window.removeEventListener("resize",u)});const c=()=>{!e.isH5||e.onShowDrawer()};return It(nn,At({hide:()=>{s(!1)},show:()=>{s(!0)},renderPlaceHolder:()=>(()=>{const t=_n.cloneNode(!0);return t.$$touchend=c,t.addEventListener("mouseenter",()=>{s(!0)}),jt(t,r),Je(()=>t.classList.toggle("ip-speedList-placeholder--bold",o()||e.isH5)),t})()},{ref(e){"function"==typeof i?i(e):i=e},get visible(){return o()},get children(){const t=An.cloneNode(!0);return jt(t,It(St,{each:l,get fallback(){return Sn.cloneNode(!0)},children:t=>(()=>{const i=wn.cloneNode(!0),n=i.firstChild;return i.$$click=()=>{(t=>{s(!1,!0),e.onSpeedChange(t)})(t)},jt(i,t,n),Je(()=>i.className="ip-speedList--item"+(t===e.speed?" active":"")),i})()})),t}}))};bt(["touchend","click"]);const Cn=Ct('<div class="ip-subtitle-icon"></div>'),bn=Ct('<ul class="ip-subtitle"></ul>'),Rn=Ct("<div>Loading...</div>"),xn=Ct("<li></li>"),Pn=e=>{let t;const i=e.player,[n,r]=Xi();at(()=>{e.isH5||(setTimeout(()=>{a()},0),window.addEventListener("resize",a))});const a=()=>{ce(t,i.template.display,"top")},o=()=>{!e.isH5||e.onShowDrawer()};ot(()=>{e.isH5||window.removeEventListener("resize",a)});return It(nn,At({hide:()=>{r(!1)},show:()=>{r(!0)},renderPlaceHolder:()=>(()=>{const t=Cn.cloneNode(!0);return t.$$touchend=o,t.addEventListener("mouseenter",()=>{r(!0)}),Je(()=>t.classList.toggle("ip-subtitle-icon--bold",n()||e.isH5)),t})()},{get visible(){return n()},ref(e){"function"==typeof t?t(e):t=e},get children(){const t=bn.cloneNode(!0);return jt(t,It(St,{get each(){return e.list},get fallback(){return Rn.cloneNode(!0)},children:t=>(()=>{const i=xn.cloneNode(!0);return i.$$click=()=>{((t,i)=>{e.onClick({lang:t,url:i})})(t.key,t.url)},jt(i,()=>t.title),Je(()=>i.className="ip-subtitle--item"+(t.key===e.lang?" active":"")),i})()})),t}}))};bt(["touchend","click"]);const jn=Ct('<span class="ip-quality-placeholder"></span>'),zn=Ct('<ul class="ip-quality"></ul>'),kn=Ct("<div>Loading...</div>"),Un=Ct('<li><span class="ip-quality-item--label"></span><span></span></li>'),Fn=e=>{let t;const i=e.player,[n,r]=Xi(),[a,o]=$e("");at(()=>{e.isH5||(setTimeout(()=>{s()},0),window.addEventListener("resize",s))});const s=()=>{ce(t,i.template.display,"top")},l=()=>{!e.isH5||null==e||e.onShowDrawer()};ot(()=>{e.isH5||window.removeEventListener("resize",s)});const u={hide:()=>{r(!1)},show:()=>{r(!0)},renderPlaceHolder:()=>(()=>{const t=jn.cloneNode(!0);return t.$$touchend=l,t.addEventListener("mouseenter",()=>{r(!0)}),jt(t,a),Je(()=>t.classList.toggle("ip-quality-placeholder--bold",n()||e.isH5)),t})()};Xe(rt(()=>e.quality,t=>{o(()=>e.qualityList.find(e=>e.value===t).label)}));return It(nn,At(u,{get visible(){return n()},ref(e){"function"==typeof t?t(e):t=e},get children(){const t=zn.cloneNode(!0);return jt(t,It(St,{get each(){return e.qualityList},get fallback(){return kn.cloneNode(!0)},children:t=>(()=>{const i=Un.cloneNode(!0),n=i.firstChild,a=n.nextSibling;return i.$$click=()=>{(t=>{r(!1),e.onClick(t)})(t.value)},jt(n,()=>t.label),jt(a,()=>t.tag),Je(n=>{const r="ip-quality--item"+(t.value===e.quality?" active":""),o=!!t.tag,s="premium"===t.tagType,l="normal"===t.tagType;return r!==n._v$&&(i.className=n._v$=r),o!==n._v$2&&a.classList.toggle("ip-quality-tag",n._v$2=o),s!==n._v$3&&a.classList.toggle("ip-quality-tag--premium",n._v$3=s),l!==n._v$4&&a.classList.toggle("ip-quality-tag--login",n._v$4=l),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i})()})),t}}))};bt(["touchend","click"]);const Bn={playTip:"Play",pauseTip:"Pause",fullscreenTip:"Full Screen",closeFullscreenTip:"Exit full screen",nextEpTip:"Next episode",report:"Report",ccReport:"Subtitle feedback",speed:"speed",quality:"quality",subtitle:"subtitle",changingQuality:"changing quality...",changeQualitySuccess:"change quality success",changeQualityFail:"change quality fail",skipTo:"Skip to"};const Yn=Ct('<div class="IpDrawer"></div>'),Qn=Ct('<div class="IpDrawer-mask"></div>'),Gn=Ct('<div class="IpDrawer-bottom-mask"></div>'),Vn=e=>{const t=t=>{t.cancelable&&t.preventDefault(),setTimeout(()=>{e.onClose()},200)};return[wt((()=>{const i=wt(()=>!!e.visible,!0);return()=>i()&&(()=>{const e=Qn.cloneNode(!0);return e.$$touchend=t,e.$$mouseup=t,e})()})()),wt((()=>{const t=wt(()=>!(!e.visible||!e.bottomMaskVisible),!0);return()=>t()&&Gn.cloneNode(!0)})()),(()=>{const t=Yn.cloneNode(!0);return jt(t,()=>e.children),Je(i=>{const n=!e.visible,r=e.maxHeight+"px";return n!==i._v$&&t.classList.toggle("IpDrawer--hidden",i._v$=n),r!==i._v$2&&t.style.setProperty("max-height",i._v$2=r),i},{_v$:void 0,_v$2:void 0}),t})()]};bt(["mouseup","touchend"]);const Hn=Ct('<div class="IpDialog"><div class="IpDialog__header"><span class="IpDialog__header-title"></span><span class="IpDialog__header-close"></span></div><div class="IpDialog__content"></div></div>'),Wn=Ct('<div class="IpDialog-mask"></div>'),qn=e=>{const t=t=>{t.cancelable&&t.preventDefault(),e.onClose()};return[wt((()=>{const i=wt(()=>!!e.visible,!0);return()=>i()&&(()=>{const e=Wn.cloneNode(!0);return e.$$touchend=t,e.$$mousedown=t,e})()})()),(()=>{const i=Hn.cloneNode(!0),n=i.firstChild,r=n.firstChild,a=r.nextSibling,o=n.nextSibling;return jt(r,()=>e.title),a.$$touchend=t,a.$$mousedown=t,jt(o,()=>e.children),Je(()=>i.classList.toggle("IpDialog--hidden",!e.visible)),i})()]};bt(["mousedown","touchend"]);const Zn=()=>{const[e,t]=$e(!1);return{touchMoveFlag:e,setTouchMoveFlag:t,setFlag:()=>{e()||t(!0)}}};const Kn=Ct("<div></div>"),$n=Ct("<div>Loading...</div>"),Xn=Ct("<p>X</p>"),Jn=["0.5","0.75","1.0","1.25","1.5","2.0"].reverse(),er=e=>{var t,i;const n=null!=(t=e.rateList)?t:Jn,[r,a]=$e(""),[o,s]=$e((null==(i=e.rateList)?void 0:i.length)>=5),{touchMoveFlag:l,setFlag:u,setTouchMoveFlag:c}=Zn();et(rt(()=>{var t,i;return null!=(i=null==(t=e.rateList)?void 0:t.length)?i:Jn.length},e=>{s(e>=5)})),et(rt(()=>e.visible,e=>{var t;e?(console.log(window.orientation),[0,180].includes(null!=(t=window.orientation)?t:0)?a("drawer"):a("dialog")):a("")})),at(()=>{window.addEventListener("resize",h),document.addEventListener("fullscreenchange",d),document.addEventListener("webkitendfullscreen",d)});const d=()=>{e.onClose()},h=()=>{var e,t;if(r()){if([0,180].includes(null!=(e=window.orientation)?e:0))return void a("drawer");if([90,-90].includes(null!=(t=window.orientation)?t:0))return void a("dialog")}},f=t=>{l()?c(!1):(e.onSpeedChange(t),e.onClose())};return ot(()=>{window.removeEventListener("resize",h),document.removeEventListener("fullscreenchange",d),document.removeEventListener("webkitendfullscreen",d)}),[It(Vn,{get visible(){return"drawer"===r()},maxHeight:252,get onClose(){return e.onClose},get bottomMaskVisible(){return o()},get children(){const t=Kn.cloneNode(!0);return jt(t,It(St,{each:n,get fallback(){return $n.cloneNode(!0)},children:t=>(()=>{const i=Xn.cloneNode(!0),n=i.firstChild;return i.$$touchend=()=>{f(t)},xt(i,"touchmove",u,!0),jt(i,t,n),Je(n=>Pt(i,{"ip-speedList--item":!0,"ip-speedList--item-drawer":!0,active:t===e.speed},n)),i})()})),Je(()=>t.style.setProperty("padding-bottom",o()?"42px":"16px")),t}}),It(qn,{get title(){return e.title},get visible(){return"dialog"===r()},get onClose(){return e.onClose},get children(){return It(St,{each:n,get fallback(){return $n.cloneNode(!0)},children:t=>(()=>{const i=Xn.cloneNode(!0),n=i.firstChild;return i.$$touchend=()=>{f(t)},xt(i,"touchmove",u,!0),jt(i,t,n),Je(n=>Pt(i,{"ip-speedList--item":!0,"ip-speedList--item-dialog":!0,active:t===e.speed},n)),i})()})}})]};bt(["touchmove","touchend"]);const tr=Ct("<div></div>"),ir=Ct("<div>Loading...</div>"),nr=Ct("<p></p>"),rr=e=>{const[t,i]=$e(""),{touchMoveFlag:n,setFlag:r,setTouchMoveFlag:a}=Zn(),[o,s]=$e(!1);et(rt(()=>{var t;return null==(t=e.list)?void 0:t.length},e=>{s(e>=5)})),et(rt(()=>e.visible,e=>{var t;e?[0,180].includes(null!=(t=window.orientation)?t:0)?i("drawer"):i("dialog"):i("")})),at(()=>{window.addEventListener("resize",u),document.removeEventListener("fullscreenchange",l),document.removeEventListener("webkitendfullscreen",l)});const l=()=>{e.onClose()},u=()=>{var e,n;if(t()){if([0,180].includes(null!=(e=window.orientation)?e:0))return void i("drawer");if([90,-90].includes(null!=(n=window.orientation)?n:0))return void i("dialog")}},c=(t,i)=>{n()?a(!1):(e.onClick({lang:t,url:i}),e.onClose())};return ot(()=>{window.removeEventListener("resize",u),document.removeEventListener("fullscreenchange",l),document.removeEventListener("webkitendfullscreen",l)}),[It(Vn,{get visible(){return"drawer"===t()},maxHeight:252,get onClose(){return e.onClose},get bottomMaskVisible(){return o()},get children(){const t=tr.cloneNode(!0);return jt(t,It(St,{get each(){return e.list},get fallback(){return ir.cloneNode(!0)},children:t=>(()=>{const i=nr.cloneNode(!0);return xt(i,"touchmove",r,!0),i.$$touchend=()=>{c(t.key,t.url)},jt(i,()=>t.title),Je(n=>Pt(i,{"ip-subtitle--item":!0,"ip-subtitle--item-drawer":!0,active:t.key===e.lang},n)),i})()})),Je(()=>t.style.setProperty("padding-bottom",o()?"42px":"16px")),t}}),It(qn,{get title(){return e.title},get visible(){return"dialog"===t()},get onClose(){return e.onClose},get children(){return It(St,{get each(){return e.list},get fallback(){return ir.cloneNode(!0)},children:t=>(()=>{const i=nr.cloneNode(!0);return xt(i,"touchmove",r,!0),i.$$touchend=()=>{c(t.key,t.url)},jt(i,()=>t.title),Je(n=>Pt(i,{"ip-subtitle--item":!0,"ip-subtitle--item-dialog":!0,active:t.key===e.lang},n)),i})()})}})]};bt(["touchend","touchmove"]);const ar=Ct("<div></div>"),or=Ct("<div>Loading...</div>"),sr=Ct('<p><span class="ip-quality-item--label"></span><span></span></p>'),lr=e=>{const[t,i]=$e(""),[n,r]=$e(!1),{touchMoveFlag:a,setFlag:o,setTouchMoveFlag:s}=Zn();at(()=>{window.addEventListener("resize",u),document.addEventListener("fullscreenchange",l),document.addEventListener("webkitendfullscreen",l)});const l=()=>{e.onClose()};et(rt(()=>{var t;return null==(t=e.qualityList)?void 0:t.length},e=>{r(e>=5)})),et(rt(()=>e.visible,e=>{var t;e?(console.log(window.orientation),[0,180].includes(null!=(t=window.orientation)?t:0)?i("drawer"):i("dialog")):i("")}));const u=()=>{var e,n;if(t()){if([0,180].includes(null!=(e=window.orientation)?e:0))return void i("drawer");if([90,-90].includes(null!=(n=window.orientation)?n:0))return void i("dialog")}},c=t=>{a()?s(!1):(e.onClose(),e.onClick(t))};return ot(()=>{document.removeEventListener("fullscreenchange",l),document.removeEventListener("webkitendfullscreen",l),window.removeEventListener("resize",u)}),[It(Vn,{get visible(){return"drawer"===t()},maxHeight:252,get onClose(){return e.onClose},get bottomMaskVisible(){return n()},get children(){const t=ar.cloneNode(!0);return jt(t,It(St,{get each(){return e.qualityList},get fallback(){return or.cloneNode(!0)},children:t=>(()=>{const i=sr.cloneNode(!0),n=i.firstChild,r=n.nextSibling;return i.$$touchend=()=>{c(t.value)},xt(i,"touchmove",o,!0),jt(n,()=>t.label),jt(r,()=>t.tag),Je(n=>{const a={"ip-quality--item":!0,"ip-quality--item-drawer":!0,active:t.value===e.quality},o=!!t.tag,s="premium"===t.tagType,l="normal"===t.tagType;return n._v$=Pt(i,a,n._v$),o!==n._v$2&&r.classList.toggle("ip-quality-tag",n._v$2=o),s!==n._v$3&&r.classList.toggle("ip-quality-tag--premium",n._v$3=s),l!==n._v$4&&r.classList.toggle("ip-quality-tag--login",n._v$4=l),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i})()})),Je(()=>t.style.setProperty("padding-bottom",n()?"42px":"16px")),t}}),It(qn,{get title(){return e.title},get visible(){return"dialog"===t()},get onClose(){return e.onClose},get children(){return It(St,{get each(){return e.qualityList},get fallback(){return or.cloneNode(!0)},children:t=>(()=>{const i=sr.cloneNode(!0),n=i.firstChild,r=n.nextSibling;return i.$$touchend=()=>{c(t.value)},xt(i,"touchmove",o,!0),jt(n,()=>t.label),jt(r,()=>t.tag),Je(n=>{const a={"ip-quality--item":!0,"ip-quality--item-dialog":!0,active:t.value===e.quality},o=!!t.tag,s="premium"===t.tagType,l="normal"===t.tagType;return n._v$5=Pt(i,a,n._v$5),o!==n._v$6&&r.classList.toggle("ip-quality-tag",n._v$6=o),s!==n._v$7&&r.classList.toggle("ip-quality-tag--premium",n._v$7=s),l!==n._v$8&&r.classList.toggle("ip-quality-tag--login",n._v$8=l),n},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),i})()})}})]};bt(["touchmove","touchend"]);const ur=Ct('<div class="ip-toast"></div>'),cr=e=>(()=>{const t=ur.cloneNode(!0);return jt(t,()=>e.msg),Je(i=>{const n=e.isH5,r=e.visible,a=e.bottom;return n!==i._v$&&t.classList.toggle("ip-toast-h5",i._v$=n),r!==i._v$2&&t.classList.toggle("ip-toast--visible",i._v$2=r),a!==i._v$3&&t.style.setProperty("bottom",i._v$3=a),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})();const dr=Ct('<div class="ip-volume-icon"></div>'),hr=Ct('<div class="ip-volume-wrap"><div class="ip-volume-wrap--value"></div><div class="ip-volume-wrap--slider"></div></div>');var fr;!function(e){e[e.strat=0]="strat",e[e.moving=1]="moving",e[e.mouseMove=2]="mouseMove"}(fr||(fr={}));const pr=e=>{let t,i;const[n,r]=$e(e.vol),[a,o]=$e((100*e.vol).toFixed(0)),[s,l]=$e(e.vol),[u,c]=Xi(),[d,h]=$e(fr.strat);Xe(rt(n,e=>{o(()=>(100*e).toFixed(0))})),Xe(rt(n,e=>{l(()=>e>0?e:s())})),at(()=>{t=new $i(document.querySelector(".ip-volume-wrap--slider"),{value:e.vol,vertical:!0,pure:!0,trackBreadth:4,thumbWidth:24,thumbHeight:24}),t.on("move",t=>{d()===fr.strat&&h(fr.moving),r(t.value),e.player.video.volume=t.value,e.player.video.muted=t.value<=0}),t.on("end",e=>{h(fr.strat)}),e.player.bind(Ee.EVENT.VOLUME_CHANGE,e=>{t.value(e)}),e.player.bind(Ee.EVENT.MUTED_CHANGE,t=>{e.player.trigger(Ee.EVENT.VOLUME_CHANGE,t?0:s())}),window.addEventListener("keydown",f)});const f=e=>{const{key:r}=e;let a=n();switch(i&&window.clearTimeout(i),i=window.setTimeout(()=>{h(fr.strat)},500),r){case"ArrowUp":e.cancelable&&e.preventDefault(),a+=.1,t.value(a>1?1:a);break;case"ArrowDown":e.cancelable&&e.preventDefault(),a-=.1,t.value(a<0?0:a)}};ot(()=>{t.destroy(),t=null,i&&window.clearTimeout(i),i=null,window.removeEventListener("keydown",f)});return It(nn,At({hide:()=>{d()!==fr.moving&&c(!1)},show:()=>{c(!0)},renderPlaceHolder:()=>(()=>{const e=dr.cloneNode(!0);return e.addEventListener("mouseenter",()=>{c(!0)}),e.$$click=e=>{(e=>{e.preventDefault(),h(fr.mouseMove),n()>0?t.value(0):t.value(s()),h(fr.strat)})(e)},Je(t=>{const i=n()>0,r=n()<=0,a=u();return i!==t._v$&&e.classList.toggle("ip-volume-icon--loud",t._v$=i),r!==t._v$2&&e.classList.toggle("ip-volume-icon--mute",t._v$2=r),a!==t._v$3&&e.classList.toggle("ip-volume-icon--bold",t._v$3=a),t},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e})()},{get visible(){return u()},get children(){const e=hr.cloneNode(!0);return jt(e.firstChild,a),e}}))};bt(["click"]);const gr=Ct("<div><div><div></div><div><div></div><div><div><div></div></div><div><img></div><div><div><span>00:00</span><div></div><span>00:00</span></div><div><div></div></div></div><div></div><div></div><div><img><div><div></div></div></div><img><div></div><div><img><span><span></span></span></div><div><img></div><div></div></div></div></div></div>"),yr=Ct("<div></div>"),mr=Ct("<img>"),Er=Ct("<div><i><img></i></div>"),Tr=Ct("<div><div></div><img><img></div>"),Mr=Ct("<div><span><span>清晰度</span><span>App</span></span></div>"),Nr=Ct("<div><div><div><i><img></i></div><div><span>点我去App发弹幕</span></div></div></div>"),Ir=Ct("<div><div>fullscreen</div><i><img></i></div>"),vr=Ct("<div><img><img></div>"),Dr=Ct("<div><span>打开App，看高清全屏</span></div>");function _r(){}const Ar=e=>{let t=null;const i=e.prefix,n=e.config,r=e.showWxBtn,a=e.player,o=n.isH5,[s,l]=function(e,t){const i=Wt(e||{});return[Vt(i),function(...e){it(()=>Xt(i,e))}]}({speed:"1.0",lang:n.defaultLang,quality:n.quality,toastVisible:!1,toastMsg:"",toastBottom:"88px",dialogType:"",isFullScreen:un.judgeFullscreen(document),movePauseIconFlag:!1,get speedText(){return this.speed+"X"}});at(()=>{o&&window.addEventListener("orientationchange",u),a.bind(Ee.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED,()=>{l({isFullScreen:!!a.isFullScreen()})}),a.bind(Ee.EVENT.RECORD_TIME_VISIBLE,()=>{l({toastBottom:"128px"})}),a.bind(Ee.EVENT.RECORD_TIME_HIDDEN,()=>{l({toastBottom:"88px"})})}),ot(()=>{o&&window.removeEventListener("orientationchange",u),t&&(window.clearTimeout(t),t=null)}),et(rt(()=>s.dialogType,e=>{var t;if(o)if(e){a.template.csIn(!1),a.template.toggleH5Mask(!0);const e=null!=(t=window.orientation)?t:0;if([90,-90].includes(e))return void l({movePauseIconFlag:!0});if([0,180].includes(e))return void l({movePauseIconFlag:!1})}else a.template.csIn(!0),l({movePauseIconFlag:!1})},{defer:!0}));const u=()=>{var e;const t=null!=(e=window.orientation)?e:0;[90,-90].includes(t)&&s.dialogType?l({movePauseIconFlag:!0}):l({movePauseIconFlag:!1})},c=()=>{a.exitFullScreen()},d=e=>{l({speed:e}),a.setSpeedRate(Number(e)),a.trigger(Ee.EVENT.VIDEO_CLICK_SPEED,Number(e))},h=e=>{l({lang:e.lang}),a.trigger(Ee.EVENT.VIDEO_CLICK_SUBTITLE,e),a.loadSubtitle(e.url)},f=e=>E(void 0,null,(function*(){var t,i,r,o,u,c;const d=s.quality,h=a.video.currentTime;if(n.onQualityChange({quality:e,time:h})&&e!==s.quality){l({quality:e}),p(null!=(i=null==(t=n.i18n)?void 0:t.changingQuality)?i:Bn.changingQuality);try{yield a.switchQuality(e),p(null!=(o=null==(r=n.i18n)?void 0:r.changeQualitySuccess)?o:Bn.changeQualitySuccess)}catch(e){console.log(e),l({quality:d}),p(null!=(c=null==(u=n.i18n)?void 0:u.changeQualityFail)?c:Bn.changeQualityFail)}}})),p=(e,i=800)=>{t&&window.clearTimeout(t),l({toastVisible:!0,toastMsg:e}),t=window.setTimeout(()=>{l({toastVisible:!1,toastMsg:""})},i)};return(()=>{const t=gr.cloneNode(!0),u=t.firstChild,p=u.firstChild,g=p.nextSibling,y=g.firstChild,m=y.nextSibling,E=m.firstChild,T=E.firstChild,M=E.nextSibling,N=M.firstChild,I=M.nextSibling,v=I.firstChild,D=v.firstChild,_=D.nextSibling,A=_.nextSibling,S=v.nextSibling,w=S.firstChild,O=I.nextSibling,L=O.nextSibling,C=L.nextSibling,b=C.firstChild,R=b.nextSibling,x=R.firstChild,P=C.nextSibling,j=P.nextSibling,z=j.nextSibling,k=z.firstChild,U=k.nextSibling,F=U.firstChild,B=z.nextSibling,Y=B.firstChild,Q=B.nextSibling;return t.className=""+i,u.className=i+"-area",p.className=i+"-dummy",y.className=i+"-video-wrap",jt(y,(()=>{const e=wt(()=>!!n.developer,!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return e.className=i+"-video-developer",e})()})()),Pt(m,{[i+"-display"]:!0,[i+"-control-bar-hide"]:!0}),E.className=i+"-top-bar",jt(E,(()=>{const e=wt(()=>!(!s.isFullScreen||!o),!0);return()=>e()&&(()=>{const e=mr.cloneNode(!0);return e.$$touchstart=c,Rt(e,"src",mn),e.className=i+"-icon",e})()})(),T),T.className=i+"-top-bar-right",jt(T,(()=>{const e=wt(()=>!!(n.hasSpeedButton&&o&&s.isFullScreen),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-top-bar-btn"]:!0,[i+"-control-btn-speed-h5"]:!0,"ph-8":!0}),jt(e,It(Ln,{isH5:o,player:a,get speed(){return s.speed},get rateList(){return n.rateList},onSpeedChange:e=>{d(e)},onShowDrawer:()=>{setTimeout(()=>{l({dialogType:"speed"})},400)}})),e})()})(),null),jt(T,(()=>{const e=wt(()=>!!(n.hasQualityButton&&o&&s.isFullScreen),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-top-bar-btn"]:!0,[i+"-control-btn-qualities-h5"]:!0,"ph-8":!0}),jt(e,It(Fn,{isH5:o,player:a,get quality(){return s.quality},get qualityList(){return n.qualityList},onClick:e=>{f(e)},onShowDrawer:()=>{setTimeout(()=>{l({dialogType:"quality"})},400)}})),e})()})(),null),jt(T,(()=>{const e=wt(()=>!!(n.hasSubtitleButton&&o&&s.isFullScreen),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-top-bar-btn"]:!0,[i+"-control-btn-subtitle-h5"]:!0}),jt(e,It(Pn,{isH5:o,player:a,get lang(){return s.lang},get list(){return n.supportedSubTitleList},onClick:e=>{h(e)},onShowDrawer:()=>{setTimeout(()=>{l({dialogType:"subtitle"})},400)}})),e})()})(),null),jt(T,(()=>{const e=wt(()=>!(!n.hasCCReportButton||!(!o||o&&s.isFullScreen)),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-top-bar-btn"]:!0,[i+"-top-bar-cc-report-btn"]:!0}),jt(e,It(In,{isH5:o,player:a,get tip(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.ccReport)?t:Bn.ccReport},onClick:()=>{a.trigger(Ee.EVENT.VIDEO_CLICK_CC_REPORT)}})),e})()})(),null),jt(T,(()=>{const e=wt(()=>!(!n.hasReportButton||!(!o||o&&s.isFullScreen)),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-top-bar-btn"]:!0,[i+"-top-bar-report-btn"]:!0}),jt(e,It(Dn,{isH5:o,player:a,get tip(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.report)?t:Bn.report},onClick:()=>{a.trigger(Ee.EVENT.VIDEO_CLICK_REPORT)}})),e})()})(),null),M.className=i+"-panorama-logo",Rt(N,"src",pn),Pt(N,{[i+"-icon"]:!0,[i+"-icon-panorama"]:!0}),Pt(I,{[i+"-control-bar"]:!0}),Pt(v,{[i+"-control-bar-topp"]:!0,[i+"-control-bar-topp--h5"]:o}),Pt(D,{[i+"-control-text"]:!0,[i+"-time-current-text"]:!0}),_.className=i+"-control-slider",Pt(A,{[i+"-control-text"]:!0,[i+"-time-total-text"]:!0}),jt(v,(()=>{const e=wt(()=>!(n.noFullScreenButton||!o),!0);return()=>e()&&(()=>{const e=Er.cloneNode(!0),t=e.firstChild,n=t.firstChild;return Pt(t,{[`${i}-icon ${i}-icon-widescreen`]:!0}),Rt(n,"src",gn),Je(t=>Pt(e,{[i+"-control-btn"]:!0,[i+"-btn-widescreen"]:!0,[i+"-btn-widescreen-h5"]:!0,[i+"-btn-widescreen-h5--hidden"]:s.isFullScreen,[i+"-active"]:!0},t)),e})()})(),null),S.className=i+"-control-bar-top",jt(S,(()=>{const e=wt(()=>!n.isH5,!0);return()=>e()&&(()=>{const e=Tr.cloneNode(!0),t=e.firstChild,n=t.nextSibling,r=n.nextSibling;return Pt(e,{[i+"-control-btn"]:!0,[i+"-state-icon"]:!0,"mr-8":!0}),t.className=i+"-state-icon-tooltip",n.className=`${i}-icon ${i}-pause-icon`,Rt(n,"src",cn),Rt(r,"src",dn),Pt(r,{[i+"-icon"]:!0,[i+"-play-icon"]:!0,[i+"-active"]:!0}),e})()})(),w),jt(S,(()=>{const e=wt(()=>!(!n.hasNextEpisodeButton||o&&!s.isFullScreen),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-control-btn"]:!0,[i+"-control-btn-next-episode"]:!0}),jt(e,It(Mn,{isH5:o,hasNext:!0,get tip(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.nextEpTip)?t:Bn.nextEpTip},get disabled(){return!n.hasNext},onClick:()=>{a.trigger(Ee.EVENT.VIDEO_REQUEST_NEXT_EPISODE)}})),e})()})(),w),jt(S,(()=>{const e=wt(()=>!(!n.hasVolButton||o),!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-control-btn"]:!0,[i+"-control-btn-vol"]:!0}),jt(e,It(pr,{get vol(){var e,t;return null!=(t=null==(e=a.video)?void 0:e.volume)?t:.66},player:a})),e})()})(),w),jt(w,(()=>{const e=wt(()=>!!n.callAppMode,!0);return()=>e()&&(()=>{const e=Mr.cloneNode(!0),t=e.firstChild,n=t.firstChild,a=n.nextSibling;return Pt(e,{[i+"-control-btn"]:!0,[i+"-control-btn-callapp"]:!0,[i+"-control-btn-quality"]:!0}),jt(e,r&&(()=>{const e=yr.cloneNode(!0);return e.className=`${i}-global-wx-btn ${i}-quality-wx-btn`,e})(),t),t.className=i+"-control-content",n.className=i+"-content-text",a.className=i+"-control-dot",e})()})(),null),jt(w,(()=>{const e=wt(()=>!!n.hasSpeedButton,!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-control-btn"]:!0,[i+"-right-control-btn"]:!0,[i+"-control-btn-callapp"]:!0,[i+"-control-btn-speed"]:!0}),jt(e,It(Ln,{isH5:!1,player:a,get speed(){return s.speed},get rateList(){return n.rateList},onSpeedChange:e=>{d(e)},onShowDrawer:_r})),e})()})(),null),jt(w,(()=>{const e=wt(()=>!!n.hasQualityButton,!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-control-btn"]:!0,[i+"-right-control-btn"]:!0,[i+"-control-btn-qualities"]:!0}),jt(e,It(Fn,{isH5:!1,player:a,get quality(){return s.quality},get qualityList(){return n.qualityList},onClick:e=>{f(e)},onShowDrawer:_r})),e})()})(),null),jt(w,(()=>{const e=wt(()=>!!n.hasSubtitleButton,!0);return()=>e()&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-control-btn"]:!0,[i+"-control-btn-subtitle"]:!0}),jt(e,It(Pn,{isH5:!1,player:a,get lang(){return s.lang},get list(){return n.supportedSubTitleList},onClick:e=>{h(e)},onShowDrawer:_r})),e})()})(),null),jt(w,(()=>{const t=wt(()=>!n.hideDanmakuButton,!0);return()=>t()&&(()=>{const t=Nr.cloneNode(!0),n=t.firstChild,a=n.firstChild,o=a.firstChild,s=o.firstChild,l=a.nextSibling,u=l.firstChild;return Pt(t,{[i+"-control-btn"]:!0,[i+"-btn-comment-middle"]:!0,[i+"-btn-comment-full"]:!0}),n.className=i+"-btn-comment-content",a.className=i+"-btn-comment",s.className=`${i}-icon ${i}-icon-comment`,Pt(l,{[i+"-comment-text-callapp"]:!0,[i+"-comment-text"]:!0}),jt(l,r&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-global-wx-btn"]:!0,[i+"-comment-wx-btn"]:!0}),e})(),u),Je(t=>{const n={[i+"-control-btn"]:!0,[i+"-active"]:e.player.state.danmaku},r=e.player.state.danmaku?hn:fn;return t._v$4=Pt(o,n,t._v$4),r!==t._v$5&&Rt(s,"src",t._v$5=r),t},{_v$4:void 0,_v$5:void 0}),t})()})(),null),jt(w,(()=>{const e=wt(()=>!n.noFullScreenButton,!0);return()=>e()&&(()=>{const e=Ir.cloneNode(!0),t=e.firstChild,n=t.nextSibling,r=n.firstChild;return Pt(e,{[i+"-control-btn"]:!0,[i+"-btn-widescreen"]:!0,[i+"-active"]:!0}),t.className=i+"-btn-widescreen-tooltip",n.className=`${i}-icon ${i}-icon-widescreen`,Rt(r,"src",gn),e})()})(),null),O.className=i+"-subtitle",L.className=i+"-danmaku-container",C.className=i+"-load-layer",Rt(b,"src",o?En:yn),Pt(b,{"player-icon icon-preview":!0,"icon-preview-h5":o}),R.className=i+"-video-tips",jt(R,(()=>{const e=wt(()=>!n.hideCoverInfo,!0);return()=>e()&&[(()=>{const e=yr.cloneNode(!0);return e.className=i+"-view-count",e})(),(()=>{const e=yr.cloneNode(!0);return e.className=i+"-danmu-count",e})(),(()=>{const e=yr.cloneNode(!0);return e.className=i+"-video-pubdate",e})()]})(),x),x.className=i+"-video-time",P.className=i+"-poster",j.className=i+"-buff-tips",jt(j,It(an,{size:"small"})),Rt(k,"src",mn),k.className=i+"-playtime-record-close",U.className=i+"-playtime-record-jump",jt(U,()=>{var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.skipTo)?t:Bn.skipTo},F),F.className=i+"-playtime-record-time",B.className=i+"-play-mask",Rt(Y,"src",yn),Y.className=i+"-play-mask-pause-icon",jt(m,o&&(()=>{const e=vr.cloneNode(!0),t=e.firstChild,n=t.nextSibling;return e.className=i+"-play-h5-mask",Rt(t,"src",En),Rt(n,"src","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbiAvIDQ4cHggLyBwYXVzZTwvdGl0bGU+CiAgICA8ZyBpZD0iaWNvbi0vLTQ4cHgtLy1wYXVzZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHJlY3QgaWQ9IjQ4YmciIHg9IjAiIHk9IjAiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PC9yZWN0PgogICAgICAgIDxwYXRoIGQ9Ik0yNCwwIEMzNy4yNTQ4MzQsMCA0OCwxMC43NDUxNjYgNDgsMjQgQzQ4LDM3LjI1NDgzNCAzNy4yNTQ4MzQsNDggMjQsNDggQzEwLjc0NTE2Niw0OCAwLDM3LjI1NDgzNCAwLDI0IEMwLDEwLjc0NTE2NiAxMC43NDUxNjYsMCAyNCwwIFogTTI0LDIgQzExLjg0OTczNTUsMiAyLDExLjg0OTczNTUgMiwyNCBDMiwzNi4xNTAyNjQ1IDExLjg0OTczNTUsNDYgMjQsNDYgQzM2LjE1MDI2NDUsNDYgNDYsMzYuMTUwMjY0NSA0NiwyNCBDNDYsMTEuODQ5NzM1NSAzNi4xNTAyNjQ1LDIgMjQsMiBaIE0xNy41LDE0IEMxOC44ODA3MTE5LDE0IDIwLDE1LjExOTI4ODEgMjAsMTYuNSBMMjAsMzEuNSBDMjAsMzIuODgwNzExOSAxOC44ODA3MTE5LDM0IDE3LjUsMzQgQzE2LjExOTI4ODEsMzQgMTUsMzIuODgwNzExOSAxNSwzMS41IEwxNSwxNi41IEMxNSwxNS4xMTkyODgxIDE2LjExOTI4ODEsMTQgMTcuNSwxNCBaIE0zMC41LDE0IEMzMS44ODA3MTE5LDE0IDMzLDE1LjExOTI4ODEgMzMsMTYuNSBMMzMsMzEuNSBDMzMsMzIuODgwNzExOSAzMS44ODA3MTE5LDM0IDMwLjUsMzQgQzI5LjExOTI4ODEsMzQgMjgsMzIuODgwNzExOSAyOCwzMS41IEwyOCwxNi41IEMyOCwxNS4xMTkyODgxIDI5LjExOTI4ODEsMTQgMzAuNSwxNCBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="),Je(e=>{const r={[i+"-play-h5-mask-icon"]:!0,[i+"-play-h5-mask-play-icon"]:!0,[i+"-play-h5-mask-icon--bottom"]:s.movePauseIconFlag},a={[i+"-play-h5-mask-icon"]:!0,[i+"-play-h5-mask-pause-icon"]:!0,[i+"-play-h5-mask-icon--active"]:!0,[i+"-play-h5-mask-icon--bottom"]:s.movePauseIconFlag};return e._v$6=Pt(t,r,e._v$6),e._v$7=Pt(n,a,e._v$7),e},{_v$6:void 0,_v$7:void 0}),e})(),Q),jt(m,(()=>{const e=wt(()=>!!n.callAppMode,!0);return()=>e()&&(()=>{const e=Dr.cloneNode(!0),t=e.firstChild;return e.className=i+"-widescreen-callapp",jt(e,r&&(()=>{const e=yr.cloneNode(!0);return Pt(e,{[i+"-global-wx-btn"]:!0,[i+"-widescreen-wx-btn"]:!0}),e})(),t),e})()})(),Q),Q.className=i+"-ending-panel",jt(m,It(cr,{get visible(){return s.toastVisible},isH5:o,get bottom(){return s.toastBottom},get msg(){return s.toastMsg}}),null),jt(m,It(er,{get speed(){return s.speed},get rateList(){return n.rateList},get title(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.speed)?t:Bn.speed},get visible(){return"speed"===s.dialogType},onSpeedChange:e=>{d(e)},onClose:()=>{l({dialogType:""})}}),null),jt(m,It(rr,{get lang(){return s.lang},get list(){return n.supportedSubTitleList},get title(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.subtitle)?t:Bn.subtitle},get visible(){return"subtitle"===s.dialogType},onClick:e=>{h(e)},onClose:()=>{l({dialogType:""})}}),null),jt(m,It(lr,{get visible(){return"quality"===s.dialogType},get title(){var e,t;return null!=(t=null==(e=n.i18n)?void 0:e.quality)?t:Bn.quality},get quality(){return s.quality},get qualityList(){return n.qualityList},onClick:e=>{f(e)},onClose:()=>{l({dialogType:""})}}),null),Je(e=>{const t={[i+"-box"]:!0,[i+"-autoplay"]:n.autoplay,[i+"-box-callAppMode"]:n.callAppMode},r={[i+"-control-bar-right"]:!0,[i+"-control-bar-right-h5"]:o,[i+"-control-bar-right-nowrap"]:n.hideDanmakuButton},a={[i+"-playtime-record"]:!0,[i+"-playtime-record-h5"]:o&&!s.isFullScreen};return e._v$=Pt(g,t,e._v$),e._v$2=Pt(w,r,e._v$2),e._v$3=Pt(z,a,e._v$3),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()},Sr=(e,t)=>{!function(e,t,i){let n;Ke(r=>{n=r,jt(t,e(),t.firstChild?null:void 0,i)})}(()=>It(Ar,e),t)};bt(["touchstart"]);class wr{constructor(e){this.player=e,this.prefix=this.player.prefix,this.init()}attachTemplate(){const e=this.player.container,t={prefix:this.prefix,config:this.player.config,showWxBtn:se.version.wx,player:this.player};Sr(t,e)}init(){const e=this.prefix,t=this.player,i=t.container;return this.attachTemplate(),this.markPanorama(),this.container=i,this.wrap=this.container.querySelector("."+e),this.area=this.container.querySelector(`.${e}-area`),this.videoWrp=this.container.querySelector(`.${e}-video-wrap`),this.videoWrpDeveloper=this.container.querySelector(`.${e}-video-developer`),this.poster=this.container.querySelector(`.${e}-poster`),this.videoTips=this.container.querySelector(`.${e}-video-tips`),this.videoTime=this.container.querySelector(`.${e}-video-time`),this.viewCount=this.container.querySelector(`.${e}-view-count`),this.danmuCount=this.container.querySelector(`.${e}-danmu-count`),this.videoPubDate=this.container.querySelector(`.${e}-video-pubdate`),this.loadLayer=this.container.querySelector(`.${e}-load-layer`),this.controlBar=this.container.querySelector(`.${e}-control-bar`),this.display=this.container.querySelector(`.${e}-display`),this.topBar=this.container.querySelector(`.${e}-top-bar`),this.stateIcon=this.container.querySelector(`.${e}-state-icon`),this.stateIconToolTip=this.container.querySelector(`.${e}-state-icon-tooltip`),this.contorlSlider=this.container.querySelector(`.${e}-control-slider`),this.timeCurrent=this.container.querySelector(`.${e}-time-current-text`),this.timeTotal=this.container.querySelector(`.${e}-time-total-text`),this.subtitle=this.container.querySelector(`.${e}-subtitle`),this.danmakuContainer=this.container.querySelector(`.${e}-danmaku-container`),this.btnDanamku=this.container.querySelector(`.${e}-btn-comment`),this.btnWidescreen=this.container.querySelector(`.${e}-btn-widescreen`),this.btnVol=this.container.querySelector(`.${e}-control-btn-vol`),this.bufferTips=this.container.querySelector(`.${e}-buff-tips`),this.endingPanel=this.container.querySelector(`.${e}-ending-panel`),this.controlBarRight=this.container.querySelector(`.${e}-control-bar-right`),this.btnWideScreenCallApp=this.container.querySelector(`.${e}-widescreen-callapp`),this.wxOpenAppWideScreenBtn=this.container.querySelector(`.${e}-widescreen-wx-btn`),this.btnSpeed=this.container.querySelector(`.${e}-control-btn-speed`),this.btnSpeedH5=this.container.querySelector(`.${e}-control-btn-speed-h5`),this.btnSubtitle=this.container.querySelector(`.${e}-control-btn-subtitle`),this.btnSubtitleH5=this.container.querySelector(`.${e}-control-btn-subtitle-h5`),this.btnQuality=this.container.querySelector(`.${e}-control-btn-qualities`),this.btnQualityH5=this.container.querySelector(`.${e}-control-btn-qualities-h5`),this.btnReport=this.container.querySelector(`.${e}-top-bar-report-btn`),this.btnNextEpisode=this.container.querySelector(`.${e}-control-btn-next-episode`),this.wxOpenAppSpeedBtn=this.container.querySelector(`.${e}-speed-wx-btn`),this.btnQualityCallApp=this.container.querySelector(`.${e}-control-btn-quality`),this.wxOpenAppQualityBtn=this.container.querySelector(`.${e}-quality-wx-btn`),this.btnCommentCallApp=this.container.querySelector(`.${e}-comment-text-callapp`),this.wxOpenAppCommentBtn=this.container.querySelector(`.${e}-comment-wx-btn`),this.btnCommentFull=this.container.querySelector(`.${e}-btn-comment-full`),this.playTimeRecord=this.container.querySelector(`.${e}-playtime-record`),this.playTimeRecordClose=this.container.querySelector(`.${e}-playtime-record-close`),this.playTimeRecordJump=this.container.querySelector(`.${e}-playtime-record-jump`),this.playTimeRecordTime=this.container.querySelector(`.${e}-playtime-record-time`),this.playMask=this.container.querySelector(`.${e}-play-mask`),this.playH5Mask=this.container.querySelector(`.${e}-play-h5-mask`),this.playH5MaskPlayIcon=this.container.querySelector(`.${e}-play-h5-mask-play-icon`),this.playH5MaskPauseIcon=this.container.querySelector(`.${e}-play-h5-mask-pause-icon`),this.playIcon=this.container.querySelector(`.${e}-play-icon`),this.pauseIcon=this.container.querySelector(`.${e}-pause-icon`),this.fullscreenIcon=this.container.querySelector(`.${e}-icon-widescreen`),this.fullscreenToolTip=this.container.querySelector(`.${e}-btn-widescreen-tooltip`),this.panoramaLogo=this.container.querySelector(`.${e}-panorama-logo`),t.bind(Ee.EVENT.VIDEO_DESTROY,(e,t)=>{this.destroy()}),this.resize(),this.player.bind(Ee.EVENT.VIDEO_PLAYER_RESIZE,()=>{this.resize()}),this}markPanorama(){this.player.userLoadedCallback(e=>{e.is_360&&le()?(this.area.classList.add(this.prefix+"-panorama"),this.player.video.crossOrigin="anonymous"):(this.player.video.removeAttribute("crossOrigin"),this.area.classList.remove(this.prefix+"-panorama"))})}csIn(e){const t=this.player.config.isH5;this.player.trigger(Ee.EVENT.VIDEO_CONTROLBAR,{show:e}),e?(this.display.classList.remove(this.prefix+"-control-bar-hide"),this.display.style.setProperty("cursor","auto")):(this.display.classList.add(this.prefix+"-control-bar-hide"),this.display.style.setProperty("cursor","none")),this.toggleTopBar(e),t&&this.toggleH5Mask(e)}toggleTopBar(e){e?this.topBar.classList.remove(this.prefix+"-top-bar--hidden"):this.topBar.classList.add(this.prefix+"-top-bar--hidden")}toggleH5Mask(e){e?this.player.template.playH5Mask.classList.add(this.player.prefix+"-active"):this.player.template.playH5Mask.classList.remove(this.player.prefix+"-active")}toggleCsIn(){return this.display.classList.contains(this.prefix+"-control-bar-hide")?(this.csIn(!0),!0):(this.csIn(!1),!1)}isControllerVisible(){return!this.display.classList.contains(this.prefix+"-control-bar-hide")}resize(){if(this.area.clientWidth>=650?this.area.classList.add(this.player.prefix+"-big"):this.area.classList.remove(this.player.prefix+"-big"),this.player.video){let e=12,t=12;this.player.video.videoHeight<this.area.clientHeight&&(e=(this.area.clientHeight-this.player.video.videoHeight)/2+12),this.player.video.videoWidth<this.area.clientWidth&&(t=(this.area.clientWidth-this.player.video.videoWidth)/2+12),this.panoramaLogo.style.top=e+"px",this.panoramaLogo.style.left=t+"px"}}destroy(e){this.container&&(this.container.innerHTML=""),e&&this.container.remove()}}class Or{constructor(e){this.positionFix={x:0,y:0},this.fading=[],this.options=e,this.container=this.options.container,this.style={fontSize:1,color:16777215,backgroundOpacity:.4,textShadow:"0",position:"bc",bilingual:!1,scale:!0,fade:!1},this.init()}init(){this.container.insertAdjacentHTML("beforeend",'\n            <div class="subtitle-position subtitle-position-bc">\n                <div class="subtitle-wrap">\n                    <div class="subtitle-group"></div>\n                    <div class="subtitle-group second"></div>\n                </div>\n            </div>'),this.element={position:this.container.querySelector(".subtitle-position"),wrap:this.container.querySelector(".subtitle-wrap")},this.elementGroup={group:this.container.querySelectorAll(".subtitle-group")},this.container.style.color=void 0!==this.style.color?te(this.style.color):null,this.resizeFont()}draw(e,t=0){this.fading.forEach(e=>{e.remove()});const i=void 0!==this.style.backgroundOpacity?this.style.backgroundOpacity:.4,n=document.createRange(),r=n.createContextualFragment.bind(n);e.ele=r(`<span class="subtitle-item-text" style="background: rgba(0,0,0,${i}); ${this.style.fade?"display: none;":""}"> ${ie(e.content)||""}</span>`),this.elementGroup.group[t].insertAdjacentHTML("beforeend",`\n            <span class="subtitle-item-text" style="background: rgba(0,0,0,${i}); ${this.style.fade?"display: none;":""}"> ${ie(e.content)||""}</span>`),e.ele=this.elementGroup.group[t].lastElementChild,this.style.fade&&(e.ele.style.transition="opacity 0.2s",e.ele.style.opacity="1"),this.updateRule(),clearTimeout(this.changeTimer),this.changeTimer=this.mouseIsDown&&window.setTimeout(()=>{this.positionEnd=this.updatePosition({x:this.positionEnd.x,y:this.positionEnd.y}),this.move(this.positionEnd)},200)}clear(e=0){this.elementGroup.group[e].innerHTML=""}wipe(e,t){this.style.fade&&t?(this.fading.push(e.ele),e.ele.style.transition="opacity 0.2s",e.ele.style.opacity="0",setTimeout(()=>{this.fading.splice(this.fading.indexOf(e.ele),1),e.ele.parentNode.removeChild(e.ele)},200)):e.ele.parentNode.removeChild(e.ele)}setStyle(e){this.container.style.color=void 0!==e.color?te(e.color):null,this.container.style.textShadow=e.textShadow,void 0!==e.fontSize&&(this.style.fontSize=e.fontSize,this.resizeFont()),void 0!==e.backgroundOpacity&&(this.style.backgroundOpacity=e.backgroundOpacity,this.container.querySelector(".subtitle-item-text").style.background=`rgba(0,0,0,${e.backgroundOpacity})`),e.position&&(this.isCenter=!1,this.style.position=e.position,this.setPosition(this.style.position)),void 0!==e.bilingual&&(this.style.bilingual=e.bilingual),void 0!==e.scale&&(this.style.scale=e.scale,this.resizeFont()),void 0!==e.fade&&(this.style.fade=e.fade)}setPosition(e){this.element.position.removeAttribute("style"),this.element.position.classList.remove("subtitle-position-bl"),this.element.position.classList.remove("subtitle-position-bc"),this.element.position.classList.remove("subtitle-position-br"),this.element.position.classList.remove("subtitle-position-tl"),this.element.position.classList.remove("subtitle-position-tc"),this.element.position.classList.remove("subtitle-position-tr"),e&&this.element.position.classList.add("subtitle-position-"+e)}resizeFont(){let e=1;this.style.scale&&(e=this.container.clientWidth/1139),this.style.fontSize&&(e*=this.style.fontSize),this.elementGroup.group[0].style.fontSize=Math.max(28*e,14)+"px",this.elementGroup.group[1].style.fontSize=Math.max(20*e,14)+"px"}subtitleChange(e=!1){this.positionEnd&&(this.isCenter||e)&&(this.positionEnd=this.updatePosition({x:this.positionEnd.x,y:this.positionEnd.y}),this.move(this.positionEnd))}updateScreen(e){this.isFullscreen=e,this.resizePosition()}resizePosition(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=window.setTimeout(()=>{this.updateRule(),this.isBottomCenter?(this.setPosition("bc"),this.element.position.classList.remove("subtitle-position-changed")):this.subtitleChange()},200)}bindEvents(){const e=e=>{clearTimeout(this.changeTimer),this.positionEnd=this.updatePosition({x:e.clientX-this.positionStart.x+this.positionFix.x,y:e.clientY-this.positionStart.y+this.positionFix.y}),this.move(this.positionEnd)},t=i=>{clearTimeout(this.changeTimer),this.positionFix=this.positionEnd,this.mouseIsDown=!1,this.positionFix&&this.mouseUp(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)};this.element.wrap.addEventListener("mousedown",i=>{0===i.button&&(this.mouseIsDown=!0,this.positionStart={x:i.clientX,y:i.clientY},this.updateRule(),this.mouseDown(),this.updateRule(),document.addEventListener("mousemove",e),document.addEventListener("mouseup",t))})}mouseUp(){const e=.9*this.moveRule.width,t=this.moveRule.subtitleH,i=.25*this.moveRule.width,n=.75*this.moveRule.width,r=.75*this.moveRule.height,a=this.moveRule.subtitleX,o=this.positionFix.x+e/2,s=this.positionFix.y+t/2,l=e=>{e.top="auto",e.bottom=100-100*(this.positionFix.y+t)/this.moveRule.height+"%"};let u={};this.isBottomCenter=!1,o<i?(u={transform:"",textAlign:"left",left:100*(this.positionFix.x+a)/this.moveRule.width+"%",top:100*this.positionFix.y/this.moveRule.height+"%"},s>r&&l(u),this.isCenter=!1):o>n?(u={transform:"",textAlign:"right",left:"auto",right:100-100*(o+this.moveRule.subtitleW/2)/this.moveRule.width+"%",top:100*this.positionFix.y/this.moveRule.height+"%"},s>r&&l(u),this.isCenter=!1):(this.isCenter=!0,s>r&&(l(u),u.left=this.positionFix.x,u.transform="",this.isCenter=!1,this.isBottomCenter=!0)),Object.keys(u).forEach(e=>{this.element.position.style[e]=u[e]})}mouseDown(){const e=.9*this.moveRule.width,t=this.moveRule.subtitleW,i=this.moveRule.subtitleX;this.positionFix={x:this.element.position.offsetLeft+t/2-e/2+i,y:this.element.position.offsetTop},this.setPosition("changed"),this.move(this.positionFix)}move(e){this.element.position.style.transform=`translate(${e.x}px, ${e.y}px)`}updateRule(){const e=this.container.getBoundingClientRect(),t=this.element.wrap.getBoundingClientRect(),i=this.isFullscreen?54:44;this.moveRule={width:e.width,height:e.height,top:.05*e.height,left:.05*e.width,bottom:e.height-i,right:.95*e.width,subtitleX:this.element.wrap.offsetTop,subtitleH:t.height,subtitleW:t.width}}updatePosition(e){const t=this.moveRule;return e.x+t.subtitleX<t.left&&(e.x=t.left-t.subtitleX),e.x+t.subtitleW+t.subtitleX>t.right&&(e.x=t.right-t.subtitleW-t.subtitleX),e.y<t.top&&(e.y=t.top),e.y+t.subtitleH>t.bottom&&(e.y=t.bottom-t.subtitleH),e}resize(){this.resizeFont()}resetPosition(){this.positionFix={x:0,y:0},this.element.position.style.transform="",this.element.position.classList.remove("subtitle-position-changed")}}class Lr{constructor(e,t){this.showing=[],this.subtitleItems=[],this.options=e,this.subtitle=t,this.render=e.render,this.showing=[],this.index=0,window.requestAnimationFrame(()=>{this.frame()})}frame(){if(window.requestAnimationFrame(()=>{this.frame()}),!this.subtitle.paused&&this.subtitle.visibleStatus&&this.subtitleItems.length){const e=this.options.time();let t=this.subtitleItems[this.index];for(let t=0;t<this.showing.length;t++)this.showing[t].to<e&&this.wipe(this.showing[t]);for(;t&&t.from<=e;)t.to>e&&this.draw(t),this.index++,t=this.subtitleItems[this.index]}}draw(e){this.showing.push(e),this.render.draw(e,this.options.group),this.render.subtitleChange(),this.subtitle.player.trigger(Ee.EVENT.VIDEO_SUBTITLE_CHANGE)}wipe(e,t=!0){const i=this.showing.indexOf(e);i>-1&&(this.showing.splice(i,1),this.render.wipe(e,t),this.subtitle.player.trigger(Ee.EVENT.VIDEO_SUBTITLE_CHANGE))}refresh(){this.render.clear(this.options.group),this.showing=[],this.subtitle.player.trigger(Ee.EVENT.VIDEO_SUBTITLE_CHANGE),this.index=this.subtitleItems.length;for(let e=0;e<this.subtitleItems.length;e++)if(this.options.time()<=this.subtitleItems[e].from){this.index=e;break}for(let e=0;e<this.index;e++){const t=this.options.time();this.subtitleItems[e].from<=t&&this.subtitleItems[e].to>t&&this.draw(this.subtitleItems[e])}}update(e){this.subtitleItems=e.body,this.refresh()}clear(){this.render.clear(this.options.group),this.subtitleItems=[],this.showing=[],this.subtitle.player.trigger(Ee.EVENT.VIDEO_SUBTITLE_CHANGE)}resize(){this.render.resize()}destroy(){this.clear()}}class Cr extends Ne{constructor(e){super(e)}getData(e){return r()({url:this.data,method:"get"}).then(t=>{var i;null==(i=e.success)||i.call(e,this.convertResult(t.data))}).catch(t=>{var i;null==(i=e.error)||i.call(e,t)})}convertResult(e){const t=e.body.map(e=>({from:e.from,to:e.to,location:e.location,content:e.content}));return{fontSize:e.font_size,fontColor:e.font_color,backgroundAlpha:e.background_alpha,backgroundColor:e.background_color,stroke:e.Stroke,body:t}}}class br{constructor(e,t){this.visibleStatus=!0,this.data={},this.inited=!1;this.options=Object.assign({},e),this.player=t,this.data={},this.paused=this.player.video&&this.player.video.paused,this.init()}static convertData(e){const t=e.body.map(e=>({from:e.from,to:e.to,location:e.location,content:e.content}));return{fontSize:e.font_size,fontColor:e.font_color,backgroundAlpha:e.background_alpha,backgroundColor:e.background_color,stroke:e.Stroke,body:t}}load(e){const{url:t,group:i,callback:n}=e;this.data[t]?(this.update(this.data[t],i),"function"==typeof n&&n(this.data[t])):new Cr(t).getData({success:e=>{this.data[t]=e,this.update(e,i),"function"==typeof n&&n(e)},error:e=>{}})}update(e,t=0){this.isClosed=!1,e.body=e.body.sort((e,t)=>e.from-t.from),0===t?this.manager.update(e):1===t&&this.secondManager.update(e)}play(){this.paused=!1}pause(){this.paused=!0}visible(e){e!==this.visibleStatus&&(e?this.visibleStatus=!0:(this.visibleStatus=!1,this.clear()))}changeBilingual(e){e.double?this.load(e):this.secondManager.destroy()}init(){this.inited||(this.visibleStatus=!0,this.render=new Or({container:this.options.container}),this.manager=new Lr({time:this.options.time,render:this.render,group:0},this),this.secondManager=new Lr({time:this.options.time,render:this.render,group:1},this),this.bindEvents(),this.inited=!0)}bindEvents(){this.player.bind(Ee.EVENT.VIDEO_MEDIA_PLAY,()=>{this.play()}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_PAUSE,()=>{this.pause()}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_SEEK,()=>{this.pause()}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_SEEKED,()=>{this.refresh(),this.play()}),this.player.bind(Ee.EVENT.VIDEO_MEDIA_ENDED,()=>{this.refresh()}),this.player.bind(Ee.EVENT.VIDEO_PLAYER_RESIZE,()=>{let e=!1;(this.player.container.classList.contains("mode-fullscreen")||this.player.container.classList.contains("mode-webfullscreen"))&&(e=!0),this.render&&this.render.updateScreen(e),this.render&&this.render.resize()}),this.player.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.destroy()})}refresh(){this.manager.refresh(),this.secondManager.refresh()}resize(){this.manager.resize(),this.secondManager.resize()}clear(){this.isClosed=!0,this.manager.clear(),this.secondManager.clear()}destroy(){this.pause(),this.manager&&this.manager.destroy(),this.secondManager&&this.secondManager.destroy(),this.options.container.innerHTML="",this.data={}}setStyle(e){this.render.setStyle(e)}resetPosition(){this.render.resetPosition()}}class Rr{constructor(e){this.listeners=e=>{if(document.activeElement!==document.body)return;const{key:t}=e;switch(t){case"ArrowRight":e.cancelable&&e.preventDefault(),this.forward();break;case"ArrowLeft":e.cancelable&&e.preventDefault(),this.backward();break;case" ":e.cancelable&&e.preventDefault(),this.space()}},this.player=e,this.addListeners()}addListeners(){window.addEventListener("keydown",this.listeners)}removeListeners(){window.removeEventListener("keydown",this.listeners)}forward(){const e=this.player,t=e.currentTime()+e.config.seekTime;e.seek(t)}backward(){const e=this.player,t=Math.max(0,e.currentTime()-e.config.seekTime);e.seek(t,!0)}space(){const e=this.player;e.state.video_state===Ee.V_PLAY?e.pause():e.play()}destroy(){this.removeListeners()}}const xr={},Pr={};function jr(e,t){return E(this,null,(function*(){const i=function(e,t){let i=e.length-2;for(let n=0;n<e.length-1;n++)if(t>=e[n]&&t<e[n+1]){i=n-1;break}return i}(t.indexMap,e);if(Pr[i])return Pr[i];const n=function(e,t){const i=Math.floor(t/100),n=e[i];return e[i]?n:null}(t.images,i),r=function(e,t=160,i=90){return{imgX:-e%100%10*t,imgY:-Math.floor(e%100/10)*i}}(i);try{let e=null;xr[n]?e=xr[n]:(e=yield function(e){const t=new Image;return t.setAttribute("crossOrigin","anonymous"),t.src=e,new Promise((e,i)=>{t.onload=()=>e(t),t.onerror=()=>i()})}(n),xr[n]=e);const a=function(e,t){const i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(e.img,-e.x,-e.y,e.width,e.height,0,0,t.width,t.height),i.toDataURL("image/jpeg")}({img:e,x:r.imgX,y:r.imgY,width:t.size.xSize,height:t.size.ySize},{width:t.size.xSize,height:t.size.ySize});return Pr[i]=a,a}catch(e){return null}}))}function zr(e){const t=Math.floor(e/3600),i=e-3600*t,n=Math.floor(i/60),r=Math.floor(i%60);return{hour:t?kr(2,t):"",minute:n?kr(2,n):"",second:r?kr(2,r):""}}function kr(e=1,t){if(isNaN(Number(t)))return String(t);const i=/-/.test(String(t));let n=String(t).replace("-","");for(;n.length<e;)n="0"+n;return i?"-"+n:n}class Ur{constructor(e){this.disableUpdate=!1,this.slider=new $i(e.container,{videoProgress:!0,autohideThumb:!1,trackBreadth:3,thumbWidth:18,thumbHeight:18,thumbCenter:!0,showTooltip:!0,previewFrame:Boolean(e.player.config.previewData),formatTooltip(t){var i;const n=(null==(i=e.player)?void 0:i.duration())||0,r=Number((n*t+.5>n?n:t*n).toFixed(0)),a=function(e){const{hour:t,minute:i}=zr(e);return t?"hour":i?"minute":"second"}(n);return function(e,t){if(!e||"number"!=typeof e)return"hour"===t?"00:00:00":"minute"===t?"00:00":"00";const{hour:i,minute:n,second:r}=zr(e);return i||n||t?`${"hour"===t?i?i+":":"00:":i&&i+":"}${"second"===t?"":"minute"===t||"hour"===t||i||r?(n||"00")+":":"00"}${r||"00"}`:r}(r,"second"===a?"minute":a)}}),this.player=e.player;const t=this.player.template.container.getBoundingClientRect();this.slider.setPreviewContainerPosition(t.x,t.width);let i=0;this.slider.on("start",()=>{this.disableUpdate=!0}),this.slider.on("move",t=>{this.player.trigger(Ee.EVENT.VIDEO_MEDIA_SEEKING,{time:t.value*this.player.duration()}),e.onMove(t.value*this.player.duration()),this.disableUpdate&&i++}),this.slider.on("change",e=>{if(this.player.video&&e.manual){const t=this.player.duration()*e.value;this.player.track.pageReport("click","progressBar",{toTime:t,way:i>1?"drag":"click"}),this.player.seek(t)}}),e.player.config.previewData&&this.slider.on("preview-change",t=>E(this,null,(function*(){const{value:i}=t,n=this.player.duration(),r=yield jr(i*n,e.player.config.previewData);this.slider.setPreviewImg(r)}))),this.slider.on("end",()=>{this.disableUpdate=!1,i=0}),this.player.bind(Ee.EVENT.VIDEO_RESIZE,()=>{this.resize()}),this.player.bind(Ee.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED,()=>{this.resize()})}move(e){this.slider.move(e)}updateVideoTime(e,t){this.disableUpdate||(this.player.trigger(Ee.EVENT.VIDEO_PROGRESS_UPDATE,{currentTime:e}),this.slider.value(e/t))}setBufferValue(e){this.slider.bufferValue(e)}setRotate(e){this.slider.setRotate(e)}resize(){this.slider&&this.slider.resize();const e=this.player.template.container.getBoundingClientRect();this.slider.setPreviewContainerPosition(e.x,e.width)}}class Fr{constructor(e){this.container=e.container,this.player=e.player,this.isH5=e.player.config.isH5,this.playIcon=this.player.template.playIcon,this.pauseIcon=this.player.template.pauseIcon,this.stateIconToolTip=this.player.template.stateIconToolTip,this.isH5?this.player.template.playH5Mask.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.template.isControllerVisible()?this.player.state.video_state===Ee.V_PAUSE?this.play("playCenterPlay","play_screen"):this.player.state.video_state===Ee.V_PLAY&&this.pause("pauseCenterPlay","pause_screen"):this.player.template.csIn(!0)}):(this.player.template.playMask.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.play("playCenterPlay","play_screen")}),this.player.template.playMask.addEventListener("mousedown",e=>{e.stopPropagation(),this.play("playCenterPlay","play_screen")}),this.playIcon.addEventListener("mousedown",e=>{e.stopPropagation(),this.pause("playButton","pause_button")}),this.pauseIcon.addEventListener("mousedown",e=>{e.stopPropagation(),this.play("playButton","play_button")}))}pause(e,t){this.player.track.pageReport("click",e,{status:"off"}),this.player.track.trackInfoPush(t),this.player.pause()}play(e,t){this.player.track.pageReport("click",e,{status:"on"}),this.player.track.trackInfoPush(t),this.player.play()}setState(e){var t,i,n,r,a,o;const s=this.player.prefix;if("play"===e){if(this.isH5)return this.player.template.playH5MaskPlayIcon.classList.remove(s+"-play-h5-mask-icon--active"),void this.player.template.playH5MaskPauseIcon.classList.add(s+"-play-h5-mask-icon--active");this.player.template.playMask.classList.remove(this.player.prefix+"-active"),this.stateIconToolTip.innerHTML=null!=(i=null==(t=this.player.config.i18n)?void 0:t.pauseTip)?i:Bn.pauseTip,this.playIcon.classList.add(this.player.prefix+"-active"),this.pauseIcon.classList.remove(this.player.prefix+"-active")}else if("pause"===e){if(this.isH5)return this.player.template.playH5MaskPlayIcon.classList.add(s+"-play-h5-mask-icon--active"),void this.player.template.playH5MaskPauseIcon.classList.remove(s+"-play-h5-mask-icon--active");this.player.template.playMask.classList.add(this.player.prefix+"-active"),this.stateIconToolTip.innerHTML=null!=(r=null==(n=this.player.config.i18n)?void 0:n.playTip)?r:Bn.playTip,this.playIcon.classList.remove(this.player.prefix+"-active"),this.pauseIcon.classList.add(this.player.prefix+"-active"),this.player.template.playMask.classList.add(this.player.prefix+"-active")}else{if(this.isH5)return this.player.template.playH5MaskPlayIcon.classList.remove(s+"-play-h5-mask-icon--active"),void this.player.template.playH5MaskPauseIcon.classList.add(s+"-play-h5-mask-icon--active");this.player.template.playMask.classList.remove(this.player.prefix+"-active"),this.stateIconToolTip.innerHTML=null!=(o=null==(a=this.player.config.i18n)?void 0:a.pauseTip)?o:Bn.pauseTip,this.playIcon.classList.add(this.player.prefix+"-active"),this.pauseIcon.classList.remove(this.player.prefix+"-active")}}}class Br{constructor(e){this.container=e.container}setCurrentTime(e){this.container.innerHTML=ee(e)}}const Yr={playPreview:yn,openDanmu:hn,closeDanmu:fn,closeFullscreen:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDRweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNDQgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YnRuX2Z1bGxzY3JlZW5fcXVpdDwvdGl0bGU+CiAgICA8ZyBpZD0iYnRuX2Z1bGxzY3JlZW5fcXVpdCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb24vNDRweC9mdWxsc2NyZWVuIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgc3Ryb2tlPSIjOTc5Nzk3IiBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwIiB4PSIwLjUiIHk9IjAuNSIgd2lkdGg9IjQzIiBoZWlnaHQ9IjQzIj48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNCwyMi4yNSBDMTQuMzc5Njk1OCwyMi4yNSAxNC42OTM0OTEsMjIuNTMyMTUzOSAxNC43NDMxNTM0LDIyLjg5ODIyOTQgTDE0Ljc1LDIzIEwxNC43NDkxNDU4LDI4LjI1MDg1NDIgTDIwLDI4LjI1IEMyMC4zNzk2OTU4LDI4LjI1IDIwLjY5MzQ5MSwyOC41MzIxNTM5IDIwLjc0MzE1MzQsMjguODk4MjI5NCBMMjAuNzUsMjkgQzIwLjc1LDI5LjM3OTY5NTggMjAuNDY3ODQ2MSwyOS42OTM0OTEgMjAuMTAxNzcwNiwyOS43NDMxNTM0IEwyMCwyOS43NSBMMTQsMjkuNzUgQzEzLjYyMDMwNDIsMjkuNzUgMTMuMzA2NTA5LDI5LjQ2Nzg0NjEgMTMuMjU2ODQ2NiwyOS4xMDE3NzA2IEwxMy4yNSwyOSBMMTMuMjUsMjMgQzEzLjI1LDIyLjU4NTc4NjQgMTMuNTg1Nzg2NCwyMi4yNSAxNCwyMi4yNSBaIE0yMy41NDgxNDU4LDIyLjQwMSBMMjMuNTg4ODMwMiwyMi4zNzI1NzI3IEwyMy41ODg4MzAyLDIyLjM3MjU3MjcgQzIzLjYwODk4NTEsMjIuMzU5NDA3OCAyMy42Mjk5NzI1LDIyLjM0NzAyNzcgMjMuNjUxNTgxNywyMi4zMzU2NzEgQzIzLjY2MDcwMzYsMjIuMzMwODM3NCAyMy42Njk0MzQ0LDIyLjMyNjQ4MDggMjMuNjc4MjI5NiwyMi4zMjIzMDUxIEMyMy43MDY2MDU1LDIyLjMwODgwMDcgMjMuNzM2NzYyNiwyMi4yOTY3MzIyIDIzLjc2NzgwODcsMjIuMjg2NjM0IEMyMy43NzMxMDc2LDIyLjI4NDk2NTggMjMuNzc3NDcxMiwyMi4yODM1OTk5IDIzLjc4MTg0NDUsMjIuMjgyMjc0OCBDMjMuODE4OTM0LDIyLjI3MDkxODYgMjMuODU4MDc2OSwyMi4yNjIyOTM4IDIzLjg5ODIyOTQsMjIuMjU2ODQ2NiBMMjQsMjIuMjUgTDI5LDIyLjI1IEMyOS40MTQyMTM2LDIyLjI1IDI5Ljc1LDIyLjU4NTc4NjQgMjkuNzUsMjMgQzI5Ljc1LDIzLjM3OTY5NTggMjkuNDY3ODQ2MSwyMy42OTM0OTEgMjkuMTAxNzcwNiwyMy43NDMxNTM0IEwyOSwyMy43NSBMMjUuODEsMjMuNzQ5IEwzMC4xODcxODQzLDI4LjEyNjUyNDIgQzMwLjQ4MDA3NzYsMjguNDE5NDE3NCAzMC40ODAwNzc2LDI4Ljg5NDI5MTEgMzAuMTg3MTg0MywyOS4xODcxODQzIEMyOS45MjA5MTc4LDI5LjQ1MzQ1MDkgMjkuNTA0MjU0MSwyOS40Nzc2NTY5IDI5LjIxMDY0MjYsMjkuMjU5ODAyNSBMMjkuMTI2NTI0MiwyOS4xODcxODQzIEwyNC43NDksMjQuODEgTDI0Ljc1LDI4IEMyNC43NSwyOC4zNzk2OTU4IDI0LjQ2Nzg0NjEsMjguNjkzNDkxIDI0LjEwMTc3MDYsMjguNzQzMTUzNCBMMjQsMjguNzUgQzIzLjYyMDMwNDIsMjguNzUgMjMuMzA2NTA5LDI4LjQ2Nzg0NjEgMjMuMjU2ODQ2NiwyOC4xMDE3NzA2IEwyMy4yNSwyOCBMMjMuMjUsMjMgTDIzLjI1MDE0NTgsMjIuOTgyIEwyMy4yNTMxNzQ2LDIyLjkzMDUzMDUgQzIzLjI1NTI3NTUsMjIuOTA3NjU1OCAyMy4yNTg0MDM2LDIyLjg4NTA3ODQgMjMuMjYyNTEyNCwyMi44NjI4NDQ5IEMyMy4yNjQ1NzU4LDIyLjg1MTk2NzIgMjMuMjY3MDE0NywyMi44NDAyNzM5IDIzLjI2OTczNDcsMjIuODI4NjMzIEMyMy4yNzUxNzA5LDIyLjgwNTE3MjggMjMuMjgxNTc5MywyMi43ODI3MTY1IDIzLjI4ODk4MDMsMjIuNzYwNzE2NCBDMjMuMjkyMzAzLDIyLjc1MDkwODcgMjMuMjk2MDI4NSwyMi43NDA1NDM1IDIzLjI5OTk4OTMsMjIuNzMwMjQ4MSBDMjMuMzA3NDQ5NSwyMi43MTA5MDU4IDIzLjMxNTQ0NSwyMi42OTI0ODYxIDIzLjMyNDEzOTgsMjIuNjc0NDY3MiBDMjMuMzMxMDU4NCwyMi42NjAwMDkxIDIzLjMzODcwMTksMjIuNjQ1Mzc1NiAyMy4zNDY4NjA4LDIyLjYzMDk1NDcgQzIzLjM1NjgxMywyMi42MTM0OTE5IDIzLjM2NzQ2MTMsMjIuNTk2MzQxOSAyMy4zNzg3NjI5LDIyLjU3OTY3MDkgQzIzLjM4NTY4NTMsMjIuNTY5MzM4OCAyMy4zOTMxNzU3LDIyLjU1ODg3MDkgMjMuNDAwOTY3NywyMi41NDg1NTg0IEwyMy40NzIxOTYyLDIyLjQ2NzE1MzQgTDIzLjQ3MjE5NjIsMjIuNDY3MTUzNCBMMjMuNTMwMTQ1OCwyMi40MTcgTDIzLjQ3MTE0NTgsMjIuNDY3IEwyMy41MjczNDIxLDIyLjQxNzYwNTYgTDIzLjUyNzM0MjEsMjIuNDE3NjA1NiBMMjMuNTQyMTQ1OCwyMi40MDYgTDIzLjU0NTE0NTgsMjIuNDA0IEwyMy41NDgxNDU4LDIyLjQwMSBaIE0yOSwxMi4yNSBDMjkuMzc5Njk1OCwxMi4yNSAyOS42OTM0OTEsMTIuNTMyMTUzOSAyOS43NDMxNTM0LDEyLjg5ODIyOTQgTDI5Ljc1LDEzIEwyOS43NSwxOSBDMjkuNzUsMTkuNDE0MjEzNiAyOS40MTQyMTM2LDE5Ljc1IDI5LDE5Ljc1IEMyOC42MjAzMDQyLDE5Ljc1IDI4LjMwNjUwOSwxOS40Njc4NDYxIDI4LjI1Njg0NjYsMTkuMTAxNzcwNiBMMjguMjUsMTkgTDI4LjI1MDg1NDMsMTMuNzQ5MTQ1OCBMMjMsMTMuNzUgQzIyLjYyMDMwNDIsMTMuNzUgMjIuMzA2NTA5LDEzLjQ2Nzg0NjEgMjIuMjU2ODQ2NiwxMy4xMDE3NzA2IEwyMi4yNSwxMyBDMjIuMjUsMTIuNjIwMzA0MiAyMi41MzIxNTM5LDEyLjMwNjUwOSAyMi44OTgyMjk0LDEyLjI1Njg0NjYgTDIzLDEyLjI1IEwyOSwxMi4yNSBaIE0xOS40MTExNjk4LDE5LjYyNzQyNzMgQzE5LjM5MTAxNDksMTkuNjQwNTkyMiAxOS4zNzAwMjc1LDE5LjY1Mjk3MjMgMTkuMzQ4NDE4MywxOS42NjQzMjkgQzE5LjMzOTI5NjQsMTkuNjY5MTYyNiAxOS4zMzA1NjU2LDE5LjY3MzUxOTIgMTkuMzIxNzcwNCwxOS42Nzc2OTQ5IEMxOS4yOTMzOTQ1LDE5LjY5MTE5OTMgMTkuMjYzMjM3NCwxOS43MDMyNjc4IDE5LjIzMjE5MTMsMTkuNzEzMzY2IEMxOS4yMjY4OTI0LDE5LjcxNTAzNDIgMTkuMjIyNTI4OCwxOS43MTY0MDAxIDE5LjIxODE1NTUsMTkuNzE3NzI1MiBDMTkuMTgxMDY2LDE5LjcyOTA4MTQgMTkuMTQxOTIzMSwxOS43Mzc3MDYyIDE5LjEwMTc3MDYsMTkuNzQzMTUzNCBMMTksMTkuNzUgTDE0LDE5Ljc1IEMxMy41ODU3ODY0LDE5Ljc1IDEzLjI1LDE5LjQxNDIxMzYgMTMuMjUsMTkgQzEzLjI1LDE4LjYyMDMwNDIgMTMuNTMyMTUzOSwxOC4zMDY1MDkgMTMuODk4MjI5NCwxOC4yNTY4NDY2IEwxNCwxOC4yNSBMMTcuMTksMTguMjUxIEwxMi44MTI4MTU3LDEzLjg3MzQ3NTggQzEyLjUxOTkyMjQsMTMuNTgwNTgyNiAxMi41MTk5MjI0LDEzLjEwNTcwODkgMTIuODEyODE1NywxMi44MTI4MTU3IEMxMy4wNzkwODIyLDEyLjU0NjU0OTEgMTMuNDk1NzQ1OSwxMi41MjIzNDMxIDEzLjc4OTM1NzQsMTIuNzQwMTk3NSBMMTMuODczNDc1OCwxMi44MTI4MTU3IEwxOC4yNSwxNy4xODkgTDE4LjI1LDE0IEMxOC4yNSwxMy42MjAzMDQyIDE4LjUzMjE1MzksMTMuMzA2NTA5IDE4Ljg5ODIyOTQsMTMuMjU2ODQ2NiBMMTksMTMuMjUgQzE5LjM3OTY5NTgsMTMuMjUgMTkuNjkzNDkxLDEzLjUzMjE1MzkgMTkuNzQzMTUzNCwxMy44OTgyMjk0IEwxOS43NSwxNCBMMTkuNzQ5Nzk4MywxOS4wMTc0NDggTDE5Ljc0ODUwNjQsMTkuMDQ3NDU2NiBMMTkuNzQ4NTA2NCwxOS4wNDc0NTY2IEwxOS43NDYxNDU4LDE5LjA2OSBMMTkuNzQ2MDE5MywxOS4wNzc0MDQgTDE5LjczNzQ4NzYsMTkuMTM3MTU1MSBMMTkuNzM3NDg3NiwxOS4xMzcxNTUxIEMxOS43MzU0MjQyLDE5LjE0ODAzMjggMTkuNzMyOTg1MywxOS4xNTk3MjYxIDE5LjczMDI2NTMsMTkuMTcxMzY3IEMxOS43MjQ4MjkyLDE5LjE5NDgyNzIgMTkuNzE4NDIwNywxOS4yMTcyODM1IDE5LjcxMTAxOTcsMTkuMjM5MjgzNiBDMTkuNzA3Njk3LDE5LjI0OTA5MTMgMTkuNzAzOTcxNSwxOS4yNTk0NTY1IDE5LjcwMDAxMDcsMTkuMjY5NzUxOSBDMTkuNjkyNTUwNSwxOS4yODkwOTQyIDE5LjY4NDU1NSwxOS4zMDc1MTM5IDE5LjY3NTg2MDIsMTkuMzI1NTMyOCBDMTkuNjY4OTQxNiwxOS4zMzk5OTA5IDE5LjY2MTI5ODEsMTkuMzU0NjI0NCAxOS42NTMxMzkyLDE5LjM2OTA0NTMgQzE5LjY0MzE4NywxOS4zODY1MDgxIDE5LjYzMjUzODcsMTkuNDAzNjU4MSAxOS42MjEyMzcxLDE5LjQyMDMyOTEgQzE5LjYxNDMxNDcsMTkuNDMwNjYxMiAxOS42MDY4MjQzLDE5LjQ0MTEyOTEgMTkuNTk5MDMyMywxOS40NTE0NDE2IEwxOS41Mjc4MDM4LDE5LjUzMjg0NjYgTDE5LjUyNzgwMzgsMTkuNTMyODQ2NiBMMTkuNDY5MTQ1OCwxOS41ODIgTDE5LjUyODE0NTgsMTkuNTMyIEwxOS40NzI2NTc5LDE5LjU4MjM5NDQgTDE5LjQ3MjY1NzksMTkuNTgyMzk0NCBMMTkuNDU3MTQ1OCwxOS41OTMgTDE5LjQxMTE2OTgsMTkuNjI3NDI3MyBMMTkuNDExMTY5OCwxOS42Mjc0MjczIFoiIGlkPSLlvaLnirbnu5PlkIgiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",openFullscreen:gn,play:cn,pause:dn,close:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjEgKDg5NjUwKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT7lhbPpl608L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iSEgtSDXpobXpnaLlsJ3or5UiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlm77moIcvaWNvbjEt6aG26YOo5qCPL2ljb25fbmF2X2Nsb3NlX3doaXRlXzIyIiBmaWxsPSIjRkVGRUZFIj4KICAgICAgICAgICAgPGcgaWQ9Imljb25fbmF2X2Nsb3NlX3doaXRlXzIyIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjQ2OTY2OTkxLDQuNDY5NjY5OTEgQzQuNzYyNTYzMTMsNC4xNzY3NzY3IDUuMjM3NDM2ODcsNC4xNzY3NzY3IDUuNTMwMzMwMDksNC40Njk2Njk5MSBMNS41MzAzMzAwOSw0LjQ2OTY2OTkxIEwxMS4wNzEsMTAuMDEgTDE2LjYxMTgwNTUsNC40Njk2Njk5MSBDMTYuOTA0Njk4OCw0LjE3Njc3NjcgMTcuMzc5NTcyNSw0LjE3Njc3NjcgMTcuNjcyNDY1Nyw0LjQ2OTY2OTkxIEMxNy45NjUzNTg5LDQuNzYyNTYzMTMgMTcuOTY1MzU4OSw1LjIzNzQzNjg3IDE3LjY3MjQ2NTcsNS41MzAzMzAwOSBMMTIuMTMyLDExLjA3MSBMMTcuNjcyNDY1NywxNi42MTE4MDU1IEMxNy45Mzg3MzIzLDE2Ljg3ODA3MjEgMTcuOTYyOTM4MywxNy4yOTQ3MzU4IDE3Ljc0NTA4MzksMTcuNTg4MzQ3MyBMMTcuNjcyNDY1NywxNy42NzI0NjU3IEMxNy4zNzk1NzI1LDE3Ljk2NTM1ODkgMTYuOTA0Njk4OCwxNy45NjUzNTg5IDE2LjYxMTgwNTUsMTcuNjcyNDY1NyBMMTYuNjExODA1NSwxNy42NzI0NjU3IEwxMS4wNzEsMTIuMTMyIEw1LjUzMDMzMDA5LDE3LjY3MjQ2NTcgQzUuMjM3NDM2ODcsMTcuOTY1MzU4OSA0Ljc2MjU2MzEzLDE3Ljk2NTM1ODkgNC40Njk2Njk5MSwxNy42NzI0NjU3IEM0LjE3Njc3NjcsMTcuMzc5NTcyNSA0LjE3Njc3NjcsMTYuOTA0Njk4OCA0LjQ2OTY2OTkxLDE2LjYxMTgwNTUgTDEwLjAxLDExLjA3MSBMNC40Njk2Njk5MSw1LjUzMDMzMDA5IEM0LjIwMzQwMzM1LDUuMjY0MDYzNTIgNC4xNzkxOTczLDQuODQ3Mzk5ODQgNC4zOTcwNTE3Niw0LjU1Mzc4ODM1IFoiIGlkPSLlvaLnirbnu5PlkIgiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",panorama:pn,volOn:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl9Wb2wgT05AMXg8L3RpdGxlPgogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJPcHRpb25zLUljb25zLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzUuMDAwMDAwLCAtMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMS41Ij4KICAgICAgICAgICAgPGcgaWQ9Imljb25fVm9sLU9OIj4KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NS4wMDAwMDAsIDIuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlZvbC1PTiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDIuNTAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExLjI0NTI1NzksMS4wMTE5MzM2NiBDMTEuMTEwNDc0NiwwLjg1NDY4NjQ3NCAxMC45MjQ3MTQyLDAuNzY2OTU3NTkgMTAuNzMzMzM3OSwwLjc1MjIzNjMzMSBDMTAuNTQxOTYxNSwwLjczNzUxNTA3MSAxMC4zNDQ5NjkyLDAuNzk1ODAxNDM3IDEwLjE4NzcyMiwwLjkzMDU4NDc0MyBMNC43MDUwMTIzMyw1LjYzMDA1MDE0IEwyLDUuNjMwMDUwMTQgQzEuNjU0ODIyMDMsNS42MzAwNTAxNCAxLjM0MjMyMjAzLDUuNzY5OTYxMTYgMS4xMTYxMTY1Miw1Ljk5NjE2NjY3IEMwLjg4OTkxMTAxNiw2LjIyMjM3MjE4IDAuNzUsNi41MzQ4NzIxOCAwLjc1LDYuODgwMDUwMTQgTDAuNzUsMTEuNzM1MTg4NyBDMC43NSwxMi4wODAzNjY3IDAuODg5OTExMDE2LDEyLjM5Mjg2NjcgMS4xMTYxMTY1MiwxMi42MTkwNzIyIEMxLjM0MjMyMjAzLDEyLjg0NTI3NzcgMS42NTQ4MjIwMywxMi45ODUxODg3IDIsMTIuOTg1MTg4NyBMNC43MDUwMTIzMywxMi45ODUxODg3IEwxMC4xODc3MjIsMTcuNjg0NjU0MSBDMTAuMzIzNjU0MywxNy44MDExNjc1IDEwLjQ5Njc4MiwxNy44NjUyMTE2IDEwLjY3NTgxNTUsMTcuODY1MjExNiBDMTAuODgyOTIyMywxNy44NjUyMTE2IDExLjA3MDQyMjMsMTcuNzgxMjY1IDExLjIwNjE0NTYsMTcuNjQ1NTQxNyBDMTEuMzQxODY4OSwxNy41MDk4MTg0IDExLjQyNTgxNTUsMTcuMzIyMzE4NCAxMS40MjU4MTU1LDE3LjExNTIxMTYgTDExLjQyNTgxNTUsMS41MDAwMjcxOSBDMTEuNDI1ODE1NSwxLjMyMDk5Mzc0IDExLjM2MTc3MTQsMS4xNDc4NjYgMTEuMjQ1MjU3OSwxLjAxMTkzMzY2IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjE5NDU3NjUsMTMuOTQ2MzAwNSBDMTYuNDU2MzcyOSwxMi44NDYzNTQgMTcuMjUzNzUzNywxMS4yMjcyMDQgMTcuMjUzNzUzNyw5LjQyMTgxNTY4IEMxNy4yNTM3NTM3LDcuNjcxODAyNjcgMTYuNTA0NTM3Niw2LjA5Njc3ODQ1IDE1LjMwOTM2MjQsNSIgaWQ9Ik92YWwtNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTguMDU2ODcyNSwxNi40NzYzMDc5IEMyMC4wMTQwMDI4LDE0Ljc3MDIxNzUgMjEuMjUwNzkzNSwxMi4yNTg4MDgxIDIxLjI1MDc5MzUsOS40NTg1MzA2MSBDMjEuMjUwNzkzNSw2Ljc0NDE0Mzg4IDIwLjA4ODcwOTQsNC4zMDExNzY0MiAxOC4yMzQ5MTMxLDIuNiIgaWQ9Ik92YWwtNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",volOff:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl9Wb2wgb2ZmPC90aXRsZT4KICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iT3B0aW9ucy1JY29ucy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjEyLjAwMDAwMCwgLTIuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJpY29uX1ZvbC1vZmYiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEyLjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0i57yW57uELTExIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMi41MDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExLjI0NTI1NzksMS4wMTE5MzM2NiBDMTEuMTEwNDc0NiwwLjg1NDY4NjQ3NCAxMC45MjQ3MTQyLDAuNzY2OTU3NTkgMTAuNzMzMzM3OSwwLjc1MjIzNjMzMSBDMTAuNTQxOTYxNSwwLjczNzUxNTA3MSAxMC4zNDQ5NjkyLDAuNzk1ODAxNDM3IDEwLjE4NzcyMiwwLjkzMDU4NDc0MyBMNC43MDUwMTIzMyw1LjYzMDA1MDE0IEwyLDUuNjMwMDUwMTQgQzEuNjU0ODIyMDMsNS42MzAwNTAxNCAxLjM0MjMyMjAzLDUuNzY5OTYxMTYgMS4xMTYxMTY1Miw1Ljk5NjE2NjY3IEMwLjg4OTkxMTAxNiw2LjIyMjM3MjE4IDAuNzUsNi41MzQ4NzIxOCAwLjc1LDYuODgwMDUwMTQgTDAuNzUsMTEuNzM1MTg4NyBDMC43NSwxMi4wODAzNjY3IDAuODg5OTExMDE2LDEyLjM5Mjg2NjcgMS4xMTYxMTY1MiwxMi42MTkwNzIyIEMxLjM0MjMyMjAzLDEyLjg0NTI3NzcgMS42NTQ4MjIwMywxMi45ODUxODg3IDIsMTIuOTg1MTg4NyBMNC43MDUwMTIzMywxMi45ODUxODg3IEwxMC4xODc3MjIsMTcuNjg0NjU0MSBDMTAuMzIzNjU0MywxNy44MDExNjc1IDEwLjQ5Njc4MiwxNy44NjUyMTE2IDEwLjY3NTgxNTUsMTcuODY1MjExNiBDMTAuODgyOTIyMywxNy44NjUyMTE2IDExLjA3MDQyMjMsMTcuNzgxMjY1IDExLjIwNjE0NTYsMTcuNjQ1NTQxNyBDMTEuMzQxODY4OSwxNy41MDk4MTg0IDExLjQyNTgxNTUsMTcuMzIyMzE4NCAxMS40MjU4MTU1LDE3LjExNTIxMTYgTDExLjQyNTgxNTUsMS41MDAwMjcxOSBDMTEuNDI1ODE1NSwxLjMyMDk5Mzc0IDExLjM2MTc3MTQsMS4xNDc4NjYgMTEuMjQ1MjU3OSwxLjAxMTkzMzY2IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjEuNSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTYuMjM0MTE4Nyw2LjQ3MzQyMzEzIEwxOC4wMDkxOTE3LDguMjQ1OTc3MzggTDE5Ljc4NjExMzEsNi40NzM0MjMxMyBDMjAuMDUxNDg0Miw2LjIwODQ4Njc3IDIwLjQ2NjM3Nyw2LjE4NDU2MTgzIDIwLjc1ODc1NDMsNi40MDE1MzY3OCBMMjAuODQyNTE5OSw2LjQ3Mzg1NjE1IEMyMC44NDI2NjQxLDYuNDc0MDAwMzEgMjAuODQyODA4Miw2LjQ3NDE0NDUzIDIwLjg0Mjk1MjMsNi40NzQyODg4MSBMMjAuOTE1MTIxNyw2LjU1ODAyNjE3IEMyMS4xMzE1OTY0LDYuODUwMjc4NSAyMS4xMDcxNzczLDcuMjY0NzQxNTQgMjAuODQyMDg3Myw3LjUyOTM5NzI2IEwyMC44NDIwODczLDcuNTI5Mzk3MjYgTDE5LjA2NjE5MTcsOS4zMDA5NzczOCBMMjAuODQxODgwNiwxMS4wNzM2MzYzIEMyMS4xMDY5NzA2LDExLjMzODI5MjEgMjEuMTMxMzg5NywxMS43NTI3NTUxIDIwLjkxNDkxNSwxMi4wNDUwMDc0IEwyMC44NDI3NDU1LDEyLjEyODc0NDggQzIwLjg0MjYwMTUsMTIuMTI4ODg5MSAyMC44NDI0NTc0LDEyLjEyOTAzMzMgMjAuODQyMzEzMiwxMi4xMjkxNzc1IEMyMC41NTA2NDQsMTIuNDIwODQ2NiAyMC4wNzc4MTQ2LDEyLjQyMTA0MDUgMTkuNzg1OTA2NCwxMi4xMjk2MTA1IEwxOC4wMDkxOTE3LDEwLjM1NTk3NzQgTDE2LjIzNDMyNTQsMTIuMTI5NjEwNSBDMTUuOTY4OTU0MywxMi4zOTQ1NDY4IDE1LjU1NDA2MTYsMTIuNDE4NDcxOCAxNS4yNjE2ODQzLDEyLjIwMTQ5NjggTDE1LjE3NzkxODYsMTIuMTI5MTc3NSBDMTUuMTc3Nzc0NCwxMi4xMjkwMzMzIDE1LjE3NzYzMDMsMTIuMTI4ODg5MSAxNS4xNzc0ODYzLDEyLjEyODc0NDggTDE1LjEwNTMxNjgsMTIuMDQ1MDA3NCBDMTQuODg4ODQyMSwxMS43NTI3NTUxIDE0LjkxMzI2MTMsMTEuMzM4MjkyMSAxNS4xNzgzNTEzLDExLjA3MzYzNjMgTDE1LjE3ODM1MTMsMTEuMDczNjM2MyBMMTYuOTUyMTkxNyw5LjMwMDk3NzM4IEwxNS4xNzgxNDQ2LDcuNTI5Mzk3MjYgQzE0LjkxMzA1NDUsNy4yNjQ3NDE1NCAxNC44ODg2MzU0LDYuODUwMjc4NSAxNS4xMDUxMTAxLDYuNTU4MDI2MTcgTDE1LjE3NzI3OTYsNi40NzQyODg4MSBDMTUuMTc3NDIzNiw2LjQ3NDE0NDUzIDE1LjE3NzU2NzcsNi40NzQwMDAzMSAxNS4xNzc3MTE5LDYuNDczODU2MTUgQzE1LjQ2OTM4MTEsNi4xODIxODY5NSAxNS45NDIyMTA1LDYuMTgxOTkzMTQgMTYuMjM0MTE4Nyw2LjQ3MzQyMzEzIFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},Qr={};let Gr=0;const Vr=e=>{Object.defineProperty(Qr,e,{enumerable:!0,configurable:!0,get:()=>`<img src=${Yr[e]} class="bp-svgicon">`.replace(/svgo-inline-loader-/g,`pid-${Gr++}-svgo-`)})};for(const e in Yr)Object.hasOwnProperty.call(Yr,e)&&Vr(e);class Hr{constructor(e){this.calc=()=>{ce(this.fullscreenToolTip,this.player.template.display,"top")},this.container=e.container,this.player=e.player,this.fullType="web",this.fullscreenIcon=this.player.template.fullscreenIcon,this.fullscreenToolTip=this.player.template.fullscreenToolTip,un.raw&&un.enabled&&(this.fullType="element"),un.judgeFullscreen(document)?(this.setState(!1),this.player.state.mode=Ee.UI_FULL):(this.setState(!0),this.player.state.mode=Ee.UI_NORMAL),"web"===this.fullType&&window!==window.parent&&(document.createElement("video").webkitEnterFullscreen?this.fullType="video":this.container.style.display="none"),"element"===this.fullType&&window===window.parent&&se.version.mqq&&(this.fullType="web"),"element"===this.fullType&&se.version.vivo&&(this.fullType="web"),window!==window.parent&&navigator.userAgent.match("Android")&&navigator.userAgent.match("BiliApp")&&(this.container.style.display="none"),this.player.config.portraitFullScreen&&(this.player.bind(Ee.EVENT.VIDEO_METADATA_LOADED,()=>{this.setEnableRotate()}),this.player.bind(Ee.EVENT.VIDEO_RESIZE,()=>{this.setEnableRotate()})),this.container.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.state.mode!==Ee.UI_NORMAL?(this.player.track.pageReport("click","fullScreen",{status:"off"}),this.onVideoMode(Ee.UI_NORMAL)):(this.player.track.pageReport("click","fullScreen",{status:"on"}),"web"===this.fullType?this.onVideoMode(Ee.UI_WEB_FULL):this.onVideoMode(Ee.UI_FULL))}),this.container.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.state.mode!==Ee.UI_NORMAL?(this.player.track.pageReport("click","fullScreen",{status:"off"}),this.onVideoMode(Ee.UI_NORMAL)):(this.player.track.pageReport("click","fullScreen",{status:"on"}),"web"===this.fullType?this.onVideoMode(Ee.UI_WEB_FULL):this.onVideoMode(Ee.UI_FULL))}),"element"===this.fullType?document.addEventListener("fullscreenchange",()=>{document.fullscreenElement?this.onVideoMode(Ee.UI_FULL):this.onVideoMode(Ee.UI_NORMAL)},!1):"video"===this.fullType&&this.player.bind(Ee.EVENT.VIDEO_MEDIA_ATTACHED,(e,t)=>{this.player.video.addEventListener("webkitendfullscreen",()=>{this.onVideoMode(Ee.UI_NORMAL)},!1)}),this.calc(),window.addEventListener("resize",this.calc)}setState(e){var t,i,n,r;e?(this.container.classList.add(this.player.prefix+"-active"),this.fullscreenIcon.innerHTML=""+Qr.openFullscreen,this.fullscreenToolTip.innerText=null!=(i=null==(t=this.player.config.i18n)?void 0:t.fullscreenTip)?i:Bn.fullscreenTip,this.enableRotate&&this.setRotate(!1)):(this.container.classList.remove(this.player.prefix+"-active"),this.fullscreenIcon.innerHTML=""+Qr.closeFullscreen,this.fullscreenToolTip.innerText=null!=(r=null==(n=this.player.config.i18n)?void 0:n.closeFullscreenTip)?r:Bn.closeFullscreenTip,this.enableRotate&&this.setRotate(!0)),this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{var e,t;const i=null==(e=this.player.template)?void 0:e.area.clientWidth,n=null==(t=this.player.template)?void 0:t.area.clientHeight;(this.player.controller.lastWidth!==i||this.player.controller.lastHeight!==n)&&(this.player.controller.lastWidth=i,this.player.controller.lastHeight=n,this.player.trigger(Ee.EVENT.VIDEO_PLAYER_RESIZE))},50)}setEnableRotate(){if(this.player.video.videoHeight&&this.player.video.videoWidth&&"video"!==this.fullType){const e=Math.min(window.innerHeight/this.player.video.videoHeight,window.innerWidth/this.player.video.videoWidth),t=Math.min(window.innerHeight/this.player.video.videoWidth,window.innerWidth/this.player.video.videoHeight);this.enableRotate=e<t,this.player.state.mode!==Ee.UI_NORMAL&&(this.enableRotate?this.setRotate(!0):this.setRotate(!1))}}setRotate(e){e?(this.player.template.area.classList.add(this.player.prefix+"-rotate"),this.player.controller.progressBar.setRotate(!0),this.player.danmaku.setRotate(!0),this.player.panorama&&this.player.panorama.setRotate(!0)):(this.player.template.area.classList.remove(this.player.prefix+"-rotate"),this.player.controller.progressBar.setRotate(!1),this.player.danmaku.setRotate(!1),this.player.panorama&&this.player.panorama.setRotate(!1))}onVideoMode(e){this.player.state.mode!==e&&(this.player.state.mode=e,e===Ee.UI_NORMAL?(this.setState(!0),this.player.template.area.classList.remove(this.player.prefix+"-wide"),"element"===this.fullType&&document.fullscreenElement&&un.exit(this.player.window.document)):e===Ee.UI_WEB_FULL?(this.setState(!1),this.player.template.area.classList.add(this.player.prefix+"-wide")):e===Ee.UI_FULL&&(this.setState(!1),this.player.template.area.classList.add(this.player.prefix+"-wide"),"element"===this.fullType?un.request(this.player.container):"video"===this.fullType&&this.player.video.webkitEnterFullscreen()),this.player.trigger(Ee.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED,{mode:e}))}destroy(){window.removeEventListener("resize",this.calc)}}class Wr{constructor(e){this.container=e.container,this.player=e.player,this.container.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.visible()}),this.container.addEventListener("mousedown",e=>{e.stopPropagation(),this.visible()})}visible(){this.player.danmaku.visible()?(this.player.danmaku.visible(!1),this.setState(!1),this.container.innerHTML=`<i class="${this.player.prefix}-icon ${this.player.prefix}-icon-comment">${Qr.closeDanmu}</i>`):(this.player.danmaku.visible(!0),this.setState(!0),this.container.innerHTML=`<i class="${this.player.prefix}-icon ${this.player.prefix}-icon-comment">${Qr.openDanmu}</i>`)}setState(e){e?this.container.classList.add(this.player.prefix+"-active"):this.container.classList.remove(this.player.prefix+"-active"),this.player.track.pageReport("click","danmuButton",{status:e?"on":"off"}),this.player.trigger(Ee.EVENT.VIDEO_DANMAKU_STATUS_CHANGED,e)}}class qr{constructor(e){this.showConfig={speed:!1,delayTime:400},this.showWxBtn=!1,this.player=e,this.btnWideScreenCallApp=this.player.template.btnWideScreenCallApp,this.wxOpenAppWideScreenBtn=this.player.template.wxOpenAppWideScreenBtn,this.btnSpeedCallApp=this.player.template.btnSpeedCallApp,this.wxOpenAppSpeedBtn=this.player.template.wxOpenAppSpeedBtn,this.btnQualityCallApp=this.player.template.btnQualityCallApp,this.wxOpenAppQualityBtn=this.player.template.wxOpenAppQualityBtn,this.btnCommentCallApp=this.player.template.btnCommentCallApp,this.wxOpenAppCommentBtn=this.player.template.wxOpenAppCommentBtn,this.showWxBtn=se.version.wx,this.init(),this.bind()}bind(){this.player.bind(Ee.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED,e=>E(this,[e],(function*({mode:e}){var t,i,n,r,a,o,s,l,u;e!==Ee.UI_NORMAL&&(this.player.track.pageReport("show","dmsend"),this.player.track.pageReport("show","openbtn"),this.player.track.pageReport("show","hd",{definition:this.definition}),this.showWxBtn&&window.PlayerAgent&&window.PlayerAgent.wxOpenTagDom&&(this.wxOpenAppWideScreenBtn.innerHTML=this.getWxOpenTagDom("openbtn"),this.wxOpenAppCommentBtn.innerHTML=this.getWxOpenTagDom("dmsend"),this.wxOpenAppQualityBtn.innerHTML=this.getWxOpenTagDom("hd"),null==(t=this.wxOpenAppWideScreenBtn.querySelector("wx-open-launch-app"))||t.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.track.pageReport("click","openbtn"),this.player.track.trackInfoPush("openbtn")}),null==(i=this.wxOpenAppWideScreenBtn.querySelector("wx-open-launch-app"))||i.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.track.pageReport("click","openbtn"),this.player.track.trackInfoPush("openbtn")}),null==(n=this.wxOpenAppWideScreenBtn.querySelector("wx-open-launch-app"))||n.addEventListener("error",e=>{this.callApp("openbtn"),console.error(e)}),null==(r=this.wxOpenAppCommentBtn.querySelector("wx-open-launch-app"))||r.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.track.pageReport("click","dmsend"),this.player.track.trackInfoPush("dmsend")}),null==(a=this.wxOpenAppCommentBtn.querySelector("wx-open-launch-app"))||a.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.track.pageReport("click","dmsend"),this.player.track.trackInfoPush("dmsend")}),null==(o=this.wxOpenAppCommentBtn.querySelector("wx-open-launch-app"))||o.addEventListener("error",e=>{this.callApp("dmsend"),console.error(e)}),null==(s=this.wxOpenAppQualityBtn.querySelector("wx-open-launch-app"))||s.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.track.pageReport("click","hd",{definition:this.definition}),this.player.track.trackInfoPush("hd",JSON.stringify({definition:this.definition}))}),null==(l=this.wxOpenAppQualityBtn.querySelector("wx-open-launch-app"))||l.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.track.pageReport("click","hd",{definition:this.definition}),this.player.track.trackInfoPush("hd",JSON.stringify({definition:this.definition}))}),null==(u=this.wxOpenAppQualityBtn.querySelector("wx-open-launch-app"))||u.addEventListener("error",e=>{this.callApp("hd"),console.error(e)})))}))),this.player.bind(Ee.EVENT.VIDEO_MEDIA_PLAY,()=>{this.showConfig.speed||(this.showConfig.speed=!0,setTimeout(()=>{this.player.track.pageReport("show","speed")},this.showConfig.delayTime))}),setTimeout(()=>{var e,t,i;this.showWxBtn&&window.PlayerAgent&&window.PlayerAgent.wxOpenTagDom&&(this.wxOpenAppSpeedBtn.innerHTML=this.getWxOpenTagDom("speed"),null==(e=this.wxOpenAppSpeedBtn.querySelector("wx-open-launch-app"))||e.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.track.pageReport("click","speed"),this.player.track.trackInfoPush("speed")}),null==(t=this.wxOpenAppSpeedBtn.querySelector("wx-open-launch-app"))||t.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.track.pageReport("click","speed"),this.player.track.trackInfoPush("speed")}),null==(i=this.wxOpenAppSpeedBtn.querySelector("wx-open-launch-app"))||i.addEventListener("error",e=>{this.callApp("speed"),console.error(e)}))},this.showConfig.delayTime),this.btnWideScreenCallApp.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.handleOpenApp(e,"openbtn")}),this.btnWideScreenCallApp.addEventListener("mousedown",e=>{e.stopPropagation(),this.handleOpenApp(e,"openbtn")}),this.btnSpeedCallApp.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.handleOpenApp(e,"speed")}),this.btnSpeedCallApp.addEventListener("mousedown",e=>{e.stopPropagation(),this.handleOpenApp(e,"speed")}),this.btnQualityCallApp.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.handleOpenApp(e,"hd")}),this.btnQualityCallApp.addEventListener("mousedown",e=>{e.stopPropagation(),this.handleOpenApp(e,"hd")}),this.btnCommentCallApp&&(this.btnCommentCallApp.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.handleOpenApp(e,"dmsend")}),this.btnCommentCallApp.addEventListener("mousedown",e=>{e.stopPropagation(),this.handleOpenApp(e,"dmsend")}))}handleOpenApp(e,t){e.stopPropagation(),this.showWxBtn||(this.player.track.pageReport("click",t,"hd"===t?{definition:this.definition}:{}),this.player.track.trackInfoPush(t,"hd"===t?JSON.stringify({definition:this.definition}):""),this.callApp(t))}callApp(e){window.PlayerAgent&&window.PlayerAgent.openApp&&window.PlayerAgent.openApp({aid:this.player.config.aid,bvid:this.player.config.bvid,event:e})}getWxOpenTagDom(e){return window.PlayerAgent.wxOpenTagDom({aid:this.player.config.aid,bvid:this.player.config.bvid,event:e})||""}init(){const e={cid:this.player.config.cid,bvid:this.player.config.bvid,qn:16,type:"mp4",platform:"html5",otype:"json"};let t="清晰度";new Re(e).getData({url:Me.PLAYURL,success:e=>{var i,n;const r=Number(null==(n=null==(i=e.data)?void 0:i.high_format)?void 0:n.quality);r>64&&r<120?t="高清":120===r?t="4K":r>120&&(t="HDR"),this.definition=r,this.btnQualityCallApp.getElementsByClassName(this.player.prefix+"-content-text")[0].textContent=t},error:e=>{this.btnQualityCallApp.getElementsByClassName(this.player.prefix+"-content-text")[0].textContent=t,console.error(e)}})}}class Zr extends Ne{constructor(e){super(e)}getData(e){const t=this.convertUpload(this.data);r()({url:Me.RECOMMEND,method:"get",params:t}).then(t=>{var i;null==(i=e.success)||i.call(e,this.convertResult(t.data))}).catch(t=>{"function"==typeof e.error&&e.error(t)})}convertUpload(e){return{aid:e.aid,bvid:e.bvid}}convertResult(e){const t=[],i=e.data||[];for(let e=0,n=i.length;e<n;e++){const n={aid:i[e].aid,cid:i[e].cid,bvid:i[e].bvid,attribute:i[e].attribute,copyright:i[e].copyright,ctime:i[e].ctime,desc:i[e].desc,duration:i[e].duration,dynamic:i[e].dynamic,owner:i[e].owner,pic:i[e].pic,pubdate:i[e].pubdate,rights:i[e].rights,stat:i[e].stat,state:i[e].state,tid:i[e].tid,title:i[e].title,tname:i[e].tname,videos:i[e].videos};t.push(n)}return t}}class Kr{constructor(e){this.reportedList={},this.player=e,this.container=this.player.template.endingPanel,this.firstShow=!0,this.index=0,this.player.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.destroy()})}getList(){const e={};this.player.config.bvid?e.bvid=this.player.config.bvid:e.aid=this.player.config.aid,new Zr(e).getData({success:e=>{if(this.list=e,this.container.querySelector(`.${this.player.prefix}-ending-panel-recommend`).classList.remove(this.player.prefix+"-hide"),this.start(),this.container.querySelector(`.${this.player.prefix}-ending-panel-video`).addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),e.stopPropagation(),window.PlayerAgent&&window.PlayerAgent.openApp&&window.PlayerAgent.openApp({aid:this.list[this.index-1].aid,bvid:this.list[this.index-1].bvid}),this.player.track.pageReport("click","playEnd_video",{pos:this.index-1,item_id:this.list[this.index-1].aid})}),this.container.querySelector(`.${this.player.prefix}-ending-panel-video`).addEventListener("mousedown",e=>{e.stopPropagation(),window.PlayerAgent&&window.PlayerAgent.openApp&&window.PlayerAgent.openApp({aid:this.list[this.index-1].aid,bvid:this.list[this.index-1].bvid}),this.player.track.pageReport("click","playEnd_video",{pos:this.index-1,item_id:this.list[this.index-1].aid})}),this.showWxBtn){const e=this.container.querySelector(`.${this.player.prefix}-ending-panel-wx-btn`);e.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.track.pageReport("click","playEnd_video",{pos:this.index-1,item_id:this.list[this.index-1].aid})}),e.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.track.pageReport("click","playEnd_video",{pos:this.index-1,item_id:this.list[this.index-1].aid})})}}})}start(){var e;this.list&&this.list.length&&(this.reportedList[this.list[this.index].aid]||(this.reportedList[this.list[this.index].aid]=1,this.player.track.pageReport("show","playEnd_video",{pos:this.index,item_id:this.list[this.index].aid})),this.counterEle.classList.remove(this.player.prefix+"-hidden"),this.picEle.setAttribute("src",this.list[this.index].pic+"@460w_280h_1c"),this.titleEle.innerHTML=this.list[this.index].title,this.showWxBtn&&(this.wxOpenAppBtn.innerHTML=window.PlayerAgent.wxOpenTagDom({aid:this.list[this.index].aid,bvid:this.list[this.index].bvid})||"",null==(e=this.wxOpenAppBtn.querySelector("wx-open-launch-app"))||e.addEventListener("error",()=>{window.PlayerAgent&&window.PlayerAgent.openApp&&window.PlayerAgent.openApp({aid:this.list[this.index].aid,bvid:this.list[this.index].bvid})})),this.index++,this.index===this.list.length&&(this.index=0),window.setTimeout(()=>{this.counterEle.classList.add(this.player.prefix+"-hidden")},500),this.timer=window.setTimeout(()=>{this.start()},3500))}stop(){clearTimeout(this.timer)}show(){if(this.container.style.display="block",this.firstShow){this.showWxBtn=se.version.wx&&window.PlayerAgent&&window.PlayerAgent.wxOpenTagDom,this.firstShow=!1;const e=this.player.prefix;this.container.innerHTML=`\n                <img class="${e}-ending-panel-background" src="${this.player.template.poster.getAttribute("src")}">\n                <div class="${e}-ending-panel-container ${this.player.config.noRecommend?e+"-ending-panel-container-norecommend":""}">\n                    <div class="${e}-ending-panel-recommend ${e}-hide">\n                        <div class="${e}-ending-panel-header">为你推荐：</div>\n                        <div class="${e}-ending-panel-video-wrap">\n                            <div class="${e}-ending-panel-video">\n                                <div class="${e}-ending-panel-pic">\n                                    <img>\n                                    <div class="${e}-ending-panel-counter"></div>\n                                </div>\n                                <div class="${e}-ending-panel-content">\n                                    <div class="${e}-ending-panel-title"></div>\n                                    <div class="${e}-ending-panel-button">App 内打开</div>\n                                </div>\n                            </div>\n                            ${this.showWxBtn?`<div class="${e}-ending-panel-wx-btn"></div>`:""}\n                        </div>\n                    </div>\n                    <div class="${e}-ending-panel-buttons">\n                        <div class="${e}-ending-panel-restart">\n                            <img src="//s1.hdslb.com/bfs/static/mult/images/ic_replay_end.png">\n                            <span>重新播放</span>\n                        </div>\n                    </div>\n                </div>\n            `,this.picEle=this.container.querySelector(`.${e}-ending-panel-pic img`),this.titleEle=this.container.querySelector(`.${e}-ending-panel-title`),this.wxOpenAppBtn=this.container.querySelector(`.${e}-ending-panel-wx-btn`),this.counterEle=this.container.querySelector(`.${e}-ending-panel-counter`),(this.player.config.bvid||this.player.config.aid)&&!this.list&&!this.player.config.noRecommend&&this.getList(),this.container.querySelector(`.${e}-ending-panel-restart`).addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),e.stopPropagation(),this.player.track.pageReport("click","playEnd_replay"),this.player.seek(0)}),this.container.querySelector(`.${e}-ending-panel-restart`).addEventListener("mousedown",e=>{e.cancelable&&e.preventDefault(),e.stopPropagation(),this.player.track.pageReport("click","playEnd_replay"),this.player.seek(0)})}else this.start()}hide(){this.container.style.display="none",this.stop()}destroy(){this.stop()}}class $r extends Ne{constructor(e){super(e)}getData(){return E(this,null,(function*(){const e=this.convertUpload(this.data),t=yield r()({url:Me.VIEW,method:"get",params:e,withCredentials:!0});if(!t.data.data)throw t.data;return this.convertResult(t.data.data)}))}convertUpload(e){return{aid:e.aid,cid:e.cid,bvid:e.bvid}}convertResult(e){const t=[];if(e.pages&&e.pages.length)for(let i=0;i<e.pages.length;i++){const n={cid:e.pages[i].cid,from:e.pages[i].from,duration:e.pages[i].duration,dimension:{width:e.pages[i].dimension.width,height:e.pages[i].dimension.height,rotate:e.pages[i].dimension.rotate},page:e.pages[i].page,part:e.pages[i].part,vid:e.pages[i].vid,weblink:e.pages[i].weblink};t.push(n)}return{aid:e.allow_bp,bvid:e.bvid,attribute:e.attribute,cid:e.cid,copyright:e.copyright,ctime:e.ctime,desc:e.desc,dimension:{width:e.dimension.width,height:e.dimension.height,rotate:e.dimension.rotate},duration:e.duration,dynamic:e.dynamic,noCache:e.no_cache,owner:{face:e.owner.face,mid:e.owner.mid,name:e.owner.name},pages:t,pic:e.pic,pubdate:e.pubdate,rights:{autoplay:e.rights.autoplay,bp:e.rights.bp,download:e.rights.download,elec:e.rights.elec,hd5:e.rights.hd5,movie:e.rights.movie,noReprint:e.rights.no_reprint,pay:e.rights.pay},stat:{aid:e.stat.aid,bvid:e.stat.bvid,coin:e.stat.coin,danmaku:e.stat.danmaku,dislike:e.stat.dislike,favorite:e.stat.favorite,hisRank:e.stat.hisRank,like:e.stat.like,nowRank:e.stat.nowRank,reply:e.stat.reply,share:e.stat.share,view:e.stat.view},state:e.state,tid:e.tid,title:e.title,tname:e.tname,videos:e.videos}}}class Xr{constructor(e){if(this.firstClickArea="other",this.controlBarTime=0,this.player=e,this.destroyed=!1,this.player.config.developer){const e=["wx","microWorkMessenger","mqq","microMessenger","android","iPhone","windowsPhone","webApp"];let t="";for(const i of e)if(se.version[i]){t=i;break}this.player.loadDeveloper(t,"mode")}this.timeLabel=new Br({container:this.player.template.timeCurrent}),this.progressBar=new Ur({container:this.player.template.contorlSlider,player:this.player,onMove:e=>{this.timeLabel.setCurrentTime(e)}}),this.startButton=new Fr({container:this.player.template.stateIcon,player:this.player}),this.player.config.hasDanmaku&&!this.player.config.hideDanmakuButton&&(this.danmakuButton=new Wr({container:this.player.template.btnDanamku,player:this.player})),this.player.config.noFullScreenButton||(this.fullscreenButton=new Hr({container:this.player.template.btnWidescreen,player:this.player})),this.player.config.callAppMode&&(this.callAppButton=new qr(this.player),this.endingpanel=new Kr(this.player)),this.initRecordTime();let t=0;const i=()=>{this.destroyed||(setTimeout(()=>{e.trigger(Ee.EVENT.VIDEO_RESIZE,e.state.mode)}),clearTimeout(t),t=window.setTimeout(()=>{var t,i;const n=null==(t=this.player.template)?void 0:t.area.clientWidth,r=null==(i=this.player.template)?void 0:i.area.clientHeight;(this.lastWidth!==n||this.lastHeight!==r)&&(this.lastWidth=n,this.lastHeight=r,e.trigger(Ee.EVENT.VIDEO_PLAYER_RESIZE))},50))};window.addEventListener("resize",()=>{i()}),window.addEventListener("orientationchange",()=>{i()}),this.keyBoard=new Rr(this.player),this.player.config.isH5?this.player.template.display.addEventListener("touchstart",e=>{this.touchShow(e)}):(this.player.template.display.addEventListener("mousedown",e=>{e.stopPropagation(),this.touchShow(e)}),this.player.template.display.addEventListener("mousemove",e=>{this.toggleControlBar(e,!0),e.target===this.player.template.display?this.controlBarTime=window.setTimeout(()=>{this.player.template.csIn(!1)},3e3):clearTimeout(this.player.controller.controlBarTime)}),this.player.template.display.addEventListener("mouseenter",e=>{e.stopPropagation();const t=this.player.state.video_state;[Ee.V_PLAY,Ee.V_COMPLETE].includes(t)?this.player.template.csIn(!0):this.player.template.toggleTopBar(!0)}),this.player.template.display.addEventListener("mouseleave",e=>{e.stopPropagation(),this.player.template.csIn(!1)})),this.player.bind(Ee.EVENT.VIDEO_MEDIA_ATTACHED,(e,t)=>{this.loadPoster()}),this.player.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.destroy()}),this.player.userLoadedCallback(e=>{e.lastplaytime&&(this.lastplaytime=e.lastplaytime/1e3)})}toggleControlBar(e,t){const i=this.player.state.video_state;clearTimeout(this.controlBarTime),e.target===this.player.template.display&&(![Ee.V_PLAY,Ee.V_PAUSE].includes(i)||this.player.template.csIn(t))}touchShow(e){if(clearTimeout(this.controlBarTime),this.controlBarTime=window.setTimeout(()=>{this.player.template.csIn(!1)},3e3),e.target===this.player.template.display){if("touchstart"===e.type){if(!this.player.template.isControllerVisible())return void this.player.template.csIn(!0);this.player.state.video_state===Ee.V_PLAY&&this.player.pause()}"mousedown"===e.type&&(this.player.template.toggleCsIn(),this.player.state.video_state===Ee.V_PLAY&&"mousedown"===e.type&&this.player.pause())}}getDefinition(){return this.qualityPromise||(this.qualityPromise=new Promise((e,t)=>{const i={cid:this.player.config.cid,bvid:this.player.config.bvid,qn:16,type:"mp4",platform:"html5",otype:"json"};new Re(i).getData({url:Me.PLAYURL,success:t=>{var i,n;this.definition=Number(null==(n=null==(i=t.data)?void 0:i.high_format)?void 0:n.quality),e(this.definition)},error:e=>{t(e)}})})),this.qualityPromise}showLastPlaytime(){this.lastplaytime&&this.lastplaytime>=1&&!this.firstShowLastPlaytime&&(this.firstShowLastPlaytime=!0,this.player.template.playTimeRecordTime.innerHTML=ee(this.lastplaytime),this.player.template.playTimeRecord.style.display="block",this.player.trigger(Ee.EVENT.RECORD_TIME_VISIBLE),this.player.track.pageReport("show","timeReminder"),this.player.template.playTimeRecordJump.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.player.seek(this.lastplaytime),this.hideToast("timeReminderGo")}),this.player.template.playTimeRecordClose.addEventListener("touchstart",e=>{e.cancelable&&e.preventDefault(),this.hideToast("timeReminderClose")}),this.player.template.playTimeRecordJump.addEventListener("mousedown",e=>{e.stopPropagation(),this.player.seek(this.lastplaytime),this.hideToast("timeReminderGo")}),this.player.template.playTimeRecordClose.addEventListener("mousedown",e=>{e.stopPropagation(),this.hideToast("timeReminderClose")}),this.hideRecordTimer=window.setTimeout(()=>{this.player.template.playTimeRecord.style.opacity="0",this.player.template.playTimeRecord.style.pointerEvents="none",this.player.trigger(Ee.EVENT.RECORD_TIME_HIDDEN)},8e3))}hideToast(e){this.player.template.playTimeRecord.style.opacity="0",this.player.template.playTimeRecord.style.pointerEvents="none",this.player.trigger(Ee.EVENT.RECORD_TIME_HIDDEN),this.player.track.pageReport("click",e)}loadPoster(){return E(this,null,(function*(){var e,t,i,n,r,a,o;let s;if(this.player.config.developer&&this.player.loadDeveloper("_onLoadPoster"),this.player.config.readyPoster&&(s=this.player.config.readyPoster.replace("http://","//"),null==(e=this.player.video)||e.setAttribute("poster",s),this.player.template.poster.setAttribute("src",s),this.player.template.poster.style.display="block",this.player.config.developer&&this.player.loadDeveloper("_onLoadPosterSuccess")),!this.player.config.noId){const e={aid:this.player.config.aid,bvid:this.player.config.bvid};let l;if(this.player.config.bvid?delete e.aid:delete e.bvid,l=null==(i=null==(t=window.__INITIAL_STATE__)?void 0:t.video)?void 0:i.viewInfo,!l)try{l=yield new $r(e).getData()}catch(e){console.error(e)}if(l){const e=this.player.config.readyDuration||(null==(n=l.pages.find(e=>e.cid===this.player.config.cid))?void 0:n.duration)||0;this.player.config.readyPoster||(s=l.pic.replace("http://","//")+"@480w_270h_1c",null==(r=this.player.video)||r.setAttribute("poster",s),this.player.template.poster.setAttribute("src",s),this.player.template.poster.style.display="block",this.player.config.developer&&this.player.loadDeveloper("_onLoadPosterSuccess")),this.player.template.videoTime.innerHTML=ee(e),this.player.config.hideCoverInfo||(this.player.template.viewCount.innerHTML=ue(null==(a=l.stat)?void 0:a.view)+"观看",this.player.template.danmuCount.innerHTML=ue(null==(o=l.stat)?void 0:o.danmaku)+"弹幕",this.player.template.videoPubDate.innerHTML=(e=>{if(!e)return;e=Number(e);const t=new Date,i=new Date(e),n=t.getTime()-e,r=new Date(t.toLocaleDateString()).getTime(),a=new Date(t.toLocaleDateString()),o=a.setTime(a.getTime()-864e5);return n<6e4?"刚刚":n<36e5?Math.floor(n/60/1e3)+"分钟前":e>r?Math.floor(n/3600/1e3)+"小时前":e>o?"昨天":i.getFullYear()===t.getFullYear()?oe(e,"-",!1):oe(e,"-")})(1e3*l.pubdate)),this.player.template.videoTips.style.display="flex",this.player.duration()||(this.player.template.timeTotal.innerHTML=ee(e))}}this.player.template.loadLayer.addEventListener("touchend",e=>{var t,i;e.cancelable&&e.preventDefault(),(null==(i=null==(t=e.target)?void 0:t.classList)?void 0:i.contains("icon-preview"))&&(this.firstClickArea="playCenterPlay"),this.player.play()}),this.player.template.loadLayer.addEventListener("mousedown",e=>{var t,i;e.stopPropagation(),(null==(i=null==(t=e.target)?void 0:t.classList)?void 0:i.contains("icon-preview"))&&(this.firstClickArea="playCenterPlay"),this.player.play()})}))}initRecordTime(){var e;try{this.recordData=JSON.parse(re("last_play_time_record")||"{}");let e=0;const t={};for(const i in this.recordData)e++,this.recordData[i].ct&&(t[this.recordData[i].ct]=i);if(e>30)for(const e in t){delete this.recordData[t[e]];break}}catch(e){this.recordData={}}let t=0,i=0;this.player.config.lastPlayTimeRecordName?this.recordName=this.player.config.lastPlayTimeRecordName:this.player.config.bvid?this.recordName=`bvid_${this.player.config.bvid}_play_${this.player.config.cid}`:this.player.config.aid&&(this.recordName=`aid_${this.player.config.aid}_play_${this.player.config.cid}`),this.recordName&&(this.recordTimer=window.setInterval(()=>{this.player.video&&(t=Number(this.player.currentTime())||0,Math.abs(t-i)>0&&(this.recordData[this.recordName]={t:t,ct:+new Date},ae("last_play_time_record",JSON.stringify(this.recordData)),i=t))},1e3),this.lastplaytime=null==(e=this.recordData[this.recordName])?void 0:e.t)}repeatPlay(){setTimeout(()=>{this.player.seek(0),this.player.play()})}setState(e){var t;this.player.config.developer&&this.player.loadDeveloper("_setState: "+e);const i=this.player;i.state.video_state=e,e===Ee.V_READY&&this.lastState===Ee.V_PLAY&&i.danmaku&&i.danmaku.play(),e===Ee.V_BUFF?this._onVideoBuff():this.player.template.bufferTips.classList.remove(this.player.prefix+"-active"),e===Ee.V_PLAY&&(this.lastState===Ee.V_COMPLETE?(this.lastState=e,i.currentTime().toFixed(2)===i.duration().toFixed(2)?(i.pause(),null==(t=this.endingpanel)||t.show()):this._onVideoPlay()):(this.lastState&&this.lastState!==Ee.V_PAUSE||(this.lastState=e),this._onVideoPlay())),e===Ee.V_PAUSE&&(this._onVideoPause(),this.lastState=e),e===Ee.V_COMPLETE&&(this.lastState=e,this._onVideoEnded())}_onVideoBuff(){this.player.config.developer&&this.player.loadDeveloper("_onVideoBuff..."),this.player.template.bufferTips.classList.add(this.player.prefix+"-active"),this.player.danmaku&&this.player.danmaku.pause()}_onVideoPlay(){var e;this.player.config.developer&&this.player.loadDeveloper("_onVideoPlay");const t=e=>{var t;console.log(e);const i={autoplayMode:this.player.config.autoplayMode,isMute:this.player.isMute()};if(this.player.trigger(Ee.EVENT.VIDEO_MEDIA_PLAY_FAIL,((e,t)=>c(e,d(t)))(m({autoplay:this.player.config.autoplay},i),{name:null==e?void 0:e.name,message:null==e?void 0:e.message,err:e})),"AbortError"===e.name&&this.player.config.developer&&this.player.loadDeveloper("_onVideoPlayAbort"),this.player.isPlayed||(this.player.template.loadLayer.style.display="block",this.player.video.style.display="none",this.player.template.csIn(!1)),e&&"NotAllowedError"===e.name){if(this.player.config.developer&&this.player.loadDeveloper("_NotAllowedError"),this.player.track.trackInfoPush("browser_forbid_autoplay",JSON.stringify(i)),this.player.template.loadLayer.style.display="block",this.player.template.csIn(!1),console.log(null==(t=this.player.video)?void 0:t.muted,this.player.config.autoplayMode),!this.player.isMute()&&"auto"===this.player.config.autoplayMode)return void this.player.setMute(!0).then(()=>{this.player.play()}).catch(e=>{});this.player.setMute(!1).then(()=>{}).catch(e=>{})}if(this.player.video&&this.player.video.readyState<=Ee.V_READY)return this.lastState=this.player.video.readyState,this.player.state.video_state=this.player.video.readyState,this.player.pause(),!0;this.player.state.video_state===Ee.V_PLAY&&this.player.pause()},i=this.player.video.play();i&&i.then(()=>{this.startButton.setState("play"),this.player.danmaku&&this.player.danmaku.play(),this.player.panorama&&this.player.panorama.display(!0),setTimeout(()=>{var e;if(null==(e=this.player.video)?void 0:e.paused){const e=new Error;e.name="NotAllowedError",t(e)}else this.player.isPlayed||(this.player.isPlayed=!0,this.player.video.style.display="block",this.player.template.loadLayer.style.display="none",this.player.template.poster.style.display="none",this.player.template.csIn(!0),this.player.state.video_state===Ee.V_PLAY&&(this.player.controller.controlBarTime=window.setTimeout(()=>{this.player.template.csIn(!1)},3e3)),this.player.trigger(Ee.EVENT.VIDEO_MEDIA_FIRST_PLAY_SUCCESS),this.player.config.developer&&this.player.loadDeveloper("_onVideoPlayFirstSuccess"),setTimeout(()=>{this.showLastPlaytime()},600)),this.player.trigger(Ee.EVENT.VIDEO_MEDIA_PLAY_SUCCESS),this.player.config.developer&&this.player.loadDeveloper("_onVideoPlaySuccess")},0)}).catch(e=>{this.player.config.developer&&this.player.loadDeveloper("_onVidePlayedPromiseCatch"),t(e)}).finally(()=>{this.player.template.bufferTips.classList.remove(this.player.prefix+"-active")}),null==(e=this.endingpanel)||e.hide()}_onVideoPause(){this.player.config.developer&&this.player.loadDeveloper("_onVideoPause"),this.player.isPlayed&&(this.startButton.setState("pause"),this.player.template.csIn(!0)),this.player.video&&this.player.video.pause(),this.player.danmaku&&this.player.danmaku.pause()}_onVideoEnded(){var e;this.player.config.developer&&this.player.loadDeveloper("_onVideoEnded"),this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ENDED),this.player.config.loop?this.repeatPlay():(this._onVideoPause(),null==(e=this.endingpanel)||e.show())}getLastState(){return this.lastState}setMode(e){this.fullscreenButton.onVideoMode(e)}destroy(){var e;this.destroyed=!0,window.clearInterval(this.recordTimer),window.clearTimeout(this.hideRecordTimer),window.clearTimeout(this.controlBarTime),this.keyBoard.destroy(),null==(e=this.fullscreenButton)||e.destroy()}}class Jr extends Ne{constructor(e){super(e)}static parseResult(e){const t=[];if(e.result){const i=[];e.result.main_section&&Array.isArray(e.result.main_section.episodes)&&i.push(...e.result.main_section.episodes),Array.isArray(e.result.section)&&e.result.section.forEach(e=>{e&&Array.isArray(e.episodes)&&i.push(...e.episodes)}),i.forEach((e,i)=>{t.push({title:e.title,long_title:e.long_title,badge:e.badge,badge_type:e.badge_type,avid:e.aid,cid:e.cid,bvid:e.bvid,episode_id:e.id,first_formal_ep_link:e.first_formal_ep_link,is_premiere:e.is_premiere,premiere_badge:e.premiere_badge,index:String(i+1)})})}return{code:e.code,message:e.message,result:t}}getData(e){let t="";return t=this.data.seasonType>0?Me.WEBAPI_GETEPLIST+this.data.url:Me.X_PLAYER_PAGELIST+this.data.url,r()({url:t,method:"get",withCredentials:!0}).then(({data:t})=>{var i;null==(i=e.success)||i.call(e,this.convertResult(t))}).catch(t=>{var i;console.log(t),null==(i=e.error)||i.call(e)})}convertResult(e){return this.data.seasonType>0?Jr.parseResult(e):{code:e.code,message:e.message,result:e.result,data:e.data,ttl:e.ttl}}}function ea(e){return(e&&Array.isArray(e.list)?e.list:[]).map(e=>{const t={face:e.face,hidden:e.hidden,message:e.message,rank:e.rank,uid:e.uid,uname:e.uname};return e.vip&&(t.vip={vipStatus:e.vip.vipStatus,vipType:e.vip.vipType}),t})}class ta{constructor(e){this.isPugv=!1,this.parts=null,this.partsInfo=null,this.loadPartsCallback=[],this.player=e,this.prefix=e.prefix,this.init()}init(){const e=this.player;this.loadPartsCallback=[],this.loadingParts=null,this.isPugv=this.player.config.type===fe.Pugv,[Ee.EVENT.VIDEO_MEDIA_PLAY,Ee.EVENT.VIDEO_MEDIA_PAUSE,Ee.EVENT.VIDEO_MEDIA_SEEK,Ee.EVENT.VIDEO_DESTROY].forEach(t=>{e.bind(t,()=>this.destroy())}),e.bind(Ee.EVENT.VIDEO_DESTROY,()=>{this.partsInfo=null}),e.bind(Ee.EVENT.VIDEO_BEFORE_DESTROY,()=>{this.updatePugvList()})}load(e,t,i,n){const r=Object.assign({},e),a=this.player;if("function"!=typeof r.doneCallback)r.doneCallback=B;else{const e=r.doneCallback;r.doneCallback=function(){e(a.config.aid,+a.config.cid,a.config.bvid)}}if("function"!=typeof r.failCallback)r.failCallback=B;else{const e=r.failCallback;r.failCallback=function(){e(a.config.aid,+a.config.cid,a.config.bvid)}}"function"!=typeof i&&(i=function(){}),this.parts?this.jump(r,t,i,n):this.loadParts(()=>{this.parts?this.jump(r,t,i,n):r.failCallback()},()=>{i(),r.failCallback()})}findNextP(e){let t,i;this.player.config.seasonType>0?(t=this.player.config.episodeId,i="episodeId"):(t=this.player.config.cid,i="cid"),this.loadParts(n=>{if(void 0===t||!n)return!1;let r;for(let e=0;e<n.length;e++)if(n[e]&&+n[e][i]===t&&e+2<=n.length){r=n[e+1];break}this.player.config.listLoop&&(r=r||n[0]),e(r||{})},()=>{e({})})}updateList(){this.player.extraParams=function(e){if("function"==typeof e.window.getPlayerExtraParams&&e.config.type!==fe.Pugv){const t=e.window.getPlayerExtraParams();if(t){e.config.record=t.record;const i=[];Array.isArray(t.recommend)&&t.recommend.forEach(e=>{i.push({cover:e.cover,title:e.title,link:e.link})}),t.paster&&(t.paster.url=t.paster.url||" "),void 0===t.canWatch&&(t.canWatch=!0);let n=null;if(t.headTail){n={hasData:!1,hasSkip:t.headTail.hasSkip,first:!1,head:null,tail:null};const e=t.headTail.op,i=t.headTail.ed;Array.isArray(e)&&(e[0]||e[1])&&(n.head=e),Array.isArray(i)&&(i[0]||i[1])&&(n.tail=i),(n.head||n.tail)&&(n.first=t.headTail.first,n.hasData=!0,n.hasSkip=!0)}return{headTail:n,title:t.title,epCover:t.epCover,epTitle:t.epTitle,epIndex:t.epIndex,mediaTitle:t.mediaTitle,squarePic:t.squarePic,record:t.record,shareText:t.shareText,sharePic:t.sharePic,shareUrl:t.shareUrl,isStart:t.isStart,multiMode:t.multiMode,epNeedPay:t.epNeedPay,isFollow:t.isFollow,isPreview:t.isPreview,allowSponsor:t.allowSponsor,sponsorCount:t.sponsorCount,canPlay1080:t.canPlay1080,pubTime:t.pubTime,recommend:i,sponsorWeekList:ea(t.sponsorWeekList),sponsorTotalList:ea(t.sponsorTotalList),paster:t.paster,epStat:t.epStat,allowTicket:t.allowTicket,deadLineToast:t.deadLineToast,canWatch:t.canWatch,epList:t.epList,nextEp:t.nextEp,whitelistToast:t.whitelistToast}}return null}return null}(this.player),this.getFromPage()}loadParts(e,t){if(this.partsInfo)return void e(this.partsInfo);if(this.isPugv)return Array.isArray(this.parts)&&this.parts.length>0&&this.parts.forEach(e=>{e.page=e.index}),void this.player.userLoadedCallback(()=>{this.parseParts(this.parts),e(this.partsInfo)});if(this.loadPartsCallback.push({success:e,error:t}),this.isNewPgc())return void this.getFromPage();if(this.loadingParts)return;let i;const n=this.player.config.seasonType;i=n>0?"?season_id="+this.player.config.seasonId+"&season_type="+this.player.config.seasonType:this.player.config.bvid?"?bvid="+this.player.config.bvid+"&jsonp=jsonp":"?aid="+this.player.config.aid+"&jsonp=jsonp",this.loadingParts=new Jr({url:i,seasonType:n}).getData({success:e=>{this.loadingParts=null,n>0?e&&0===e.code&&(this.parts=e.result):this.parts=e.data,this.parseParts(this.parts),this.loadCallback()},error:()=>{this.loadingParts=null,this.loadCallback(!1)}})}updatePugvList(){var e;const t=this.player.config.cid;this.isPugv&&(null==(e=this.parts)?void 0:e.length)&&this.parts.some(e=>{if(e.cid===t)return e.watchedHistory=this.player.currentTime(),!0})}isNewPgc(){return this.player.extraParams&&this.player.extraParams.epList}getFromPage(){const e=this.isNewPgc();if(void 0===e.result)return;const t=Jr.parseResult(e);this.parts=t.result,this.parseParts(t.result),this.loadCallback()}loadCallback(e=!0){if(e)for(let e=0;e<this.loadPartsCallback.length;e++)this.loadPartsCallback[e].success(this.partsInfo);else for(let e=0;e<this.loadPartsCallback.length;e++)this.loadPartsCallback[e].error()}parseParts(e){if(Array.isArray(e)&&e.length>0){let t;this.partsInfo=[],e.forEach(e=>{this.player.config.seasonType>0?(t={cid:e.cid,aid:e.avid,bvid:e.bvid,badge:e.badge,badgeType:e.badge_type,episodeId:e.episode_id,firstFormalEpLink:e.first_formal_ep_link,forFlag:e.cid,p:e.index,title:isNaN(e.title)?e.title:`第${e.title}话`,isPremiere:e.is_premiere?1:0,premiereBadge:e.premiere_badge||""},e.long_title&&(t.title=`${t.title} ${e.long_title}`)):this.isPugv?(t={p:e.index,badge:"",badgeType:e.status,episodeId:e.id,cid:e.cid,forFlag:e.cid,aid:e.aid,bvid:e.bvid,title:`第${e.index}话 ${e.title}`,lastplaytime:1e3*e.watchedHistory},1!==e.status&&2===this.player.user.status().pugv_pay_status&&(t.badge="付费")):t={p:e.page,badge:e.badge,badgeType:e.badge_type,cid:e.cid,forFlag:e.cid,aid:this.player.config.aid,bvid:this.player.config.bvid,title:`P${e.page} ${e.part}`},this.partsInfo.push(t)})}}jump(e,t,i,n){let r=e.p;const a=this.player,o=this.parts;let s,l,u,c,d,h,f;const p=a.config.seasonType;if(!o||!o.length||o.length<2&&!a.config.listLoop)i(),e.failCallback();else{if(void 0===r&&(r=this.search(p>0?a.config.episodeId:a.config.cid,p>0?"episode_id":"cid",p>0||"page"),!1===r||r++===o.length&&!a.config.listLoop))return i(),void e.failCallback();a.config.listLoop&&r>o.length&&(r=1),p>0?(c=r-1,o[c]&&(s=o[c].cid,l=o[c].avid,u=o[c].bvid,d=o[c].episode_id,h=o[c].is_premiere?1:0),r!==o.length||a.config.listLoop?this.player.config.hasNext=!0:this.player.config.hasNext=!1):s=this.search(r),f={aid:l,cid:s,bvid:u,p:r,episodeId:d,isPremiere:h},this.isPugv&&(f.episodeId=o[r-1].id,f.lastepid=o[r-1].id,f.lastplaytime=o[r-1].lastplaytime,f.aid=o[r-1].aid,f.bvid=o[r-1].bvid,f.badgeType=this.partsInfo[r-1].badgeType),s?(t(f),e.doneCallback()):(i(),e.failCallback())}}next(e,t){Number(this.player.config.playerType),this.isPugv}requestParts(){let e;const t=this.player.config.seasonType;return e=t>0?"?season_id="+this.player.config.seasonId+"&season_type="+this.player.config.seasonType:this.player.config.bvid?"?bvid="+this.player.config.bvid+"&jsonp=jsonp":"?aid="+this.player.config.aid+"&jsonp=jsonp",new Jr({url:e,seasonType:t}).getData({success:e=>{t>0?e&&0===e.code&&(this.parts=e.result):this.parts=e.data},error:()=>{}})}getPartsInfo(e,t){let i,n,r,a,o,s,l,u,c,d;if(i=this.player.config.seasonType>0?this.search(t,"episode_id",!0):this.search(e,"cid","page"),i&&i>=1){let e=this.parts;this.isPugv?(e=this.partsInfo,n=e[i-1],n&&(l=n.title,r=n.aid,a=n.cid,o=n.bvid,s=n.episodeId,u=n.p,c=n.lastplaytime)):(n=e[i-1],n&&(l=n.title,r=n.avid,a=n.cid,o=n.bvid,s=n.episode_id,u=n.index,d=n.is_premiere?1:0))}return{p:i,aid:r,cid:a,bvid:o,index:u,title:l,episodeId:s,lastplaytime:c,total:this.parts&&this.parts.length,isPremiere:d}}search(e,t,i){if(void 0===e||!this.parts)return!1;for(let n=0;n<this.parts.length;n++)if(this.parts[n]&&+this.parts[n][t||"page"]==+e)return!0===i?n+1:this.parts[n][i||"cid"];return!1}getParts(){let e;const t=this.player.config.seasonType;return e=t>0?"?season_id="+this.player.config.seasonId+"&season_type="+this.player.config.seasonType:this.player.config.bvid?"?bvid="+this.player.config.aid+"&jsonp=jsonp":"?aid="+this.player.config.aid+"&jsonp=jsonp",new Jr({url:e,seasonType:t,async:!1}).getData({success:e=>{t>0?e&&0===e.code&&(this.parts=e.result):this.parts=e.data},error:()=>{}}),this.parts}destroy(){}}var ia,na={};function ra(e,t,i){if(!i||typeof i.value!==ia.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:ia.boolTrue,get:function(){var e=i.value.bind(this);return Object.defineProperty(this,t,{value:e,configurable:ia.boolTrue,writable:ia.boolTrue}),e}}}Object.defineProperty(na,"__esModule",{value:!0}),function(e){e.typeOfFunction="function",e.boolTrue=!0}(ia||(ia={})),na.bind=ra;var aa=na.default=ra;class oa{constructor(e){this.player=e,this.video=e.video||document.createElement("video"),this.video.setAttribute("webkit-playsinline",""),this.video.setAttribute("playsinline",""),this.video.preload="metadata",this.video.crossOrigin="anonymous"}}class sa extends oa{constructor(e,t){super(e),this.player=e,this.url=t,this.type="NATIVE",this.load()}get typedInfo(){return{type:this.type,video:this.video,hasPrefetchData:!1}}load(){this.video.src=this.url}destroy(){this.video.src=""}}var la=Object.defineProperty,ua=Object.getOwnPropertyDescriptor;class ca extends oa{constructor(e,t){super(e),this.player=e,this.url=t,this.type="DASH",this.load()}get typedInfo(){return{type:this.type,video:this.video,player:this.dashPlayer,hasPrefetchData:!1}}load(){this.dashPlayer=new l.a(this.video,{enableHEVC:!0,isAutoPlay:!1,isDynamic:!1,abrStrategy:l.a.STRING.ABR_DYNAMIC,stableBufferTime:20,defaultVideoQuality:this.player.config.quality}),this.dashPlayer.initialize(this.url).then(()=>{}).catch(()=>{this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,4e3)}),window.dashPlayer=this.dashPlayer,this.dashPlayer.on(l.a.EVENTS.ERROR,this.onDashPlayerError)}onDashPlayerError(e){this.player.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,e.code)}clearInteraction(){!this.dashPlayer.getCorePlayer()||this.dashPlayer.off(l.a.EVENTS.ERROR,this.onDashPlayerError)}destroy(){this.clearInteraction(),this.dashPlayer.destroy()}}((e,t,i,n)=>{for(var r,a=n>1?void 0:n?ua(t,i):t,o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n?r(t,i,a):r(a))||a);n&&a&&la(t,i,a)})([aa],ca.prototype,"onDashPlayerError",1);var da=Object.defineProperty,ha=Object.getOwnPropertyDescriptor;class fa{constructor(e){this.prefix="player-mobile",this.destroyed=!1,this.userLoadedCallbacks=[],this.initialized=!1,this.isPlayed=!1,this.retryTime=3,this.savedCurrentTime=0,this.freezePause=!1,this.metadataloadedTimer=0,this.setMute=e=>new Promise(t=>{this.video?(this.trigger(Ee.EVENT.MUTED_CHANGE,e),this.video.muted=e,t(!0)):this.bind(Ee.EVENT.VIDEO_MEDIA_ATTACHED,()=>{this.trigger(Ee.EVENT.MUTED_CHANGE,e),this.video.muted=e,t(!0)})}),this.createdTime=+Date.now(),this.perf=new we(this),this.perf.setStageTiming(Se.init_s),this.config=e,this.container=this.config.element,this.videoQuality=this.config.quality||16;try{this.window=window.parent&&window.parent.document?window.parent:window,this.iframe=window.frameElement}catch(e){this.window=window}this.session=J(),this.buvid=ne("buvid3"),this.events=new be(this),this.reloadMedia=new me(this),this.getVideoData(),this._beforeInit(),this._init(),"function"==typeof this.config.beforeplay&&this.config.beforeplay()}_beforeInit(){this.pid=1e3*(new Date).getTime()+Math.floor(900*Math.random())+100,r.a.interceptors.request.use((function(e){return("post"===e.method||"POST"===e.method)&&e.data&&!e.data.csrf&&Object.assign(e.data,{csrf:ne("bili_jct")}),e}))}_init(e,t){this.track=new Oe(this),e&&this.getVideoData(),this.destroyed=!1,this.userLoadedCallbacks=[],this.timerChecker=null,this.config,this.state=Object.assign({video_state:Ee.V_IDEL,danmaku:this.config.danmaku&&this.config.hasDanmaku?Ee.DM_ON:Ee.DM_OFF,mode:Ee.UI_NORMAL,video_type:2},e),this.user=new Ce(this),this.loadTemplate(),t&&(this.session=J()),window.addEventListener("unload",()=>{this.destroy()}),window.MutationObserver&&(this.observer=new window.MutationObserver(e=>{for(let t=0;t<e.length;t++){const i=e[t].removedNodes;for(let e=0;e<i.length;e++)if(i[e]===this.template.wrap){this.destroy();break}}}),this.observer.observe(this.container,{attributes:!1,childList:!0,subtree:!1}))}initPartmanager(){return this.partmanager||(this.partmanager=new ta(this)),this.partmanager}getVideoData(e,t,i){if(this.perf.setStageTiming(Se.playurl_s),this.config.readyVideoUrl)this.perf.setStageTiming(Se.playurl_e),setTimeout(()=>{this.load({mediaDataSource:{type:"mp4",url:this.config.readyVideoUrl}}),this.config.readyVideoUrl=null},0);else if(!this.config.noId){t||(t="mp4");const n={domain:this.config.seasonType>=1?ke.domains.bangumi:1===this.config.playerType?ke.domains.bangumiS:ke.domains.interface,enableSSLResolve:this.config.enableSSLResolve,enableSSLStream:this.config.enableSSLStream,cid:this.config.cid,episodeId:this.config.episodeId,quality:this.videoQuality,type:"mp4",requestFromInit:!0,extra_params:this.config.extraParams,player:this,platform:"html5"};n.extra_params?n.extra_params+="&qn="+n.quality:n.extra_params="qn="+n.quality,this.config.seasonType&&(function(e,t){let i,n,r;"string"==typeof t?(i=t.indexOf("?"),n=t.indexOf("#"),r=-1===i?"":-1===n?t.slice(i,t.length):t.slice(i,n)):r=window.location.search;const a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=r.substr(1).match(a);if(null!=o)try{return decodeURIComponent(o[2])}catch(e){return null}return null}("season_type","?"+n.extra_params)||(n.extra_params+="&season_type="+this.config.seasonType)),this.trigger(Ee.EVENT.VIDEO_PLAYURL_LOAD),ke.r(n,e=>{if(this.perf.setStageTiming(Se.playurl_e),!this.destroyed)if(void 0!==e&&null!==e.mediaDataSource){this.trigger(Ee.EVENT.VIDEO_PLAYURL_LOADED);const t="range";this.load({mediaDataSource:e.mediaDataSource,seekType:t})}else this.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYURL_ERROR)},(n,r,a)=>{if(this.perf.setStageTiming(Se.playurl_e),this.destroyed)return;const o=ke.errorTypes;if("Resolve Error: video is encoding."===r)this.trigger(Ee.EVENT.VIDEO_PLAYURL_LOADED),this.load({mediaDataSource:{type:"mp4",url:"//s1.hdslb.com/bfs/static/player/media/encoding.mp4"}});else{if(/JSON/.test(r))this.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYURL_ERROR);else if(n===o.resolve)this.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYURL_ERROR);else if(this.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.PLAYURL_ERROR),!0===this.option("enableSSLResolve")&&"http:"===window.location.protocol)return this.option("enableSSLResolve",!1),setTimeout(()=>{this.getVideoData(e,t,i)},1e3),!1;this.track&&this.track.trackInfoPush("video_error","from:2,code:"+Ee.VIDEO_URL_ERROR),this.load({mediaDataSource:{type:"mp4",url:"//s1.hdslb.com/bfs/static/player/media/error.mp4"}})}this.trigger(Ee.EVENT.VIDEO_PLAYURL_LOAD)})}}userLoadedCallback(e){this.user?this.user.addCallback(e):"function"==typeof e&&this.userLoadedCallbacks.push(e)}loadTemplate(){this.template=new wr(this),this.track.init(),this.controller=new Xr(this)}one(e,t){this.events.one(e,t)}bind(e,t){this.events.on(e,t)}unbind(e,t){this.events.off(e,t)}trigger(e,t){this.events.trigger(e,t)}option(e,t){return!!e&&(void 0===t?this.config[e]:void(this.config[e]=t))}load(e){"string"==typeof e.mediaDataSource.url?this.core=new sa(this,e.mediaDataSource.url):"object"==typeof e.mediaDataSource.url&&e.mediaDataSource.url.dash&&(this.core=new ca(this,e.mediaDataSource.url.dash)),this.video?this.savedCurrentTime&&(this.state.video_state===Ee.V_PLAY||this.state.video_state===Ee.V_BUFF?this.seek(this.savedCurrentTime,!0):this.seek(this.savedCurrentTime,!0,!0)):(this.video=this.core.video,this.template.videoWrp.appendChild(this.video),this._videoEventListener(this.video),this.metadataloadedTimer=window.setTimeout(this.metadataloadedCallback,3e3),this.bind(Ee.EVENT.VIDEO_METADATA_LOADED,this.metadataloadedCallback),this.initialized=!0,this.freezePause=!1,this.trigger(Ee.EVENT.VIDEO_INITIALIZED)),this.perf.setStageTiming(Se.init_e)}getTimeOffset(){return this.video&&Number(this.video.getAttribute("data-offset"))||0}metadataloadedCallback(){clearTimeout(this.metadataloadedTimer),this.unbind(Ee.EVENT.VIDEO_METADATA_LOADED,this.metadataloadedCallback),this.user.load(),this.config.hasDanmaku&&this.loadDanmaku(),this.userLoadedCallback(e=>{var t,i;if(null==(i=null==(t=e.subtitle)?void 0:t.subtitles)?void 0:i.length){const t=e.subtitle.subtitles.find((e,t)=>"zh-CN"===e.lan);t&&this.loadSubtitle(t.subtitle_url,()=>{},!0)}e.is_360&&le()&&this.loadPanorama()}),this.track&&this.track.loadTrackUp(!0),this.template.danmakuContainer.insertAdjacentHTML("beforeend",`<div class="${this.prefix}-test-danmaku" style="opacity: 0; user-select: none; position: absolute; white-space: pre; pointer-events: none; perspective: 500px; display: inline-block; will-change: transform; font-size: 17px; transition: transform 3s linear 0s; left: 300px;">test</div>`),setTimeout(()=>{const e=this.template.danmakuContainer.querySelector(`.${this.prefix}-test-danmaku`);e.style.transform="translateX(-300px) translateY(0px) translateZ(0px)",e.style.webkitTransform="translateX(-300px) translateY(0px) translateZ(0px)",setTimeout(()=>{var t;const i=e.getBoundingClientRect().left;i<200&&this.track.trackInfoPush("danmaku_transition_error",i),null==(t=e.parentNode)||t.removeChild(e)},100)},0),this.relayPlay?this.play():this.config.autoplay&&("muted"===this.config.autoplayMode?this.setMute(!0).then(()=>{this.play()}).catch(e=>{}):this.play())}loadDanmaku(){console.log("load danmuku")}loadSubtitle(e,t,i){if(this.subtitle){if(i)return}else this.subtitle=new br({container:this.template.subtitle,time:()=>this.currentTime()||0},this);this.subtitle.load({url:e,group:0,callback:t})}loadPanorama(){console.log("load Panorama")}duration(e){if(e=e||this.video)return e.duration}currentTime(e){if(e=e||this.video)return e.currentTime||0}getPlayurl(e){if(e=e||this.video)return e.src}_videoEventListener(e){const t=this.controller;let i=!1,n=0;const r=()=>{this.timerChecker=window.setInterval(()=>{n===this.currentTime(e)?(i=!0,this.controller.setState(Ee.V_BUFF),this.bufferStartTime||(this.currentTime()?this.getBufferRate()?this.currentTime()<this.getBufferRate()*this.duration()-10&&(this.lagLoad=!0):this.nullLoad=!0:this.headLoad=!0,this.track&&this.track.trackInfoPush("start_load",`${this.getBufferRate()*this.duration()},${this.currentTime()}`,{url:this.getPlayurl()}),this.bufferStartTime=+new Date)):n=this.currentTime(e)},500)};e.addEventListener("play",()=>{this.state.video_state!==Ee.V_PLAY&&!(t.getLastState()===Ee.V_PAUSE&&this.state.video_state===Ee.V_BUFF)&&setTimeout(()=>{this.controller.setState(Ee.V_PLAY)}),clearInterval(this.timerChecker),r(),this.videoSeeking&&(this.videoSeeking=!1,this.videoSeekingRelay=!0,this.trigger(Ee.EVENT.VIDEO_MEDIA_SEEKED,{time:this.currentTime()})),this.trigger(Ee.EVENT.VIDEO_MEDIA_PLAYING),this.track&&this.track.view()}),e.addEventListener("pause",()=>{if(!this.freezePause){const i=this.duration(e);this.currentTime()!==i&&this.state.video_state!==Ee.V_PAUSE&&!(t.getLastState()===Ee.V_PLAY&&this.state.video_state===Ee.V_BUFF)&&(this.controller.setState(Ee.V_PAUSE),this.trigger(Ee.EVENT.VIDEO_MEDIA_PAUSE),this.controller.setState(Ee.V_PAUSE)),clearInterval(this.timerChecker)}}),e.addEventListener("seeked",()=>{var t;const n=null==(t=this.controller)?void 0:t.getLastState();if(n&&n!==Ee.V_PAUSE&&n!==Ee.V_COMPLETE){const t=e.play();t&&t.catch(e=>{this.state.video_state<=Ee.V_READY&&this.pause()})}(this.videoSeeking||this.videoSeekingRelay)&&(this.videoSeekingRelay||this.trigger(Ee.EVENT.VIDEO_MEDIA_SEEKED,{time:this.currentTime()}),this.videoSeeking=!1,this.videoSeekingRelay=!1,this.seekLoad=!1,i&&(i=!1,this.controller.setState(this.controller.getLastState()),this.bufferStartTime&&this.bufferStartTime<+new Date&&(this.track&&this.track.trackInfoPush("seek_end_load",String(+new Date-this.bufferStartTime),{url:this.getPlayurl()}),this.bufferStartTime=0))),this.trigger(Ee.EVENT.VIDEO_MEDIA_SEEK_END)}),e.addEventListener("timeupdate",()=>{this.savedCurrentTime=this.currentTime(e)||this.savedCurrentTime,this.trigger(Ee.EVENT.VIDEO_MEDIA_TIME),this.trigger(Ee.EVENT.VIDEO_MEDIA_FRAME),i&&n!==this.currentTime(e)&&(i=!1,this.controller.getLastState()!==Ee.V_COMPLETE&&this.controller.setState(this.controller.getLastState()),this.bufferStartTime&&this.bufferStartTime<+new Date&&(this.track&&this.track.trackInfoPush(this.seekLoad?"seek_end_load":this.lagLoad?"lag_end_load":this.headLoad?"head_end_load":this.nullLoad?"null_end_load":"end_load",String(+new Date-this.bufferStartTime),{url:this.getPlayurl()}),this.lagLoad=!1,this.headLoad=!1,this.nullLoad=!1,this.bufferStartTime=0)),this.controller.progressBar.updateVideoTime(this.currentTime(),this.duration())});const a=()=>{this.perf.setStageTiming(Se.meta_s),e.removeEventListener("loadstart",a)};e.addEventListener("loadstart",a),e.addEventListener("waiting",()=>{this.trigger(Ee.EVENT.VIDEO_MEDIA_BUFFER)}),e.addEventListener("canplay",()=>{this.trigger(Ee.EVENT.VIDEO_MEDIA_BUFFER_END)}),e.addEventListener("ended",()=>{clearInterval(this.timerChecker),this.controller.setState(Ee.V_COMPLETE)}),e.addEventListener("canplay",()=>{this.perf.setStageTiming(Se.canplay),this.trigger(Ee.EVENT.VIDEO_MEDIA_CANPLAY)}),e.addEventListener("loadedmetadata",()=>{this.perf.setStageTiming(Se.meta_e),this.retryTime=3,this.trigger(Ee.EVENT.VIDEO_METADATA_LOADED),this.trigger(Ee.EVENT.VIDEO_MEDIA_BUFFER)}),e.addEventListener("loadeddata",()=>{this.perf.setStageTiming(Se.frame)}),e.addEventListener("error",()=>{this.initialized&&(this.retryTime&&!this.config.noId?(this.retryTime--,this.freezePause=!0,this.getVideoData()):(this.freezePause=!1,this.trigger(Ee.EVENT.VIDEO_MEDIA_ERROR,Ee.VIDEO_ERROR),this.track&&this.track.loadTrackUp(!0),this.track&&this.track.trackInfoPush("video_error",`from:1,code:${Ee.VIDEO_ERROR},url:${this.getPlayurl()},videocode:${e.error&&e.error.code}`)))}),e.addEventListener("durationchange",()=>{this.template.timeTotal.innerHTML=ee(this.duration()),this.controller.progressBar.updateVideoTime(this.currentTime(),this.duration()),this.trigger(Ee.EVENT.VIDEO_MEDIA_DURATION_CHANGE)}),e.addEventListener("progress",()=>{this.controller.progressBar.setBufferValue(this.getBufferRate()||0)}),this.trigger(Ee.EVENT.VIDEO_MEDIA_ATTACHED)}setVolume(e){this.trigger(Ee.EVENT.VOLUME_CHANGE,e)}pause(e){this.freezePause=!1,this.video&&this.controller.setState(Ee.V_PAUSE),this.trigger(Ee.EVENT.VIDEO_MEDIA_PAUSE)}play(){if(this.config.developer&&this.loadDeveloper("_actionPlay"),this.video){this.template.loadLayer.style.display="none",this.isPlayed||(this.config.autoplay||(this.video.style.display="block"),this.template.csIn(!0));const e=this.duration(this.video);e>0&&this.currentTime()===e&&this.controller.getLastState()===Ee.V_COMPLETE&&this.seek(0),this.controller.setState(Ee.V_PLAY)}else this.relayPlay=!0;this.trigger(Ee.EVENT.VIDEO_MEDIA_PLAY)}reload(e){this.reloadTime=+Date.now(),this.perf.setStageTiming(Se.reload_s),this.perf.setStageTiming(Se.init_s),this.destroy(),this.config=e,this.container=this.config.element,this.getVideoData(),this._beforeInit(),this._init(),"function"==typeof this.config.beforeplay&&this.config.beforeplay()}seek(e,t,i){t||(e=Math.min(e,this.duration()-1)),this.trigger(Ee.EVENT.VIDEO_MEDIA_SEEK,{time:e}),this.videoSeeking=!0,this.seekLoad=!0,this.video.currentTime=e,i?this.pause():this.play()}mode(e){this.controller&&this.controller.setMode(e)}destroy(){this.destroyed||(this.trigger(Ee.EVENT.VIDEO_BEFORE_DESTROY),this.observer&&this.observer.disconnect(),clearInterval(this.timerChecker),this.core&&this.core.destroy(),this.video=null,this.destroyed=!0,this.initialized=!1,this.userLoadedCallbacks=[],this.isPlayed=!1,this.subtitle=null,this.controller.destroy(),this.trigger(Ee.EVENT.VIDEO_DESTROY),this.events.destroy())}getBufferRate(){if(this.video){const e=this.video.buffered;if(e&&e.length)for(let t=0;t<e.length;t++){const i=e.start(t),n=e.end(t),r=this.currentTime();if(i<=r&&n>=r)return n/this.duration()}}}isFullScreen(){return this.state.mode===Ee.UI_FULL||this.state.mode===Ee.UI_WEB_FULL}exitFullScreen(){this.isFullScreen()&&this.state.mode!==Ee.UI_NORMAL&&this.mode(Ee.UI_NORMAL)}getWidth(){}getHeight(){}isMute(){return!!this.video&&this.video.muted}getState(){return this.state.video_state}getVersion(){}stop(){}prev(e,t){this.initStart=performance.now();let i=this.config.p-1;if(this.config.seasonType>0&&(i=+this.initPartmanager().search(this.config.episodeId,"episode_id",!0)-1),this.config.type===fe.Pugv&&(i=+this.initPartmanager().search(this.config.cid,"cid",!0)-1),i<1)return;const n={p:i,doneCallback:e,failCallback:t};return this.reloadMedia.callNextPart(n,null,!0)}next(e,t,i){this.initStart=performance.now();const n={p:e,doneCallback:t,failCallback:i};return this.reloadMedia.callNextPart(n,null,!0)}switchQuality(e){return E(this,null,(function*(){if("DASH"===this.core.type){const t=yield this.core.typedInfo.player.setQualityFor("video",e);console.log(t)}else{const t=this.config.qualityList.find(t=>t.value===e).url;this.savedCurrentTime=this.currentTime()||this.savedCurrentTime,this.load({mediaDataSource:{type:"mp4",url:t}})}}))}getQualityList(){var e;return"DASH"===this.core.type?this.core.typedInfo.player.getQualityList("video"):null!=(e=this.config.qualityList)?e:[]}reloadAccess(){}logger(){}biliMessage(){}updatePageList(){}getPlayerState(){}setPlayerState(e,t){}ogvUpdate(){}setSpeedRate(e){this.video.playbackRate=e}loadDeveloper(e,t){if(!this.template)return;const i=document.createElement("span");i.innerText=t?`${t}: ${e}`:e,this.template.videoWrpDeveloper.appendChild(i),this.template.videoWrpDeveloper.scrollTop=this.template.videoWrpDeveloper.scrollHeight}}function pa(e){return E(this,null,(function*(){const{aid:t,bvid:i,episodeId:n,type:r,p:a}=e;return+r===fe.Pugv&&n?yield function(e){return E(this,null,(function*(){try{const t=yield de.ajax({data:{ep_id:e},method:"GET",url:"//api.bilibili.com/pugv/view/web/season",async:!0,withCredentials:!0}),i=JSON.parse(t),n=i&&i.data,r={};if(n){const t=n.episodes;if(Array.isArray(t))for(let i=0;i<t.length;i++)if(t[i].id===e)return r.cid=t[i].cid,r.aid=t[i].aid,r.musth5=1,r.bvid=t[i].bvid||"",r}}catch(e){throw new Error(e)}}))}(n):t||i?yield function(e){return E(this,null,(function*(){try{e.aid||delete e.aid,e.bvid||delete e.bvid;const t=(e.p||1)-1;delete e.p;const i=yield de.ajax({data:e,method:"GET",url:"//api.bilibili.com/x/web-interface/view",async:!0,withCredentials:!0}),n=JSON.parse(i),r={};if(null==n?void 0:n.data){window.__INITIAL_STATE__||(window.__INITIAL_STATE__={video:{viewInfo:n.data}});const i=n.data.pages;return(null==i?void 0:i[t])?r.cid=i[t].cid:r.cid=(null==i?void 0:i[0].cid)||n.data.cid,r.aid=e.aid||n.data.aid,r}}catch(e){throw new Error(e)}}))}({aid:t,bvid:i,p:a}):n?yield function(e){return E(this,null,(function*(){try{const t=yield de.ajax({data:{ep_id:e},method:"GET",url:"//api.bilibili.com/pgc/view/web/season",async:!0,withCredentials:!0}),i=JSON.parse(t),n=i&&i.result,r={};if(n){r.seasonId=n.season_id,r.seasonType=n.type;const t=n.episodes;if(Array.isArray(t))for(let i=0;i<t.length;i++)if(t[i].id===e)return r.cid=t[i].cid,r.aid=t[i].aid,r.bvid=t[i].bvid||"",r;const i=n.section;if(Array.isArray(i))for(let t=0;t<i.length;t++){const n=i[t].episodes;if(Array.isArray(n))for(let t=0;t<n.length;t++)if(n[t].id===e)return r.cid=n[t].cid,r.aid=n[t].aid,r.bvid=n[t].bvid||"",r}}}catch(e){throw new Error(e)}}))}(n):void 0}))}function ga(e){return E(this,null,(function*(){if(null==e)throw new Error("Input must not be null or undefined");let t={get element(){var t;return null!=(t=e.element)?t:document.getElementById("bilibiliPlayer")},set element(t){e.element=t},get auxiliaryWrapClass(){return"danmaku-wrap"},set auxiliaryWrapClass(t){e.auxiliaryWrapClass=t},get namespace(){var t;return null!=(t=e.namespace)?t:".bilibiliplayer"},set namespace(t){e.namespace=t},get storageName(){var t;return null!=(t=e.storageName)?t:"bilibili_player_settings"},set storageName(t){e.storageName=t},get aid(){return+e.aid},set aid(t){e.aid=t},get cid(){return+e.cid},set cid(t){e.cid=t},get bvid(){return this.show_bv?e.bvid:""},set bvid(t){e.bvid=t},get show_bv(){var t;return+(null!=(t=e.show_bv)?t:1)},set show_bv(t){e.show_bv=t},get seasonId(){return+e.seasonId},set seasonId(t){e.seasonId=t},get episodeId(){return+e.episodeId},set episodeId(t){e.episodeId=t},get quality(){return+e.quality||+e.qn},set quality(t){e.quality=t},get p(){var t;return Number(null!=(t=e.p)?t:1)},set p(t){e.p=t},get live(){return Boolean(e.live)},set live(t){e.live=t},get hasNext(){return Boolean(e.hasNext)},set hasNext(t){e.hasNext=t},get listLoop(){return Boolean(e.listLoop)},set listLoop(t){e.listLoop=t},get autoplay(){return Boolean(e.autoplay)},set autoplay(t){e.autoplay=t},get autoplayMode(){var t;return null!=(t=e.autoplayMode)?t:"auto"},set autoplayMode(t){e.autoplayMode=t},get playerType(){return+e.player_type||0},set playerType(t){e.player_type=t},get seasonType(){return+e.seasonType||+e.season_type||0},set seasonType(t){e.seasonType=t},get lastepid(){return+e.last_ep_id},set lastepid(t){e.last_ep_id=t},get lastplaytime(){return+e.lastplaytime},set lastplaytime(t){e.lastplaytime=t},get seekTime(){var t;return null!=(t=e.seekTime)?t:10},get enableSSLStream(){var t;return Boolean(null==(t=e.enable_ssl_stream)||t)},set enableSSLStream(t){e.enable_ssl_stream=t},get enableSSLResolve(){var t;return Boolean(null==(t=e.enable_ssl_resolve)||t)},set enableSSLResolve(t){e.enable_ssl_resolve=t},get dev(){return Boolean(e.dev)},set dev(t){e.dev=t},get extra(){var t;return Boolean(null==(t=e.extra)||t)},set extra(t){e.extra=t},get logger(){return Boolean(e.logger)},set logger(t){e.logger=t},get autoShift(){return Boolean(e.autoShift)},set autoShift(t){e.autoShift=t},get watchlater(){return void 0!==e.watchlater&&null!==e.watchlater&&!!e.watchlater},set watchlater(t){e.watchlater=null===t?null:!!t},get plMax(){return+e.pl_max||0},set plMax(t){e.pl_max=t},get beforeplay(){var t;return null!=(t=e.beforeplay)?t:B},set beforeplay(t){e.beforeplay=t},get afterplay(){var t;return null!=(t=e.afterplay)?t:B},get onQualityChange(){var t;return null!=(t=e.onQualityChange)?t:B},set afterplay(t){e.afterplay=t},get extraParams(){return e.extra_params},set extraParams(t){e.extra_params=t},get t(){return e.t},set t(t){e.t=t},get d(){return e.d},set d(t){e.d=t},get pb(){return Boolean(e.pb)},set pb(t){e.pb=t},get ad(){return e.ad},set ad(t){e.ad=t},get preAd(){return Boolean(e.pre_ad)},set preAd(t){e.pre_ad=t},get asWide(){return Boolean(e.as_wide)},set asWide(t){e.as_wide=t},get admode(){return e.admode},set admode(t){e.admode=t},get record(){var t;return null!=(t=e.record)?t:""},set record(t){e.record=t},get danmaku(){var t;return Boolean(null==(t=e.danmaku)||t)},set danmaku(t){e.danmaku=t},get hasDanmaku(){var t;return Boolean(null==(t=e.hasDanmaku)||t)},set hasDanmaku(t){e.hasDanmaku=t},get skipable(){return Boolean(e.skipable)},set skipable(t){e.skipable=t},get sourcePlayer(){return e.sourceplayer},set sourcePlayer(t){e.sourceplayer=t},get verticalDanmaku(){return Boolean(e.verticalDanmaku)},set verticalDanmaku(t){e.verticalDanmaku=t},get dashSymbol(){return Boolean(e.dashSymbol)},set dashSymbol(t){e.dashSymbol=t},get inner(){return Boolean(e.inner)},set inner(t){e.inner=t},get upPreview(){return Boolean(e.upPreview)},set upPreview(t){e.upPreview=t},get isAudio(){return Boolean(e.isAudio)},set isAudio(t){e.isAudio=t},get isH5(){var t;return null!=(t=e.isH5)&&t},set isH5(t){e.val=t},get lightWeight(){return Boolean(e.lightWeight)},set lightWeight(t){e.lightWeight=t},get gamePlayer(){return Boolean(e.gamePlayer)},set gamePlayer(t){e.gamePlayer=t},get stableController(){return Boolean(e.stableController)},set stableController(t){e.stableController=t},get disableInteractive(){return Boolean(e.disableInteractive)},set disableInteractive(t){e.disableInteractive=t},get interactiveNode(){return e.interactiveNode},set interactiveNode(t){e.interactiveNode=t},get interactiveTime(){return+e.interactiveTime},set interactiveTime(t){e.interactiveTime=t},get interactiveGraphId(){return+e.interactiveGraphId},set interactiveGraphId(t){e.interactiveGraphId=t},get interactivePreview(){return Boolean(e.interactivePreview)},set interactivePreview(t){e.interactivePreview=t},get interactivePersistentDanmaku(){return Boolean(e.interactivePersistentDanmaku)},set interactivePersistentDanmaku(t){e.interactivePersistentDanmaku=t},get musth5(){return Boolean(e.musth5)},set musth5(t){e.musth5=t},get theme(){var t;return null!=(t=e.theme)?t:"blue"},set theme(t){e.theme=t},get type(){return+e.type},set type(t){e.type=t},get sub_type(){return+e.sub_type},set sub_type(t){e.sub_type=t},get touchMode(){var t;return Boolean(null!=(t=e.touchMode)?t:se.version.iPad||se.version.tesla)},set touchMode(t){e.touchMode=t},get noEndPanel(){return Boolean(e.noEndPanel)},set noEndPanel(t){e.noEndPanel=t},get s_from(){return+e.s_from},set s_from(t){e.s_from=t},get s_to(){return+e.s_to},set s_to(t){e.s_to=t},get readyDuration(){return+e.readyDuration},set readyDuration(t){e.readyDuration=t},get readyPoster(){return e.readyPoster},set readyPoster(t){e.readyPoster=t},get readyVideoUrl(){return e.readyVideoUrl},set readyVideoUrl(t){e.readyVideoUrl=t},get noRecommend(){return Boolean(e.noRecommend)},set noRecommend(t){e.noRecommend=t},get portraitFullScreen(){return Boolean(e.portraitFullScreen)||Boolean(e.portrait_full_screen)},set portraitFullScreen(t){e.portraitFullScreen=t},get highQuality(){return Boolean(e.highQuality)||Boolean(e.high_quality)},set highQuality(t){e.highQuality=t},get noFullScreenButton(){return Boolean(e.noFullScreenButton)},set noFullScreenButton(t){e.noFullScreenButton=t},get spmid(){return e.spmid},set spmid(t){e.spmid=t},get from_spmid(){return e.from_spmid},set from_spmid(t){e.from_spmid=t},get outer(){return Boolean(e.outer)},set outer(t){e.outer=t},get loop(){return Boolean(e.loop)},set loop(t){e.loop=t},get noId(){return!e.aid&&!e.bvid&&!e.episodeId},get lastPlayTimeRecordName(){return e.lastPlayTimeRecordName},set lastPlayTimeRecordName(t){e.lastPlayTimeRecordName=t},get hasMuteButton(){return Boolean(e.hasMuteButton)||Boolean(e.autoplay&&"unmute"!==e.autoplayMode)},set hasMuteButton(t){e.hasMuteButton=t},get hasSpeedButton(){var t;return Boolean(null!=(t=e.hasSpeedButton)&&t)},get hasNextEpisodeButton(){var t;return Boolean(null!=(t=e.hasNextEpisodeButton)&&t)},get qualityList(){return e.qualityList},get defaultQuality(){return e.defaultQuality},get hasVolButton(){var t;return Boolean(null!=(t=e.hasVolButton)&&t)},get hasSubtitleButton(){var t;return Boolean(null!=(t=e.hasSubtitleButton)&&t)},get hasReportButton(){var t;return Boolean(null==(t=e.hasReportButton)||t)},get hasCCReportButton(){var t;return Boolean(null==(t=e.hasCCReportButton)||t)},get defaultLang(){var t;return null!=(t=e.defaultLang)?t:""},get hasQualityButton(){var t;return Boolean(null!=(t=e.hasQualityButton)&&t)},get supportedSubTitleList(){return e.supportedSubTitleList},get rateList(){return e.rateList},get hideCoverInfo(){return Boolean(e.hideCoverInfo)},set hideCoverInfo(t){e.hideCoverInfo=t},get hideDanmakuButton(){return Boolean(e.hideDanmakuButton)},set hideDanmakuButton(t){e.hideDanmakuButton=t},get callAppMode(){var t;return Boolean(null!=(t=e.callAppMode)&&t)},set callAppMode(t){e.callAppMode=t},get labels(){return{}},get developer(){return Boolean(e.developer)},set developer(t){e.developer=t},get i18n(){var t;return null!=(t=e.i18n)?t:Bn},get previewData(){var t;return null!=(t=e.previewData)?t:null}};if(Object.defineProperty(t,"p",{get(){var t;return+(null!=(t=e.p)?t:1)},set(t){e.p=t}}),Object.defineProperty(t,"show_bv",{get(){var t;return+(null!=(t=e.show_bv)?t:1)},set(t){e.show_bv=t}}),t.noId)t.hasDanmaku=!1,t.noRecommend=!0,t.hideDanmakuButton=!0;else if(!t.cid||!t.aid){const{aid:e,bvid:i,episodeId:n,type:r,p:a}=t;t=Object.assign(t,yield pa({episodeId:n,aid:e,bvid:i,type:r,p:a}))}return t}))}((e,t,i,n)=>{for(var r,a=n>1?void 0:n?ha(t,i):t,o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n?r(t,i,a):r(a))||a);n&&a&&da(t,i,a)})([aa],fa.prototype,"metadataloadedCallback",1),window.bPlayer||(window.bPlayer={get __name__(){return"bPlayer"},get __mode__(){return"singleton"},get metadata(){return{name:"@bilibili-intl/player",version:"0.3.12",revision:"ef0be88",lastCompiled:""}},get type(){return fe},get events(){return ge},get action(){return pe}}),window.bPlayer;class ya{constructor(e){let t;const i=new Promise((i,n)=>{ga(e).then(e=>{t=new fa(e),i(null)}).catch(e=>{n(e)})}),n={play:function(){return t.play()},pause:function(){return t.pause()},reload:function(e){return E(this,null,(function*(){return t.reload(yield ga(e))}))},seek:function(e,i){return t.seek(e)},mode:function(e){return t.mode(e)},setVolume:function(e){return t.setVolume(e)},destroy:function(e){return t.destroy()},option:function(e,t){},on:function(e,i){return t.bind(e,i)},off:function(e,i){return t.unbind(e,i)},getBufferRate:function(){return t.getBufferRate()},getDuration:function(){return t.duration()},isFullScreen:function(){return t.isFullScreen()},exitFullScreen:function(){return t.exitFullScreen()},getWidth:function(){return t.getWidth()},getHeight:function(){return t.getHeight()},isMute:function(){return t.isMute()},setMute:function(e){return t.setMute(e)},getPlaylist:function(){},getPlaylistIndex:function(){},setPlaylistIndex:function(e,t){},getCurrentTime:function(){return t.currentTime()},getState:function(){return t.getState()},getVersion:function(){return t.getVersion()},stop:function(){return t.stop()},prev:function(){return t.prev()},next:function(e,i,n){return t.next()},reloadAccess:function(e){return t.reloadAccess()},getPlayurl:function(){return t.getPlayurl()},logger:function(e){return t.logger()},removeFromPlaylist:function(e,t){},appendToPlaylist:function(e){},screenshot:function(e){},switchSubtitle:function(e){},updateSubtitle:function(e){},loadSubtitle:function(e,i){return t.loadSubtitle(e,i)},updateGuideAttention:function(e){},verticalDanmaku:function(e){},setMaskFps:function(e){},track:function(e,t){},directiveDispatcher:function(e){},getStatisticsInfo:function(){return{}},getMediaInfo:function(){return{}},getSession:function(){return t.session},addViewPoints:function(e){},mock:function(e){},loadLab:function(e,t){},biliMessage:function(e){},updatePageList:function(){return t.updatePageList()},getPlayerState:function(){return t.getPlayerState()},setPlayerState:function(e,i){return t.setPlayerState(e,i)},noAuxiliary:function(){},getVideoMessage:function(){},ogvUpdate:function(e,t){}};for(const e in n){const t=n[e];0!==e.indexOf("get")&&(n[e]=(...e)=>i.then(()=>t(...e)).catch(e=>{console.log(e)}))}Object.assign(this,n)}static get metadata(){return bPlayer.metadata}}},501:function(e,t,i){
/*!
 * Bilibili Dash Player v1.7.0 (170-2eb9db65)
 * 
 * Copyright 2018 - 2021 bilibili, Inc.
 * Released in Thu Jul 08 2021 15:07:35 GMT+0800 (China Standard Time)
 */
window,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}([function(e,t,i){"use strict";var n=function(){var e=void 0,t=[],i={},n={};function r(e,i){for(var n in t){var r=t[n];if(r.context===e&&r.name===i)return r.instance}return null}function a(e,t){return t[e]}function o(e,t,i){e in i&&(i[e]=t)}function s(t,i,n){var r=void 0,a=t.__dashjs_factory_name,o=i[a];if(o){var s=o.instance;if(!o.override)return s.apply({context:i,factory:e},n);for(var l in r=t.apply({context:i},n),s=s.apply({context:i,factory:e,parent:r},n))r.hasOwnProperty(l)&&(r[l]=s[l])}else r=t.apply({context:i},n);return r.getClassName=function(){return a},r}return e={extend:function(e,t,i,n){!n[e]&&t&&(n[e]={instance:t,override:i})},getSingletonInstance:r,setSingletonInstance:function(e,i,n){for(var r in t){var a=t[r];if(a.context===e&&a.name===i)return void(t[r].instance=n)}t.push({name:i,context:e,instance:n})},getSingletonFactory:function(e){var n=a(e.__dashjs_factory_name,i);return n||(n=function(i){var n=void 0;return void 0===i&&(i={}),{getInstance:function(){return n||(n=r(i,e.__dashjs_factory_name)),n||(n=s(e,i,arguments),t.push({name:e.__dashjs_factory_name,context:i,instance:n})),n}}},i[e.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(e){return a(e,i)},updateSingletonFactory:function(e,t){o(e,t,i)},getClassFactory:function(e){var t=a(e.__dashjs_factory_name,n);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return s(e,t,arguments)}}},n[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return a(e,n)},updateClassFactory:function(e,t){o(e,t,n)}}}();t.a=n},function(e,t,i){
/*! codem-isoboxer v0.3.7 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var n={parseBuffer:function(e){return new r(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new r},createBox:function(e,t,i){var n=a.create(e);return t&&t.append(n,i),n},createFullBox:function(e,t,i){var r=n.createBox(e,t,i);return r.version=0,r.flags=0,r},Utils:{}};n.Utils.dataViewToString=function(e,t){var i=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(e);var n=[],r=0;if("utf-8"===i)for(;r<e.byteLength;){var a=e.getUint8(r++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(r++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(r++))<<6,a|=63&e.getUint8(r++)):(a=(7&a)<<18,a|=(63&e.getUint8(r++))<<12,a|=(63&e.getUint8(r++))<<6,a|=63&e.getUint8(r++))),n.push(String.fromCharCode(a))}else for(;r<e.byteLength;)n.push(String.fromCharCode(e.getUint8(r++)));return n.join("")},n.Utils.utf8ToByteArray=function(e){var t,i;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],i=0;i<e.length;++i){var n=e.charCodeAt(i);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},n.Utils.appendBox=function(e,t,i){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==i)if(null!=i){var n,r=-1;if("number"==typeof i)r=i;else{if("string"==typeof i)n=i;else{if("object"!=typeof i||!i.type)return void e.boxes.push(t);n=i.type}for(var a=0;a<e.boxes.length;a++)if(n===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},t.parseBuffer=n.parseBuffer,t.addBoxProcessor=n.addBoxProcessor,t.createFile=n.createFile,t.createBox=n.createBox,t.createFullBox=n.createFullBox,t.Utils=n.Utils,n.Cursor=function(e){this.offset=void 0===e?0:e};var r=function(e){this._cursor=new n.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var i=[];return r._sweep.call(this,e,i,t),i},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,i){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&i)return;r._sweep.call(this.boxes[n],e,t,i)}},r.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var i=new Uint8Array(t);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return i.buffer},r.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new n.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,i){this._parsing?this[e]=this._readField(t,i):this._writeField(t,i,this[e])},a.prototype._procFieldArray=function(e,t,i,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(i,n);else for(r=0;r<this[e].length;r++)this._writeField(i,n,this[e][r])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,i){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push({}),i.call(this,this[e][n]);else for(n=0;n<t;n++)i.call(this,this[e][n])},a.prototype._procSubEntries=function(e,t,i,n){var r;if(this._parsing)for(e[t]=[],r=0;r<i;r++)e[t].push({}),n.call(this,e[t][r]);else for(r=0;r<i;r++)n.call(this,e[t][r])},a.prototype._procEntryField=function(e,t,i,n){this._parsing?e[t]=this._readField(i,n):this._writeField(i,n,e[t])},a.prototype._procSubBoxes=function(e,t){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push(a.parse(this));else for(i=0;i<t;i++)this._rawo?this[e][i].write():this.size+=this[e][i].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(i);break;case 16:t=this._raw.getInt16(i);break;case 32:t=this._raw.getInt32(i);break;case 64:var n=this._raw.getInt32(i),r=this._raw.getInt32(i+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,i,n=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:n=this._raw.getUint8(r);break;case 16:n=this._raw.getUint16(r);break;case 24:n=((t=this._raw.getUint16(r))<<8)+(i=this._raw.getUint8(r+2));break;case 32:n=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),i=this._raw.getUint32(r+4),n=t*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,n},a.prototype._readString=function(e){for(var t="",i=0;i<e;i++){var n=this._readUint(8);t+=String.fromCharCode(n)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var i=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,i}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?n.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(i,t);break;case 16:this._rawo.setInt16(i,t);break;case 32:this._rawo.setInt32(i,t);break;case 64:var n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32);this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var i,n,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:i=(16776960&t)>>8,n=255&t,this._rawo.setUint16(r,i),this._rawo.setUint8(r+2,n);break;case 32:this._rawo.setUint32(r,t);break;case 64:n=t-(i=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,i),this._rawo.setUint32(r+4,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var i=0;i<e;i++)this._writeUint(8,t.charCodeAt(i))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var i=Math.floor(t),n=(t-i)*Math.pow(2,e/2);this._writeUint(e/2,i),this._writeUint(e/2,n)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,i=0;i<e.length;i++)this._rawo.setInt8(t+i,e[i]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=n.Utils.utf8ToByteArray(e);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)i.setUint8(r,t[r]);else this.size+=t.length},a.prototype._writeField=function(e,t,i){switch(e){case"uint":this._writeUint(t,i);break;case"int":this._writeInt(t,i);break;case"template":this._writeTemplate(t,i);break;case"string":-1==t?this._writeTerminatedString(i):this._writeString(t,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.avc2=a.prototype._boxProcessors.avc3=a.prototype._boxProcessors.avc4=a.prototype._boxProcessors.hvc1=a.prototype._boxProcessors.hev1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},function(e,t,i){"use strict";function n(){return"2.7.0"}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getLocalStorage=function(e){var t="";try{t=window.localStorage.getItem(e)}catch(e){}return t},e.setLocalStorage=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){}},e.getSessionStorage=function(e){var t="";try{t=window.sessionStorage.getItem(e)}catch(e){}return t},e.setSessionStorage=function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRING=t.ERROR=t.EVENTS=void 0,t.EVENTS={SCRIPT_LOADED:"scripLoaded",VIDEO_INFO:"videoInfo",WARNING:"warning",AST_IN_FUTURE:"astInFuture",BUFFER_EMPTY:"bufferStalled",BUFFER_LOADED:"bufferLoaded",BUFFER_LEVEL_STATE_CHANGED:"bufferStateChanged",ERROR:"error",FRAGMENT_LOADING_COMPLETED:"fragmentLoadingCompleted",FRAGMENT_LOADING_HEADER_RECEIVED:"fragmentLoadingHeaderReceived",FRAGMENT_LOADING_PROGRESS:"fragmentLoadingProgress",FRAGMENT_LOADING_STARTED:"fragmentLoadingStarted",FRAGMENT_LOADING_ABANDONED:"fragmentLoadingAbandoned",FRAGMENT_LOADED_ERROR:"fragmentLoadedError",FRAGMENT_P2P_LOAD_INFO:"fragmentP2pLoadInfo",CDN_LOAD_INFO:"cdnLoadInfo",PCDN_LOADED_ERROR:"pcdnLoadedError",LOG:"log",MANIFEST_LOADED:"manifestLoaded",METRICS_CHANGED:"metricsChanged",METRIC_CHANGED:"metricChanged",METRIC_ADDED:"metricAdded",METRIC_UPDATED:"metricUpdated",PERIOD_SWITCH_COMPLETED:"periodSwitchCompleted",PERIOD_SWITCH_STARTED:"periodSwitchStarted",QUALITY_CHANGE_REQUESTED:"qualityChangeRequested",QUALITY_CHANGE_RENDERED:"qualityChangeRendered",TRACK_CHANGE_RENDERED:"trackChangeRendered",SOURCE_INITIALIZED:"sourceInitialized",STREAM_INITIALIZED:"streamInitialized",STREAM_TEARDOWN_COMPLETE:"streamTeardownComplete",TEXT_TRACKS_ADDED:"allTextTracksAdded",TEXT_TRACK_ADDED:"textTrackAdded",TTML_PARSED:"ttmlParsed",TTML_TO_PARSE:"ttmlToParse",CAN_PLAY:"canPlay",PLAYBACK_ENDED:"playbackEnded",PLAYBACK_ERROR:"playbackError",PLAYBACK_NOT_ALLOWED:"playbackNotAllowed",PLAYBACK_METADATA_LOADED:"playbackMetaDataLoaded",PLAYBACK_PAUSED:"playbackPaused",PLAYBACK_PLAYING:"playbackPlaying",PLAYBACK_PROGRESS:"playbackProgress",PLAYBACK_RATE_CHANGED:"playbackRateChanged",PLAYBACK_SEEKED:"playbackSeeked",PLAYBACK_SEEKING:"playbackSeeking",PLAYBACK_SEEK_ASKED:"playbackSeekAsked",PLAYBACK_STARTED:"playbackStarted",PLAYBACK_TIME_UPDATED:"playbackTimeUpdated",PLAYBACK_WAITING:"playbackWaiting",MANIFEST_VALIDITY_CHANGED:"manifestValidityChanged",KEY_ADDED:"public_keyAdded",KEY_ERROR:"public_keyError",KEY_MESSAGE:"public_keyMessage",KEY_SESSION_CLOSED:"public_keySessionClosed",KEY_SESSION_CREATED:"public_keySessionCreated",KEY_SESSION_REMOVED:"public_keySessionRemoved",KEY_STATUSES_CHANGED:"public_keyStatusesChanged",KEY_SYSTEM_ACCESS_COMPLETE:"public_keySystemAccessComplete",KEY_SYSTEM_SELECTED:"public_keySystemSelected",LICENSE_REQUEST_COMPLETE:"public_licenseRequestComplete",PROTECTION_CREATED:"public_protectioncreated",PROTECTION_DESTROYED:"public_protectiondestroyed",DELAY_TO_APPEND_TO_BUFFER:"delayToAppendBuffer",QUALITY_CHANGE_DOWNLOADED:"qualityChangeDownloaded",QUOTA_EXCEEDED:"quotaExceeded",GET_NEXT_FRAGMENT:"getNextFragment",APPENDING_NEXT_SOURCE:"appendingNextSource",APPENDED_NEXT_SOURCE:"appendedNextSource",APPENDED_NEXT_SOURCE_DURATION_CHANGED:"appendedNextSourceDurationChanged",START_OFFSET_TIME_WARNING:"startOffsetTimeWarning",BUFFERING_OPTIMIZATION:"buffering_optimization"},t.ERROR={INTERNAL_ERROR:-1,DURATION_IS_NOT_ALL_EQUAL:-2,DURATION_DEVIATION_IS_TOO_LARGE:-3,START_OFFSET_TIME_WARNING:-4,DOWNLOAD_ERROR:4,DOWNLOAD_MPD_ERROR:4001,DOWNLOAD_XINK_ERROR:4002,DOWNLOAD_INIT_SEGMENT_ERROR:4003,DOWNLOAD_MEDIA_SEGMENT_ERROR:4004,DOWNLOAD_INDEX_SEGMENT_ERROR:4005,DOWNLOAD_SWITCHING_SEGMENT_ERROR:4006,DOWNLOAD_OTHER_ERROR:4007,DOWNLOAD_FRAGMENT_ERROR:4101,DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS:4102,DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE:4103,DOWNLOAD_FRAGMENT_ERROR_TIMEOUT:4105,CONNECT_FRAGMENT_ERROR_TIMEOUT:4106,MANIFEST_ERROR:5,MANIFEST_TYPE_ERROR:5001,MANIFEST_RESOLVE_ERROR:5002,MEDIA_ERROR:6,MEDIA_ABORTED_ERROR:6001,MEDIA_NETWORK_ERROR:6002,MEDIA_DECODE_ERROR:6003,MEDIA_SUPPORTED_ERROR:6004,MEDIA_ENCRYPTED_ERROR:6005,MEDIA_UNKNOWN_ERROR:6e3},t.STRING={VIDEO:"video",AUDIO:"audio",LOG:"log",WARNING:"warning",ERROR:"error",ABR_DYNAMIC:"abrDynamic",ABR_BOLA:"abrBola",ABR_THROUGHPUT:"abrThroughput",SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME:"bilidp-switch-source-transition-canvas"}},function(e,t,i){"use strict";var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return e.prototype.init=function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma"},e}()),r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return e.prototype.init=function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"},e}()),a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return e.prototype.init=function(){this.DOWNLOAD_ERROR=4,this.DOWNLOAD_MPD_ERROR=4001,this.DOWNLOAD_XINK_ERROR=4002,this.DOWNLOAD_INIT_SEGMENT_ERROR=4003,this.DOWNLOAD_MEDIA_SEGMENT_ERROR=4004,this.DOWNLOAD_INDEX_SEGMENT_ERROR=4005,this.DOWNLOAD_SWITCHING_SEGMENT_ERROR=4006,this.DOWNLOAD_OTHER_ERROR=4007,this.DOWNLOAD_FRAGMENT_ERROR=4101,this.DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS=4102,this.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE=4103,this.DOWNLOAD_FRAGMENT_ERROR_RANGE=4104,this.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT=4105,this.CONNECT_FRAGMENT_ERROR_TIMEOUT=4106,this.DOWNLOAD_PCDN_SCRIPT_ERROR=4201,this.DOWNLOAD_PCDN_SCRIPT_TIMEOUT=4202,this.DOWNLOAD_PCDN_DISABLED=4203,this.MANIFEST_ERROR=5,this.MANIFEST_TYPE_ERROR=5001,this.MANIFEST_RESOLVE_ERROR=5002,this.MEDIA_ERROR=6,this.MEDIA_ABORTED_ERROR=6001,this.MEDIA_NETWORK_ERROR=6002,this.MEDIA_DECODE_ERROR=6003,this.MEDIA_SUPPORTED_ERROR=6004,this.MEDIA_ENCRYPTED_ERROR=6005,this.MEDIA_UNKNOWN_ERROR=6e3},e}()),o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},s=i(0);function l(){var e={};function t(t,i,n){var r=-1;return e[t]?(e[t].some((function(e,t){if(e&&e.callback===i&&(!n||n===e.scope))return r=t,!0})),r):r}return{on:function(i,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!i)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);if(!(t(i,n,r)>=0)){e[i]=e[i]||[];var o={callback:n,scope:r,priority:a},s=e[i].some((function(t,n){if(t&&a>t.priority)return e[i].splice(n,0,o),!0}));s||e[i].push(o)}},off:function(i,n,r){if(i&&n&&e[i]){var a=t(i,n,r);a<0||(e[i][a]=null)}},trigger:function(t,i){if(t&&e[t]){if((i=i||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");i.type=t,e[t]=e[t].filter((function(e){return e})),e[t].forEach((function(e){return e&&e.callback.call(e.scope,i)}))}},reset:function(){e={}}}}l.__dashjs_factory_name="EventBus";var u=s.a.getSingletonFactory(l);u.EVENT_PRIORITY_LOW=0,u.EVENT_PRIORITY_HIGH=5e3,s.a.updateSingletonFactory(l.__dashjs_factory_name,u);var c=u,d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.extend=function(e,t){if(e){var i=!!t&&t.override,n=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!i||n&&-1===e[r].indexOf("public_")||(this[r]=e[r])}},e}();function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=new(function(e){function t(){return h(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.BUFFERING_COMPLETED="bufferingCompleted",i.BUFFER_CLEARED="bufferCleared",i.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",i.BYTES_APPENDED="bytesAppended",i.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",i.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",i.CURRENT_TRACK_CHANGED="currentTrackChanged",i.DATA_UPDATE_COMPLETED="dataUpdateCompleted",i.DATA_UPDATE_STARTED="dataUpdateStarted",i.INITIALIZATION_LOADED="initializationLoaded",i.INIT_FRAGMENT_LOADED="initFragmentLoaded",i.INIT_REQUESTED="initRequested",i.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",i.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",i.LOADING_COMPLETED="loadingCompleted",i.LOADING_PROGRESS="loadingProgress",i.LOADING_DATA_PROGRESS="loadingDataProgress",i.LOADING_ABANDONED="loadingAborted",i.MANIFEST_UPDATED="manifestUpdated",i.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",i.QUOTA_EXCEEDED="quotaExceeded",i.REPRESENTATION_UPDATED="representationUpdated",i.SEGMENTS_LOADED="segmentsLoaded",i.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",i.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",i.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",i.STREAMS_COMPOSED="streamsComposed",i.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",i.STREAM_COMPLETED="streamCompleted",i.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",i.TIMED_TEXT_REQUESTED="timedTextRequested",i.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",i.URL_RESOLUTION_FAILED="urlResolutionFailed",i.VIDEO_CHUNK_RECEIVED="videoChunkReceived",i.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",i.XLINK_ELEMENT_LOADED="xlinkElementLoaded",i.XLINK_READY="xlinkReady",i.REQUEST_RETRYED="requestRetryed",i.BUFFER_CREATED="bufferCreated",i.VERIFY_SEGMENT_WARNING="verifySegmentWarning",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(d))),g=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null,this.timeout=1e4};g.ACTION_DOWNLOAD="download",g.ACTION_COMPLETE="complete";var y=g;function m(){var e,t=this.context,i=c(t).getInstance(),n=void 0,r=void 0,a=void 0,o=void 0;return e={log:function(){var e="",t=null;r&&(t=(new Date).getTime(),e+="["+(t-o)+"]"),a&&this&&this.getClassName&&(e+="["+this.getClassName()+"]",this.getType&&(e+="["+this.getType()+"]")),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach((function(t){e+=t+" "})),n&&console.log(e),i.trigger(p.LOG,{message:e})},setLogTimestampVisible:function(e){r=e},setCalleeNameVisible:function(e){a=e},setLogToBrowserConsole:function(e){n=e},getLogToBrowserConsole:function(){return n}},n=!1,r=!0,a=!1,o=(new Date).getTime(),e}m.__dashjs_factory_name="Debug";var E=s.a.getSingletonFactory(m),T="loading",M="executed",N="failed";function I(e){e=e||{};var t=this.context,i=E(t).getInstance().log,n=c(t).getInstance(),r=e.metricsModel,a=e.fragmentLoader,o=void 0,s=void 0,l=void 0,u=void 0;function d(e){var t;return!!e&&(t=!1,l.some((function(i){if(n=e,r=i,!isNaN(n.index)&&n.startTime===r.startTime&&n.adaptationIndex===r.adaptationIndex&&n.type===r.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,i)||function(e,t){return e.action===y.ACTION_COMPLETE&&e.action===t.action}(e,i))return t=!0;var n,r})),t)}function h(e){return isNaN(e.duration)?.25:e.duration/8}function f(e){l=l.filter((function(t){var i=h(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-i}))}function g(e,t){t<=e+.5||(l=l.filter((function(i){var n=h(i);return isNaN(i.startTime)||i.startTime>=t-n||isNaN(i.duration)||i.startTime+i.duration<=e+n})))}function m(e,t,i){for(var n=e.length-1;n>=0;n--){var r=e[n],a=r.startTime,o=a+r.duration;if(i=isNaN(i)?h(r):i,!isNaN(a)&&!isNaN(o)&&t+i>=a&&t-i<o||isNaN(a)&&isNaN(t))return r}return null}function I(e,t){r.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),r.addRequestsQueue(e.mediaType,u,l)}function v(e){if(e.sender===a&&!e.error){if(u.splice(u.indexOf(e.request),1),e.response&&!e.error){var t=l&&l[l.length-1],r=s.getPlaybackController().getTime()||0,o=e.request,c=t&&(isNaN(t.index)||isNaN(t.startTime)&&isNaN(t.duration)),d=o&&(isNaN(o.index)||isNaN(o.startTime)&&isNaN(o.duration)),h=t&&(0===r||o.startTime-1<=r&&o.startTime+o.duration+1>=r),f=t&&o.index-t.index==1||l&&l.length&&l.filter((function(e){return o.index-e.index==1})).length||0===o.index;if(i("push",o.mediaType,JSON.stringify({index:o.index,isLastNaNRequest:c,isCurrentNaNRequest:d,isCurrentTimeInFirstRequest:h,isMediaRequest:f,currentTime:r,range:o.range})),!d&&h&&l.length>1&&!f&&l.splice(1,l.length-1),t&&!d&&!h&&!f)return void s.getScheduleController().start();l.push(e.request)}I(e.request,e.error?N:M),n.trigger(p.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}),e.request&&e.request.p2pLoadInfo&&"{}"!=JSON.stringify(e.request.p2pLoadInfo)&&n.trigger(p.FRAGMENT_P2P_LOAD_INFO,{p2pLoadInfo:e.request.p2pLoadInfo}),e.request&&e.request.loadInfo&&"{}"!=JSON.stringify(e.request.loadInfo)&&n.trigger(p.CDN_LOAD_INFO,{loadInfo:e.request.loadInfo})}}function D(e){e.sender===a&&n.trigger(p.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function _(e){e.sender===a&&n.trigger(p.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function A(){l=[],u=[]}return o={setStreamProcessor:function(e){s=e},getStreamProcessor:function(){return s},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],i=[];return t.forEach((function(t){var n=function(e){var t=void 0;switch(e){case T:t=u;break;case M:t=l;break;default:t=[]}return t}(t);i=i.concat(function(e,t){return t.hasOwnProperty("time")?[m(e,t.time,t.threshold)]:e.filter((function(e){for(var i in t)if("state"!==i&&t.hasOwnProperty(i)&&e[i]!=t[i])return!1;return!0}))}(n,e))})),i},isFragmentLoaded:d,isFragmentLoadedOrPending:function(e){var t=!1,i=0,n=void 0;if(!(t=d(e)))for(i=0;i<u.length;i++)n=u[i],e.url===n.url&&e.startTime===n.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:f,removeExecutedRequestsAfterTime:function(e){l=l.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<=e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var i=0,n=0,r=e.length;n<r;n++)g(i,e.start(n)),i=e.end(n);t>0&&g(i,t)}else f()},clearExecutedRequestBySeeking:function(){l=[]},abortRequests:function(){a.abort(),u=[]},executeRequest:function(e){switch(e.action){case y.ACTION_COMPLETE:l.push(e),I(e,M),i("[FragmentModel] executeRequest trigger STREAM_COMPLETED"),n.trigger(p.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case y.ACTION_DOWNLOAD:I(e,T),u.push(e),function(e){n.trigger(p.FRAGMENT_LOADING_STARTED,{sender:o,request:e});var t=s&&s.getBufferLevel();e.bufferLevel=t,a.load(e)}(e);break;default:i("Unknown request action.")}},reset:function(){n.off(p.LOADING_COMPLETED,v,this),n.off(p.LOADING_DATA_PROGRESS,D,this),n.off(p.LOADING_ABANDONED,_,this),a&&a.reset(),A()},addExecutedRequest:function(){},resetInitialSettings:A,resetPreloadData:function(){a&&a.resetPreloadData()}},A(),n.on(p.LOADING_COMPLETED,v,o),n.on(p.LOADING_DATA_PROGRESS,D,o),n.on(p.LOADING_ABANDONED,_,o),o}I.__dashjs_factory_name="FragmentModel";var v=s.a.getClassFactory(I);v.FRAGMENT_MODEL_LOADING=T,v.FRAGMENT_MODEL_EXECUTED=M,v.FRAGMENT_MODEL_CANCELED="canceled",v.FRAGMENT_MODEL_FAILED=N,s.a.updateClassFactory(I.__dashjs_factory_name,v);var D=v,_=function e(t,i,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=i||null,this.data=n||null,this.errorCode=r||null,this.httpCode=a||null};function A(e,t,i){var n=this.context,r=E(n).getInstance().log,a=c(n).getInstance(),o=void 0,s=void 0,l=[],u=i;function d(){return o?o.buffered:[]}function h(){var e=this;if(l.length>0){s=!0;var t=l[0];l.splice(0,1);var i=[],n=function(){var n=d();!function(e,t,i,n){t&&t.length>0&&t.length<i.length&&function(e,t){for(var i=0;i<e.length;i++){var n=Math.round(e.start(i)),r=Math.round(e.end(i));if(r===t.start||n===t.end||t.start>=n&&t.end<=r)return!0}return!1}(t,n)&&a.trigger(p.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:i.end(i.length-2),to:i.start(i.length-1),unintended:!0})}(e,i,n,t),l.length>0?h.call(this):(s=!1,u&&u({chunk:t}))};try{0===t.bytes.length?n.call(this):(i=d(),o.appendBuffer?o.appendBuffer(t.bytes):o.append(t.bytes,t),f(o,n.bind(this)))}catch(e){r('SourceBuffer append failed "'+e+'"'),l.length>0?h():s=!1,u&&u({chunk:t,error:new _(e.code,e.message,null)})}}}function f(e,t){var i=void 0,n=function(){e.updating||(clearInterval(i),t())};if(e.updating)if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",(function i(){e.updating||(e.removeEventListener("updateend",i,!1),t())}),!1)}catch(e){i=setInterval(n,50)}else i=setInterval(n,50);else t()}var g={getAllBufferRanges:d,getBuffer:function(){return o},append:function(e){l.push(e),s||f(o,h.bind(this))},remove:function(t,i,n){var r=this;f(o,(function(){try{t>=0&&i>t&&(n||"ended"!==e.readyState)&&o.remove(t,i),f(o,(function(){a.trigger(p.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:i,unintended:!1})}))}catch(e){a.trigger(p.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:i,unintended:!1,error:new _(e.code,e.message,null)})}}))},abort:function(){try{("open"===e.readyState||o.setTextTrack&&"ended"===e.readyState)&&o.abort()}catch(e){r('SourceBuffer append abort failed: "'+e+'"')}l=[]},reset:function(){if(o){try{e.removeSourceBuffer(o)}catch(e){r("Failed to remove source buffer from media source.")}s=!1,o=null}l=[],u=null},setAppendWindowEnd:function t(i){i<=0||f(o,(function(){if("open"===e.readyState)o.appendWindowEnd=i;else var n=setTimeout((function(){clearTimeout(n),t(i)}),50)}))},updateTimestampOffset:function(e){o.timestampOffset===e||isNaN(e)||f(o,(function(){o.timestampOffset=e}))}};return function(){s=!1;var i=t.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");o=e.addSourceBuffer(i)}catch(e){throw e}}(),g}A.__dashjs_factory_name="SourceBufferSink";var S=s.a.getClassFactory(A);function w(e){var t=this.context,i=E(t).getInstance().log,n=[],r=void 0,a=e;function o(e,t){n=n.filter((function(i){return!((isNaN(t)||i.start<t)&&(isNaN(e)||i.end>e))}))}return{getAllBufferRanges:function(){for(var e=[],t=0;t<n.length;t++){var i=n[t];0===e.length||i.start>e[e.length-1].end?e.push({start:i.start,end:i.end}):e[e.length-1].end=i.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r},append:function(e){"InitializationSegment"!==e.segmentType?(n.push(e),n.sort((function(e,t){return e.start-t.start})),r=null):r=e,i("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),a&&a({chunk:e})},remove:o,abort:function(){},discharge:function(e,t){var i=function(e,t){return n.filter((function(i){return(isNaN(t)||i.start<t)&&(isNaN(e)||i.end>e)}))}(e,t);return r&&(i.push(r),r=null),o(e,t),i},reset:function(){n=[],r=null,a=null}}}w.__dashjs_factory_name="PreBufferSink";var O=s.a.getClassFactory(w),L={DEFAULT:.5,STRONG:1,WEAK:0};function C(e,t,i){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:function(e){var t=L.DEFAULT;return e!==L.DEFAULT&&e!==L.STRONG&&e!==L.WEAK||(t=e),t}(i)}}C.__dashjs_factory_name="SwitchRequest";var b=s.a.getClassFactory(C);b.NO_CHANGE=-1,b.PRIORITY=L,s.a.updateClassFactory(C.__dashjs_factory_name,b);var R=b;function x(e){e=e||{};var t=this.context,i=E(t).getInstance().log,n=e.metricsModel;return{getMaxIndex:function(e){var r=R(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getStreamProcessor")))return r;!function(){if(!n||!n.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error("Missing config parameter(s)")}();var a=e.getMediaInfo(),o=e.getMediaType(),s=n.getReadOnlyMetricsFor(o),l=e.getStreamProcessor(),u=e.getAbrController(),c=e.getStreamInfo(),d=c&&c.manifestInfo?c.manifestInfo.isDynamic:null,h=u.getThroughputHistory(),f=h.getSafeAverageThroughput(o,d),p=h.getAverageLatency(o),g=s.BufferState.length>0?s.BufferState[s.BufferState.length-1]:null,y=e.useBufferOccupancyABR();return!s||isNaN(f)||!g||y||u.getAbandonmentStateFor(o)!==le.ABANDON_LOAD&&(g||d)&&(r.quality=u.getQualityForBitrate(a,f,p),l.getScheduleController().setTimeToLoadDelay(0),i("ThroughputRule requesting switch to index: ",r.quality,"type: ",o,"Average throughput",Math.round(f),"kbps"),r.reason={throughput:f,latency:p}),r},reset:function(){}}}x.__dashjs_factory_name="ThroughputRule";var P=s.a.getClassFactory(x);function j(e){e=e||{};var t=this.context,i=E(t).getInstance().log,n=e.mediaPlayerModel,r=e.metricsModel,a=e.dashMetrics,o=void 0,s=void 0,l=void 0;function u(){o={},s={},l=[]}var c={shouldAbandon:function(e){var u=R(t).create(R.NO_CHANGE,{name:j.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return u;var c,d,h=e.getMediaInfo(),f=e.getMediaType(),p=e.getCurrentRequest();if(!isNaN(p.index)){c=f,d=p.index,o[c]=o[c]||{},o[c][d]=o[c][d]||{};var g=n.getStableBufferTime();if(a.getCurrentBufferLevel(r.getReadOnlyMetricsFor(f))>g)return u;var y=o[f][p.index];if(null===y||null===p.firstByteDate||s.hasOwnProperty(y.id))return u;if(void 0===y.firstByteTime&&(l[f]=[],y.firstByteTime=p.firstByteDate.getTime(),y.segmentDuration=p.duration,y.bytesTotal=p.bytesTotal,y.id=p.index),y.bytesLoaded=p.bytesLoaded,y.elapsedTime=(new Date).getTime()-y.firstByteTime,y.bytesLoaded>0&&y.elapsedTime>0&&function(e,t){l[e]=l[e]||[],l[e].push(t)}(f,Math.round(8*y.bytesLoaded/y.elapsedTime)),l[f].length>=5&&y.elapsedTime>500&&y.bytesLoaded<y.bytesTotal){var m=l[f].reduce((function(e,t){return e+t}),0);if(y.measuredBandwidthInKbps=Math.round(m/l[f].length),y.estimatedTimeOfDownload=+(8*y.bytesTotal/y.measuredBandwidthInKbps/1e3).toFixed(2),y.estimatedTimeOfDownload<1.8*y.segmentDuration||0===e.getRepresentationInfo().quality)return u;if(!s.hasOwnProperty(y.id)){var E=e.getAbrController(),T=y.bytesTotal-y.bytesLoaded,M=E.getBitrateList(h),N=E.getQualityForBitrate(h,y.measuredBandwidthInKbps*n.getBandwidthSafetyFactor());T>y.bytesTotal*M[N].bitrate/M[E.getQualityFor(f,h.streamInfo)].bitrate&&(u.quality=N,u.reason.throughput=y.measuredBandwidthInKbps,u.reason.fragmentID=y.id,s[y.id]=y,i("AbandonRequestsRule ( ",f,"frag id",y.id,") is asking to abandon and switch to quality to ",N," measured bandwidth was",y.measuredBandwidthInKbps),delete o[f][y.id])}}else y.bytesLoaded===y.bytesTotal&&delete o[f][y.id]}return u},reset:u};return u(),c}j.__dashjs_factory_name="AbandonRequestsRule";var z=s.a.getClassFactory(j);function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var U=function e(){k(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},F=function e(){k(this,e),this.s=null,this.d=null,this.b=[]};U.GET="GET",U.HEAD="HEAD",U.MPD_TYPE="MPD",U.XLINK_EXPANSION_TYPE="XLinkExpansion",U.INIT_SEGMENT_TYPE="InitializationSegment",U.INDEX_SEGMENT_TYPE="IndexSegment",U.MEDIA_SEGMENT_TYPE="MediaSegment",U.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",U.OTHER_TYPE="other";var B=10;function Y(e){e=e||{};var t=this.context,i=E(t).getInstance().log,n=e.dashMetrics,a=e.metricsModel,o=e.mediaPlayerModel,s=c(t).getInstance(),l=void 0,u=void 0;function d(e,t,i){var n=i.reduce((function(e,t,n){return t>i[e]?n:e}),0);if(0===n)return null;var r=Math.max(e,B+2*t.length),a=(i[n]-1)/(r/B-1);return{gp:a,Vp:B/a}}function h(e){var t={},i=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),n=function(e){return e.map((function(e){return Math.log(e)}))}(i);n=n.map((function(e){return e-n[0]+1}));var r=o.getStableBufferTime(),a=d(r,i,n);return a?(t.state=1,t.bitrates=i,t.utilities=n,t.stableBufferTime=r,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,f(t)):t.state=0,t}function f(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function g(e,t){var i=o.getStableBufferTime();if(e.stableBufferTime!==i){var r=d(i,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var s=n.getCurrentBufferLevel(a.getReadOnlyMetricsFor(t)),l=s+e.placeholderBuffer;l-=B,l*=r.Vp/e.Vp,l+=B,e.stableBufferTime=i,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,l-s)}}}function y(e,t){return e.Vp*(e.utilities[t]+e.gp)}function m(e,t){for(var i=e.bitrates[t],n=e.utilities[t],r=0,a=t-1;a>=0;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],l=e.Vp*(e.gp+(i*s-o*n)/(i-o));r=Math.max(r,l)}return r}function T(){for(var e in u)u.hasOwnProperty(e)&&2===u[e].state&&(u[e].placeholderBuffer=0)}function M(){for(var e in u)if(u.hasOwnProperty(e)){var t=u[e];0!==t.state&&(t.state=1,f(t))}}function N(){}function I(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=u[e.chunk.mediaInfo.type];if(t&&0!==t.state){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,D(t,e.chunk.mediaInfo.type)}}}function v(e){if(e&&e.metric===r.HTTP_REQUEST&&e.value&&e.value.type===U.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=u[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),D(t,e.mediaType))}}function D(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var i=n.getCurrentBufferLevel(a.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=y(e,e.lastQuality),o=Math.max(0,r-i);e.placeholderBuffer=Math.min(o,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function _(e){if(e){var t=u[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function A(e){if(e){var t=u[e.mediaType];if(t&&0!==t.state){var i,r=n.getCurrentBufferLevel(a.getReadOnlyMetricsFor(e.mediaType));i=t.abrQuality>0?m(t,t.abrQuality):B;var o=Math.max(0,i-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,o)}}}function S(){u={}}return l={getMaxIndex:function(e){var r=e.getMediaInfo(),o=e.getMediaType(),s=a.getReadOnlyMetricsFor(o),l=e.getStreamProcessor(),c=e.getStreamInfo(),d=e.getAbrController(),p=d.getThroughputHistory(),E=c?c.id:null,T=c&&c.manifestInfo&&c.manifestInfo.isDynamic,M=e.useBufferOccupancyABR(),N=R(t).create();if(N.reason=N.reason||{},!M)return N;l.getScheduleController().setTimeToLoadDelay(0);var I=function(e){var t=e.getMediaType(),i=u[t];return i?0!==i.state&&g(i,t):(i=h(e),u[t]=i),i}(e);if(0===I.state)return N;var v=n.getCurrentBufferLevel(s),D=p.getAverageThroughput(o,T),_=p.getSafeAverageThroughput(o,T),A=p.getAverageLatency(o),S=void 0;if(N.reason.state=I.state,N.reason.throughput=D,N.reason.latency=A,isNaN(D))return N;switch(I.state){case 1:S=d.getQualityForBitrate(r,_,A),N.quality=S,N.reason.throughput=_,I.placeholderBuffer=Math.max(0,m(I,S)-v),I.lastQuality=S,!isNaN(I.lastSegmentDurationS)&&v>=I.lastSegmentDurationS&&(I.state=2);break;case 2:!function(e,t){var i=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var n=.001*(i-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,n)}}else{var r=.001*(i-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=i,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,g(e,t)}(I,o),S=function(e,t){for(var i=e.bitrates.length,n=NaN,r=NaN,a=0;a<i;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||o>=r)&&(r=o,n=a)}return n}(I,v+I.placeholderBuffer);var w=d.getQualityForBitrate(r,_,A);S>I.lastQuality&&S>w&&(S=Math.max(w,I.lastQuality));var O=Math.max(0,v+I.placeholderBuffer-y(I,S));O<=I.placeholderBuffer?(I.placeholderBuffer-=O,O=0):(O-=I.placeholderBuffer,I.placeholderBuffer=0,S<d.getTopQualityIndexFor(o,E)?l.getScheduleController().setTimeToLoadDelay(1e3*O):O=0),N.quality=S,N.reason.throughput=D,N.reason.latency=A,N.reason.bufferLevel=v,N.reason.placeholderBuffer=I.placeholderBuffer,N.reason.delay=O,I.lastQuality=S;break;default:i("BOLA ABR rule invoked in bad state."),N.quality=d.getQualityForBitrate(r,_,A),N.reason.state=I.state,N.reason.throughput=_,N.reason.latency=A,I.state=1,f(I)}return N},reset:function(){S(),s.off(p.BUFFER_EMPTY,T,l),s.off(p.PLAYBACK_SEEKING,M,l),s.off(p.PERIOD_SWITCH_STARTED,N,l),s.off(p.MEDIA_FRAGMENT_LOADED,I,l),s.off(p.METRIC_ADDED,v,l),s.off(p.QUALITY_CHANGE_REQUESTED,_,l),s.off(p.FRAGMENT_LOADING_ABANDONED,A,l)}},S(),s.on(p.BUFFER_EMPTY,T,l),s.on(p.PLAYBACK_SEEKING,M,l),s.on(p.PERIOD_SWITCH_STARTED,N,l),s.on(p.MEDIA_FRAGMENT_LOADED,I,l),s.on(p.METRIC_ADDED,v,l),s.on(p.QUALITY_CHANGE_REQUESTED,_,l),s.on(p.FRAGMENT_LOADING_ABANDONED,A,l),l}Y.__dashjs_factory_name="BolaRule";var Q=s.a.getClassFactory(Y),G="qualitySwitchRules",V="abandonFragmentRules";function H(e){e=e||{};var t=this.context,i=e.mediaPlayerModel,n=e.metricsModel,r=e.dashMetrics,a=void 0,o=void 0;function s(e){return e.filter((function(e){return e.quality>R.NO_CHANGE}))}function l(e){var i,n={},r=void 0,a=void 0,o=void 0,s=void 0;if(0!==e.length){for(n[R.PRIORITY.STRONG]=R.NO_CHANGE,n[R.PRIORITY.WEAK]=R.NO_CHANGE,n[R.PRIORITY.DEFAULT]=R.NO_CHANGE,r=0,i=e.length;r<i;r+=1)(a=e[r]).quality!==R.NO_CHANGE&&(n[a.priority]=n[a.priority]>R.NO_CHANGE?Math.min(n[a.priority],a.quality):a.quality);return n[R.PRIORITY.WEAK]!==R.NO_CHANGE&&(o=n[R.PRIORITY.WEAK]),n[R.PRIORITY.DEFAULT]!==R.NO_CHANGE&&(o=n[R.PRIORITY.DEFAULT]),n[R.PRIORITY.STRONG]!==R.NO_CHANGE&&(o=n[R.PRIORITY.STRONG]),o!==R.NO_CHANGE&&(s=o),R(t).create(s)}}return{initialize:function(){a=[],o=[],i.getUseDefaultABRRules()&&(a.push(Q(t).create({metricsModel:n,dashMetrics:r,mediaPlayerModel:i})),a.push(P(t).create({metricsModel:n,dashMetrics:r})),o.push(z(t).create({metricsModel:n,dashMetrics:r,mediaPlayerModel:i}))),i.getABRCustomRules().forEach((function(e){e.type===G&&a.push(e.rule(t).create()),e.type===V&&o.push(e.rule(t).create())}))},reset:function(){[a,o].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),a=[],o=[]},getMaxQuality:function(e){return l(s(a.map((function(t){return t.getMaxIndex(e)}))))||R(t).create()},shouldAbandonFragment:function(e){return l(s(o.map((function(t){return t.shouldAbandon(e)}))))||R(t).create()}}}H.__dashjs_factory_name="ABRRulesCollection";var W=s.a.getClassFactory(H);W.QUALITY_SWITCH_RULES=G,W.ABANDON_FRAGMENT_RULES=V,s.a.updateSingletonFactory(H.__dashjs_factory_name,W);var q=W,Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN,this.id=""};function K(e){var t=(e=e||{}).abrController,i=e.streamProcessor,n=e.streamProcessor.getCurrentRepresentationInfo(),r=e.switchHistory,a=e.droppedFramesHistory,o=e.currentRequest,s=e.useBufferOccupancyABR;return{getMediaType:function(){return n.mediaInfo.type},getMediaInfo:function(){return n.mediaInfo},getDroppedFramesHistory:function(){return a},getCurrentRequest:function(){return o},getSwitchHistory:function(){return r},getStreamInfo:function(){return n.mediaInfo.streamInfo},getStreamProcessor:function(){return i},getAbrController:function(){return t},getRepresentationInfo:function(){return n},useBufferOccupancyABR:function(){return s}}}K.__dashjs_factory_name="RulesContext";var $=s.a.getClassFactory(K);function X(){var e=[],t=[];return{push:function(i){i.newValue===R.NO_CHANGE&&(i.newValue=i.oldValue),e[i.oldValue]||(e[i.oldValue]={noDrops:0,drops:0,dropSize:0});var n=i.newValue-i.oldValue,r=n<0?1:0,a=r?-n:0,o=r?0:1;if(e[i.oldValue].drops+=r,e[i.oldValue].dropSize+=a,e[i.oldValue].noDrops+=o,t.push({idx:i.oldValue,noDrop:o,drop:r,dropSize:a}),t.length>8){var s=t.shift();e[s.idx].drops-=s.drop,e[s.idx].dropSize-=s.dropSize,e[s.idx].noDrops-=s.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}X.__dashjs_factory_name="SwitchRequestHistory";var J=s.a.getClassFactory(X);function ee(){var e=[],t=0,i=0;return{push:function(n,r){var a=r&&r.droppedVideoFrames?r.droppedVideoFrames:0,o=r&&r.totalVideoFrames?r.totalVideoFrames:0,s=a-t;t=a;var l=o-i;i=o,isNaN(n)||(e[n]?(e[n].droppedVideoFrames+=s,e[n].totalVideoFrames+=l):e[n]={droppedVideoFrames:s,totalVideoFrames:l})},getFrameHistory:function(){return e},getFrameInfo:function(){return{droppedFrames:t,totalFrames:i}},reset:function(n){e=[],t=n.droppedVideoFrames,i=n.totalVideoFrames}}}ee.__dashjs_factory_name="DroppedFramesHistory";var te=s.a.getClassFactory(ee);function ie(e){var t=(e=e||{}).mediaPlayerModel,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0;function l(e,t,i,n){var r=Math.pow(.5,i/n.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate;var a=Math.pow(.5,i/n.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=i}function u(e,l,u){return t.getMovingAverageMethod()!==n.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var i=e?s.throughputHalfLife:s.latencyHalfLife,n=e?a[t]:o[t];if(!n||n.totalWeight<=0)return NaN;var r=n.fastEstimate/(1-Math.pow(.5,n.totalWeight/i.fast)),l=n.slowEstimate/(1-Math.pow(.5,n.totalWeight/i.slow));return e?Math.min(r,l):Math.max(r,l)}(e,l):function(e,t,n){var a=function(e,t,n){var a=void 0,o=void 0;if(e?(a=i[t],o=n?3:4):(a=r[t],o=4),a){if(o>=a.length)o=a.length;else if(e)for(var s=1;s<o;++s){var l=a[s]/a[s-1];if((l>=1.3||l<=1/1.3)&&(o+=1)===a.length)break}}else o=0;return o}(e,t,n),o=(e?i:r)[t];return 0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce((function(e,t){return e+t}))/o.length:NaN}(e,l,u)}function c(e,t){return u(!0,e,t)}function d(e){i[e]=i[e]||[],r[e]=r[e]||[],a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},o[e]=o[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function h(){i={},r={},a={},o={}}var f={push:function(e,u,c){if(u.trace&&u.trace.length){var h=u.tresponse.getTime()-u.trequest.getTime()||1,f=u._tfinish.getTime()-u.tresponse.getTime()||1,p=u.trace.reduce((function(e,t){return e+t.b[0]}),0),g=h+f,y=Math.round(8*p/g);if(!(p<1e4)){if(d(e),function(e,i,r){return e===n.VIDEO?r+i<t.getCacheLoadThresholdForType(n.VIDEO):e===n.AUDIO?r+i<t.getCacheLoadThresholdForType(n.AUDIO):void 0}(e,h,f)){if(i[e].length>0&&!i[e].hasCachedEntries)return;i[e].hasCachedEntries=!0}else i[e]&&i[e].hasCachedEntries&&function(e){delete i[e],delete r[e],delete a[e],delete o[e],d(e)}(e);i[e].push(y),i[e].length>5&&i[e].shift(),r[e].push(h),r[e].length>5&&r[e].shift(),l(a[e],y,.001*f,s.throughputHalfLife),l(o[e],h,1,s.latencyHalfLife)}}},getAverageThroughput:c,getSafeAverageThroughput:function(e,i){var n=c(e,i);return isNaN(n)||(n*=t.getBandwidthSafetyFactor()),n},getAverageLatency:function(e){return u(!1,e)},getDict:function(e){return{throughput:i[e],latency:r[e]}},reset:h};return s={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},h(),f}ie.__dashjs_factory_name="ThroughputHistory";var ne=s.a.getClassFactory(ie),re="abandonload",ae="allowload";function oe(){var e=this.context,t=E(e).getInstance(),i=c(e).getInstance(),a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=void 0,g=void 0,y=void 0,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0,b=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,F=void 0,B=void 0,Y=void 0,Q={video:0,audio:0},G={video:{},audio:{}};function V(e){e||(u={video:!0,audio:!0}),d={},h={},f={},g={},m={},y={},x={},z={},M=!1,B=!0,N=!1,void 0===I&&(I=!1),b=void 0,P=void 0,j=void 0,clearTimeout(T),T=null}function H(e){e.mediaType===n.VIDEO&&(b=e.oldQuality,P.push(b,O.getPlaybackQuality()))}function W(e){e.metric!==r.HTTP_REQUEST||!e.value||e.value.type!==U.MEDIA_SEGMENT_TYPE||e.mediaType!==n.AUDIO&&e.mediaType!==n.VIDEO||j.push(e.mediaType,e.value,B),e.metric!==r.BUFFER_LEVEL||e.mediaType!==n.AUDIO&&e.mediaType!==n.VIDEO||function(e,t){var i=L.getABRStrategy();if(i!==n.ABR_STRATEGY_BOLA)if(i!==n.ABR_STRATEGY_THROUGHPUT){var r=L.getStableBufferTime(),a=r,s=.5*r,l=z[e],u=t>(l?s:a);z[e]=u,u!==l&&o(u?"AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+").":"AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+").")}else z[e]=!1;else z[e]=!0}(e.mediaType,.001*e.value.level)}function K(e,t){return d[t]=d[t]||{},d[t].hasOwnProperty(e)||(d[t][e]=0),function(e,t){if(t!==n.VIDEO||!M||!y[t])return e;I||ye();var i=A.getValue(),r=S.getAdaptationForType(i,0,t).Representation,a=e;if(v>0&&_>0){for(;a>0&&r[a]&&v<r[a].width&&v-r[a-1].width<r[a].width-v;)a-=1;r.length-2>=a&&r[a].width===r[a+1].width&&(a=Math.min(e,a+1))}return a}(function(e,t,i){var n=se(t);return isNaN(n)||n>=1||n<0?e:Math.min(e,Math.round(i*n))}(function(e,t){var i=e;if(!y[t])return i;var n=oe(t);void 0!==n&&(i=Math.max(e,n));var r=ie(t);return void 0!==r&&(i=Math.min(i,r)),i}(d[t][e],e),e,d[t][e]),e)}function X(e){return f.hasOwnProperty("max")&&f.max.hasOwnProperty(e)?f.max[e]:NaN}function ee(e){return f.hasOwnProperty("min")&&f.min.hasOwnProperty(e)?f.min[e]:NaN}function ie(e){var t=X(e);return t?he(y[e].getMediaInfo(),t):void 0}function oe(e){var t=ee(e);if(t){var i=fe(y[e].getMediaInfo()),n=he(y[e].getMediaInfo(),t);return i[n]&&n<i.length-1&&i[n].bitrate<1e3*t&&n++,n}}function se(e){return g.hasOwnProperty("max")&&g.max.hasOwnProperty(e)?g.max[e]:1}function le(e){return u[e]}function ue(e,t,i,n){var r=t.id,a=ge(e);if(null===i||isNaN(i)||i%1!=0)throw new Error("argument is not an integer");var o=K(e,r);i!==a&&i>=0&&i<=o&&ce(e,a,i,o,n)}function ce(e,n,r,a,s){if(e&&y[e]){var l=y[e].getStreamInfo(),u=l?l.id:null;if(t.getLogToBrowserConsole()){var c=F.getCurrentBufferLevel(k.getReadOnlyMetricsFor(e));o("AbrController ("+e+") switch from "+n+" to "+r+"/"+a+" (buffer: "+c+") "+(s?JSON.stringify(s):"."))}!function(e,t,i){h[t]=h[t]||{},h[t][e]=i}(e,u,r),i.trigger(p.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:l,oldQuality:n,newQuality:r,reason:s})}}function de(e,t){m[e].state=t}function he(e,t,i){if(B&&i&&y[e.type].getCurrentRepresentationInfo()&&y[e.type].getCurrentRepresentationInfo().fragmentDuration){i/=1e3;var n=y[e.type].getCurrentRepresentationInfo().fragmentDuration;if(i>n)return 0;t*=1-i/n}var r=fe(e);if(!r||0===r.length)return 0;for(var a=r.length-1;a>=0;a--)if(1e3*t>=r[a].bitrate)return a;return 0}function fe(e){if(!e||!e.bitrateList)return null;for(var t=e.bitrateList,i=e.type,n=[],r=void 0,a=0,o=t.length;a<o;a++)(r=new Z).mediaType=i,r.qualityIndex=a,r.id=t[a].id,r.bitrate=t[a].bandwidth,r.width=t[a].width,r.height=t[a].height,r.scanType=t[a].scanType,n.push(r);return n}function pe(e){return z[e]}function ge(e){if(e&&y[e]){var t=y[e].getStreamInfo(),i=t?t.id:null;if(i)return h[i]=h[i]||{},h[i].hasOwnProperty(e)||(h[i][e]=Ee(e,!1)||0),h[i][e]}return 0}function ye(){if(O){var e=N&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;v=O.getClientWidth()*e,_=O.getClientHeight()*e}}function me(t){var i=t.request.mediaType;if(le(i)){var n=y[i];if(!n)return;var r=$(e).create({abrController:a,streamProcessor:n,currentRequest:t.request,useBufferOccupancyABR:pe(i)}),o=s.shouldAbandonFragment(r);if(o.quality>R.NO_CHANGE){var u=n.getFragmentModel();u.getRequests({state:D.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(u.abortRequests(),de(i,re),x[i].reset(),x[i].push({oldValue:ge(i,l.getActiveStreamInfo()),newValue:o.quality,confidence:1,reason:o.reason}),ue(i,l.getActiveStreamInfo(),o.quality,o.reason),clearTimeout(T),T=setTimeout((function(){de(i,ae),T=null}),L.getAbandonLoadTimeout()))}}}function Ee(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var i=L.getPreloadData();if(i&&i[e+"id"])return y[e].getRepresentationController().getQualityForRepresentationId(i[e+"id"])}return Q[e]||0}return a={isPlayingAtTopQuality:function(e){var t=e.id,i=ge(n.AUDIO),r=ge(n.VIDEO);return i===K(n.AUDIO,t)&&r===K(n.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,i=e.streamInfo.id,n=e.representationCount-1;return function(e,t,i){d[t]=d[t]||{},d[t][e]=i}(t,i,n),n},getThroughputHistory:function(){return j},getBitrateList:fe,getQualityForBitrate:he,getMaxAllowedBitrateFor:X,getTopBitrateInfoFor:function(e){if(e&&y&&y[e]){var t=y[e].getStreamInfo();if(t.id){var i=K(e,t.id),n=fe(y[e].getMediaInfo());return n[i]?n[i]:null}}return null},getMinAllowedBitrateFor:ee,setMaxAllowedBitrateFor:function(e,t){f.max=f.max||{},f.max[e]=t},setMinAllowedBitrateFor:function(e,t){f.min=f.min||{},f.min[e]=t},getMaxAllowedIndexFor:ie,getMinAllowedIndexFor:oe,getMaxAllowedRepresentationRatioFor:se,setMaxAllowedRepresentationRatioFor:function(e,t){g.max=g.max||{},g.max[e]=t},getInitialBitrateFor:function(e){var t=C.getSavedBitrateSettings(e);if(!f.hasOwnProperty(e))if(g.hasOwnProperty(e)){var i=A.getValue(),r=S.getAdaptationForType(i,0,e).Representation;if(Array.isArray(r)){var a=Math.max(Math.round(r.length*g[e])-1,0);f[e]=r[a].bandwidth}else f[e]=0}else isNaN(t)?f[e]=e===n.VIDEO?1e3:100:f[e]=t;return f[e]},setInitialBitrateFor:function(e,t){f[e]=t},getInitialRepresentationRatioFor:function(e){return g.hasOwnProperty(e)?g[e]:null},setInitialRepresentationRatioFor:function(e,t){g[e]=t},setAutoSwitchBitrateFor:function(e,t){u[e]=t},getAutoSwitchBitrateFor:le,getUseDeadTimeLatency:function(){return B},setUseDeadTimeLatency:function(e){B=e},setLimitBitrateByPortal:function(e){M=e},getLimitBitrateByPortal:function(){return M},getUsePixelRatioInLimitBitrateByPortal:function(){return N},setUsePixelRatioInLimitBitrateByPortal:function(e){N=e},getQualityFor:ge,getAbandonmentStateFor:function(e){return m[e]?m[e].state:null},setPlaybackQuality:ue,checkPlaybackQuality:function(i){if(i&&y&&y[i]){var n=y[i].getStreamInfo(),r=n?n.id:null,l=ge(i),u=$(e).create({abrController:a,streamProcessor:y[i],currentValue:l,switchHistory:x[i],droppedFramesHistory:P,useBufferOccupancyABR:pe(i)});if(P){var c=O.getPlaybackQuality();c&&P.push(b,c)}if(le(i)){var d=oe(i),h=K(i,r),f=s.getMaxQuality(u),p=f.quality;if(void 0!==d&&p<d&&(p=d),p>h&&(p=h),x[i].push({oldValue:l,newValue:p}),p>R.NO_CHANGE&&p!=l)m[i].state!==ae&&p===l||ce(i,l,p,h,f.reason);else if(t.getLogToBrowserConsole()){var g=F.getCurrentBufferLevel(k.getReadOnlyMetricsFor(i));o("AbrController ("+i+") stay on "+l+"/"+h+" (buffer: "+g+")")}}}},getTopQualityIndexFor:K,setElementSize:ye,setWindowResizeEventCalled:function(e){I=e},createAbrRulesCollection:function(){(s=q(e).create({metricsModel:k,dashMetrics:F,mediaPlayerModel:L,adapter:w})).initialize()},registerStreamType:function(t,r){x[t]=J(e).create(),y[t]=r,m[t]=m[t]||{},m[t].state=ae,z[t]=!1,i.on(p.LOADING_PROGRESS,me,this),t==n.VIDEO&&(i.on(p.QUALITY_CHANGE_RENDERED,H,this),P=te(e).create()),i.on(p.METRIC_ADDED,W,this),j=ne(e).create({mediaPlayerModel:L})},unRegisterStreamType:function(e){delete y[e]},setDefaultQualityFor:function(e,t){Q[e]=Number(t)||0,o("Set default quality for "+e+" - "+Q[e])},getDefaultQualityFor:Ee,getDroppedFramesInfo:function(){return P&&P.getFrameInfo&&P.getFrameInfo()||{}},setCurrentSegmentInfoFor:function(e,t){G[e]=t},getCurrentSegmentInfoFor:function(e){return G[e]},getInitializeDate:function(){return Y},setConfig:function(e){e&&(e.streamController&&(l=e.streamController),e.domStorage&&(C=e.domStorage),e.mediaPlayerModel&&(L=e.mediaPlayerModel),e.metricsModel&&(k=e.metricsModel),e.dashMetrics&&(F=e.dashMetrics),e.dashManifestModel&&(S=e.dashManifestModel),e.adapter&&(w=e.adapter),e.manifestModel&&(A=e.manifestModel),e.videoModel&&(O=e.videoModel),e.initializeDate&&(Y=e.initializeDate))},reset:function(){V(!0),i.off(p.LOADING_PROGRESS,me,this),i.off(p.QUALITY_CHANGE_RENDERED,H,this),i.off(p.METRIC_ADDED,W,this),s&&s.reset()}},o=t.log.bind(a),V(),a}oe.__dashjs_factory_name="AbrController";var se=s.a.getSingletonFactory(oe);se.ABANDON_LOAD=re,se.QUALITY_DEFAULT=0,s.a.updateSingletonFactory(oe.__dashjs_factory_name,se);var le=se,ue="neverReplace",ce="alwaysReplace",de="highestBitrate",he="widestRange",fe=de;function pe(){var e,t=this.context,i=E(t).getInstance().log,r=c(t).getInstance(),a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=[ce,ue],h=[de,he],f={video:0,audio:0};function g(e,t){if(!e||!t)return[];var i=t.id;return a[i]&&a[i][e]?a[i][e].list:[]}function y(e,t){return!e||!t||t&&!a[t.id]?null:a[t.id][e].current}function m(e){if(e){var t=e.type,i=e.streamInfo,n=i.id,o=y(t,i);if(a[n]&&a[n][t]&&(!o||!v(e,o))){a[n][t].current=e,o&&r.trigger(p.CURRENT_TRACK_CHANGED,{oldMediaInfo:o,newMediaInfo:e,switchMode:l[t]});var s=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}(e);s&&a[n][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),u.setSavedMediaSettings(t,s))}}}function T(e,t){e&&t&&(o[e]=t)}function M(e){return e?o[e]:null}function N(){return s||fe}function I(e){return e===n.AUDIO||e===n.VIDEO||e===n.TEXT||e===n.FRAGMENTED_TEXT||e===n.IMAGE}function v(e,t){var i=e.id===t.id,n=e.viewpoint===t.viewpoint,r=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return i&&n&&r&&a&&o&&s}function D(){a={},o={audio:null,video:null},l={audio:ce,video:ue}}function _(e,t){var i=!e.lang||e.lang===t.lang,n=!e.viewpoint||e.viewpoint===t.viewpoint,r=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],a=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return i&&n&&r&&a&&o}function A(e){var t=N(),n=[],r=function(e){var t=0,i=[],n=void 0;return e.forEach((function(e){(n=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))))>t?(t=n,i=[e]):n===t&&i.push(e)})),i},a=function(e){var t=0,i=[],n=void 0;return e.forEach((function(e){(n=e.representationCount)>t?(t=n,i=[e]):n===t&&i.push(e)})),i};switch(t){case de:(n=r(e)).length>1&&(n=a(n));break;case he:(n=a(e)).length>1&&(n=r(e));break;default:i("track selection mode is not supported: "+t)}return n[0]}return e={checkInitialMediaSettingsForType:function(e,t){var i=M(e),r=g(e,t),a=[];e!==n.FRAGMENTED_TEXT?(i||T(e,i=u.getSavedMediaSettings(e)),r&&0!==r.length&&(i&&r.forEach((function(e){_(i,e)&&a.push(e)})),0===a.length?m(A(r)):a.length>1?m(A(a)):m(a[0]))):m(r[0])},addTrack:function(e){if(e){var t=e.type;if(I(t)){var i=e.streamInfo.id;a[i]||(a[i]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var n=a[i][t].list,r=0,o=n.length;r<o;++r)if(v(n[r],e))return;n.push(e);var s=M(t);s&&_(s,e)&&!y(t,e.streamInfo)&&m(e)}}},getTracksFor:g,getCurrentTrackFor:y,isCurrentTrack:function(e){var t=e.type,i=e.streamInfo.id;return a[i]&&a[i][t]&&v(a[i][t].current,e)},setTrack:m,setInitialSettings:T,getInitialSettings:M,setSwitchMode:function(e,t){-1!==d.indexOf(t)?l[e]=t:i("track switch mode is not supported: "+t)},getSwitchMode:function(e){return l[e]},setSelectionModeForInitialTrack:function(e){-1!==h.indexOf(e)?s=e:i("track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:N,isMultiTrackSupportedByType:I,isTracksEqual:v,setStartOffsetTimeForType:function(e,t){e&&t>0&&(f[e]=t)},getStartOffsetTimeForType:function(e){return f[e]||0},setConfig:function(e){e&&(e.errHandler&&e.errHandler,e.domStorage&&(u=e.domStorage))},reset:D},D(),e}pe.__dashjs_factory_name="MediaController";var ge=s.a.getSingletonFactory(pe);ge.TRACK_SWITCH_MODE_NEVER_REPLACE=ue,ge.TRACK_SWITCH_MODE_ALWAYS_REPLACE=ce,ge.TRACK_SELECTION_MODE_HIGHEST_BITRATE=de,ge.TRACK_SELECTION_MODE_WIDEST_RANGE=he,ge.DEFAULT_INIT_TRACK_SELECTION_MODE=fe,s.a.updateSingletonFactory(pe.__dashjs_factory_name,ge);var ye=ge,me=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var i=0;i<t.boxes.length;i++)this.boxes.push(new e(t.boxes[i]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var n=0;n<t.references.length;n++){var r={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(r)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var a=0,o=t.samples.length;a<o;a++){var s={sample_size:t.samples[a].sample_size,sample_duration:t.samples[a].sample_duration,sample_composition_time_offset:t.samples[a].sample_composition_time_offset};this.samples.push(s)}}break;case"elst":this.boxes=t.entries;break;case"mvhd":this.timescale=t.timescale}}return e.prototype.getChildBox=function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]},e.prototype.getChildBoxes=function(e){for(var t=[],i=0;i<this.boxes.length;i++)this.boxes[i].type===e&&t.push(this.boxes[i]);return t},e}();function Ee(){var e=void 0;function t(t){var n=[];if(!t||!e||"function"!=typeof e.fetchAll)return n;for(var r=e.fetchAll(t),a=void 0,o=0,s=r.length;o<s;o++)(a=i(r[o]))&&n.push(a);return n}function i(e){if(!e)return null;var t=new me(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?i(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var i=t(e.boxes[e.boxes.length-1].type);return i.length>0?i[i.length-1]:null}}}Ee.__dashjs_factory_name="IsoFile";var Te=s.a.getClassFactory(Ee),Me=i(1),Ne=i.n(Me),Ie=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=i,this.size=n};function ve(){var e=this.context;function t(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function i(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return{parse:function(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);var i=Ne.a.parseBuffer(t),n=Te(e).create();return n.setData(i),n},findLastTopIsoBoxCompleted:function(e,n,r){if(void 0===r&&(r=0),!n||r+8>=n.byteLength)return new Ie(0,!1);for(var a=n instanceof ArrayBuffer?new Uint8Array(n):n,o=void 0,s=0;r<a.byteLength;){var l=t(a,r),u=i(a,r+4);if(0===l)break;r+l<=a.byteLength&&(e.indexOf(u)>=0?o=new Ie(r,!0,l):s=r+l),r+=l}return o||new Ie(s,!1)}}}ve.__dashjs_factory_name="BoxParser";var De=s.a.getSingletonFactory(ve);function _e(){var e={};return{save:function(t){var i=t.streamId,n=t.representationId;e[i]=e[i]||{},e[i][n]=t},extract:function(t,i){return e&&e[t]&&e[t][i]?e[t][i]:null},reset:function(){e={}}}}_e.__dashjs_factory_name="InitCache";var Ae=s.a.getSingletonFactory(_e),Se="bufferLoaded",we="bufferStalled",Oe=.5,Le=.01,Ce="BufferController";function be(e){e=e||{};var t=this.context,i=c(t).getInstance(),r=e.metricsModel,a=e.mediaPlayerModel,o=e.errHandler,s=e.streamController,l=e.mediaController,u=e.adapter,d=e.abrController,h=e.playbackController,f=e.type,g=e.streamProcessor,y=void 0,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,_=void 0,A=void 0,w=void 0,L=void 0,C=void 0,b=void 0,R=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,F=void 0,B=void 0,Y=void 0,Q=void 0,G=void 0,V=void 0,H=void 0,W=void 0;function q(e){if(!j||!e||!g)return null;if(v)try{"function"==typeof(w=S(t).create(v,e,J.bind(this))).getBuffer().initialize&&w.getBuffer().initialize(f,g),i.trigger(p.BUFFER_CREATED,{mediaType:e.type})}catch(e){m("Caught error on create SourceBuffer: "+e),o.mediaSourceError("Error creating "+f+" source buffer.")}else w=O(t).create(J.bind(this));me(g.getRepresentationInfoForQuality(T).MSETimeOffset)}function Z(e){e.fragmentModel===g.getFragmentModel()&&(m("Init fragment finished loading saving to",f+"'s init cache"),m("Append Init fragment",f," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality),w?w.setAppendWindowEnd(a.getCachedDurationOffset("duration")):W=function(){var e=a.getCachedDurationOffset("duration");w.setAppendWindowEnd(e)},$(e.chunk))}function K(e){if(e.fragmentModel===g.getFragmentModel()){var i=e.chunk,n=i.bytes,r=i.quality,a=g.getRepresentationInfoForQuality(r),o=u.getEventsFor(a.mediaInfo,g),s=u.getEventsFor(a,g);if(o&&o.length>0||s&&s.length>0){var l=function(e,i,n,r){for(var a=Math.max(!i||isNaN(i.startTime)?0:i.startTime,0),o=[],s=[],l=n.concat(r),c=0,d=l.length;c<d;c++)o[l[c].schemeIdUri]=l[c];for(var h=De(t).getInstance().parse(e).getBoxes("emsg"),f=0,p=h.length;f<p;f++){var g=u.getEvent(h[f],o,a);g&&s.push(g)}return s}(n,g.getFragmentModel().getRequests({state:D.FRAGMENT_MODEL_EXECUTED,quality:r,index:i.index})[0],o,s);g.getEventController().addInbandEvents(l)}if(Y){Q=i;var c=w&&w.getAllBufferRanges();c&&c.length>0&&h.getTimeToStreamEnd()>Oe&&(m("Clearing buffer because track changed - "+(c.end(c.length-1)+.5)),fe([{start:0,end:c.end(c.length-1)+.5,force:!0}]))}else $(i)}}function $(e,t){!x||t?(x=!0,b=e,e.startOffsetTime=l.getStartOffsetTimeForType(e.mediaInfo.type),w?w.append(e):G.push(e),e.mediaInfo.type===n.VIDEO&&i.trigger(p.VIDEO_CHUNK_RECEIVED,{chunk:e})):B.push(e)}function X(e){if(e.mediaType===f&&(W&&(W(),W=null),G.length))for(var t=Date.now(),n=e.mediaType,r=d.getInitializeDate(),o=0;o<G.length;o++){var s=G[o];s&&s.mediaInfo.type===n&&w&&w.append&&(G[o]=null,V&&(me(V),V=0),w.append(s),i.trigger(p.DELAY_TO_APPEND_TO_BUFFER,{mediaType:n,appendTime:t-r,createdTime:Date.now()-r,isPreload:!!a.getPreloadData()}))}}function J(e){if(e.error){if(22===e.error.code&&(I=.8*be(),m("Quota exceeded for type: "+f+", Critical Buffer: "+I),I>0)){var t=Math.max(.2*I,1),n=I-t;a.setBufferToKeep(parseFloat(t).toFixed(5)),a.setBufferAheadToKeep(parseFloat(n).toFixed(5))}22!==e.error.code&&Re()||(m("Clearing playback buffer to overcome quota exceed situation for type: "+f),i.trigger(p.QUOTA_EXCEEDED,{sender:y,criticalBufferLevel:I,mediaType:f}),ie(),x=!1)}else{(b=e.chunk)&&!isNaN(b.index)&&(_=Math.max(b.index,_),ce());var r=w.getAllBufferRanges();if(b.segmentType===U.MEDIA_SEGMENT_TYPE)ne();else if(Y){var o=h.getTime();m("[BufferController][",f,"] appendToBuffer seek target should be "+o),g.getScheduleController().setSeekTarget(o),u.setIndexHandlerTime(g,o)}var s={sender:y,quality:b.quality,startTime:b.start,index:b.index,bufferedRanges:r};b&&!b.endFragment?i.trigger(p.BYTES_APPENDED,s):b&&i.trigger(p.BYTES_APPENDED_END_FRAGMENT,s),0===B.length?x=!1:$(B.shift(),!0)}}function ee(e){T!==e.newQuality&&f===e.mediaType&&g.getStreamInfo().id===e.streamInfo.id&&(me(g.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),T=e.newQuality)}function te(){if(M&&(k=!0,M=!1,A=Number.POSITIVE_INFINITY),B=[],x=!1,f!==n.FRAGMENTED_TEXT){var e=w.getAllBufferRanges(),t=!0;if(e&&e.length>0)for(var i=h.getTime(),r=0,a=e.length;r<a;r++)i>=e.start(r)&&i<=e.end(r)-1&&(t=!1);t?(g.getFragmentModel().clearExecutedRequestBySeeking(),ie()):ne()}else ne();z=void 0}function ie(){var e=function(){var e=[],t=w.getAllBufferRanges();if(!t||0===t.length)return e;var i=h.getTime(),n=t.end(t.length-1)+.5,r=g.getFragmentModel().getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:i,threshold:Le})[0];if(r){var a={start:0,end:r.startTime-Oe},o=g.getFragmentModel().getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:r.startTime-r.duration/2,threshold:Le})[0];o&&o.startTime!=r.startTime&&(a.end=o.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a);var s={start:r.startTime+r.duration+Oe,end:n},l=g.getFragmentModel().getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:r.startTime+r.duration+Oe,threshold:Le})[0];l&&l.startTime!==r.startTime&&(s.start=l.startTime+l.duration+Oe),s.start<s.end&&s.start<n&&e.push(s)}else m("getAllRangesWithSafetyFactor for",f,"- No request found in current time position, removing full buffer 0 -",n),e.push({start:0,end:n});return e}();e&&0!==e.length||ne(),fe(e)}function ne(){Y||(se(),ue())}function re(){de()}function ae(){de()}function oe(e,t){var i=w&&w.getAllBufferRanges(),n=0,r=0,a=null,o=null,s=0,l=void 0,u=void 0,c=t||.15;if(null!=i){for(u=0,l=i.length;u<l;u++)if(n=i.start(u),r=i.end(u),null===a)s=Math.abs(n-e),(e>=n&&e<r||s<=c)&&(a=n,o=r);else{if(!((s=n-o)<=c))break;o=r}if(null!==a)return{start:a,end:o}}return null}function se(){var e,t;h&&(e=function(){var e=h.getTime();if(z){var t=w.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),z))}return e}()||0,N=null===(t=oe(e,void 0))?0:t.end-e,i.trigger(p.BUFFER_LEVEL_UPDATED,{sender:y,bufferLevel:N}),de())}function ue(){g&&s&&g.getStreamInfo().id===s.getActiveStreamInfo().id&&(r.addBufferState(f,C,g.getScheduleController().getBufferTarget()),r.addBufferLevel(f,new Date,1e3*N))}function ce(){_>=A-1&&!M&&void 0===w.discharge&&(M=!0,m("[BufferController]["+f+"] checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),i.trigger(p.BUFFERING_COMPLETED,{sender:y,streamInfo:g.getStreamInfo()}))}function de(){"audio"!==f&&"video"!==f||(k&&!M&&h&&h.getTimeToStreamEnd()-N<Oe&&(k=!1,M=!0,m("[BufferController]["+f+"] checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),i.trigger(p.BUFFERING_COMPLETED,{sender:y,streamInfo:g.getStreamInfo()})),N<Oe&&!M?he(we):(M||N>=a.getStableBufferTime())&&he(Se))}function he(e){C===e||e===we&&0===h.getTime()||(C=e,ue(),i.trigger(p.BUFFER_LEVEL_STATE_CHANGED,{sender:y,state:e,mediaType:f,streamInfo:g.getStreamInfo()}),i.trigger(e===Se?p.BUFFER_LOADED:p.BUFFER_EMPTY,{mediaType:f}),m(e===Se?"Got enough buffer to start for "+f:"Waiting for more buffer before starting playback for "+f))}function fe(e){e&&w&&0!==e.length&&(F.push.apply(F,e),P||pe())}function pe(){if(0===F.length||!w)return m("Nothing to prune, halt pruning"),F=[],void(P=!1);var e=w.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return m("SourceBuffer is empty (or does not exist), halt pruning"),F=[],void(P=!1);var t=F.shift();m("Removing",f,"buffer from:",t.start,"to",t.end),P=!0;var i=h.getTime();i<t.end&&(M=!1,_=0,Y||(g.getScheduleController().setSeekTarget(i),u.setIndexHandlerTime(g,i)));var n=s.getDuration()-1;n&&0===t.start&&t.end>=n&&(t.force=!0),w.remove(t.start,t.end,t.force)}function ge(e){w===e.buffer&&(m("[BufferController][",f,"] onRemoved buffer from:",e.from,"to",e.to),0===F.length&&(P=!1),e.unintended&&(m("[BufferController][",f,"] detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),u.setIndexHandlerTime(g,e.from)),P?pe():(Y?(Y=!1,Q&&$(Q)):(m("onRemoved : call updateBufferLevel"),se()),i.trigger(p.BUFFER_CLEARED,{sender:y,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Re()})))}function me(e){0!==e&&(w&&w.updateTimestampOffset?w.updateTimestampOffset(e):V=e)}function Ee(e){if(e.sender.getStreamProcessor()===g&&!e.error){var t=0;try{t=e.currentRepresentation.segmentAvailabilityRange.start}catch(e){}me(t)}}function Te(e){e.fragmentModel===g.getFragmentModel()&&(A=e.request.index,ce())}function Me(e){var t=w&&w.getAllBufferRanges();t&&e.newMediaInfo.type===f&&e.newMediaInfo.streamInfo.id===g.getStreamInfo().id&&(m("[BufferController]["+f+"] track change asked"),l.getSwitchMode(f)===ye.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&h.getTimeToStreamEnd()>Oe&&(M=!1,A=Number.POSITIVE_INFINITY))}function Ne(){++R*(a.getWallclockTimeUpdateInterval()/1e3)>=a.getBufferPruningInterval()&&(R=0,w&&f!==n.FRAGMENTED_TEXT&&(M||fe(function(){var e=[],t=w.getAllBufferRanges();if(!t||0===t.length)return e;var i=h.getTime(),n={start:Math.max(0,i-a.getBufferToKeep()),end:i+a.getBufferAheadToKeep()},r=g.getFragmentModel().getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:i,threshold:Le})[0];if(r)n.start=Math.min(r.startTime,n.start),n.end=Math.max(r.startTime+r.duration,n.end);else if(0===i&&h.getIsDynamic())return[];if(t.start(0)<=n.start){for(var o={start:0,end:n.start},s=0;s<t.length&&t.end(s)<=n.start;s++)o.end=t.end(s);o.start<o.end&&e.push(o)}if(t.end(t.length-1)>=n.end){var l={start:n.end,end:t.end(t.length-1)+Le};l.start<l.end&&e.push(l)}return e}())))}function Ie(){de()}function ve(){if(a.getAppendingSourceState()){M=!1,A=Number.POSITIVE_INFINITY,j.reset();var e=a.getCachedDurationOffset("offset");u.setIndexHandlerTime(g,e),g.resetPreloadData(),g.getFragmentModel().resetInitialSettings()}}function _e(e,t){v=e,w&&t&&"function"==typeof w.discharge&&(L=w,q(t))}function be(){var e,t=w.getAllBufferRanges(),i=0,n=void 0;if(!t)return i;for(n=0,e=t.length;n<e;n++)i+=t.end(n)-t.start(n);return i}function Re(){return be()<I}function xe(e){I=Number.POSITIVE_INFINITY,C=void 0,T=le.QUALITY_DEFAULT,A=Number.POSITIVE_INFINITY,_=0,b=null,M=!1,x=!1,P=!1,k=!1,N=0,R=0,F=[],G=[],w&&(e||w.abort(),w.reset(),w=null),Y=!1}return y={getBufferControllerType:function(){return Ce},initialize:function(e){_e(e),T=d.getQualityFor(f,g.getStreamInfo()),i.on(p.DATA_UPDATE_COMPLETED,Ee,this),i.on(p.INIT_FRAGMENT_LOADED,Z,this),i.on(p.MEDIA_FRAGMENT_LOADED,K,this),i.on(p.QUALITY_CHANGE_REQUESTED,ee,this),i.on(p.STREAM_COMPLETED,Te,this),i.on(p.PLAYBACK_PLAYING,ae,this),i.on(p.PLAYBACK_PROGRESS,ne,this),i.on(p.PLAYBACK_TIME_UPDATED,ne,this),i.on(p.PLAYBACK_RATE_CHANGED,Ie,this),i.on(p.PLAYBACK_SEEKING,te,this),i.on(p.PLAYBACK_STALLED,re,this),i.on(p.WALLCLOCK_TIME_UPDATED,Ne,this),i.on(p.CURRENT_TRACK_CHANGED,Me,this,c.EVENT_PRIORITY_HIGH),i.on(p.SOURCEBUFFER_REMOVE_COMPLETED,ge,this),i.on(p.BUFFER_CREATED,X,this),i.on(p.APPENDING_NEXT_SOURCE,ve,this)},createBuffer:q,dischargePreBuffer:function(){if(w&&L&&"function"==typeof L.discharge){var e=L.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+f+"PreBuffer discharge, adding buffer for:",i=0;i<e.length;i++)t+=" start: "+e.start(i)+", end: "+e.end(i)+";";m(t)}else m("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var n=L.discharge(),r=null,a=0;a<n.length;a++){var o=n[a],s=j.extract(o.streamId,o.representationId);s&&(r!==s&&(w.append(s),r=s),w.append(o))}L.reset(),L=null}},getType:function(){return f},getStreamProcessor:function(){return g},setSeekStartTime:function(e){z=e},getBuffer:function(){return w},getBufferLevel:function(){return N},getRangeAt:oe,setMediaSource:_e,getMediaSource:function(){return v},getIsBufferingCompleted:function(){return M},switchInitData:function(e,t,n){var r=j.extract(e,t);Y=!0===n&&n,H=a.getAppendingSourceState(),r&&!H?(m("Append Init fragment",f," with representationId:",r.representationId," and quality:",r.quality),$(r)):(H&&(H=!1,Y=!1),i.trigger(p.INIT_REQUESTED,{sender:y}))},getIsPruningInProgress:function(){return P},reset:function(e){i.off(p.DATA_UPDATE_COMPLETED,Ee,this),i.off(p.QUALITY_CHANGE_REQUESTED,ee,this),i.off(p.INIT_FRAGMENT_LOADED,Z,this),i.off(p.MEDIA_FRAGMENT_LOADED,K,this),i.off(p.STREAM_COMPLETED,Te,this),i.off(p.CURRENT_TRACK_CHANGED,Me,this),i.off(p.PLAYBACK_PLAYING,ae,this),i.off(p.PLAYBACK_PROGRESS,ne,this),i.off(p.PLAYBACK_TIME_UPDATED,ne,this),i.off(p.PLAYBACK_RATE_CHANGED,Ie,this),i.off(p.PLAYBACK_SEEKING,te,this),i.off(p.PLAYBACK_STALLED,re,this),i.off(p.WALLCLOCK_TIME_UPDATED,Ne,this),i.off(p.SOURCEBUFFER_REMOVE_COMPLETED,ge,this),i.off(p.BUFFER_CREATED,X,this),i.off(p.APPENDING_NEXT_SOURCE,ve,this),xe(e)}},m=E(t).getInstance().log.bind(y),j=Ae(t).getInstance(),B=[],G=[],V=0,xe(),y}be.__dashjs_factory_name=Ce;var Re=s.a.getClassFactory(be);Re.BUFFER_LOADED=Se,Re.BUFFER_EMPTY=we,s.a.updateClassFactory(be.__dashjs_factory_name,Re);var xe=Re,Pe=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function je(){var e=void 0;return{initialize:function(t){if(e=new Pe,!t)return null;var i=t.indexOf("#");if(-1!==i)for(var n=t.substr(i+1).split("&"),r=0,a=n.length;r<a;++r){var o=n[r],s=o.indexOf("=");if(-1!==s){var l=o.substring(0,s);e.hasOwnProperty(l)&&(e[l]=o.substr(s+1))}}},getURIFragmentData:function(){return e}}}je.__dashjs_factory_name="URIFragmentModel";var ze=s.a.getSingletonFactory(je);function ke(){var e,t=this.context,i=E(t).getInstance().log,r=c(t).getInstance(),a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=void 0,g=void 0,y=void 0,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0;function A(e){!N&&e.fromStreamInfo&&void 0!==y[e.fromStreamInfo.id]&&(delete T[e.fromStreamInfo.id],delete y[e.fromStreamInfo.id])}function S(){var e=U(!0),t=N?e-M.start:0;return parseFloat((e+(M.duration-t)-R()).toFixed(5))}function w(){M&&h&&h.getElement()?h.play():v=!0}function O(){return M&&h?h.isPaused():null}function L(){M&&h&&h.pause()}function C(){return M&&h?h.isSeeking():null}function b(e){M&&h&&(r.trigger(p.PLAYBACK_SEEK_ASKED),i("Requesting seek to time: "+e),h.setCurrentTime(e))}function R(){return M&&h?h.getTime():null}function x(){return M&&h?h.getPlaybackRate():null}function P(){return M&&h?h.getEnded():null}function j(){return N}function z(){f=NaN,g=null,v=!1,y={},m=0,_=0,T={},h&&(r.off(p.DATA_UPDATE_COMPLETED,Q,this),r.off(p.BUFFER_LEVEL_STATE_CHANGED,re,this),r.off(p.BYTES_APPENDED_END_FRAGMENT,ne,this),r.off(p.PERIOD_SWITCH_STARTED,A,this),B(),h.removeEventListener("canplay",G),h.removeEventListener("play",V),h.removeEventListener("waiting",H),h.removeEventListener("playing",W),h.removeEventListener("pause",q),h.removeEventListener("error",ie),h.removeEventListener("seeking",Z),h.removeEventListener("seeked",K),h.removeEventListener("timeupdate",$),h.removeEventListener("progress",X),h.removeEventListener("ratechange",J),h.removeEventListener("loadedmetadata",ee),h.removeEventListener("ended",te),h.removeEventListener("stalled",ae)),h=null,M=null,N=null}function k(){var e=ze(t).getInstance().getURIFragmentData(),i=void 0;if(e){i={};var n=parseInt(e.r,10);n>=0&&M&&n<M.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.floor(Date.now()/1e3)-M.manifestInfo.DVRWindowSize+n),i.fragS=parseInt(e.s,10),i.fragT=parseInt(e.t,10)}return i}function U(e,t){var i,n=void 0,r=k();if(i=r?e?M.start:isNaN(r.fragS)?r.fragT:r.fragS:0,N)isNaN(i)||((n=i-M.manifestInfo.availableFrom.getTime()/1e3)>f||n<(isNaN(t)?NaN:t-M.manifestInfo.DVRWindowSize))&&(n=null),n=n||f;else if(!isNaN(i)&&i<Math.max(M.manifestInfo.duration,M.duration)&&i>=0)n=i;else{var a=y[M.id];n=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,M.start):M.start}return n}function F(){null===g&&(g=setInterval((function(){var e;r.trigger(p.WALLCLOCK_TIME_UPDATED,{isDynamic:N,time:new Date}),j()&&O()&&(e=Date.now(),(!D||e>D+500)&&(D=e,$()))}),I.getWallclockTimeUpdateInterval()))}function B(){clearInterval(g),g=null}function Y(){if(!O()&&N&&0!==h.getReadyState()){var e=R(),t=function(e){var t=o.getReadOnlyMetricsFor(n.VIDEO)||o.getReadOnlyMetricsFor(n.AUDIO),i=s.getCurrentDVRInfo(t),r=i?i.range:null,a=void 0;if(!r)return NaN;if(e>r.end)a=Math.max(r.end-2*M.manifestInfo.minBufferTime,r.start);else{if(!(e+.25<r.start))return e;a=r.start}return a}(e);!isNaN(t)&&t!==e&&b(t)}}function Q(e){if(!e.error){var t=d.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;M.id===t.id&&(M=t,Y())}}function G(){r.trigger(p.CAN_PLAY)}function V(){i("Native video element event: play"),Y(),F(),r.trigger(p.PLAYBACK_STARTED,{startTime:R()})}function H(){i("Native video element event: waiting"),r.trigger(p.PLAYBACK_WAITING,{playingTime:R()})}function W(){i("Native video element event: playing"),r.trigger(p.PLAYBACK_PLAYING,{playingTime:R()})}function q(){i("Native video element event: pause"),r.trigger(p.PLAYBACK_PAUSED,{ended:P()})}function Z(){var e=R();i("Seeking to: "+e),F(),r.trigger(p.PLAYBACK_SEEKING,{seekTime:e})}function K(){i("Native video element event: seeked"),r.trigger(p.PLAYBACK_SEEKED)}function $(){var e=R();r.trigger(p.PLAYBACK_TIME_UPDATED,{timeToEnd:S(),time:e})}function X(){r.trigger(p.PLAYBACK_PROGRESS)}function J(){var e=x();i("Native video element event: ratechange: ",e),r.trigger(p.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ee(){i("Native video element event: loadedmetadata"),r.trigger(p.PLAYBACK_METADATA_LOADED),F()}function te(){i("Native video element event: ended"),L(),B(),r.trigger(p.PLAYBACK_ENDED,{isNativeEnded:!0})}function ie(e){var t=e.target||e.srcElement;r.trigger(p.PLAYBACK_ERROR,{error:t.error})}function ne(e){var t,i=void 0,n=e.bufferedRanges;if(n&&n.length&&(!y[M.id]||!0!==y[M.id].started)){var r=e.sender.getType();void 0===T[M.id]&&(T[M.id]=[]),T[M.id][r]=n,void 0===y[M.id]&&(y[M.id]=[],y[M.id].started=!1),void 0===y[M.id][r]&&(y[M.id][r]=Math.max(n.start(0),M.start));var o=a.isVideoTrackPresent(),s=a.isAudioTrackPresent();t=U(!1),s&&o?isNaN(y[M.id].audio)||isNaN(y[M.id].video)||(y[M.id].audio<y[M.id].video?(i=y[M.id].video>t?y[M.id].video:t,n=T[M.id].audio):(i=y[M.id].audio>t?y[M.id].audio:t,n=T[M.id].video),function(e,t){if(t&&t.length>0)for(var i=0,n=t.length;i<n;i++)if(e>=t.start(i)&&e<t.end(i))return!0;return!1}(i,n)&&(C()||0===i||b(i),y[M.id].started=!0)):y[M.id][r]&&(i=y[M.id][r]>t?y[M.id][r]:t,C()||b(i),y[M.id].started=!0)}}function re(e){e.streamInfo.id===M.id&&h.setStallState(e.mediaType,e.state===xe.BUFFER_EMPTY)}function ae(e){i("Native video element event: stalled",e),r.trigger(p.PLAYBACK_STALLED,{e:e})}return e={initialize:function(e){M=e,h.addEventListener("canplay",G),h.addEventListener("play",V),h.addEventListener("waiting",H),h.addEventListener("playing",W),h.addEventListener("pause",q),h.addEventListener("error",ie),h.addEventListener("seeking",Z),h.addEventListener("seeked",K),h.addEventListener("timeupdate",$),h.addEventListener("progress",X),h.addEventListener("ratechange",J),h.addEventListener("loadedmetadata",ee),h.addEventListener("ended",te),h.addEventListener("stalled",ae),N=M.manifestInfo.isDynamic,f=M.start,r.on(p.DATA_UPDATE_COMPLETED,Q,this),r.on(p.BYTES_APPENDED_END_FRAGMENT,ne,this),r.on(p.BUFFER_LEVEL_STATE_CHANGED,re,this),r.on(p.PERIOD_SWITCH_STARTED,A,this),v&&(v=!1,w())},setConfig:function(e){e&&(e.streamController&&(a=e.streamController),e.metricsModel&&(o=e.metricsModel),e.dashMetrics&&(s=e.dashMetrics),e.manifestModel&&(l=e.manifestModel),e.dashManifestModel&&(u=e.dashManifestModel),e.mediaPlayerModel&&(I=e.mediaPlayerModel),e.adapter&&(d=e.adapter),e.videoModel&&(h=e.videoModel))},getStartTimeFromUriParameters:k,getStreamStartTime:U,getTimeToStreamEnd:S,getTime:R,getPlaybackRate:x,getPlayedRanges:function(){return M&&h?h.getPlayedRanges():null},getEnded:P,getIsDynamic:j,getStreamController:function(){return a},setLiveStartTime:function(e){f=e},getLiveStartTime:function(){return f},computeLiveDelay:function(e,t){var i,r=u.getMpd(l.getValue()),a=void 0;if(i=I.getUseSuggestedPresentationDelay()&&r.hasOwnProperty(n.SUGGESTED_PRESENTATION_DELAY)?r.suggestedPresentationDelay:I.getLowLatencyEnabled()?0:I.getLiveDelay()?I.getLiveDelay():isNaN(e)?2*M.manifestInfo.minBufferTime:e*I.getLiveDelayFragmentCount(),r.availabilityStartTime&&(_=r.availabilityStartTime.getTime()),t>0){var o=Math.max(t-10,t/2);a=Math.min(i,o)}else a=i;return m=a,a},getLiveDelay:function(){return m},getCurrentLiveLatency:function(){if(!N||isNaN(_))return NaN;var e=R();return isNaN(e)||0===e?0:(Math.round((new Date).getTime()-(1e3*e+_))/1e3).toFixed(3)},play:w,isPaused:O,pause:L,isSeeking:C,seek:b,reset:z},z(),e}ke.__dashjs_factory_name="PlaybackController";var Ue=s.a.getSingletonFactory(ke);function Fe(e){var t=(e=e||{}).timelineConverter,i=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(t&&t.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getCurrentRepresentationInfo")))throw new Error("Missing config parameter(s)")}();var e=i.getCurrentRepresentationInfo(),n=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(n=t.getExpectedLiveEdge(),t.setClientTimeOffset(n-e.DVRWindow.end)),n},reset:function(){t=null,i=null}}}Fe.__dashjs_factory_name="LiveEdgeFinder";var Be=s.a.getClassFactory(Fe);function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qe=function e(){Ye(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};Qe.INITIAL_PLAYOUT_START_REASON="initial_playout",Qe.SEEK_START_REASON="seek",Qe.RESUME_FROM_PAUSE_START_REASON="resume",Qe.METRICS_COLLECTION_START_REASON="metrics_collection_start";var Ge=function e(){Ye(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};function Ve(e){var t=(e=e||{}).dashMetrics,i=e.metricsModel,r=e.mediaPlayerModel,a=e.abrController;function o(e,o,s){var l=NaN,u=e.getCurrentRepresentationInfo();if(o===n.FRAGMENTED_TEXT);else if(o===n.AUDIO&&s){var c=t.getCurrentBufferLevel(i.getReadOnlyMetricsFor(n.VIDEO));l=isNaN(u.fragmentDuration)?c:Math.max(c,u.fragmentDuration)}else{var d=u.mediaInfo.streamInfo;l=a.isPlayingAtTopQuality(d)?d.manifestInfo.duration>=r.getLongFormContentDurationThreshold()?r.getBufferTimeAtTopQualityLongForm():r.getBufferTimeAtTopQuality():r.getStableBufferTime()}return l}return{execute:function(e,n,r){return t.getCurrentBufferLevel(i.getReadOnlyMetricsFor(n))<o(e,n,r)},getBufferTarget:o}}Ge.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Ge.REBUFFERING_REASON="rebuffering",Ge.USER_REQUEST_STOP_REASON="user_request",Ge.END_OF_PERIOD_STOP_REASON="end_of_period",Ge.END_OF_CONTENT_STOP_REASON="end_of_content",Ge.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Ge.FAILURE_STOP_REASON="failure",Ve.__dashjs_factory_name="BufferLevelRule";var He=s.a.getClassFactory(Ve);function We(e){e=e||{};var t=this.context,i=E(t).getInstance().log,n=e.adapter;return{execute:function(e,t){var r=e.getCurrentRepresentationInfo(),a=r.mediaInfo.type,o=e.getScheduleController(),s=o.getSeekTarget(),l=!isNaN(s),u=e.getBufferController(),c=l?s:n.getIndexHandlerTime(e);if(isNaN(c))return null;if(l&&o.setSeekTarget(NaN),u){var d=u.getRangeAt(c);null===d||l||(i("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",a,".",c,"was changed to",d.end),c=d.end)}var h=void 0;if(t)c=t.startTime+t.duration/2,h=n.getFragmentRequestForTime(e,r,c,{timeThreshold:0,ignoreIsFinished:!0});else{for(h=n.getFragmentRequestForTime(e,r,c,{keepIdx:!l});h&&h.action!==y.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(h);)h=n.getNextFragmentRequest(e,r);h&&(isNaN(h.startTime+h.duration)||n.setIndexHandlerTime(e,h.startTime+h.duration),h.delayLoadingTime=(new Date).getTime()+o.getTimeToLoadDelay(),o.setTimeToLoadDelay(0))}return h}}}We.__dashjs_factory_name="NextFragmentRequestRule";var qe=s.a.getClassFactory(We);function Ze(e){e=e||{};var t,i=this.context,r=c(i).getInstance(),a=e.metricsModel,o=e.adapter,s=e.dashMetrics,l=e.dashManifestModel,u=e.timelineConverter,d=e.mediaPlayerModel,h=e.abrController,f=e.playbackController,g=e.streamController,y=e.type,m=e.streamProcessor,T=e.mediaController,M=void 0,N=void 0,I=void 0,v=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0,b=void 0,R=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,U=void 0,F=void 0,B=void 0,Y=void 0,Q=void 0,G={video:-1,audio:-1};function V(){I&&!m.isBufferingCompleted()?(M("[ScheduleController][",y,"] start"),De(),_=!1,v&&(v=!1),$(!1),Z(0)):M("[ScheduleController][",y,"] start denied")}function H(){_||(M("[ScheduleController][",y,"] stop"),_=!0,clearTimeout(C))}function W(e,t){z[t]=z[t]||{};var i=h.getTopQualityIndexFor(e,t);return z[t][e]!=i&&(M("Top quality "+e+" index has changed from "+z[t][e]+" to "+i),z[t][e]=i,!0)}function q(){var e=m.getBufferController();if(_||O||f.isPaused()&&!P)M("[ScheduleController][",y,"] - schedule stop!");else if(e.getIsBufferingCompleted())M("Schedule stop because buffering is completed!");else{!function(){var e=1.5*(I.fragmentDuration||5),t=N.getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:f.getTime()+e,threshold:0})[0];if(t&&-1===U.indexOf(t)&&!l.getIsTextTrack(y)){var i=d.getFastSwitchEnabled(),n=m.getBufferLevel(),r=h.getAbandonmentStateFor(y);t.mediaType&&h.setCurrentSegmentInfoFor(t.mediaType,{index:t.index,startTime:t.startTime,duration:t.duration,url:t.url});var a=!T.isCurrentTrack(t.mediaInfo)&&T.getSwitchMode(t.mediaInfo.type)===ye.TRACK_SWITCH_MODE_NEVER_REPLACE,o=t.quality!==I.quality;i&&(a||o)&&n>=e&&r!==le.ABANDON_LOAD?(ee(t),M("Reloading outdated fragment at index: ",t.index)):t.quality>I.quality&&(M("The buffer has better quality it in then what we would request so set append point to end of buffer!!"),Ne(f.getTime()+m.getBufferLevel()))}}();var t=U.length>0,i=m.getStreamInfo();B||isNaN(k)||F||t||W(I.mediaInfo.type,i.id)||R.execute(m,y,g.isVideoTrackPresent())?($(!0),t||F||h.checkPlaybackQuality(y),function(){r.trigger(p.GET_NEXT_FRAGMENT,{mediaType:y,currentTime:m.getPlaybackController().getTime(),bufferLevel:m.getBufferLevel(),bufferResetInProgress:B,lastInitQuality:isNaN(k),switchTrack:F,isReplacement:t,hasTopQualityChanged:W(I.mediaInfo.type,i.id),bufferLevelRule:R.execute(m,y,g.isVideoTrackPresent()),final:B||isNaN(k)||F||t||W(I.mediaInfo.type,i.id)||R.execute(m,y,g.isVideoTrackPresent())});var e=m.getFragmentController();if(I.quality!==k)M("ScheduleController - "+y+" - quality has changed, get init request for representationid = "+I.id),k=I.quality,m.switchInitData(I.id);else if(F)M("ScheduleController - "+y+" - switch track has been asked, get init request for "+y+" with representationid = "+I.id),B=T.getSwitchMode(y)===ye.TRACK_SWITCH_MODE_ALWAYS_REPLACE,m.switchInitData(I.id,B),k=I.quality,F=!1;else{var n=U.shift();if(e.isInitializationRequest(n))m.switchInitData(n.representationId);else{var a=void 0;m.getBufferController().getIsPruningInProgress()||!(a=x.execute(m,n))&&i.manifestInfo&&i.manifestInfo.isDynamic&&M("getNextFragment - "+y+" - Playing at the bleeding live edge and frag is not available yet"),a?(M("ScheduleController - "+y+" - getNextFragment - request is "+a.url),N.executeRequest(a)):($(!1),Z(500))}}}()):Z(500)}}function Z(e){clearTimeout(C),C=setTimeout(q,e)}function K(e){e.sender&&e.sender.getStreamProcessor()===m&&X(I.quality)}function $(e){O!==e?O=e:M("[ScheduleController][",y,"] isFragmentProcessingInProgress is already equal to",e)}function X(e){var t=o.getInitRequest(m,e);t&&(t.mediaType&&h.setCurrentSegmentInfoFor(t.mediaType,{index:t.index,startTime:t.startTime,duration:t.duration,url:t.url}),$(!0),N.executeRequest(t))}function J(){F=!0}function ee(e){U.push(e)}function te(e){if(y===e.mediaType&&m.getStreamInfo().id===e.streamInfo.id){if(null==(I=m.getRepresentationInfoForQuality(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");G[y]=e.newQuality,ve(new Date,Ge.REPRESENTATION_SWITCH_STOP_REASON),De(),f.isPaused()&&(Q={type:y,oldQuality:e.oldQuality})}}function ie(e){if(f&&N){var t=N.getRequests({state:D.FRAGMENT_MODEL_EXECUTED,time:f.getTime(),threshold:0})[0];t&&f.getTime()>=t.startTime&&((!j.mediaInfo||t.mediaInfo.type===j.mediaInfo.type&&t.mediaInfo.id!==j.mediaInfo.id)&&e&&r.trigger(p.TRACK_CHANGE_RENDERED,{mediaType:y,oldMediaInfo:j.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===j.quality&&t.adaptationIndex===j.adaptationIndex||!e||G[y]===t.quality&&(r.trigger(p.QUALITY_CHANGE_RENDERED,{mediaType:y,oldQuality:j.quality,newQuality:t.quality}),G[y]=-1,Q=null),j={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function ne(e){e.error||e.sender.getStreamProcessor()!==m||(I=o.convertDataToRepresentationInfo(e.currentRepresentation),d.getAppendingSourceState()&&J())}function re(e){e.error||m.getStreamInfo().id!==e.streamInfo.id||(I=m.getCurrentRepresentationInfo(),v&&(f.getIsDynamic()?(u.setTimeSyncCompleted(!0),function(){var e=m.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),i=I.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=t-f.computeLiveDelay(I.fragmentDuration,i),l=o.getFragmentRequestForTime(m,I,r,{ignoreIsFinished:!0});if(d.getLowLatencyEnabled()){var c=l.duration<d.getLiveDelay()?l.startTime:l.startTime+l.duration-d.getLiveDelay();f.setLiveStartTime(c)}else f.setLiveStartTime(l.startTime);(b=f.getStreamStartTime(!1,t))>I.mediaInfo.streamInfo.start+I.mediaInfo.streamInfo.duration&&f.seek(b);var h=s.getCurrentManifestUpdate(a.getMetricsFor(n.STREAM));a.updateManifestUpdateInfo(h,{currentTime:b,presentationStartTime:t,latency:t-b,clientTimeOffset:u.getClientTimeOffset()})}}()):(b=f.getStreamStartTime(!1),m.getBufferController().setSeekStartTime(b))),_&&V())}function ae(e){e.fragmentModel===N&&(H(),$(!1),M("[ScheduleController] Stream is complete"),d.getAppendingSourceState()&&V())}function oe(e){e.sender===N&&(M("[ScheduleController][",y,"] - onFragmentLoadingCompleted"),l.getIsTextTrack(y)&&$(!1),e.error&&e.request.serviceLocation&&!_&&$(!1),B&&(Y=e.request),f.isPaused()&&Q&&e.request.quality===G[y]&&(r.trigger(p.QUALITY_CHANGE_RENDERED,{mediaType:y,oldQuality:j.quality||Q.oldQuality,newQuality:e.request.quality}),G[y]=-1,Q=null))}function se(){ie(!0)}function ue(e){e.sender.getStreamProcessor()===m&&(B&&!isNaN(e.startTime)&&(B=!1,N.addExecutedRequest(Y)),$(!1),Z(0))}function ce(e){e.streamProcessor===m&&(M("[ScheduleController][onFragmentLoadingAbandoned] for "+y+", request: "+e.request.url+" has been aborted"),f.isSeeking()||F||(M("[ScheduleController][onFragmentLoadingAbandoned] for "+y+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ee(e.request)),$(!1),Z(0))}function de(e){e.sender.getStreamProcessor()===m&&H()}function he(e){e.sender.getStreamProcessor()===m&&(e.unintended?m.getFragmentModel().removeExecutedRequestsAfterTime(e.from,m.getStreamInfo().duration):m.getFragmentModel().syncExecutedRequestsWithBufferedRange(m.getBufferController().getBuffer().getAllBufferRanges(),m.getStreamInfo().duration),e.hasEnoughSpaceToAppend&&_&&V())}function fe(e){e.sender.getStreamProcessor()!==m||e.state!==xe.BUFFER_EMPTY||f.isSeeking()||(M("[ScheduleController][",y,"] - Buffer is empty! Stalling!"),ve(new Date,Ge.REBUFFERING_REASON))}function pe(e){e.sender.getStreamProcessor()===m&&(H(),$(!1))}function ge(){N.abortRequests(),H()}function me(e){e.sender.getStreamProcessor()===m&&X(e.index)}function Ee(){!_&&P||V()}function Te(e){b=e.seekTime,Ie(0),_&&V();var t=s.getCurrentManifestUpdate(a.getMetricsFor(n.STREAM)),i=I.DVRWindow&&f?I.DVRWindow.end-f.getTime():NaN;a.updateManifestUpdateInfo(t,{latency:i}),O?(M("[ScheduleController][onPlaybackSeeking] for "+y+", call fragmentModel.abortRequests in order to seek quicker"),N.abortRequests(),G[y]>=0&&(o.setIndexHandlerTime(m,b),m.switchInitData(I.id)),$(!1),Z(500)):Z(0)}function Me(e){S&&(S.playbackspeed=e.playbackRate.toString())}function Ne(e){b=e}function Ie(e){L=e}function ve(e,t){if(A&&!1===w){var i=S.start,n=e.getTime()-i.getTime();S.duration=n,S.stopreason=t,A.trace.push(S),w=!0}}function De(){A&&!0===w&&I&&(w=!1,(S=new Ge).representationid=I.id,S.start=new Date,S.mstart=1e3*f.getTime(),S.playbackspeed=f.getPlaybackRate().toString())}function _e(){k=NaN}function Ae(){O=!1,L=0,b=NaN,A=null,S=null,w=!0,v=!0,k=NaN,j={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},z={},U=[],_=!0,F=!1,B=!1,Y=null}return t={initialize:function(){N=m.getFragmentModel(),P=d.getScheduleWhilePaused(),R=He(i).create({abrController:h,dashMetrics:s,metricsModel:a,mediaPlayerModel:d}),x=qe(i).create({adapter:o}),l.getIsTextTrack(y)&&r.on(p.TIMED_TEXT_REQUESTED,me,this),r.on(p.QUALITY_CHANGE_REQUESTED,te,this),r.on(p.DATA_UPDATE_STARTED,de,this),r.on(p.DATA_UPDATE_COMPLETED,ne,this),r.on(p.FRAGMENT_LOADING_COMPLETED,oe,this),r.on(p.STREAM_COMPLETED,ae,this),r.on(p.STREAM_INITIALIZED,re,this),r.on(p.BUFFER_LEVEL_STATE_CHANGED,fe,this),r.on(p.BUFFER_CLEARED,he,this),r.on(p.BYTES_APPENDED_END_FRAGMENT,ue,this),r.on(p.INIT_REQUESTED,K,this),r.on(p.QUOTA_EXCEEDED,pe,this),r.on(p.PLAYBACK_SEEKING,Te,this),r.on(p.PLAYBACK_STARTED,Ee,this),r.on(p.PLAYBACK_RATE_CHANGED,Me,this),r.on(p.PLAYBACK_TIME_UPDATED,se,this),r.on(p.URL_RESOLUTION_FAILED,ge,this),r.on(p.FRAGMENT_LOADING_ABANDONED,ce,this),r.on(p.MANIFEST_UPDATED,_e,this)},getType:function(){return y},getSeekTarget:function(){return b},setSeekTarget:Ne,setTimeToLoadDelay:Ie,getTimeToLoadDelay:function(){return L},replaceRequest:ee,switchTrackAsked:J,isStarted:function(){return!1===_},start:V,stop:H,reset:function(){r.off(p.DATA_UPDATE_STARTED,de,this),r.off(p.DATA_UPDATE_COMPLETED,ne,this),r.off(p.BUFFER_LEVEL_STATE_CHANGED,fe,this),r.off(p.QUALITY_CHANGE_REQUESTED,te,this),r.off(p.FRAGMENT_LOADING_COMPLETED,oe,this),r.off(p.STREAM_COMPLETED,ae,this),r.off(p.STREAM_INITIALIZED,re,this),r.off(p.QUOTA_EXCEEDED,pe,this),r.off(p.BYTES_APPENDED_END_FRAGMENT,ue,this),r.off(p.BUFFER_CLEARED,he,this),r.off(p.INIT_REQUESTED,K,this),r.off(p.PLAYBACK_RATE_CHANGED,Me,this),r.off(p.PLAYBACK_SEEKING,Te,this),r.off(p.PLAYBACK_STARTED,Ee,this),r.off(p.PLAYBACK_TIME_UPDATED,se,this),r.off(p.URL_RESOLUTION_FAILED,ge,this),r.off(p.FRAGMENT_LOADING_ABANDONED,ce,this),r.off(p.MANIFEST_UPDATED,_e,this),l.getIsTextTrack(y)&&r.off(p.TIMED_TEXT_REQUESTED,me,this),H(),ie(!1),Ae()},setPlayList:function(e){A=e},getBufferTarget:function(){return R.getBufferTarget(m,y,g.isVideoTrackPresent())},finalisePlayList:function(e,t){ve(e,t),A=null}},M=E(i).getInstance().log.bind(t),Ae(),t}Ze.__dashjs_factory_name="ScheduleController";var Ke=s.a.getClassFactory(Ze),$e=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return e.prototype.init=function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.INTERACTIVE="interactive",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"},e}()),Xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return e.hasInitialization=function(e){return null!==e.initialization||null!==e.range},e.hasSegments=function(e){return e.segmentInfoType!==$e.BASE_URL&&e.segmentInfoType!==$e.SEGMENT_BASE&&!e.indexRange},e}();function Je(){var e=this.context,t=c(e).getInstance(),i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=void 0,g=void 0,y=void 0,m=void 0,E=void 0,T=void 0,M=void 0,N=[];function I(){return o}function v(){return l}function D(){r=null,a=-1,o=!0,s=[],u=null,h=null,f=null,g=null,y=null,m=null,E=null}function A(){var e=new Date,t=v(),i=1e3*h.getTime();f.addRepresentationSwitch(t.adaptation.type,e,i,t.id)}function S(){var e=T.getStreamInfo(),t=e?e.manifestInfo:null,i=t?t.isDynamic:null,n=y.calcSegmentAvailabilityRange(l,i);f.addDVRInfo(T.getType(),h.getTime(),t,n)}function w(e){return s[e]}function O(e){return s.indexOf(e)}function L(e){var n=e;o=!1,t.trigger(p.AST_IN_FUTURE,{delay:n}),setTimeout((function(){if(!I()){o=!0,t.trigger(p.DATA_UPDATE_STARTED,{sender:i}),s.forEach((function(e){e.segmentAvailabilityRange=null}));for(var e=0;e<s.length;e++)d.updateRepresentation(s[e],!0)}}),n)}function C(e){if(e.sender.getStreamProcessor()===T&&I()){var i=e.representation,a=f.getMetricsFor(n.STREAM),c=v().adaptation.type,d=f.getMetricsFor(v().adaptation.type),g=E.getCurrentManifestUpdate(a),y=!1,m=0,M=void 0,N=void 0;if(i.adaptation.period.mpd.manifest.type===$e.DYNAMIC&&!i.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var D=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start;m=1e3*(h.computeLiveDelay(l.segmentDuration,T.getStreamInfo().manifestInfo.DVRWindowSize)-D)}if(m>0)return S(),L(m),N=new _(1,"Segments update failed",null),void t.trigger(p.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:l,error:N});if(g){for(var w=0;w<g.representationInfo.length;w++)if((M=g.representationInfo[w]).index===i.index&&M.mediaType===T.getType()){y=!0;break}y||f.addManifestUpdateRepresentationInfo(g,i.id,i.index,i.adaptation.period.index,T.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}(function(e){var t=u.getQualityFor(e),i=T.getStreamInfo(),n=u.getTopQualityIndexFor(e,i.id),r=u.getMinAllowedIndexFor(e);void 0!==r&&t<r&&(t=r),t>n&&(t=n);for(var a=t;a<1;a++){var o=s[a].segmentInfoType;if(null===s[a].segmentAvailabilityRange||!Xe.hasInitialization(s[a])||(o===$e.SEGMENT_BASE||o===$e.BASE_URL)&&!s[a].segments)return!1}return!0})(c)&&(o=!1,u.setPlaybackQuality(T.getType(),T.getStreamInfo(),O(l)),f.updateManifestUpdateInfo(g,{latency:l.segmentAvailabilityRange.end-h.getTime()}),E.getCurrentRepresentationSwitch(d)||A(),t.trigger(p.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:l}))}}function b(e){e.isDynamic&&function(e){for(var t=void 0,i=0,n=s.length;i<n;i++)(t=s[i]).segmentAvailabilityRange=y.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function R(e){e.sender.getStreamProcessor()===T&&(M.getValue().doNotUpdateDVRWindowOnBufferUpdated||S())}function x(e){if(e.mediaType===T.getType()&&T.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){var t=e.newQuality;N[t]||(N[t]=!0,d.updateRepresentation(s[t],!0)),l=w(e.newQuality);var i=u.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(i)||g.setSavedBitrateSettings(e.mediaType,i),A()}}function P(e){if(e.newDuration){var t=v();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return i={initialize:function(){d=T.getIndexHandler()},setConfig:function(e){e.abrController&&(u=e.abrController),e.domStorage&&(g=e.domStorage),e.metricsModel&&(f=e.metricsModel),e.dashMetrics&&(E=e.dashMetrics),e.dashManifestModel&&(m=e.dashManifestModel),e.playbackController&&(h=e.playbackController),e.timelineConverter&&(y=e.timelineConverter),e.manifestModel&&(M=e.manifestModel),e.streamProcessor&&(T=e.streamProcessor)},getData:function(){return r},getDataIndex:function(){return a},isUpdating:I,updateData:function(e,i,c){var h=T.getStreamInfo(),f=u.getTopQualityIndexFor(c,h.id),g=u.getMinAllowedIndexFor(c),y=void 0;if(o=!0,t.trigger(p.DATA_UPDATE_STARTED,{sender:this}),s=function(e){return a=m.getIndexForAdaptation(r,e.period.mpd.manifest,e.period.index),m.getRepresentationsForAdaptation(e)}(i),null!==r&&r.id==e.id||c===n.FRAGMENTED_TEXT||u.getThroughputHistory().getAverageThroughput(c)||u.getInitialBitrateFor(c,h),y=u.getQualityFor(c),void 0!==g&&y<g&&(y=g),y>f&&(y=f),l=w(y),r=e,c!==n.VIDEO&&c!==n.AUDIO&&c!==n.FRAGMENTED_TEXT)return o=!1,void t.trigger(p.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:l});(N=[])[y]=!0,d.updateRepresentation(s[y],!0)},getStreamProcessor:function(){return T},getCurrentRepresentation:v,getRepresentationForQuality:w,getQualityForRepresentationId:function(e){return O(s.find((function(t){return t.id===e})))},reset:function(){t.off(p.QUALITY_CHANGE_REQUESTED,x,i),t.off(p.REPRESENTATION_UPDATED,C,i),t.off(p.WALLCLOCK_TIME_UPDATED,b,i),t.off(p.BUFFER_LEVEL_UPDATED,R,i),t.off(p.MANIFEST_VALIDITY_CHANGED,P,i),D(),N=[]}},D(),t.on(p.QUALITY_CHANGE_REQUESTED,x,i),t.on(p.REPRESENTATION_UPDATED,C,i),t.on(p.WALLCLOCK_TIME_UPDATED,b,i),t.on(p.BUFFER_LEVEL_UPDATED,R,i),t.on(p.MANIFEST_VALIDITY_CHANGED,P,i),i}Je.__dashjs_factory_name="RepresentationController";var et=s.a.getClassFactory(Je);function tt(){var e=void 0,t=/^[a-z][a-z0-9+\-.]*:/i,i=/^https?:\/\//i,n=/^https:\/\//i,r=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,a=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},o=function(e,t){var i=s;if(!t)return e;if(!c(e))return e;d(e)&&(i=l),h(e)&&(i=u);var n=i(t),r="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"";return[n,e].join(r)};function s(e){var t=e.indexOf("/"),i=e.lastIndexOf("/");return-1!==t?i===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,i+1)):""}function l(e){var t=e.match(r);return t?t[1]:""}function u(e){var i=e.match(t);return i?i[0]:""}function c(e){return!t.test(e)}function d(e){return c(e)&&"/"===e.charAt(0)}function h(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=a}catch(e){}finally{e=e||o}}(),{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:c,isPathAbsolute:d,isSchemeRelative:h,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return n.test(e)},resolve:function(t,i){return e(t,i)}}}tt.__dashjs_factory_name="URLUtils";var it=s.a.getSingletonFactory(tt),nt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};function rt(e,t){for(;e.length<t;)e="0"+e;return e}function at(e,t){return e.representation.startNumber+t}function ot(e,t,i){var n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=t.length,c="%0".length;if(!e)return e;for(;;){if((n=e.indexOf("$"+t))<0)return e;if((r=e.indexOf("$",n+u))<0)return e;if((a=e.indexOf("%0",n+u))>n&&a<r)switch(o=e.charAt(r-1),s=parseInt(e.substring(a+c,r-1),10),o){case"d":case"i":case"u":l=rt(i.toString(),s);break;case"x":l=rt(i.toString(16),s);break;case"X":l=rt(i.toString(16),s).toUpperCase();break;case"o":l=rt(i.toString(8),s);break;default:return e}else l=i;e=e.substring(0,n)+l+e.substring(r+1)}}function st(e,t,i,n){var r,a,o=void 0,s=void 0;return s=i.segmentDuration,isNaN(s)&&(s=i.adaptation.period.duration),r=parseFloat((i.adaptation.period.start+n*s).toFixed(5)),a=parseFloat((r+s).toFixed(5)),(o=new nt).representation=i,o.duration=s,o.presentationStartTime=r,o.mediaStartTime=e.calcMediaTimeFromPresentationTime(o.presentationStartTime,i),o.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(o.presentationStartTime,i.adaptation.period.mpd,t),o.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(a,i.adaptation.period.mpd,t),o.wallStartTime=e.calcWallTimeForSegment(o,t),o.replacementNumber=at(o,n),o.availabilityIdx=n,o}function lt(e,t,i,n,r,a,o,s,l,u){var c,d,h=n/a,f=Math.min(r/a,i.adaptation.period.mpd.maxSegmentDuration),p=void 0;return d=(c=e.calcPresentationTimeFromMediaTime(h,i))+f,(p=new nt).representation=i,p.duration=f,p.mediaStartTime=h,p.presentationStartTime=c,p.availabilityStartTime=i.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(d,i.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=u||n,p.replacementNumber=at(p,l),o=ot(o,"Number",p.replacementNumber),o=ot(o,"Time",p.replacementTime),p.media=o,p.mediaRange=s,p.availabilityIdx=l,p}function ut(e,t){if(!t||!t.segments)return null;var i=t.segments.length,n=void 0,r=void 0;if(e<i&&(n=t.segments[e])&&n.availabilityIdx===e)return n;for(r=0;r<i;r++)if((n=t.segments[r])&&n.availabilityIdx===e)return n;return null}function ct(e,t,i,n,r,a){var o=i.segmentDuration,s=i.adaptation.period.mpd.manifest.minBufferTime,l=i.segmentAvailabilityRange,u={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(i,l.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(i,l.end)},c=i.segments,d=2*o,h=a||Math.max(2*s,10*o),f=NaN,p=null,g=void 0;return u.start=Math.max(u.start,0),t&&!e.isTimeSyncCompleted()?{start:g=Math.floor(u.start/o),end:Math.floor(u.end/o)}:(f=c&&c.length>0?(p=ut(r,i))?e.calcPeriodRelativeTimeFromMpdRelativeTime(i,p.presentationStartTime):r>0?r*o:e.calcPeriodRelativeTimeFromMpdRelativeTime(i,n):r>0?r*o:t?u.end:u.start,{start:g=Math.floor(Math.max(f-d,u.start)/o),end:Math.floor(Math.min(g+h/o,u.end/o))})}function dt(e,t){var i=(e=e||{}).timelineConverter;return{getSegments:function(e,n,r,a){if(function(){if(!(i&&i.hasOwnProperty("calcMediaTimeFromPresentationTime")&&i.hasOwnProperty("calcSegmentAvailabilityRange")&&i.hasOwnProperty("calcMediaTimeFromPresentationTime")))throw new Error("Missing config parameter(s)")}(),!e)throw new Error("no representation");void 0===n&&(n=null);var o,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentTimeline,u=s.SegmentURL_asArray,c=e.availableSegmentsNumber>0;o=a||(r>-1||null!==n?10:1/0);var d,h,f,p=0,g=0,y=-1,m=[],E=null,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=function(n,r){var a=s.media,o=n.mediaRange;return u&&(a=u[r].media||"",o=u[r].mediaRange),lt(i,t,e,p,n.d,A,a,o,y,n.tManifest)};for(A=e.timescale,d=l.S_asArray,f=r,null!==n&&(E=i.calcMediaTimeFromPresentationTime(n,e)),M=0,h=d.length;M<h;M++){if(I=0,(T=d[M]).hasOwnProperty("r")&&(I=T.r),T.hasOwnProperty("t")&&(g=(p=T.t)/A),I<0){if((D=d[M+1])&&D.hasOwnProperty("t"))v=D.t/A;else{var w=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:i.calcSegmentAvailabilityRange(e,t).end;v=i.calcMediaTimeFromPresentationTime(w,e),e.segmentDuration=T.d/A}I=Math.ceil((v-g)/(T.d/A))-1}if(_){if(c)break;y+=I+1}else for(N=0;N<=I;N++)if(y++,m.length>o){if(_=!0,c)break}else null!==E?g>=E-T.d/A*1.5&&m.push(S(T,y)):y>=f&&m.push(S(T,y)),g=(p+=T.d)/A}return c||(e.availableSegmentsNumber=y+1),m}}}dt.__dashjs_factory_name="TimelineSegmentsGetter";var ht=s.a.getClassFactory(dt);function ft(e,t){var i=e.timelineConverter;return{getSegments:function(e,n,r,a){var o,s,l,u,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,d=e.segmentDuration,h=e.segmentAvailabilityRange,f=[],p=null,g=null,y=void 0;for(l=e.startNumber,o=(u=isNaN(d)&&!t?{start:l,end:l}:ct(i,t,e,n,r,a)).start,s=u.end,y=o;y<=s;y++)(g=st(i,t,e,y)).replacementTime=(l+y-1)*e.segmentDuration,p=ot(p=c.media,"Number",g.replacementNumber),p=ot(p,"Time",g.replacementTime),g.media=p,f.push(g),g=null;return isNaN(d)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((h.end-h.start)/d),f}}}ft.__dashjs_factory_name="TemplateSegmentsGetter";var pt=s.a.getClassFactory(ft);function gt(e,t){var i=(e=e||{}).timelineConverter;return{getSegments:function(e,n,r,a){var o,s,l,u,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,d=c.SegmentURL_asArray.length,h=[],f=void 0,p=void 0,g=void 0;for(u=e.startNumber,o=ct(i,t,e,n,r,a),s=Math.max(o.start,0),l=Math.min(o.end,c.SegmentURL_asArray.length-1),f=s;f<=l;f++)g=c.SegmentURL_asArray[f],(p=st(i,t,e,f)).replacementTime=(u+f-1)*e.segmentDuration,p.media=g.media?g.media:"",p.mediaRange=g.mediaRange,p.index=g.index,p.indexRange=g.indexRange,h.push(p),p=null;return e.availableSegmentsNumber=d,h}}}gt.__dashjs_factory_name="ListSegmentsGetter";var yt=s.a.getClassFactory(gt);function mt(e,t){var i,n=this.context,r=void 0,a=void 0,o=void 0;return i={getSegments:function(e,t,i,n,s){var l=void 0,u=e.segmentInfoType;u!==$e.SEGMENT_BASE&&u!==$e.BASE_URL&&function(e,t){var i=e.segments,n=!1,r=void 0,a=void 0;return i&&0!==i.length?(a=i[0].availabilityIdx,r=i[i.length-1].availabilityIdx,n=t<a||t>r):n=!0,n}(e,i)?(u===$e.SEGMENT_TIMELINE?l=r.getSegments(e,t,i,s):u===$e.SEGMENT_TEMPLATE?l=a.getSegments(e,t,i,s):u===$e.SEGMENT_LIST&&(l=o.getSegments(e,t,i,s)),n&&n(e,l)):l=e.segments}},r=ht(n).create(e,t),a=pt(n).create(e,t),o=yt(n).create(e,t),i}mt.__dashjs_factory_name="SegmentsGetter";var Et=s.a.getClassFactory(mt);function Tt(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}Tt.__dashjs_factory_name="RequestModifier";var Mt=s.a.getSingletonFactory(Tt);function Nt(e){var t=(e=e||{}).requestModifier;return{load:function(e){var i=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=i),t&&(r=t.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,e.request.loadInfo={rType:"XHR",cdn:0},r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.timeout=e.timeout,r.ontimeout=e.ontimeout,r.onprogress=e.progress,r.onabort=e.onabort,r.onreadystatechange=function(){2===r.readyState&&e.onHeadersReceived()},r.send(),e.response=r},abort:function(e){e.response.abort()},getP2pType:function(){return""}}}Nt.__dashjs_factory_name="XHRLoader";var It=s.a.getClassFactory(Nt);function vt(e){var t=void 0,i={cdn:0,p2p:0},n=void 0,r=(e=e||{}).p2pType,a=!1,o=E(this.context).getInstance().log,s="[P2PLoader]";return{load:function(l){n=l;var u=l.request;t||(t=new e.supplier(l.url,e.video,u.mediaType),o(s,"["+r+"] new sdk loader ["+u.mediaType+"]")),t.onDataArrival=function(e){var n=t&&t.loadInfo();n&&(u.p2pLoadInfo||(u.p2pLoadInfo={cdn:0,p2p:0}),u.p2pLoadInfo.url=n.url),l.progress&&l.progress(null,e,n&&{cdn:n.cdn-i.cdn,p2p:n.p2p-i.p2p,rType:"PCDN"}),i=n||i},t.onError=function(e,t){o(s,"["+r+"] error, status:"+e+", msg:"+t+", type:"+u.mediaType),l.response={status:e,statusText:t},a=!1,l.onerror(),l.onend()},t.onComplete=function(){o(s,"["+r+"] onComplete, type:"+n.request.mediaType),a=!1,l.onload(),l.onend()};var c=void 0;if(u.range){var d=u.range.split("-");c={from:parseInt(d[0]),to:parseInt(d[1]||"-1")}}else c={from:0,to:-1};o(s,"["+r+"] load "+u.mediaType+" url:"+l.url+", range: "+c.from+"-"+c.to),t.load(c,l.withCredentials);var h=t.loadInfo();h&&(u.p2pLoadInfo||(u.p2pLoadInfo={cdn:0,p2p:0}),u.p2pLoadInfo.url=h.url),a=!0},abort:function(){a=!1,t&&(t.abort(),t.onDataArrival=void 0,t.onError=void 0,t.onComplete=void 0),n.onabort(),n.onend(),o(s,"["+r+"] abort sdk ["+n.request.mediaType+"]")},destroySdk:function(){var e=function(){a=!1,t&&(t.destroy(),t=void 0,o(s,"["+r+"] destroy sdk ["+n.request.mediaType+"]")),i={cdn:0,p2p:0}};a?(t.onError=function(t,i){o(s,"["+r+"] error, status:"+t+", msg:"+i+", type:"+n.request.mediaType),n.response={status:t,statusText:i},n.onerror(),n.onend(),e()},t.onComplete=function(){o(s,"["+r+"] detroy sdk onComplete, type:"+n.request.mediaType),n.onload(),n.onend(),e()}):e()},getUrl:function(){return n.url||""},getP2pType:function(){return r}}}vt.__dashjs_factory_name="P2PLoader";var Dt=s.a.getClassFactory(vt);function _t(e){e=e||{};var t=void 0,i=void 0,n=!1;if(window.localStorage&&localStorage.getItem)try{var r=JSON.parse(localStorage.getItem("bp_nc_config"));r&&1===r.showLog&&(n=!0)}catch(e){}return E(this.context).getInstance().log,{load:function(e){t=e;var r=e.request,a=window.bpNC;a&&(i=a.getToken(),a.getData({url:r.url,range:r.range,token:i}).then((function(t){if(n){var i=0,a="";t&&t.responseData&&(t.responseData.getDataTime&&(i=Math.round(8*t.responseData.gotDataByte/1e3/(t.responseData.getDataTime/1e3))),t.responseData.path&&(a=t.responseData.path)),console.log("--\x3e "+a+" nc success, speed is",i,"Kbps, res:",t)}e.progress&&e.progress(null,t.responseData.data,{nc:t.responseData.data.byteLength,cdn:0,rType:"NC",url:r.url}),e.onload&&e.onload(),e.onend&&e.onend()}),(function(t){if(n){var i=0,r="";t&&t.responseData&&(t.responseData.getDataTime&&(i=Math.round(8*t.responseData.gotDataByte/1e3/(t.responseData.getDataTime/1e3))),t.responseData.path&&(r=t.responseData.path)),console.log("--\x3e "+r+" nc fail, speed is",i,"Kbps, res:",t)}e.onerror&&e.onerror()})))},abort:function(e){var n=window.bpNC;n&&i&&n.abortGetData(i),t&&t.onabort&&t.onabort(),t&&t.onend&&t.onend()},getP2pType:function(){return""}}}_t.__dashjs_factory_name="NCLoader";var At=s.a.getClassFactory(_t);function St(e){var t=(e=e||{}).requestModifier;function i(e,t){e.reader.read().then(t).catch((function(){}))}return{load:function(e){var n=new Date,r=e.request,a=new Headers;r.range&&a.append("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&t.modifyRequestHeader({setRequestHeader:function(e,t){a.append(e,t)}});var o=void 0;"function"==typeof window.AbortController&&(o=new AbortController,e.abortController=o);var s={method:e.method,headers:a,credentials:e.withCredentials?"include":void 0,signal:o?o.signal:void 0};fetch(e.url,s).then((function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var n="",r=!0,a=!1,o=void 0;try{for(var s,l=t.headers.keys()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n+=u+": "+t.headers.get(u)+"\n"}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}if(e.response.responseHeaders=n,e.onHeadersReceived(),!t.body)return t.arrayBuffer().then((function(t){e.response.response=t;var i={loaded:t.byteLength,total:t.byteLength};e.progress(i),e.onload(),e.onend()}));var c=parseInt(t.headers.get("Content-Length"),10),d=0,h=!1,f=new Uint8Array,p=0;e.reader=t.body.getReader(),i(e,(function t(n){var r=n.value;if(n.done)return f&&(e.progress({loaded:d,total:isNaN(c)?d:c,lengthComputable:!0}),e.response.response=f.buffer),e.onload(),void e.onend();if(r&&r.length>0){f=function(e,t){if(0===e.length)return t;var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}(f,r),d+=r.length;var a=De().getInstance().findLastTopIsoBoxCompleted(["moov","mdat"],f,p);if(a.found){var o=a.lastCompletedOffset+a.size,s=void 0;o===f.length?(s=f,f=new Uint8Array):(s=new Uint8Array(f.subarray(0,o)),f=f.subarray(o)),e.progress({data:s.buffer,lengthComputable:!1,noTrace:!0}),p=0}else p=a.lastCompletedOffset,h||(e.progress({lengthComputable:!1,noTrace:!0}),h=!0)}i(e,t)}))})).catch((function(t){e.onerror&&e.onerror(t)}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}}}}St.__dashjs_factory_name="FetchLoader";var wt=s.a.getClassFactory(St);function Ot(){var e=this.context,t=c(e).getInstance();return{capabilityError:function(e){t.trigger(p.ERROR,{error:"capability",event:e})},downloadError:function(e,i,n,r,a){t.trigger(p.ERROR,{error:"download",event:{id:e,url:i,request:n},code:r,httpCode:a})},manifestError:function(e,i,n,r,a,o){t.trigger(p.ERROR,{error:"manifestError",event:{message:e,id:i,manifest:n,event:r},code:a,httpCode:o})},timedTextError:function(e,i,n){t.trigger(p.ERROR,{error:"cc",event:{message:e,id:i,cc:n}})},mediaSourceError:function(e,i){t.trigger(p.ERROR,{error:"mediasource",event:e,code:i})},mediaKeySessionError:function(e){t.trigger(p.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){t.trigger(p.ERROR,{error:"key_message",event:e})},mssError:function(e){t.trigger(p.ERROR,{error:"mssError",event:e})}}}Ot.__dashjs_factory_name="ErrorHandler";var Lt=s.a.getSingletonFactory(Ot);Lt.CAPABILITY_ERROR_MEDIASOURCE="mediasource",Lt.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",Lt.DOWNLOAD_ERROR_ID_MANIFEST="manifest",Lt.DOWNLOAD_ERROR_ID_SIDX="SIDX",Lt.DOWNLOAD_ERROR_ID_CONTENT="content",Lt.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",Lt.DOWNLOAD_ERROR_ID_XLINK="xlink",Lt.DOWNLOAD_ERROR_ID_PCDN_SDK="pcdnsdk",Lt.MANIFEST_ERROR_ID_CODEC="codec",Lt.MANIFEST_ERROR_ID_PARSE="parse",Lt.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",Lt.TIMED_TEXT_ERROR_ID_PARSE="parse",s.a.updateSingletonFactory(Ot.__dashjs_factory_name,Lt);var Ct=Lt;function bt(){return{arraybuffer2string:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},base642ab:function(e){e=window.atob(e);for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0,r=e.length;n<r;n++)i[n]=e.charCodeAt(n);return t},concat:function(e,t){var i=new Uint8Array(e),n=new Uint8Array(t),r=new Uint8Array(i.length+n.length);return r.set(i),r.set(n,i.length),r.buffer}}}bt.__dashjs_factory_name="ArrayBufferHandler";var Rt=s.a.getSingletonFactory(bt);function xt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Pt={video:null,audio:null};function jt(e){e=e||{};var t,i,n=this.context,r=c(n).getInstance(),o=e.errHandler,s=e.videoModel,l=e.metricsModel,u=e.mediaPlayerModel,d=e.requestModifier,h=e.useFetch||!1,f=(e.dashMetrics,E(n).getInstance().log),g=void 0,y=void 0,m=void 0,T=[],M=void 0,N={},I=Rt(n).getInstance(),v=[],D=0,_=void 0,A=void 0,S=e.preloadData;function w(e){Pt[e]&&Pt[e].destroySdk&&(Pt[e].destroySdk(),Pt[e]=null)}function O(){r.trigger(p.PCDN_LOADED_ERROR,{code:a.DOWNLOAD_PCDN_DISABLED,from:1}),u.setP2pPermission(!1)}function L(e,t,i,n){if(isNaN(t)||t<0||!i)return!1;var r=window.bpNC;if(!e||!r||"function"!=typeof r.allowDPGetDataByNC)return!1;var a=(""+i).split("?")[0].split("/"),o=a[a.length-1].split(".")[0].slice(-5);if(!o)return!1;var l=parseInt(o,10);if(isNaN(l))return!1;var u=NaN;if(s&&s.getElement()){var c=s.getElement(),d=c.currentTime,h=0;c.buffered&&c.buffered.length&&(h=c.buffered.end(0)),u=h-d}return!isNaN(u)&&!!n&&r.allowDPGetDataByNC({rangeStart:t,qn:l,bufferRemaining:u,bufferLevel:n})}function C(e){e.loadInfo=e.p2pLoadInfo||e.loadInfo||{},"XHR"===e.loadInfo.rType&&(e.loadInfo.cdn=e.bytesTotal||e.bytesLoaded||0,e.loadInfo.url=e.url)}return S&&(S.video&&"string"==typeof S.video&&(S.video=I.base642ab(S.video)),S.audio&&"string"==typeof S.audio&&(S.audio=I.base642ab(S.audio))),t={load:function(e){e.request&&function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=t.request,E="",v=0,b=0;if(c.range){var R=c.range.split("-");if(v=parseInt(R[0]),b=parseInt(R[1]),c.mediaType&&c.representationId&&S&&S[c.mediaType+"id"]===c.representationId+""&&S[c.mediaType]){if(b<S[c.mediaType].byteLength)return b+1===S[c.mediaType].byteLength&&(c.preloadEnd=1),void t.success(S[c.mediaType].slice(v,b+1));v<S[c.mediaType].byteLength&&(E=S[c.mediaType].slice(v,b+1),c.range=S[c.mediaType].byteLength+"-"+b,c.preloadEnd=1)}}c.firstByteDate=null;var x=[],P=c.representationId,j=2e3,z=!0,k=!0,F=new Date,B=F,Y=0,Q=void 0,G=N[P]||0,V=!1,H=1,W=0,q=void 0;if(c.urls&&c.urls.length>1&&G&&(c.url=c.urls[G],t.url=c.urls[G]),!d||!l||!o)throw new Error("config object is not correct or missing");var Z=d.modifyRequestURL(c.url),K=L(!(!t.params||"boolean"!=typeof t.params.canUseNC)&&t.params.canUseNC,v,Z,c.bufferLevel),$=function(e){k=!1;var t=new Date;c.requestStartDate=F,c.requestEndDate=t,c.firstByteDate=c.firstByteDate||t,C(c),c.checkExistenceOnly||l.addHttpRequest(c.mediaType,null,c.type,c.url,Q.response?Q.response.responseURL:null,c.serviceLocation||null,c.range||null,c.requestStartDate,c.firstByteDate,c.requestEndDate,Q.response?Q.response.status:null,c.duration,Q.response&&Q.response.getAllResponseHeaders?Q.response.getAllResponseHeaders():Q.response?Q.response.responseHeaders:null,e?x:null)},X=function(){if(clearTimeout(W),-1!==g.indexOf(Q)){g.splice(g.indexOf(Q),1),q=!1;var n=Q&&Q.response&&Q.response.status;if(k)if($(!1),t.params&&(t.params.canUseNC=!1),i>0){var s=0,l=0;Date.now()-F<50&&(l=1e3*(a+1)),(n>=400&&n<500||n>=600)&&(l=0,s=0),K&&(l=0,s=0),D=setTimeout((function(){K||a++,r.trigger(p.REQUEST_RETRYED,{retryTimes:a,representationId:P,status:Q.response&&Q.response.status,url:c.url,mediaType:c.mediaType,range:c.range}),u.getP2pPermission()&&4203===n&&O(),t.request.urls&&t.request.urls.length>1?(N[P]=a%c.urls.length,G=N[P],t.request.url=c.urls[G],t.url=c.urls[G],i--,m.push(setTimeout((function(){f("[HTTPLoader] internalLoad failure retry"),e(t,i,a)}),s))):(i--,m.push(setTimeout((function(){f("[HTTPLoader] internalLoad failure retry"),e(t,i,a)}),s)))}),l)}else o.downloadError(M[c.type].type,c.url,c,M[c.type].code,Q.response&&Q.response.status),t.error&&t.error(c,"error",Q.response&&Q.response.statusText,Q.response&&Q.response.status),t.complete&&t.complete(c,Q.response&&Q.response.statusText),w(c.mediaType)}},J=j+1e3*a+50;K&&(J=6e3);var ee=c.timeout+3e3*a;W=setTimeout((function(){u.getP2pPermission()&&q.getP2pType()&&u.addP2pSDKErrorCount(),V=!0,q.abort(Q),T.push(4106),t.connectTimeout&&t.connectTimeout(c,J),X()}),J);var te=new Uint8Array,ie=function(e,i,n){var r=new Date;if(n)for(var a in c.p2pLoadInfo||(c.p2pLoadInfo={}),n)["p2p","cdn","nc"].indexOf(a)>-1?c.p2pLoadInfo[a]=(c.p2pLoadInfo[a]||0)+n[a]:c.p2pLoadInfo[a]=n[a];if(!e){if(e={lengthComputable:!1,total:0,loaded:0},i&&(te=I.concat(te,i),e.loaded=te.byteLength),c.range){var o=c.range.split("-"),s=parseInt(o[0]),l=parseInt(o[1]);l&&(e.total=l-s+1)}e.loaded&&e.total&&(e.lengthComputable=!0)}z&&(z=!1,(H=r-F)<j&&clearTimeout(W),(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(c.firstByteDate=r)),e.lengthComputable&&(c.bytesLoaded=e.loaded,c.bytesTotal=e.total),e.noTrace||(x.push({s:B,d:r.getTime()-B.getTime(),b:[e.loaded?e.loaded-Y:0]}),B=r,Y=e.loaded),t.progress&&e.loaded&&t.progress(e.loaded)},ne=function(){if(Q.response){if(Q.response.status>=200&&Q.response.status<=299){var e=Q.response.response;E&&(e=I.concat(E,Q.response.response),c.range=v+"-"+b),$(!0),t.success&&t.success(e,Q.response.statusText,Q.response.responseURL),t.complete&&t.complete(c,Q.response.statusText)}}else{var i=te;E&&(i=I.concat(E,te),c.range=v+"-"+b),$(!0),t.success&&t.success(i,"",Z),t.complete&&t.complete(c,"")}},re=function(){clearTimeout(W),clearTimeout(D),t.abort&&!V&&t.abort(c)},ae=function(){T.push(4105),t.timeout&&t.timeout(c,H,ee),X()},oe=function(){c.headersReceivedDate=new Date,t.headersReceived&&t.headersReceived(Q.response&&Q.response.getAllResponseHeaders&&Q.response.getAllResponseHeaders())};if(K)q=At(n).create({requestModifier:d});else if(h&&window.fetch&&"arraybuffer"===c.responseType)q=wt(n).create({requestModifier:d});else{var se=function(e,t){var i=e.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)&&e.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)[1],n=t.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)&&t.match(/^.+\/([a-zA-Z0-9_\-\.]+)\??[^\/]+$/)[1];return i&&n&&i===n},le=window.__DASH_P2P_TYPE__,ue={yf:window.YFDashIO,xl:window.xyvp&&window.xyvp.Loader,ks:window.KSLoader,pear:window.PearDownloader,bili:window.DIYSdk},ce=void 0,de=void 0,he=void 0;if(le&&u.getP2pPermission()){var fe=le.match(/([a-z]+)-([a-z0-9]+)/);fe&&(ce=ue[fe[1]],he="cg2"===fe[2],de="eg"===fe[2]),ce||delete window.__DASH_P2P_TYPE__}de&&ce&&c.index>=0?Pt[c.mediaType]&&Pt[c.mediaType].getP2pType()&&se(Pt[c.mediaType].getUrl(),Z)?q=Pt[c.mediaType]:(w(c.mediaType),q=Dt(n).create({video:s.getElement(),p2pType:le,supplier:ce}),Pt[c.mediaType]=q):he&&ce&&"video"===c.mediaType&&Z!==A&&(A=Z,_&&_.destroy(),_=new ce(Z,s.getElement(),"watch")),q||(w(c.mediaType),q=It(n).create({requestModifier:d}))}var pe=c.checkExistenceOnly?U.HEAD:U.GET,ge=u.getXHRWithCredentialsForType(c.type);Q={url:Z,method:pe,withCredentials:ge,timeout:ee,request:c,onload:ne,onend:X,onerror:X,ontimeout:ae,progress:ie,onabort:re,onHeadersReceived:oe,loader:q};var ye=(new Date).getTime();if(isNaN(c.delayLoadingTime)||ye>=c.delayLoadingTime)g.push(Q),q.load(Q);else{var me={httpRequest:Q};y.push(me),me.delayTimeout=setTimeout((function(){if(-1!==y.indexOf(me)){y.splice(y.indexOf(me),1);try{F=new Date,B=F,g.push(me.httpRequest),q.load(me.httpRequest)}catch(e){me.httpRequest.onerror()}}}),c.delayLoadingTime-ye)}}(e,u.getRetryAttemptsForType(e.request.type),0)},abort:function(){_&&(_.destroy(),_=void 0,A=void 0),clearTimeout(D),v.forEach((function(e){return clearTimeout(e)})),m.forEach((function(e){return clearTimeout(e)})),m=[],y.forEach((function(e){return clearTimeout(e.delayTimeout)})),y=[],g.forEach((function(e){e&&e.request&&isNaN(e.request.index)||(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort())})),g=[]},setPreloadData:function(e){(S=e)&&(S.video&&"string"==typeof S.video&&(S.video=I.base642ab(S.video)),S.audio&&"string"==typeof S.audio&&(S.audio=I.base642ab(S.audio)))}},g=[],y=[],m=[],xt(i={},U.MPD_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_MANIFEST,code:a.DOWNLOAD_MPD_ERROR}),xt(i,U.XLINK_EXPANSION_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_XLINK,code:a.DOWNLOAD_XINK_ERROR}),xt(i,U.INIT_SEGMENT_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_INITIALIZATION,code:a.DOWNLOAD_INIT_SEGMENT_ERROR}),xt(i,U.MEDIA_SEGMENT_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_CONTENT,code:a.DOWNLOAD_MEDIA_SEGMENT_ERROR}),xt(i,U.INDEX_SEGMENT_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_CONTENT,code:a.DOWNLOAD_INDEX_SEGMENT_ERROR}),xt(i,U.BITSTREAM_SWITCHING_SEGMENT_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_CONTENT,code:a.DOWNLOAD_SWITCHING_SEGMENT_ERROR}),xt(i,U.OTHER_TYPE,{type:Ct.DOWNLOAD_ERROR_ID_CONTENT,code:a.DOWNLOAD_OTHER_ERROR}),M=i,t}jt.__dashjs_factory_name="HTTPLoader";var zt=s.a.getClassFactory(jt);function kt(){var e=this.context,t=E(e).getInstance().log,i=c(e).getInstance(),n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0;function f(){if(!h||!h.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function g(e){if(e.url){var t=new y;return t.type=e.init?U.INIT_SEGMENT_TYPE:U.MEDIA_SEGMENT_TYPE,t.url=e.url,t.urls=e.urls,t.range=e.range.start+"-"+e.range.end,t.representationId=e.representationId,t.mediaType=e.mediaType,t}}function m(e,t,n){e?i.trigger(p.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):i.trigger(p.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new _(null,"error loading segments",null)})}return{setConfig:function(e){e.baseURLController&&(h=e.baseURLController),e.metricsModel&&(l=e.metricsModel),e.mediaPlayerModel&&(u=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.videoModel&&(r=e.videoModel)},initialize:function(){o=De(e).getInstance(),s=Mt(e).getInstance(),d=zt(e).create({errHandler:n,videoModel:r,metricsModel:l,mediaPlayerModel:u,requestModifier:s,preloadData:u.getPreloadData()})},loadInitialization:function e(n,r){f();var a=null,s=null,l=h.resolve(n.path),u=r||{init:!0,url:l?l.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};t("Start searching for initialization.");var c=g(u);d.load({request:c,success:function(r){u.bytesLoaded=u.range.end,s=o.parse(r),(a=function(e){var i=e.getBox("ftyp"),n=e.getBox("moov"),r=null,a=void 0,o=void 0;return t("Searching for initialization."),n&&n.isComplete&&(a=i?i.offset:n.offset,o=n.offset+n.size-1,t("Found the initialization.  Range: "+(r=a+"-"+o))),r}(s))?(n.range=a,i.trigger(p.INITIALIZATION_LOADED,{representation:n})):(u.range.end=u.bytesLoaded+u.bytesToLoad,e(n,u))},error:function(){i.trigger(p.INITIALIZATION_LOADED,{representation:n})}}),t("Perform init search: "+u.url)},loadSegments:function e(i,r,s,l,c){if(f(),s&&(void 0===s.start||void 0===s.end)){var p=s?s.toString().split("-"):null;s=p?{start:parseFloat(p[0]),end:parseFloat(p[1])}:null}c=c||m;var y=null,E=null,T=!!s,M=h.resolve(i.path),N={init:!1,url:M?M.url:void 0,urls:M.urls,range:T?s:{start:0,end:1500},searching:!T,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,representationId:i.id,mediaType:i.adaptation.type},I=g(N),v=function(){c(null,i,r)};d.load({request:I,success:function(s){if(N.bytesLoaded=N.range.end-N.range.start,y=o.parse(s),(E=y.getBox("sidx"))&&E.isComplete){var l=E.references,d=void 0,h=void 0;if(null!=l&&l.length>0&&(d=1===l[0].reference_type),d){t("Initiate multiple SIDX load."),N.range.end=N.range.start+E.size;var f=void 0,p=void 0,g=void 0,m=void 0,T=[],M=0,I=(E.offset||N.range.start)+E.size,D=function(e){e?(T=T.concat(e),++M>=p&&c(T,i,r)):c(null,i,r)};for(f=0,p=l.length;f<p;f++)g=I,m=I+l[f].referenced_size-1,I+=l[f].referenced_size,e(i,null,{start:g,end:m},N,D)}else{t("Parsing segments from SIDX."),h=function(e,t){for(var i=e.references,n=i.length,r=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],l=void 0,u=void 0,c=void 0,d=void 0,h=0;h<n;h++)c=i[h].subsegment_duration,d=i[h].referenced_size,(l=new nt).duration=c,l.startTime=a,l.timescale=r,u=o+d-1,l.mediaRange=o+"-"+u,s.push(l),a+=c,o+=d;return s}(E,N);try{var _=h[h.length-1],A=(_.duration+_.startTime)/_.timescale;i.adaptation.period.min?i.adaptation.period.min=Math.min(i.adaptation.period.min,A):i.adaptation.period.min=A;var S=u.getCachedDurationOffset("offset");i.adaptation.period.duration=parseFloat((S+i.adaptation.period.min).toFixed(5)),t("Set real min period duration "+i.adaptation.period.duration+" ( "+S+" )")}catch(e){t("Set real period error "+r)}c(h,i,r)}}else v(),n.mediaSourceError("Error parsing "+r+" response.",a.MEDIA_DECODE_ERROR)},error:v}),t("Perform SIDX load: "+N.url)},resetPreloadData:function(){d&&d.setPreloadData(u.getPreloadData())},reset:function(){d.abort(),d=null,n=null,o=null,s=null}}}kt.__dashjs_factory_name="SegmentBaseLoader";var Ut=s.a.getSingletonFactory(kt);function Ft(e){e=e||{};var t=this.context,i=c(t).getInstance(),r=it(t).getInstance(),a=void 0,o=e.timelineConverter,s=e.dashMetrics,l=e.metricsModel,u=e.mediaPlayerModel,d=e.errHandler,h=e.baseURLController,f=void 0,g=void 0,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0;function A(){m=-1,M=0,N=NaN,T=null,I=null,v=null}function S(e,t,i){var n=h.resolve(i.path),a=void 0,o=void 0,s=void 0;return n&&t!==n.url&&r.isRelative(t)?(a=n.url,o=n.urls||[],s=n.serviceLocation,t&&(a=r.resolve(t,a))):o=[a=t],!r.isRelative(a)&&(e.url=a,e.urls=o,e.serviceLocation=s,!0)}function w(e){var t=!1,i=I?I.getStreamInfo().manifestInfo.isDynamic:null;if(i||m!==e.availableSegmentsNumber){var n=ut(m,e);if(n){var r=parseFloat((n.presentationStartTime-e.adaptation.period.start).toFixed(5)),a=u.getCachedDurationOffset("duration"),o=a?Math.min(e.adaptation.period.duration,a):e.adaptation.period.duration;o=e.adaptation.period.duration,g(e.segmentInfoType+": "+r+" / "+o),t=(e.segmentInfoType!==$e.SEGMENT_TIMELINE||!i)&&r>=o}else g("isMediaFinished - no segment found")}else t=!0;return t}function O(e){v.getSegments(e,T,m,L)}function L(e,t){var i=I?I.getStreamInfo().manifestInfo.isDynamic:null;if(e.segments=t,t&&t.length>0&&(N=isNaN(N)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,N),i&&isNaN(o.getExpectedLiveEdge()))){var r=t[t.length-1].presentationStartTime,a=l.getMetricsFor(n.STREAM);o.setExpectedLiveEdge(r),l.updateManifestUpdateInfo(s.getCurrentManifestUpdate(a),{presentationStartTime:r})}}function C(e){if(!e)throw new Error("no representation");e.segments=null,O(e)}function b(e,t,i){var n=t.segments,r=n?n.length:null,a=-1,o=void 0,s=void 0,l=void 0,c=void 0,d=void 0;if(n&&r>0){for(i=null==i?u.getSegmentOverlapToleranceTime():i,d=0;d<r;d++)if(l=(s=n[d]).presentationStartTime,c=s.duration,e+(o=null==i?c/2:i)>=l&&e-o<l+c){a=s.availabilityIdx;break}0===e&&n[0].presentationStartTime>0&&(a=0)}return a}function R(e){if(null==e)return null;var t=new y,i=e.representation,n=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth,r=e.media,a=I?I.getType():null;return r=ot(r,"Number",e.replacementNumber),r=ot(r,"Time",e.replacementTime),r=function(e){return e?e.split("$$").join("$"):e}(r=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var i=t.toString();return e.split("$RepresentationID$").join(i)}(r=ot(r,"Bandwidth",n),i.id)),t.mediaType=a,t.type=U.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=i.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=i.index,t.index=e.availabilityIdx,t.mediaInfo=I.getMediaInfo(),t.adaptationIndex=i.adaptation.index,t.representationId=i.id,S(t,r,i)?t:void 0}function x(e,t,i){var n=void 0,r=I?I.getType():null,a=I?I.getStreamInfo().manifestInfo.isDynamic:null,o=m,s=!!i&&i.keepIdx,l=i?i.timeThreshold:null,u=!(!i||!i.ignoreIsFinished);return e?(T!==t&&(T=t,g("Getting the request for "+r+" time : "+t)),O(e),(m=b(t,e,l))<0&&(O(e),m=b(t,e,l)),m>0&&g("Index for "+r+" time "+t+" is "+m),!u&&w(e)?((n=new y).action=y.ACTION_COMPLETE,n.index=m,n.mediaType=r,n.mediaInfo=I.getMediaInfo(),g("Signal complete in getSegmentRequestForTime -",r)):n=R(ut(m,e)),s&&o>=0&&(m=e.segmentInfoType===$e.SEGMENT_TIMELINE&&a?m:o),n):null}function P(e){var t=e.representation;t.segments&&i.trigger(p.REPRESENTATION_UPDATED,{sender:this,representation:t})}function j(e){var t=I?I.getType():null,n=I?I.getStreamInfo().manifestInfo.isDynamic:null;if(!e.error&&t===e.mediaType){var r,a=e.segments,s=e.representation,l=[],c=0,d=void 0,h=void 0,f=void 0,g=0;for(u.getAppendingSourceState()&&(D=u.getCachedDurationOffset("offset"),g=a[0].startTime,m=0),d=0,r=a.length;d<r;d++)h=a[d],f=lt(o,n,s,h.startTime+D*h.timescale-g,h.duration,h.timescale,h.media,h.mediaRange,c),l.push(f),f=null,c++;s.segmentAvailabilityRange={start:l[0].presentationStartTime,end:l[r-1].presentationStartTime},s.availableSegmentsNumber=r,L(s,l),Xe.hasInitialization(s)&&i.trigger(p.REPRESENTATION_UPDATED,{sender:this,representation:s})}}return f={initialize:function(i){var n=(I=i)?I.getStreamInfo().manifestInfo.isDynamic:null;a.initialize(),v=Et(t).create(e,n)},getStreamProcessor:function(){return I},getInitRequest:function(e){var t=I?I.getType():null;return e?function(e,t){var i=new y,n=e.adaptation.period,r=n.start,a=I?I.getStreamInfo().manifestInfo.isDynamic:null;if(i.mediaType=t,i.type=U.INIT_SEGMENT_TYPE,i.range=e.range,i.availabilityStartTime=o.calcAvailabilityStartTimeFromPresentationTime(r,n.mpd,a),i.availabilityEndTime=o.calcAvailabilityEndTimeFromPresentationTime(r+n.duration,n.mpd,a),i.quality=e.index,i.mediaInfo=I?I.getMediaInfo():null,i.representationId=e.id,S(i,e.initialization,e))return i}(e,t):null},getSegmentRequestForTime:x,getNextSegmentRequest:function(e){var t=void 0,i=void 0,n=I?I.getType():null,r=I?I.getStreamInfo().manifestInfo.isDynamic:null;return e&&-1!==m?(T=null,m++,g("Getting the next request at index: "+m+", type: "+n),!ut(m,e)&&r?(g("No segment found at index: "+m+". Wait for next loop"),O(e),m--,null):(w(e)?((t=new y).action=y.ACTION_COMPLETE,t.index=m,t.mediaType=n,t.mediaInfo=I.getMediaInfo(),g("Signal complete -",n)):(O(e),t=R(i=ut(m,e)),!i&&r&&m--),t)):null},generateSegmentRequestForTime:function(e,t){var i=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-i,end:t+i},x(e,t,{keepIdx:!1,ignoreIsFinished:!0})},updateRepresentation:function(e,t){var n=Xe.hasInitialization(e),r=Xe.hasSegments(e),s=I?I.getType():null,l=I?I.getStreamInfo().manifestInfo.isDynamic:null,u=void 0;if(e.segmentDuration||e.segments||C(e),e.segmentAvailabilityRange=o.calcSegmentAvailabilityRange(e,l),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return u=new _(1,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void i.trigger(p.REPRESENTATION_UPDATED,{sender:this,representation:e,error:u});t||(m=-1),e.segmentDuration&&C(e),n||a.loadInitialization(e),r||a.loadSegments(e,s,e.indexRange),n&&r&&i.trigger(p.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:C,setCurrentTime:function(e){u.getCachedDurationOffset("duration")&&(e=Math.min(u.getCachedDurationOffset("duration"),e)),M=e},getCurrentTime:function(){return M},getEarliestTime:function(){return N},resetPreloadData:function(){a&&a.resetPreloadData()},reset:function(){A(),i.off(p.INITIALIZATION_LOADED,P,f),i.off(p.SEGMENTS_LOADED,j,f)}},g=E(t).getInstance().log.bind(f),A(),(a=Ut(t).getInstance()).setConfig({baseURLController:h,metricsModel:l,mediaPlayerModel:u,videoModel:e.videoModel,errHandler:d}),D=0,i.on(p.INITIALIZATION_LOADED,P,f),i.on(p.SEGMENTS_LOADED,j,f),f}Ft.__dashjs_factory_name="DashHandler";var Bt=s.a.getClassFactory(Ft);Bt.SEGMENTS_UNAVAILABLE_ERROR_CODE=1,s.a.updateClassFactory(Ft.__dashjs_factory_name,Bt);var Yt=Bt;function Qt(e){e=e||{};var t=this.context,i=void 0,r=e.type,a=e.errHandler,o=e.mimeType,s=e.timelineConverter,l=e.adapter,u=e.manifestModel,c=e.mediaPlayerModel,d=e.stream,h=e.abrController,f=e.playbackController,p=e.streamController,g=e.mediaController,y=e.domStorage,m=e.metricsModel,E=e.dashMetrics,T=e.dashManifestModel,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=void 0,w=void 0;function O(){w=[]}function L(){I=[],N=null,O()}function C(){return d?d.getStreamInfo():null}function b(){return N}return M={initialize:function(N){(i=Yt(t).create({mimeType:o,timelineConverter:s,dashMetrics:E,metricsModel:m,mediaPlayerModel:c,baseURLController:e.baseURLController,videoModel:e.videoModel,errHandler:a})).initialize(M),h.registerStreamType(r,M),(S=d.getFragmentController().getModel(r)).setStreamProcessor(M),v=function(e){var i=null;return e!==n.VIDEO&&e!==n.AUDIO||(i=xe(t).create({type:e,metricsModel:m,mediaPlayerModel:c,manifestModel:u,errHandler:a,streamController:p,mediaController:g,adapter:l,abrController:h,playbackController:f,streamProcessor:M})),i}(r),D=Ke(t).create({type:r,metricsModel:m,adapter:l,dashMetrics:E,dashManifestModel:T,timelineConverter:s,mediaPlayerModel:c,abrController:h,playbackController:f,streamController:p,streamProcessor:M,mediaController:g}),(A=et(t).create()).setConfig({abrController:h,domStorage:y,metricsModel:m,dashMetrics:E,dashManifestModel:T,manifestModel:u,playbackController:f,timelineConverter:s,streamProcessor:M}),v.initialize(N),D.initialize(),A.initialize()},isUpdating:function(){return!!A&&A.isUpdating()},getType:function(){return r},getBufferController:function(){return v},getFragmentModel:function(){return S},getScheduleController:function(){return D},getLiveEdgeFinder:function(){return _},getEventController:function(){return d?d.getEventController():null},getFragmentController:function(){return d?d.getFragmentController():null},getRepresentationController:function(){return A},getIndexHandler:function(){return i},getCurrentRepresentationInfo:function(){return l.getCurrentRepresentationInfo(A)},getRepresentationInfoForQuality:function(e){return l.getRepresentationInfoForQuality(A,e)},getBufferLevel:function(){return v.getBufferLevel()},switchInitData:function(e,t){v&&v.switchInitData(C().id,e,t)},isBufferingCompleted:function(){return!!v&&v.getIsBufferingCompleted()},createBuffer:function(){return v.getBuffer()||v.createBuffer(N)},getStreamInfo:C,updateMediaInfo:function(e){e===N||e&&N&&e.type!==N.type||(N=e),-1===I.indexOf(e)&&I.push(e),l.updateData(this)},switchTrackAsked:function(){D.switchTrackAsked()},getMediaInfoArr:function(){return I},getMediaInfo:b,getMediaSource:function(){return v.getMediaSource()},setMediaSource:function(e){v.setMediaSource(e,b())},dischargePreBuffer:function(){v.dischargePreBuffer()},getBuffer:function(){return v.getBuffer()},setBuffer:function(e){v.setBuffer(e)},registerExternalController:function(e){w.push(e)},unregisterExternalController:function(e){var t=w.indexOf(e);-1!==t&&w.splice(t,1)},getExternalControllers:function(){return w},unregisterAllExternalController:O,getPlaybackController:function(){return f},resetPreloadData:function(){S.resetPreloadData(),i.resetPreloadData()},reset:function(e){i.reset(),v&&(v.reset(e),v=null),D&&(D.reset(),D=null),A&&(A.reset(),A=null),h&&h.unRegisterStreamType(r),w.forEach((function(e){e.reset()})),L(),r=null,d=null,_&&(_.reset(),_=null)}},f&&f.getIsDynamic()&&(_=Be(t).create({timelineConverter:s,streamProcessor:M})),L(),M}Qt.__dashjs_factory_name="StreamProcessor";var Gt=s.a.getClassFactory(Qt);function Vt(){var e,t="urn:mpeg:dash:event:2012",i=this.context,n=E(i).getInstance().log,r=c(i).getInstance(),a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=void 0,g=void 0,y=void 0;function m(){y=!1,a={},o={},s={},l=null,d=(u=100)/1e3}function T(){if(!h||!f||!g)throw new Error("setConfig function has to be called previously")}function M(){null!==l&&y&&(clearInterval(l),l=null,y=!1)}function N(e){if(1==e.eventStream.value){var t,i=e.eventStream.timescale||1,a=e.presentationTime/i;t=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/i,n("Manifest validity changed: Valid until: "+a+"; remaining duration: "+t),r.trigger(p.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:a,newDuration:t,newManifestValidAfter:NaN})}}function I(){v(o),v(a),function(){if(s)for(var e=g.getTime(),t=Object.keys(s),i=0;i<t.length;i++){var r=t[i],a=s[r];null!==a&&(a.duration+a.presentationTime)/a.eventStream.timescale<e&&(n("Remove Event "+r+" at time "+e),a=null,delete s[r])}}()}function v(e){var i,a=g.getTime();if(e)for(var o=Object.keys(e),l=0;l<o.length;l++){var u=o[l],c=e[u];void 0!==c&&(0==(i=c.presentationTime/c.eventStream.timescale)||i<=a&&i+d>a)&&(n("Start Event "+u+" at "+a),c.duration>0&&(s[u]=c),c.eventStream.schemeIdUri==t&&1==c.eventStream.value?0===c.duration&&0===c.presentationTimeDelta||(T(),f.refreshManifest()):r.trigger(c.eventStream.schemeIdUri,{event:c}),delete e[u])}}return e={addInlineEvents:function(e){if(T(),a={},e)for(var t=0;t<e.length;t++){var i=e[t];a[i.id]=i,n("Add inline event with id "+i.id)}n("Added "+e.length+" inline events")},addInbandEvents:function(e){T();for(var i=0;i<e.length;i++){var r=e[i];r.id in o?n("Repeated event with id "+r.id):(r.eventStream.schemeIdUri===t&&void 0===o[r.id]&&N(r),o[r.id]=r,n("Add inband event with id "+r.id))}},stop:M,start:function(){T(),n("Start Event Controller"),y||isNaN(u)||(y=!0,l=setInterval(I,u))},setConfig:function(e){e&&(e.manifestModel&&(h=e.manifestModel),e.manifestUpdater&&(f=e.manifestUpdater),e.playbackController&&(g=e.playbackController))},reset:function(){M(),m()}},m(),e}Vt.__dashjs_factory_name="EventController";var Ht=s.a.getClassFactory(Vt),Wt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},qt=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.url=i||null,n.checkForExistenceOnly=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(y);function Zt(){return{verify:function(e){if(!e)return{verified:!1};var t=Ne.a.parseBuffer(e),i=t.fetchAll("moof"),n=t.fetchAll("mdat"),r=t.fetchAll("trun"),a=e.byteLength,o="",s=i.length>0&&i.length===n.length&&i.length===r.length,l=!0,u=0,c=!0;if(s){for(var d=0,h=i.length;d<h;d++){var f=i[d],p=n[d];u+=f.size+p.size,p.size!==p._raw.byteLength&&(c=!1,o+="The index "+d+" mdat box size error, decoded: "+p.size+", actually: "+p._raw.byteLength+". ")}a!==u&&(l=!1,c&&(o="Size error, decoded: "+u+", actually: "+a))}else o="Missing moof box and mdat box.";return{size:a,moofBoxesCount:i.length,isSizeCorrect:l,areAllBoxesInPairs:s,areAllMdatBoxesSizeCorrect:c,verified:l&&s&&c,msg:o}}}}Zt.__dashjs_factory_name="VerifySegment";var Kt=s.a.getSingletonFactory(Zt),$t="request timeout";function Xt(e){e=e||{};var t=this.context,i=c(t).getInstance(),n=Kt(t).getInstance(),r=E(t).getInstance().log,o=void 0,s=void 0,l=void 0;return o={checkForExistence:function(e){var t=function(t){i.trigger(p.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new qt(e.url);s.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function t(l,u){u?u.hasOwnProperty("canUseNC")||(u.canUseNC=!0):u={canUseNC:!0};var c=function(t,n){if(!n&&(i.trigger(p.LOADING_COMPLETED,{request:l,response:t||null,error:n||null,sender:o}),l.preloadEnd)){e.mediaPlayerModel.setPreloadData(null);var r=e.abrController.getDefaultQualityFor(l.mediaType,!1);e.abrController.setPlaybackQuality(l.mediaType,e.streamController.getActiveStreamInfo(),r)}};l?(void 0===l.retry&&(l.retry=1),s.load({request:l,progress:function(e){e&&i.trigger(p.LOADING_DATA_PROGRESS,{request:l,response:e||null,error:null,sender:o})},success:function(e){try{var o=void 0;if(l.range){var s=l.range&&l.range.split("-");o=s[1]-s[0]+1}var u={mediaType:l.mediaType,id:l.representationId,index:l.index,range:l.range,received:e&&e.byteLength||0,url:l.url,startTime:l.startTime,duration:l.duration,p2pLoadInfo:l.p2pLoadInfo};e&&e.byteLength>3e7&&(u.code=a.DOWNLOAD_FRAGMENT_ERROR_RANGE,i.trigger(p.FRAGMENT_LOADED_ERROR,u));var d=function(e,t){try{if(e&&t){if(isNaN(e.index)||"MediaSegment"!==e.type)return{verified:!0};var a=n.verify(t);return a.mediaType=e.mediaType,a.quality=e.quality,a.index=e.index,a.id=e.representationId,a&&!a.verified&&(r("VERIFY_SEGMENT_WARNING: "+JSON.stringify(a)),i.trigger(p.VERIFY_SEGMENT_WARNING,a)),a}}catch(e){throw new Error(e)}}(l,e);e&&(e.byteLength===o||!o)&&d&&d.verified?(1===l.retry||(u.code=a.DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS,i.trigger(p.FRAGMENT_LOADED_ERROR,u)),c(e)):(u&&u.hasOwnProperty("type")&&delete u.type,d.verified||(e.byteLength===o?u.verifiedType=1:u.verifiedType=2),l.retry&&l.retry>0?(u.code=a.DOWNLOAD_FRAGMENT_ERROR,i.trigger(p.FRAGMENT_LOADED_ERROR,u),l.retry--,t(l,{canUseNC:!1})):(u.code=a.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE,i.trigger(p.FRAGMENT_LOADED_ERROR,u)))}catch(e){console.error("FragmentLoader Load Error: ",e)}},timeout:function(e,t,n){var r={mediaType:e.mediaType,id:e.representationId,index:e.index,range:e.range,received:e.bytesLoaded,url:e.url,startTime:e.startTime,duration:e.duration,total:e.bytesTotal,latency:t,timeout:n,p2pLoadInfo:e.p2pLoadInfo};r.code=a.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT,i.trigger(p.FRAGMENT_LOADED_ERROR,r),c(void 0,new _(1,$t))},error:function(e,t,i){c(void 0,new _(1,i,t))},abort:function(e){e&&i.trigger(p.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:o})},connectTimeout:function(e,t){if(e){var n={mediaType:e.mediaType,id:e.representationId,index:e.index,range:e.range,received:e.bytesLoaded||0,url:e.url,startTime:e.startTime,duration:e.duration,total:e.bytesTotal,timeout:t,p2pLoadInfo:e.p2pLoadInfo};n.code=a.CONNECT_FRAGMENT_ERROR_TIMEOUT,i.trigger(p.FRAGMENT_LOADED_ERROR,n),c(void 0,new _(1,$t))}},headersReceived:function(e){i.trigger(p.FRAGMENT_LOADING_HEADER_RECEIVED,{request:l,headers:e})},params:u})):c(void 0,new _(2,"request is null"))},abort:function(){s&&s.abort()},reset:function(){s&&(s.abort(),s=null)},resetPreloadData:function(){l=e.mediaPlayerModel.getPreloadData(),s.setPreloadData(l)}},l=e.mediaPlayerModel.getPreloadData(),s=zt(t).create({errHandler:e.errHandler,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.mediaPlayerModel.getLowLatencyEnabled(),dashMetrics:e.dashMetrics,preloadData:l}),o}Xt.__dashjs_factory_name="FragmentLoader";var Jt=s.a.getClassFactory(Xt);Jt.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=1,Jt.FRAGMENT_LOADER_ERROR_NULL_REQUEST=2,s.a.updateClassFactory(Xt.__dashjs_factory_name,Jt);var ei=Jt;function ti(e){e=e||{};var t,i=this.context,r=E(i).getInstance().log,a=c(i).getInstance(),o=e.errHandler,s=e.mediaPlayerModel,l=e.metricsModel,u=e.abrController,d=e.streamController,h=e.videoModel,f=void 0;function g(e){return e&&e.type&&e.type===U.INIT_SEGMENT_TYPE}function y(){for(var e in f)f[e].reset();f={}}function m(e){if(f[e.request.mediaType]===e.sender){var t=e.request,i=e.response,o=g(t),s=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==n.AUDIO&&e.request.mediaType!==n.VIDEO&&e.request.mediaType!==n.FRAGMENTED_TEXT||a.trigger(p.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),i&&s){var l=function(e,t,i,n){var r=new Wt;return r.streamId=i,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r.endFragment=n,r}(i,t,s.id,e.type!==p.FRAGMENT_LOADING_PROGRESS);a.trigger(o?p.INIT_FRAGMENT_LOADED:p.MEDIA_FRAGMENT_LOADED,{chunk:l,fragmentModel:e.sender})}else r("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getModel:function(t){var n=f[t];return n||(n=D(i).create({metricsModel:l,fragmentLoader:ei(i).create({metricsModel:l,videoModel:h,mediaPlayerModel:s,errHandler:o,requestModifier:Mt(i).getInstance(),dashMetrics:e.dashMetrics,abrController:u,streamController:d})}),f[t]=n),n},isInitializationRequest:g,reset:function(){a.off(p.FRAGMENT_LOADING_COMPLETED,m,this),y()}},y(),a.on(p.FRAGMENT_LOADING_COMPLETED,m,t),t}ti.__dashjs_factory_name="FragmentController";var ii=s.a.getClassFactory(ti);function ni(e){e=e||{};var t=this.context,i=E(t).getInstance().log,r=c(t).getInstance(),a=e.manifestModel,o=e.dashManifestModel,s=e.mediaPlayerModel,l=e.manifestUpdater,u=e.adapter,d=e.capabilities,h=e.errHandler,f=e.timelineConverter,g=e.metricsModel,y=e.abrController,m=e.playbackController,T=e.mediaController,M=e.videoModel,N=e.streamController,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0;function b(){for(var e=v?v.length:0,t=0;t<e;t++)v[t].getFragmentModel().removeExecutedRequestsBeforeTime(j()+P()),v[t].reset();v=[],D=!1,_=!1,r.off(p.CURRENT_TRACK_CHANGED,B,I)}function R(){b(),A=null,S={},w=!1}function x(){m&&m.pause(),O&&(O.reset(),O=null),R(),i=null,r.off(p.DATA_UPDATE_COMPLETED,W,I),r.off(p.BUFFERING_COMPLETED,H,I),r.off(p.KEY_ERROR,k,I),r.off(p.SERVER_CERTIFICATE_UPDATED,k,I),r.off(p.LICENSE_REQUEST_COMPLETE,k,I),r.off(p.KEY_SYSTEM_SELECTED,k,I),r.off(p.KEY_SESSION_CREATED,k,I),r.off(p.KEY_STATUSES_CHANGED,k,I)}function P(){return A?A.duration:NaN}function j(){return A?A.start:NaN}function z(){if(!(y&&y.hasOwnProperty("getBitrateList")&&u&&u.hasOwnProperty("getAllMediaInfoForType")&&u.hasOwnProperty("getEventsFor")))throw new Error("Missing config parameter(s)")}function k(e){e.error&&(h.mediaKeySessionError(e.error),i(e.error),x())}function U(e){return e.type===n.TEXT?e.mimeType:e.type}function F(e){var t,r=e.type,o=void 0;if(r===n.MUXED&&e)return i(o="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),h.manifestError(o,"multiplexedrep",a.getValue()),!1;if(r===n.TEXT||r===n.FRAGMENTED_TEXT||r===n.EMBEDDED_TEXT||r===n.IMAGE)return!0;if(t=e.codec,i(r+" codec: "+t),e.contentProtection&&!d.supportsEncryptedMedia())h.capabilityError("encryptedmedia");else if(!d.supportsCodec(t))return i(o=r+"Codec ("+t+") is not supported."),!1;return!0}function B(e){if(e.newMediaInfo.streamInfo.id===A.id){var t=q(e.oldMediaInfo);if(t){var r=m.getTime();i("Stream -  Process track changed at current time "+r);var o=e.newMediaInfo,s=a.getValue();i("Stream -  Update stream controller"),s.refreshManifestOnSwitchTrack?(i("Stream -  Refreshing manifest for switch track"),C=e,l.refreshManifest()):(t.updateMediaInfo(o),o.type!==n.FRAGMENTED_TEXT&&(y.updateTopQualityIndex(o),t.switchTrackAsked(),t.getFragmentModel().abortRequests()))}}}function Y(r,l){var c=u.getAllMediaInfoForType(A,r),d=null;if(c&&0!==c.length){for(var p=0,E=c.length;p<E;p++)if(d=c[p],r===n.EMBEDDED_TEXT);else{if(!F(d))continue;T.addTrack(d)}r!==n.EMBEDDED_TEXT&&0!==T.getTracksFor(r,A).length&&(T.checkInitialMediaSettingsForType(r,A),function(i,r,l,c){var d=Gt(t).create({type:U(i),mimeType:i.mimeType,timelineConverter:f,adapter:u,manifestModel:a,dashManifestModel:o,mediaPlayerModel:s,metricsModel:g,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:I,abrController:y,domStorage:e.domStorage,playbackController:m,mediaController:T,streamController:N,videoModel:M,errHandler:h});d.initialize(l),y.updateTopQualityIndex(i),v.push(d),i.type===n.TEXT||i.type===n.FRAGMENTED_TEXT||d.updateMediaInfo(i)}(T.getCurrentTrackFor(r,A),0,l))}else i("No "+r+" data.")}function Q(e){var t=o.getAdaptationForType(a.getValue(),A.index,e,A);if(!t||!Array.isArray(t.Representation_asArray))return null;t.Representation_asArray=t.Representation_asArray.filter((function(e,n){if(0===n)return!0;var r=o.getCodec(t,n,!0);return!!d.supportsCodec(r)||(i("[Stream] codec not supported: "+r),!1)}))}function G(){for(var e=v.length,t=S.audio||S.video?new Error(1,"Data update failed",null):null,i=0;i<e;i++)if(v[i].isUpdating()||w)return;_&&r.trigger(p.STREAM_INITIALIZED,{streamInfo:A,error:t})}function V(){for(var e=0,t=v.length;e<t;e++)v[e].createBuffer()}function H(e){if(e.streamInfo===A){var t=Z(),a=t.length;if(0!==a){for(var o=0;o<a;o++)if(!t[o].isBufferingCompleted()&&(t[o].getType()===n.AUDIO||t[o].getType()===n.VIDEO))return void i("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor "+t[o].getType()+" is not buffering completed");i("[Stream] onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),r.trigger(p.STREAM_BUFFERING_COMPLETED,{streamInfo:A})}else i("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function W(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===A&&(S[t.getType()]=e.error,G())}function q(e){return!!e&&Z().filter((function(t){return t.getType()===e.type}))[0]}function Z(){for(var e=v.length,t=[],i=void 0,r=void 0,a=0;a<e;a++)(i=(r=v[a]).getType())!==n.AUDIO&&i!==n.VIDEO&&i!==n.FRAGMENTED_TEXT||t.push(r);return t}return I={initialize:function(e){A=e},activate:function(e){D||(r.on(p.CURRENT_TRACK_CHANGED,B,I),function(e){z();var r=void 0,o=M.getElement();if(L||((L=Ht(t).create()).setConfig({manifestModel:a,manifestUpdater:l,playbackController:m}),r=u.getEventsFor(A),L.addInlineEvents(r)),w=!0,Q(n.VIDEO),Q(n.AUDIO),(null===o||o&&"VIDEO"===o.nodeName)&&Y(n.VIDEO,e),Y(n.AUDIO,e),"open"!==e.readyState?(e.addEventListener("sourceopen",V,!1),e.addEventListener("webkitsourceopen",V,!1)):V(),_=!0,w=!1,0===v.length){var s="No streams to play.";h.manifestError(s,"nostreams",a.getValue()),i(s)}else G()}(e),D=!0)},deactivate:b,getDuration:P,getStartTime:j,getId:function(){return A?A.id:NaN},getStreamInfo:function(){return A},getFragmentController:function(){return O},getEventController:function(){return L},getBitrateListFor:function(e){z();var t=function(e){for(var t=v.length,i=null,n=0;n<t;n++)if((i=v[n]).getType()===e)return i.getMediaInfo();return null}(e);return y.getBitrateList(t)},startEventController:function(){L&&L.start()},stopEventController:function(){L&&L.stop()},updateData:function(e){if(i("Manifest updated... updating data system wide."),D=!1,w=!0,A=e,L){var t=u.getEventsFor(A);L.addInlineEvents(t)}Q(n.VIDEO),Q(n.AUDIO);for(var r=0,a=v.length;r<a;r++){var o=v[r],s=u.getMediaInfoForType(A,o.getType());y.updateTopQualityIndex(s),o.updateMediaInfo(s)}if(C&&"fragmentedText"!==C.newMediaInfo.type){var l=q(C.oldMediaInfo);if(!l)return;l.switchTrackAsked(),C=void 0}w=!1,G()},reset:x,getProcessors:Z,setMediaSource:function(e){for(var t=0;t<v.length;)F(v[t].getMediaInfo())?(v[t].setMediaSource(e),t++):(v[t].reset(),v.splice(t,1));for(var n=0;n<v.length;n++)v[n].dischargePreBuffer();if(0===v.length){var r="No streams to play.";h.manifestError(r,"nostreams",a.getValue()),i(r)}}},R(),O=ii(t).create({mediaPlayerModel:s,videoModel:M,metricsModel:g,errHandler:h,dashMetrics:e.dashMetrics,abrController:y,streamController:N}),r.on(p.BUFFERING_COMPLETED,H,I),r.on(p.DATA_UPDATE_COMPLETED,W,I),I}ni.__dashjs_factory_name="Stream";var ri=s.a.getClassFactory(ni);function ai(){var e=this.context,t=E(e).getInstance().log,i=c(e).getInstance(),n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0;function f(){n=NaN,o=!1,a=!0,g()}function g(){null!==r&&(clearInterval(r),r=null)}function y(e){g(),isNaN(e)&&!isNaN(n)&&(e=1e3*n),isNaN(e)||(t("Refresh manifest in "+e+" milliseconds."),r=setTimeout(M,e))}function m(){o=!0;var e=l.getValue(),t=e.url,i=u.getLocation(e);i&&(t=i),s.load(t)}function T(e){if(d.getAppendingSourceState()){var r=d.getCachedDurationOffset("offset");e.mediaPresentationDuration+=r,e.Period.duration+=r,e.Period_asArray.duration+=r}l.setValue(e);var o=new Date,s=(o.getTime()-e.loadedTime.getTime())/1e3;1e3*(n=u.getManifestUpdatePeriod(e,s))>2147483647&&(n=2147483.647),i.trigger(p.MANIFEST_UPDATED,{manifest:e}),t("Manifest has been refreshed at "+o+"["+o.getTime()/1e3+"] "),a||y()}function M(){a&&!d.getScheduleWhilePaused()||(o?y(d.getManifestUpdateRetryInterval()):m())}function N(e){e.error?h.manifestError(e.error.message,e.error.code,"","",e.error.errorCode,e.error.httpCode):T(e.manifest)}function I(){a=!1,y()}function v(){a=!0,g()}function D(){o=!1}return{initialize:function(){f(),i.on(p.STREAMS_COMPOSED,D,this),i.on(p.PLAYBACK_STARTED,I,this),i.on(p.PLAYBACK_PAUSED,v,this),i.on(p.INTERNAL_MANIFEST_LOADED,N,this)},setManifest:function(e){T(e)},refreshManifest:m,setConfig:function(e){e&&(e.manifestModel&&(l=e.manifestModel),e.dashManifestModel&&(u=e.dashManifestModel),e.mediaPlayerModel&&(d=e.mediaPlayerModel),e.manifestLoader&&(s=e.manifestLoader),e.errHandler&&(h=e.errHandler))},reset:function(){i.off(p.PLAYBACK_STARTED,I,this),i.off(p.PLAYBACK_PAUSED,v,this),i.off(p.STREAMS_COMPOSED,D,this),i.off(p.INTERNAL_MANIFEST_LOADED,N,this),f()}}}ai.__dashjs_factory_name="ManifestUpdater";var oi=s.a.getClassFactory(ai);function si(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var li=1e3;function ui(){var e,t,i,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,y=void 0,m=void 0,E=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0,b=void 0,R=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,F=void 0,B=void 0,Y=void 0,Q=void 0;function G(e){var t=void 0;for(t=0;t<O.length;t++)if(O[t].rulename===e)return t;return-1}function V(e){B=e}return e={setABRStrategy:function(e){_=e},getABRStrategy:function(){return _},setUseDefaultABRRules:function(e){A=e},getUseDefaultABRRules:function(){return A},getABRCustomRules:function(){return O},addABRCustomRule:function(e,t,i){var n=G(t);-1===n?O.push({type:e,rulename:t,rule:i}):(O[n].type=e,O[n].rule=i)},removeABRCustomRule:function(e){var t=G(e);-1!==t&&O.splice(t,1)},removeAllABRCustomRule:function(){O=[]},setBandwidthSafetyFactor:function(e){M=e},getBandwidthSafetyFactor:function(){return M},setAbandonLoadTimeout:function(e){N=e},getAbandonLoadTimeout:function(){return N},setLastBitrateCachingInfo:function(e,t){f.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(f.ttl=t)},getLastBitrateCachingInfo:function(){return f},setLastMediaSettingsCachingInfo:function(e,t){p.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(p.ttl=t)},getLastMediaSettingsCachingInfo:function(){return p},setStableBufferTime:function(e){g=e},getStableBufferTime:function(){return isNaN(g)?w?20:12:g},setBufferTimeAtTopQuality:function(e){y=e},getBufferTimeAtTopQuality:function(){return y},setBufferTimeAtTopQualityLongForm:function(e){m=e},getBufferTimeAtTopQualityLongForm:function(){return m},setLongFormContentDurationThreshold:function(e){E=e},getLongFormContentDurationThreshold:function(){return E},setSegmentOverlapToleranceTime:function(e){T=e},getSegmentOverlapToleranceTime:function(){return T},getCacheLoadThresholdForType:function(e){return C[e]},setCacheLoadThresholdForType:function(e,t){C[e]=t},setBufferToKeep:function(e){c=e},getBufferToKeep:function(){return c},setBufferAheadToKeep:function(e){d=e},getBufferAheadToKeep:function(){return d},setBufferPruningInterval:function(e){h=e},getBufferPruningInterval:function(){return h},setFragmentRetryAttempts:function(e){I[U.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryAttempts:function(){return I[U.MEDIA_SEGMENT_TYPE]},setManifestRetryAttempts:function(e){I[U.MPD_TYPE]=e},getManifestRetryAttempts:function(){return I[U.MPD_TYPE]},setRetryAttemptsForType:function(e,t){I[e]=t},getRetryAttemptsForType:function(e){return I[e]},setFragmentRetryInterval:function(e){v[U.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryInterval:function(){return v[U.MEDIA_SEGMENT_TYPE]},setManifestRetryInterval:function(e){v[U.MPD_TYPE]=e},getManifestRetryInterval:function(){return v[U.MPD_TYPE]},setRetryIntervalForType:function(e,t){v[e]=t},getRetryIntervalForType:function(e){return v[e]},setWallclockTimeUpdateInterval:function(e){D=e},getWallclockTimeUpdateInterval:function(){return D},setScheduleWhilePaused:function(e){u=e},getScheduleWhilePaused:function(){return u},getUseSuggestedPresentationDelay:function(){return a},setUseSuggestedPresentationDelay:function(e){a=e},setLiveDelayFragmentCount:function(e){s=e},getLiveDelayFragmentCount:function(){return s},getLiveDelay:function(){return x?l||3:l},setLiveDelay:function(e){l=e},setUseManifestDateHeaderTimeSource:function(e){r=e},getUseManifestDateHeaderTimeSource:function(){return r},setUTCTimingSources:function(e){o=e},getUTCTimingSources:function(){return o},setXHRWithCredentialsForType:function e(t,i){t?S[t]=!!i:Object.keys(S).forEach((function(t){e(t,i)}))},getXHRWithCredentialsForType:function(e){var t=S[e];return void 0===t?S.default:t},setFastSwitchEnabled:function(e){w=e},getFastSwitchEnabled:function(){return w},setMovingAverageMethod:function(e){L=e},getMovingAverageMethod:function(){return L},setJumpGaps:function(e){b=e},getJumpGaps:function(){return b},setSmallGapLimit:function(e){R=e},getSmallGapLimit:function(){return R},getLowLatencyEnabled:function(){return x},setLowLatencyEnabled:function(e){x=e},getPreloadData:function(){return P},setPreloadData:function(e){P=e},setManifestUpdateRetryInterval:function(e){j=e},getManifestUpdateRetryInterval:function(){return j},setAppendingSourceState:function(e){e!==z&&(z=e)},getAppendingSourceState:function(){return z},setCachedDurationOffset:function(e,t){t=parseFloat(t.toFixed(5)),k[e]=t},getCachedDurationOffset:function(e){return e?k[e]:k},clearCachedDruationOffset:function(){k={offset:0,duration:0}},setEndOfStreamState:function(e){F=e},getEndOfStreamState:function(){return F},setP2pPermission:V,getP2pPermission:function(){return B},addP2pSDKErrorCount:function(){(Y+=1)>12&&V(!1)},getP2pSDKErrorCount:function(){return Y},addBufferingCount:function(){Q+=1},getBufferingCount:function(){return Q},reset:function(){}},o=[],a=!1,r=!0,u=!0,_=n.ABR_STRATEGY_DYNAMIC,A=!0,w=!1,f={enabled:!0,ttl:36e4},p={enabled:!0,ttl:36e4},s=4,l=void 0,c=20,d=80,h=10,g=NaN,y=30,m=60,E=600,T=.2,M=.8,N=1e4,D=50,b=!1,R=.8,j=100,S={default:!1},O=[],L=n.MOVING_AVERAGE_SLIDING_WINDOW,x=!1,z=!1,k={time:0,duration:0,offset:0},si(t={},U.MPD_TYPE,3),si(t,U.XLINK_EXPANSION_TYPE,1),si(t,U.MEDIA_SEGMENT_TYPE,3),si(t,U.INIT_SEGMENT_TYPE,3),si(t,U.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),si(t,U.INDEX_SEGMENT_TYPE,3),si(t,U.OTHER_TYPE,3),I=t,si(i={},U.MPD_TYPE,500),si(i,U.XLINK_EXPANSION_TYPE,500),si(i,U.MEDIA_SEGMENT_TYPE,li),si(i,U.INIT_SEGMENT_TYPE,li),si(i,U.BITSTREAM_SWITCHING_SEGMENT_TYPE,li),si(i,U.INDEX_SEGMENT_TYPE,li),si(i,U.OTHER_TYPE,li),v=i,(C={})[n.VIDEO]=25,C[n.AUDIO]=5,F=!0,B=!0,Y=0,Q=0,e}ui.__dashjs_factory_name="MediaPlayerModel";var ci=s.a.getSingletonFactory(ui);ci.DEFAULT_UTC_TIMING_SOURCE={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},s.a.updateSingletonFactory(ui.__dashjs_factory_name,ci);var di=ci,hi=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.AST_IN_FUTURE="astInFuture",i.BUFFER_EMPTY="bufferStalled",i.BUFFER_LOADED="bufferLoaded",i.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",i.ERROR="error",i.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",i.FRAGMENT_LOADING_HEADER_RECEIVED="fragmentLoadingHeaderReceived",i.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",i.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",i.FRAGMENT_P2P_LOAD_INFO="fragmentP2pLoadInfo",i.CDN_LOAD_INFO="cdnLoadInfo",i.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",i.FRAGMENT_LOADED_ERROR="fragmentLoadedError",i.PCDN_LOADED_ERROR="pcdnLoadedError",i.LOG="log",i.MANIFEST_LOADED="manifestLoaded",i.METRICS_CHANGED="metricsChanged",i.METRIC_CHANGED="metricChanged",i.METRIC_ADDED="metricAdded",i.METRIC_UPDATED="metricUpdated",i.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",i.PERIOD_SWITCH_STARTED="periodSwitchStarted",i.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",i.QUALITY_CHANGE_DOWNLOADED="qualityChangeDownloaded",i.QUALITY_CHANGE_RENDERED="qualityChangeRendered",i.TRACK_CHANGE_RENDERED="trackChangeRendered",i.SOURCE_INITIALIZED="sourceInitialized",i.STREAM_INITIALIZED="streamInitialized",i.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",i.TEXT_TRACKS_ADDED="allTextTracksAdded",i.TEXT_TRACK_ADDED="textTrackAdded",i.TTML_PARSED="ttmlParsed",i.TTML_TO_PARSE="ttmlToParse",i.CAN_PLAY="canPlay",i.PLAYBACK_ENDED="playbackEnded",i.PLAYBACK_ERROR="playbackError",i.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",i.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",i.PLAYBACK_PAUSED="playbackPaused",i.PLAYBACK_PLAYING="playbackPlaying",i.PLAYBACK_PROGRESS="playbackProgress",i.PLAYBACK_RATE_CHANGED="playbackRateChanged",i.PLAYBACK_SEEKED="playbackSeeked",i.PLAYBACK_SEEKING="playbackSeeking",i.PLAYBACK_SEEK_ASKED="playbackSeekAsked",i.PLAYBACK_STALLED="playbackStalled",i.PLAYBACK_STARTED="playbackStarted",i.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",i.PLAYBACK_WAITING="playbackWaiting",i.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",i.DELAY_TO_APPEND_TO_BUFFER="delayToAppendBuffer",i.GET_NEXT_FRAGMENT="getNextFragment",i.APPENDING_NEXT_SOURCE="appendingNextSource",i.APPENDED_NEXT_SOURCE="appendedNextSource",i.APPENDED_NEXT_SOURCE_DURATION_CHANGED="appendedNextSourceDurationChanged",i.START_OFFSET_TIME_WARNING="startOffsetTimeWarning",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(d));function fi(){var e=this.context,t=E(e).getInstance().log,i=c(e).getInstance(),r=it(e).getInstance(),a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0;function f(e){o=e}function g(e){a=e}function y(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,i=void 0,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&(parseInt(n[6],10)||0),n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]&&(i=60*parseInt(n[9],10)+parseInt(n[10],10),t+=("+"===n[8]?-1:1)*i*60*1e3),new Date(t).getTime()}(e)),t}function m(e){return Date.parse(e)}function T(e){return Date.parse(e)}function M(e,t,i){i()}function N(e,t,i){var n=y(e);isNaN(n)?i():t(n)}function I(e,t,i,n,a){var o,s,l=!1,u=new XMLHttpRequest,c=a?U.HEAD:U.GET,d=t.match(/\S+/g);if(t=d.shift(),o=function(){l||(l=!0,d.length?I(e,d.join(" "),i,n,a):n())},s=function(){var t=void 0,n=void 0;200===u.status&&(t=a?u.getResponseHeader("Date"):u.response,n=e(t),isNaN(n)||(i(n),l=!0))},r.isRelative(t)){var f=h.resolve();f&&(t=r.resolve(t,f.url))}u.open(c,t),u.timeout=5e3,u.onload=s,u.onloadend=o,u.send()}function v(e,t,i){I(T,e,t,i,!0)}function D(e,t,n){f(!1),i.trigger(p.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new _(1):null})}return{initialize:function(e,i){s=i,a=0,o=!1,l={"urn:mpeg:dash:utc:http-head:2014":v,"urn:mpeg:dash:utc:http-xsdate:2014":I.bind(null,y),"urn:mpeg:dash:utc:http-iso:2014":I.bind(null,m),"urn:mpeg:dash:utc:direct:2014":N,"urn:mpeg:dash:utc:http-head:2012":v,"urn:mpeg:dash:utc:http-xsdate:2012":I.bind(null,y),"urn:mpeg:dash:utc:http-iso:2012":I.bind(null,m),"urn:mpeg:dash:utc:direct:2012":N,"urn:mpeg:dash:utc:http-ntp:2014":M,"urn:mpeg:dash:utc:ntp:2014":M,"urn:mpeg:dash:utc:sntp:2014":M},o||function e(i,r){var o=r||0,c=i[o],h=function(e,t){var i,r,o,l=!e||!t;l&&s?(i=u.getReadOnlyMetricsFor(n.STREAM),o=null!==(r=d.getLatestMPDRequestHeaderValueByID(i,"Date"))?new Date(r).getTime():Number.NaN,isNaN(o)?D(!0):(g(o-(new Date).getTime()),D(!1,o/1e3,a))):D(l,e,t)};f(!0),c?l.hasOwnProperty(c.schemeIdUri)?l[c.schemeIdUri](c.value,(function(e){var i=(new Date).getTime(),n=e-i;g(n),t("Local time:      "+new Date(i)),t("Server time:     "+new Date(e)),t("Difference (ms): "+n),h(e,n)}),(function(){e(i,o+1)})):e(i,o+1):(g(0),h())}(e)},getOffsetToDeviceTimeMs:function(){return a},setConfig:function(e){e&&(e.metricsModel&&(u=e.metricsModel),e.dashMetrics&&(d=e.dashMetrics),e.baseURLController&&(h=e.baseURLController))},reset:function(){f(!1)}}}fi.__dashjs_factory_name="TimeSyncController";var pi=s.a.getSingletonFactory(fi);pi.TIME_SYNC_FAILED_ERROR_CODE=1,pi.HTTP_TIMEOUT_MS=5e3,s.a.updateSingletonFactory(fi.__dashjs_factory_name,pi);var gi=pi,yi=i(8),mi=i.n(yi);function Ei(){return{areEqual:function(e,t){return mi()(e,t)}}}Ei.__dashjs_factory_name="ObjectUtils";var Ti=s.a.getSingletonFactory(Ei),Mi=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:i||NaN},this.children=[]};function Ni(){var e,t=void 0,i=void 0,n=this.context,r=Ti(n).getInstance();function a(e,t,n){var a=i.getBaseURLsFromElement(n);e[t]?r.areEqual(a,e[t].data.baseUrls)||(e[t].data.baseUrls=a,e[t].data.selectedIdx=NaN):e[t]=new Mi(a)}function o(){t=new Mi}return e={reset:o,update:function(e){!function(e){var n=i.getBaseURLsFromElement(e);r.areEqual(n,t.data.baseUrls)||(t.data.baseUrls=n,t.data.selectedIdx=NaN),e.Period_asArray&&e.Period_asArray.forEach((function(e,n){a(t.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,r){a(t.children[n].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(i.getRepresentationSortFunction()).forEach((function(e,i){a(t.children[n].children[r].children,i,e)}))}))}))}(e)},getForPath:function(e){var i=t,n=[i.data];return e&&e.forEach((function(e){(i=i.children[e])&&n.push(i.data)})),n.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){!function e(i,n){var r=n||t;i(r.data),r.children&&r.children.forEach((function(t){return e(i,t)}))}((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=NaN)}))},setConfig:function(e){e.dashManifestModel&&(i=e.dashManifestModel)}},o(),e}Ni.__dashjs_factory_name="BaseURLTreeModel";var Ii=s.a.getClassFactory(Ni);function vi(e){return e=e||{},{select:function(e){return e&&function(e){var t=0,i=[],n=0,r=void 0,a=void 0;if((a=e.sort((function(e,t){var i=e.dvb_priority-t.dvb_priority;return isNaN(i)?0:i})).filter((function(e,t,i){return!t||i[0].dvb_priority&&e.dvb_priority&&i[0].dvb_priority===e.dvb_priority}))).length)return a.length>1&&(a.forEach((function(e){t+=e.dvb_weight,i.push(t)})),r=Math.floor(Math.random()*(t-1)),i.every((function(e,t){return n=t,!(r<e)}))),a[n]}((t=[],e.filter((function(){return!0})).filter((function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)}))));var t}}}vi.__dashjs_factory_name="DVBSelector";var Di=s.a.getClassFactory(vi);function _i(e){return e=e||{},{select:function(e){var t=0,i=void 0;return e&&e.some((function(e,i){return t=i,!0}))&&(i=e[t]),i}}}_i.__dashjs_factory_name="BasicSelector";var Ai=s.a.getClassFactory(_i),Si="Failed to resolve a valid URL";function wi(){var e,t=this.context,i=c(t).getInstance(),n=void 0,r=void 0,a=void 0,o=void 0;return e={chooseSelectorFromManifest:function(e){!function(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error("Missing config parameter(s)")}(),o=n.getIsDVB(e)?a:r},select:function(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=o.select(t);if(r)return e.selectedIdx=t.indexOf(r),r;i.trigger(p.URL_RESOLUTION_FAILED,{error:new Error(1,Si)})},reset:function(){},setConfig:function(e){e.selector&&(o=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}},r=Ai(t).create({}),a=Di(t).create({}),o=r,e}wi.__dashjs_factory_name="BaseURLSelector";var Oi=s.a.getClassFactory(wi);Oi.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=1,Oi.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=Si,s.a.updateClassFactory(wi.__dashjs_factory_name,Oi);var Li=Oi,Ci=function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=i||t||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};Ci.DEFAULT_DVB_PRIORITY=1,Ci.DEFAULT_DVB_WEIGHT=1;var bi=Ci;function Ri(){var e,t=void 0,i=this.context,n=c(i).getInstance(),r=it(i).getInstance(),a=void 0,o=void 0;return e={reset:function(){a.reset(),o.reset()},initialize:function(e){var i;a.setConfig({dashManifestModel:t}),o.setConfig({dashManifestModel:t}),i=e,a.update(i),o.chooseSelectorFromManifest(i)},resolve:function(e){var t=a.getForPath(e).reduce((function(e,t){var i=o.select(t);return i?(r.isRelative(i.url)?e.url=r.resolve(i.url,e.url):(e.url=i.url,e.serviceLocation=i.serviceLocation),e.urls=i.urls,e.availabilityTimeOffset=i.availabilityTimeOffset,e.availabilityTimeComplete=i.availabilityTimeComplete,e):new bi}),new bi);if(!r.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.dashManifestModel&&(t=e.dashManifestModel)}},a=Ii(i).create(),o=Li(i).create(),n.on(p.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(e){a.invalidateSelectedIndexes(e.entry)}),e),e}Ri.__dashjs_factory_name="BaseURLController";var xi=s.a.getSingletonFactory(Ri);function Pi(){return{createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var i=window.URL.createObjectURL(e);return t.setSource(i),i},detachMediaSource:function(e){e.setSource(null)},setDuration:function e(t,i){return t.duration!=i&&function(e,t){var i=void 0,n=function(){for(var t=!1,i=0;i<e.length;i++)e[i].updating&&(t=!0);return t};if(e.length&&n()){var r=function(){n()||(clearInterval(i),t())},a=function e(){this.removeEventListener("updateend",e,!1),this.removeEventListener("abort",e,!1),this.removeEventListener("error",e,!1),n()||t()};if("function"==typeof e[0].addEventListener)try{for(var o=0;o<e.length;o++)e[o].updating&&(e[o].addEventListener("updateend",a,!1),e[o].addEventListener("abort",a,!1),e[o].addEventListener("error",a,!1))}catch(e){i=setInterval(r,50)}else i=setInterval(r,50)}else t()}(t.sourceBuffers,(function(){if("open"===t.readyState)t.duration=i;else var n=setTimeout((function(){clearTimeout(n),e(t,i)}),50)})),t.duration},setSeekable:function(e,t,i){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<i&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,i))},signalEndOfStream:function(e){var t=e.sourceBuffers,i=t.length;if("open"===e.readyState){for(var n=0;n<i;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}e.endOfStream()}}}}Pi.__dashjs_factory_name="MediaSourceController";var ji=s.a.getSingletonFactory(Pi);function zi(){var e=this.context,t=E(e).getInstance().log,i=c(e).getInstance(),o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=void 0,g=void 0,y=void 0,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0,b=void 0,R=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,U=void 0,F=void 0,B=void 0,Y=void 0,Q=void 0,G=void 0,V=void 0,H=void 0,W=void 0,q=void 0;function Z(){if(he()){var e=z.getPlaybackQuality();e&&g.addDroppedFrames(n.VIDEO,e)}}function K(){if(!(!U.getJumpGaps()||!O||0===O.getProcessors().length||k.isSeeking()||F||R||x||P)&&++W>=40){var e=k.getTime();q===e?function(e){for(var n=O.getProcessors(),r=U.getSmallGapLimit(),a=void 0,o=0;o<n.length;o++){var s=n[o].getBuffer(),l=s&&s.getAllBufferRanges&&s.getAllBufferRanges(),u=void 0;if(l&&!(l.length<=1)){for(var c=0;c<l.length;c++)if(e<l.start(c)){u=l.start(c);break}if(u>0){var d=u-e;d>0&&d<=r&&(void 0===a||u>a)&&(a=u)}}}var h=k.getTimeToStreamEnd();void 0===a&&!isNaN(h)&&h<r&&(a=e+h),a>0&&(!isNaN(h)&&a>=e+h?(t("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),i.trigger(p.PLAYBACK_ENDED)):(t("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",a),k.seek(a)))}(e):q=e,W=0}}function $(e){var t=ne(e.seekTime);H&&(ee(),V=!1),t&&t!==O?(pe(Ge.END_OF_PERIOD_STOP_REASON),ae(O,t,e.seekTime)):pe(Ge.USER_REQUEST_STOP_REASON),ge(Qe.SEEK_START_REASON)}function X(){t("[StreamController][onPlaybackStarted]"),B?(B=!1,ge(Qe.INITIAL_PLAYOUT_START_REASON)):F&&(F=!1,ge(Qe.RESUME_FROM_PAUSE_START_REASON),te())}function J(e){t("[StreamController][onPlaybackPaused]"),e.ended||(F=!0,pe(Ge.USER_REQUEST_STOP_REASON),te())}function ee(){t("[StreamController][toggleEndPeriodTimer] stop end period timer."),clearTimeout(H),H=void 0}function te(){if(V)if(H)ee();else{var e=k.getTimeToStreamEnd(),n=e>0?1e3*e:0;t("[StreamController][toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in "+n+" milliseconds"),H=setTimeout((function(){i.trigger(p.PLAYBACK_ENDED)}),n)}}function ie(){var e=me().isLast,i=U.getEndOfStreamState();j&&e?(t("[StreamController][onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),i&&m.signalEndOfStream(j)):j&&void 0===H&&(t("[StreamController][onStreamBufferingCompleted] end of period detected"),V=!0,!1===F&&te())}function ne(e){var t=0,i=null,n=w.length;n>0&&(t+=w[0].getStartTime());for(var r=0;r<n;r++)if(i=w[r],e<(t=parseFloat((t+i.getDuration()).toFixed(5))))return i;return null}function re(e){var i=function(){if(O){var e=O.getStreamInfo().start,t=O.getStreamInfo().duration;return w.filter((function(i){return i.getStreamInfo().start===parseFloat((e+t).toFixed(5))}))[0]}}();i?(G=void 0,Q=void 0,ae(O,i,NaN)):t("StreamController no next stream found"),pe(i?Ge.END_OF_PERIOD_STOP_REASON:Ge.END_OF_CONTENT_STOP_REASON),H=void 0,V=!1;try{if(U.getEndOfStreamState()&&!e.isNativeEnded){var n=ve("video"),r=ve("audio");isNaN(n)&&isNaN(r)||(k.seek(k.getTime()-.3),m.signalEndOfStream(j))}}catch(e){console.error("Hack PLAYBACK_END trigger native ended event error",e)}}function ae(e,t,n){!R&&t&&e!==t&&(R=!0,i.trigger(p.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&(e.stopEventController(),e.deactivate()),O=t,k.initialize(O.getStreamInfo()),z.getElement()?oe(n,e,!1):function(e){se(e)}(n))}function oe(e,n,r){var a=void 0;function o(){j&&(t("MediaSource is open!"),window.URL.revokeObjectURL(a),j.removeEventListener("sourceopen",o),j.removeEventListener("webkitsourceopen",o),le(),n||i.trigger(p.SOURCE_INITIALIZED),r&&O.setMediaSource(j))}j?m.detachMediaSource(z):j=m.createMediaSource(),se(e),j.addEventListener("sourceopen",o,!1),j.addEventListener("webkitsourceopen",o,!1),a=m.attachMediaSource(j,z),t("MediaSource attached to element.  Waiting on open...")}function se(e){if(O.activate(j),G=fe(n.AUDIO),Q=fe(n.VIDEO),!B)if(isNaN(e)){var t=k.getStreamStartTime(!0);O.getProcessors().forEach((function(e){f.setIndexHandlerTime(e,t)}))}else k.seek(e);O.startEventController(),!b&&B||k.play(),R=!1,i.trigger(p.PERIOD_SWITCH_COMPLETED,{toStreamInfo:O.getStreamInfo()})}function le(e){var i=e||O.getStreamInfo().manifestInfo.duration,n=m.setDuration(j,i);t("Duration successfully set to: "+n)}function ue(e){for(var t=0,i=w.length;t<i;t++)if(w[t].getId()===e.id)return w[t];return null}function ce(){var t=d.getValue();L&&(i.trigger(p.PROTECTION_CREATED,{controller:L,manifest:t}),L.setMediaElement(z.getElement()),C&&L.setProtectionData(C)),function(){try{var t=f.getStreamsInfo();if(0===t.length)throw new Error("There are no streams");var r=y.getCurrentManifestUpdate(g.getMetricsFor(n.STREAM));g.updateManifestUpdateInfo(r,{currentTime:k.getTime(),buffered:z.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:S.getClientTimeOffset()});for(var a=0,u=t.length;a<u;a++){var c=t[a],m=ue(c);m?m.updateData(c):(m=ri(e).create({manifestModel:d,dashManifestModel:h,mediaPlayerModel:U,metricsModel:g,dashMetrics:y,manifestUpdater:l,adapter:f,timelineConverter:S,capabilities:s,errHandler:A,baseURLController:M,domStorage:N,abrController:I,playbackController:k,mediaController:v,videoModel:z,streamController:o}),w.push(m),m.initialize(c,L)),g.addManifestUpdateStreamInfo(r,c.id,c.index,c.start,c.duration)}if(!O){var E=k.getStartTimeFromUriParameters(),T=null;E&&(T=ne(isNaN(E.fragS)?E.fragT:E.fragS)),ae(null,null!==T?T:w[0],NaN)}i.trigger(p.STREAMS_COMPOSED)}catch(e){A.manifestError(e.message,"nostreamscomposed",d.getValue()),P=!0,Ne()}}()}function de(e){if(e.error)P=!0,Ne();else{var i=e.manifest;U.getAppendingSourceState()&&le(i.mediaPresentationDuration),f.updatePeriods(i);var r=f.getStreamsInfo(void 0,1)[0],a=f.getMediaInfoForType(r,n.VIDEO)||f.getMediaInfoForType(r,n.AUDIO),o=void 0;a&&(o=h.getUseCalculatedLiveEdgeTimeForAdaptation(f.getDataForMedia(a)))&&(t("SegmentTimeline detected using calculated Live Edge Time"),U.setUseManifestDateHeaderTimeSource(!1));var s=h.getUTCTimingSources(e.manifest),l=!h.getIsDynamic(i)||o?s:s.concat(U.getUTCTimingSources()),u=_.isHTTPS(e.manifest.url);l.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===di.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),t("Matching default timing source protocol to manifest protocol: ",e.value))})),M.initialize(i),T.setConfig({metricsModel:g,dashMetrics:y,baseURLController:M}),T.initialize(l,U.getUseManifestDateHeaderTimeSource())}}function he(){return Q}function fe(e){var t=!1;return O&&O.getProcessors().forEach((function(i){i.getMediaInfo().type===e&&(t=!0)})),t}function pe(e,t){t=t||new Date,Y&&(O&&O.getProcessors().forEach((function(i){var n=i.getScheduleController();n&&n.finalisePlayList(t,e)})),g.addPlayList(Y),Y=null)}function ge(e){(Y=new Qe).start=new Date,Y.mstart=1e3*k.getTime(),Y.starttype=e,O&&O.getProcessors().forEach((function(e){var t=e.getScheduleController();t&&t.setPlayList(Y)}))}function ye(e){if(e.error){var i="",n=a.MEDIA_ERROR;switch(this.MEDIA_DOWNLOAD_ERROR=5001,e.error.code){case 1:i="MEDIA_ERR_ABORTED",n=a.MEDIA_ABORTED_ERROR;break;case 2:i="MEDIA_ERR_NETWORK",n=a.MEDIA_NETWORK_ERROR;break;case 3:i="MEDIA_ERR_DECODE",n=a.MEDIA_DECODE_ERROR;break;case 4:i="MEDIA_ERR_SRC_NOT_SUPPORTED",n=a.MEDIA_SUPPORTED_ERROR;break;case 5:i="MEDIA_ERR_ENCRYPTED",n=a.MEDIA_ENCRYPTED_ERROR;break;default:i="UNKNOWN",n=a.MEDIA_UNKNOWN_ERROR}e.errorCode=n,x=!0,e.error.message&&(i+=" ("+e.error.message+")"),e.error.msExtendedCode&&(i+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t("Video Element Error: "+i),e.error&&t(e.error),A.mediaSourceError(i,n),Ne()}}function me(){return O?O.getStreamInfo():null}function Ee(){if(!(u&&u.hasOwnProperty("load")&&S&&S.hasOwnProperty("initialize")&&S.hasOwnProperty("reset")&&S.hasOwnProperty("getClientTimeOffset")))throw new Error("setConfig function has to be called previously")}function Te(e){isNaN(e.newDuration)||le(e.newDuration)}function Me(){w=[],L=null,R=!1,O=null,x=!1,P=!1,Q=void 0,G=void 0,B=!0,F=!1,b=!0,Y=null,H=void 0,V=!1,W=0}function Ne(){Ee(),T.reset(),pe(x||P?Ge.FAILURE_STOP_REASON:Ge.USER_REQUEST_STOP_REASON);for(var e=0,t=w?w.length:0;e<t;e++)w[e].reset(x);i.off(p.PLAYBACK_TIME_UPDATED,Z,this),i.off(p.PLAYBACK_SEEKING,$,this),i.off(p.PLAYBACK_ERROR,ye,this),i.off(p.PLAYBACK_STARTED,X,this),i.off(p.PLAYBACK_PAUSED,J,this),i.off(p.PLAYBACK_ENDED,re,this),i.off(p.MANIFEST_UPDATED,de,this),i.off(p.STREAM_BUFFERING_COMPLETED,ie,this),i.off(hi.METRIC_ADDED,Ie,this),i.off(p.MANIFEST_VALIDITY_CHANGED,Te,this),M.reset(),l.reset(),g.clearAllCurrentMetrics(),d.setValue(null),u.reset(),S.reset(),D.reset(),j&&(m.detachMediaSource(z),j=null),z=null,L&&(L.setMediaElement(null),L=null,C=null,d.getValue()&&i.trigger(p.PROTECTION_DESTROYED,{data:d.getValue().url})),i.trigger(p.STREAM_TEARDOWN_COMPLETE),Me()}function Ie(e){e.metric===r.DVR_INFO&&e.mediaType===n.AUDIO&&m.setSeekable(j,e.value.range.start,e.value.range.end)}function ve(e){return-1!==[n.VIDEO,n.AUDIO,n.FRAGMENTED_TEXT].indexOf(e)?y.getCurrentBufferLevel(g.getReadOnlyMetricsFor(e))||NaN:(t("Warning  - getBufferLength requested for invalid type"),NaN)}return o={initialize:function(t,n){Ee(),b=t,C=n,S.initialize(),(l=oi(e).create()).setConfig({manifestModel:d,dashManifestModel:h,mediaPlayerModel:U,manifestLoader:u,errHandler:A}),l.initialize(),M.setConfig({dashManifestModel:h}),i.on(p.TIME_SYNCHRONIZATION_COMPLETED,ce,this),i.on(p.PLAYBACK_SEEKING,$,this),i.on(p.PLAYBACK_TIME_UPDATED,Z,this),i.on(p.PLAYBACK_ENDED,re,this),i.on(p.PLAYBACK_ERROR,ye,this),i.on(p.PLAYBACK_STARTED,X,this),i.on(p.PLAYBACK_PAUSED,J,this),i.on(p.MANIFEST_UPDATED,de,this),i.on(p.STREAM_BUFFERING_COMPLETED,ie,this),i.on(p.MANIFEST_VALIDITY_CHANGED,Te,this),i.on(p.WALLCLOCK_TIME_UPDATED,K,this),i.on(hi.METRIC_ADDED,Ie,this)},getActiveStreamInfo:me,isVideoTrackPresent:he,isAudioTrackPresent:function(){return G},switchToVideoElement:function(e){k.initialize(O.getStreamInfo()),oe(e,null,!0)},getStreamById:function(e){return w.filter((function(t){return t.getId()===e}))[0]},getStreamForTime:ne,getDuration:function(){if(O)return O.getStreamInfo().duration},getTimeRelativeToStreamId:function(e,t){for(var i=null,n=0,r=0,a=null,o=w.length,s=0;s<o;s++){if(r=(i=w[s]).getStartTime(),a=i.getDuration(),Number.isFinite(r)&&(n=r),i.getId()===t)return e-n;Number.isFinite(a)&&(n+=a)}return null},load:function(e,t,i){Ee(),u.load(e,t,i)},loadWithManifest:function(e){!function(){if(!l||!l.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),l.setManifest(e)},getActiveStreamProcessors:function(){return O?O.getProcessors():[]},setConfig:function(e){e&&(e.capabilities&&(s=e.capabilities),e.manifestLoader&&(u=e.manifestLoader),e.manifestModel&&(d=e.manifestModel),e.dashManifestModel&&(h=e.dashManifestModel),e.mediaPlayerModel&&(U=e.mediaPlayerModel),e.protectionController&&(L=e.protectionController),e.adapter&&(f=e.adapter),e.metricsModel&&(g=e.metricsModel),e.dashMetrics&&(y=e.dashMetrics),e.errHandler&&(A=e.errHandler),e.timelineConverter&&(S=e.timelineConverter),e.videoModel&&(z=e.videoModel),e.playbackController&&(k=e.playbackController),e.domStorage&&(N=e.domStorage),e.abrController&&(I=e.abrController),e.mediaController&&(v=e.mediaController))},setProtectionData:function(e){C=e},setMediaDuration:le,reset:Ne},T=gi(e).getInstance(),M=xi(e).getInstance(),m=ji(e).getInstance(),D=Ae(e).getInstance(),_=it(e).getInstance(),Me(),o}zi.__dashjs_factory_name="StreamController";var ki=s.a.getSingletonFactory(zi),Ui=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return a.url=i||null,a.type=r||null,a.mediaType=n.STREAM,a.responseType="",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(y);function Fi(e){e=e||{};var t=this.context,i=c(t).getInstance(),n=zt(t).create({errHandler:e.errHandler,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,t,r){var a=function(n,a){t.resolved=!0,t.resolvedContent=n||null,i.trigger(p.XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:n||a?null:new _(1,"Failed loading Xlink element: "+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)a(null,!0);else{var o=new Ui(e,U.XLINK_TYPE);n.load({request:o,success:function(e){a(e)},error:function(){a(null)}})}},reset:function(){n&&(n.abort(),n=null)}}}Fi.__dashjs_factory_name="XlinkLoader";var Bi=s.a.getClassFactory(Fi);Bi.XLINK_LOADER_ERROR_LOADING_FAILURE=1,s.a.updateClassFactory(Fi.__dashjs_factory_name,Bi);var Yi=Bi,Qi=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,i,n){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(t,i,n))break}return r!=e.length}function r(t,i,r){switch(e.arrayAccessForm){case"property":t[i]instanceof Array?t[i+"_asArray"]=t[i]:t[i+"_asArray"]=[t[i]]}!(t[i]instanceof Array)&&e.arrayAccessFormPaths.length>0&&n(e.arrayAccessFormPaths,t,i,r)&&(t[i]=[t[i]])}function a(e){var t=e.split(/[-T:+Z]/g),i=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(i.setHours(t[3],t[4],n[0]),n.length>1&&i.setMilliseconds(n[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),i.setMinutes(i.getMinutes()-r-i.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function o(t,i,r,a){return!(1==i&&e.xmlElementsFilter.length>0)||n(e.xmlElementsFilter,t,r,a)}function s(i,l){if(9==i.nodeType){for(var u=new Object,c=i.childNodes,d=0;d<c.length;d++)1==(f=c[d]).nodeType&&(e.ignoreRoot?u=s(f):(u={})[p=t(f)]=s(f));return u}if(1==i.nodeType){(u=new Object).__cnt=0;var h=[];for(c=i.childNodes,d=0;d<c.length;d++){var f,p=t(f=c[d]);if(8!=f.nodeType){var g=l+"."+p;if(o(u,f.nodeType,p,g))if(u.__cnt++,null==u[p]){var y=s(f,g);("#text"!=p||/[^\s]/.test(y))&&((m={})[p]=y,h.push(m)),u[p]=y,r(u,p,g)}else{var m;null!=u[p]&&(u[p]instanceof Array||(u[p]=[u[p]],r(u,p,g))),y=s(f,g),("#text"!=p||/[^\s]/.test(y))&&((m={})[p]=y,h.push(m)),u[p][u[p].length]=y}}}u.__children=h;for(var E=t(i),T=0;T<i.attributes.length;T++){var M=i.attributes[T];u.__cnt++;for(var N=M.value,I=0,v=e.matchers.length;I<v;I++){var D=e.matchers[I];D.test(M,E)&&(N=D.converter(M.value))}u[e.attributePrefix+M.name]=N}var _=function(e){return e.prefix}(i);return null!=_&&""!=_&&(u.__cnt++,u.__prefix=_),null!=u["#text"]&&(u.__text=u["#text"],u.__text instanceof Array&&(u.__text=u.__text.join("\n")),e.stripWhitespaces&&(u.__text=u.__text.trim()),delete u["#text"],"property"==e.arrayAccessForm&&delete u["#text_asArray"],u.__text=function(t,i,r){if(e.datetimeAccessFormPaths.length>0){var o=r.split(".#")[0];return n(e.datetimeAccessFormPaths,t,i,o)?a(t):t}return t}(u.__text,p,l+"."+p)),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],"property"==e.arrayAccessForm&&delete u["#cdata-section_asArray"]),0==u.__cnt&&"text"==e.emptyNodeForm?u="":1==u.__cnt&&null!=u.__text?u=u.__text:1!=u.__cnt||null==u.__cdata||e.keepCData?u.__cnt>1&&null!=u.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==u.__text||""==u.__text.trim())&&delete u.__text:u=u.__cdata,delete u.__cnt,!e.enableToStringFunc||null==u.__text&&null==u.__cdata||(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}if(3==i.nodeType||4==i.nodeType)return i.nodeValue}function l(t,n,r,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var s=0;s<r.length;s++){var l=r[s],u=t[l];e.escapeMode&&(u=i(u)),o+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+u+'"':o+="'"+u+"'"}return o+(a?"/>":">")}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(t,i){return"property"==e.arrayAccessForm&&(r="_asArray",-1!==(n=i.toString()).indexOf(r,n.length-r.length))||0==i.toString().indexOf(e.attributePrefix)||0==i.toString().indexOf("__")||t[i]instanceof Function;var n,r}function d(e){var t=0;if(e instanceof Object)for(var i in e)c(e,i)||t++;return t}function h(t,i,r){return 0==e.jsonPropertiesFilter.length||""==r||n(e.jsonPropertiesFilter,t,i,r)}function f(t){var i=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(e.attributePrefix)&&i.push(n);return i}function p(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=i(t.__text):n+=t.__text),n}(t):null!=t&&(e.escapeMode?n+=i(t):n+=t),n}function g(e,t){return""===e?t:e+"."+t}function y(e,t,i,n){var r="";if(0==e.length)r+=l(e,t,i,!0);else for(var a=0;a<e.length;a++)r+=l(e[a],t,f(e[a]),!1),r+=m(e[a],g(n,t)),r+=u(e[a],t);return r}function m(e,t){var i="";if(d(e)>0)for(var n in e)if(!c(e,n)&&(""==t||h(e,n,g(t,n)))){var r=e[n],a=f(r);null==r||null==r?i+=l(r,n,a,!0):r instanceof Object?r instanceof Array?i+=y(r,n,a,t):r instanceof Date?(i+=l(r,n,a,!1),i+=r.toISOString(),i+=u(r,n)):d(r)>0||null!=r.__text||null!=r.__cdata?(i+=l(r,n,a,!1),i+=m(r,g(t,n)),i+=u(r,n)):i+=l(r,n,a,!0):(i+=l(r,n,a,!1),i+=p(r),i+=u(r,n))}return i+p(e)}void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1),this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var i=new window.DOMParser;try{(t=i.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?a(e):e},this.xml2json=function(e){return s(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return m(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},Gi="onLoad",Vi="Period",Hi="AdaptationSet";function Wi(e){e=e||{};var t=this.context,i=c(t).getInstance(),n=it(t).getInstance(),r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0;function d(e,t,i){var r={},a=void 0,o=void 0;r.elements=e,r.type=t,r.resolveType=i,0===r.elements.length&&f(r);for(var s=0;s<r.elements.length;s++)a=r.elements[s],o=n.isHTTPURL(a.url)?a.url:a.originalContent.BaseURL+a.url,u.load(o,a,r)}function h(e){var t,i=void 0,n="";if(i=e.element,t=e.resolveObject,i.resolvedContent){var r=0;0===i.resolvedContent.indexOf("<?xml")&&(r=i.resolvedContent.indexOf("?>")+2),n=i.resolvedContent.substr(0,r)+"<response>"+i.resolvedContent.substr(r)+"</response>",i.resolvedContent=l.xml_str2json(n)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&f(t)}function f(e){var t=[],n=void 0,r=void 0;if(function(e){var t=[],i=void 0,n=void 0,r=void 0,a=void 0,l=void 0,u=void 0;for(a=e.elements.length-1;a>=0;a--){if(n=(i=e.elements[a]).type+"_asArray",i.resolvedContent){if(i.resolvedContent)for(l=0;l<i.resolvedContent[n].length;l++)r=i.resolvedContent[n][l],t.push(r)}else delete i.originalContent["xlink:actuate"],delete i.originalContent["xlink:href"],t.push(i.originalContent);for(i.parentElement[n].splice(i.index,1),u=0;u<t.length;u++)i.parentElement[n].splice(i.index+u,0,t[u]);t=[]}e.elements.length>0&&o.run(s)}(e),"onActuate"===e.resolveType&&i.trigger(p.XLINK_READY,{manifest:s}),e.resolveType===Gi)switch(e.type){case Vi:for(n=0;n<s.Period_asArray.length;n++)(r=s.Period_asArray[n]).hasOwnProperty("AdaptationSet_asArray")&&(t=t.concat(g(r.AdaptationSet_asArray,r,Hi,Gi))),r.hasOwnProperty("EventStream_asArray")&&(t=t.concat(g(r.EventStream_asArray,r,"EventStream",Gi)));d(t,Hi,Gi);break;case Hi:i.trigger(p.XLINK_READY,{manifest:s})}}function g(e,t,i,n){var r=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;o>=0;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===n&&(s=y(a["xlink:href"],t,i,o,n,a),r.push(s));return r}function y(e,t,i,n,r,a){return{url:e,parentElement:t,type:i,index:n,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function(e){l=new Qi({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),d(g((s=e).Period_asArray,s,Vi,Gi),Vi,Gi)},setMatchers:function(e){e&&(a=e)},setIron:function(e){e&&(o=e)},reset:function(){i.off(p.XLINK_ELEMENT_LOADED,h,r),u&&(u.reset(),u=null)}},i.on(p.XLINK_ELEMENT_LOADED,h,r),u=Yi(t).create({errHandler:e.errHandler,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),r}Wi.__dashjs_factory_name="XlinkController";var qi=s.a.getClassFactory(Wi),Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ki(e){function t(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function i(e,i,n){for(var r=0,a=e.length;r<a;++r){var o=e[r];if(i[o.name])if(n[o.name]){if(o.merge){var s=i[o.name],l=n[o.name];"object"===(void 0===s?"undefined":Zi(s))&&"object"===(void 0===l?"undefined":Zi(l))?t(s,l):n[o.name]=s+l}}else n[o.name]=i[o.name]}}function n(e,t){for(var r=0,a=e.children.length;r<a;++r){var o=e.children[r],s=t[o.name+"_asArray"];if(s)for(var l=0,u=s.length;l<u;++l){var c=s[l];i(e.properties,t,c),n(o,c)}}}return{run:function(t){if(null===t||"object"!==(void 0===t?"undefined":Zi(t)))return t;if("period"in e)for(var i=e.period,r=t.Period_asArray,a=0,o=r.length;a<o;++a){var s=r[a];if(n(i,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var u=e.adaptationset,c=0,d=l.length;c<d;++c)n(u,l[c])}}return t}}}Ki.__dashjs_factory_name="ObjectIron";var $i=s.a.getClassFactory(Ki),Xi=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Ji=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t,this._converter=i}return Xi(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();function en(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var tn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,(function(e,t){var i,n=(en(i={},$e.MPD,[$e.ID,$e.PROFILES]),en(i,$e.PERIOD,[$e.ID]),en(i,$e.BASE_URL,[$e.SERVICE_LOCATION,$e.BYTE_RANGE]),en(i,$e.SEGMENT_BASE,[$e.INDEX_RANGE]),en(i,$e.INITIALIZATION,[$e.RANGE]),en(i,$e.REPRESENTATION_INDEX,[$e.RANGE]),en(i,$e.SEGMENT_LIST,[$e.INDEX_RANGE]),en(i,$e.BITSTREAM_SWITCHING,[$e.RANGE]),en(i,$e.SEGMENT_URL,[$e.MEDIA_RANGE,$e.INDEX_RANGE]),en(i,$e.SEGMENT_TEMPLATE,[$e.INDEX_RANGE,$e.MEDIA,$e.INDEX,$e.INITIALIZATION_MINUS,$e.BITSTREAM_SWITCHING_MINUS]),en(i,$e.ASSET_IDENTIFIER,[$e.VALUE,$e.ID]),en(i,$e.EVENT_STREAM,[$e.VALUE]),en(i,$e.ADAPTATION_SET,[$e.PROFILES,$e.MIME_TYPE,$e.SEGMENT_PROFILES,$e.CODECS,$e.CONTENT_TYPE]),en(i,$e.FRAME_PACKING,[$e.VALUE,$e.ID]),en(i,$e.AUDIO_CHANNEL_CONFIGURATION,[$e.VALUE,$e.ID]),en(i,$e.CONTENT_PROTECTION,[$e.VALUE,$e.ID]),en(i,$e.ESSENTIAL_PROPERTY,[$e.VALUE,$e.ID]),en(i,$e.SUPPLEMENTAL_PROPERTY,[$e.VALUE,$e.ID]),en(i,$e.INBAND_EVENT_STREAM,[$e.VALUE,$e.ID]),en(i,$e.ACCESSIBILITY,[$e.VALUE,$e.ID]),en(i,$e.ROLE,[$e.VALUE,$e.ID]),en(i,$e.RATING,[$e.VALUE,$e.ID]),en(i,$e.VIEWPOINT,[$e.VALUE,$e.ID]),en(i,$e.CONTENT_COMPONENT,[$e.CONTENT_TYPE]),en(i,$e.REPRESENTATION,[$e.ID,$e.DEPENDENCY_ID,$e.MEDIA_STREAM_STRUCTURE_ID]),en(i,$e.SUBSET,[$e.ID]),en(i,$e.METRICS,[$e.METRICS_MINUS]),en(i,$e.REPORTING,[$e.VALUE,$e.ID]),i);if(n.hasOwnProperty(t)){var r=n[t];return void 0!==r&&r.indexOf(e.name)>=0}return!1}),(function(e){return String(e)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ji),nn=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,(function(e){for(var t=[$e.MIN_BUFFER_TIME,$e.MEDIA_PRESENTATION_DURATION,$e.MINIMUM_UPDATE_PERIOD,$e.TIMESHIFT_BUFFER_DEPTH,$e.MAX_SEGMENT_DURATION,$e.MAX_SUBSEGMENT_DURATION,n.SUGGESTED_PRESENTATION_DELAY,$e.START,n.START_TIME,$e.DURATION],i=t.length,r=0;r<i;r++)if(e.nodeName===t[r])return nn.test(e.value);return!1}),(function(e){var t=nn.exec(e),i=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(i=-i),i})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ji),an=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,on=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,(function(e){return an.test(e.value)}),(function(e){var t=an.exec(e),i=void 0;if(i=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var n=60*parseInt(t[9],10)+parseInt(t[10],10);i+=("+"===t[8]?-1:1)*n*60*1e3}return new Date(i)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ji),sn=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,ln=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,(function(e){return sn.test(e.value)}),(function(e){return parseFloat(e)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ji),un=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),cn=function(){function e(t){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._merge=(i=t)&&i.length&&i.charAt(0)===i.charAt(0).toUpperCase()}return un(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}(),dn=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),hn=function(){function e(t,i,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t||"",this._properties=[],this._children=n||[],Array.isArray(i)&&i.forEach((function(e){r._properties.push(new cn(e))}))}return dn(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}(),fn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=[$e.PROFILES,$e.WIDTH,$e.HEIGHT,$e.SAR,$e.FRAMERATE,$e.AUDIO_SAMPLING_RATE,$e.MIME_TYPE,$e.SEGMENT_PROFILES,$e.CODECS,$e.MAXIMUM_SAP_PERIOD,$e.START_WITH_SAP,$e.MAX_PLAYOUT_RATE,$e.CODING_DEPENDENCY,$e.SCAN_TYPE,$e.FRAME_PACKING,$e.AUDIO_CHANNEL_CONFIGURATION,$e.CONTENT_PROTECTION,$e.ESSENTIAL_PROPERTY,$e.SUPPLEMENTAL_PROPERTY,$e.INBAND_EVENT_STREAM];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,$e.ADAPTATION_SET,i,[new hn($e.REPRESENTATION,i,[new hn($e.SUB_REPRESENTATION,i)])]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(hn),pn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=[$e.SEGMENT_BASE,$e.SEGMENT_TEMPLATE,$e.SEGMENT_LIST];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,$e.PERIOD,i,[new hn($e.ADAPTATION_SET,i,[new hn($e.REPRESENTATION,i)])]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(hn);function gn(){var e,t=this.context,i=E(t).getInstance().log,n=void 0,r=void 0,a=void 0;return e={parse:function(e){var t,n=window.performance.now();if(!(t=r.xml_str2json(e)))throw new Error("parsing the manifest failed");var o=window.performance.now();a.run(t);var s=window.performance.now();return i("Parsing complete: ( xml2json: "+(o-n).toPrecision(3)+"ms, objectiron: "+(s-o).toPrecision(3)+"ms, total: "+((s-n)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return n},getIron:function(){return a}},n=[new rn,new on,new ln,new tn],r=new Qi({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),a=$i(t).create({adaptationset:new fn,period:new pn}),e}gn.__dashjs_factory_name="DashParser";var yn=s.a.getClassFactory(gn),mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function En(){var e,t=this.context,i=E(t).getInstance().log,n=void 0;function r(e,t){return t?e&&e.replace(/http:\/\//g,"https://"):e}return e={parse:function(e,t){var n={},a=window.performance.now();try{e=function e(t){var i={};if(t instanceof Object){var n=function(n){var r=n.replace(/[\x41-\x5A]/g,(function(e,t){var i=String.fromCharCode(e.charCodeAt(0)+32);return t?"_"+i:i}));"[object Array]"===Object.prototype.toString.call(t[n])?(i[r]=[],t[n].forEach((function(t){i[r].push(e(t))}))):"[object Object]"===Object.prototype.toString.call(t[n])?i[r]=e(t[n]):i[r]=t[n]};for(var r in t)n(r)}else i=t;return i}(e)}catch(e){throw new Error("Convert bilibili mpd failed, "+e)}if(n.ProgramInformation={Title:""},n.loadedTime=new Date,n.mediaPresentationDuration=e.duration,n.minBufferTime=e.min_buffer_time,n.profiles="urn:mpeg:dash:profile:isoff-on-demand:2011",n.xmlns="urn:mpeg:dash:profile:isoff-on-demand:2011",n.type="static",n.interactive="interactive"===e.type,n.originalUrl=location.href,n.url=location.href,n.Period={duration:e.duration,AdaptationSet:[]},e.video&&(n.Period.AdaptationSet[0]={},n.Period.AdaptationSet[0].Representation=e.video.map((function(e){var i={__text:r(e.base_url,t)};return e.backup_url&&e.backup_url.forEach((function(e,n){i["backupUrl"+(n+1)]=r(e,t)})),{BaseURL:i,SegmentBase:{Initialization:{range:e.segment_base.initialization},indexRange:e.segment_base.index_range,indexRangeExact:"true"},bandwidth:e.bandwidth,codecs:e.codecs,frameRate:e.frame_rate,height:e.height,width:e.width,id:e.id+"",mimeType:e.mime_type,sar:e.sar,startWithSAP:e.start_with_sap}}))),e.audio&&(n.Period.AdaptationSet[1]={},n.Period.AdaptationSet[1].Representation=e.audio.map((function(e){var i={__text:r(e.base_url,t)};return e.backup_url&&e.backup_url.forEach((function(e,n){i["backupUrl"+(n+1)]=r(e,t)})),{BaseURL:i,SegmentBase:{Initialization:{range:e.segment_base.initialization},indexRange:e.segment_base.index_range,indexRangeExact:"true"},bandwidth:e.bandwidth,codecs:e.codecs,id:e.id+"",mimeType:e.mime_type}}))),n.ProgramInformation={Title:""},function e(t){var i="[object Array]"!==Object.prototype.toString.call(t);for(var n in t)"object"===mn(t[n])&&(e(t[n]),i&&(t[n+"_asArray"]="[object Array]"===Object.prototype.toString.call(t[n])?t[n]:[t[n]]))}(n),!n)throw new Error("parsing the manifest failed");var o=window.performance.now(),s=window.performance.now();return i("Parsing complete: ( xml2json: "+(o-a).toPrecision(3)+"ms, objectiron: "+(s-o).toPrecision(3)+"ms, total: "+((s-a)/1e3).toPrecision(3)+"s)"),n},getMatchers:function(){return null},getIron:function(){return n}},n=$i(t).create({adaptationset:new fn,period:new pn}),e}En.__dashjs_factory_name="DashBilibiliParser";var Tn=s.a.getClassFactory(En);function Mn(e){e=e||{};var t=this.context,i=c(t).getInstance(),r=it(t).getInstance(),o=E(t).getInstance().log,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,f=e.mssHandler,g=e.errHandler;function y(e){i.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function m(e,s,l,c){if(u){var g=void 0,y=void 0,m=void 0;if(window.location&&window.location&&"https:"===window.location.protocol&&(h=!0),c&&c!==e?(y=r.parseBaseUrl(c),g=c):(r.isRelative(e)&&(e=r.resolve(e,window.location.href)),y=r.parseBaseUrl(e)),null===d&&(d=function(e){var i=null;return e.video||e.audio?Tn(t).create():e.indexOf("SmoothStreamingMedia")>-1?(f&&(i=f.createMssParser(),f.registerEvents()),i):e.indexOf("MPD")>-1?yn(t).create():i}(s)),null!==d){u.setMatchers(d.getMatchers()),u.setIron(d.getIron());try{m=d.parse(s,h)}catch(t){return void i.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _(1,"Failed parsing manifest : "+(c?e:"MPD String"),null,a.MANIFEST_RESOLVE_ERROR)})}m?(m.url=g||e,m.originalUrl||(m.originalUrl=m.url),m.hasOwnProperty(n.LOCATION)&&(y=r.parseBaseUrl(m.Location_asArray[0]),o("BaseURI set by Location to: "+y)),m.baseUri=function(e,t){return t?e&&e.replace(/http:\/\//g,"https://"):e}(y,h),m.loadedTime=new Date,u.resolveManifestOnLoad(m)):i.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _(1,"parsing failed",null,a.MANIFEST_ERROR)})}else i.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _(1,"Failed detecting manifest type or manifest type unsupported : "+(c?e:"MPD String"),null,a.MANIFEST_TYPE_ERROR)})}}return s={load:function(e,t){if(h=t,!e||"string"!=typeof e||0!==e.indexOf("http")&&0!==e.indexOf("/"))m("",e,0,"");else{var n=new Ui(e,U.MPD_TYPE);l.load({request:n,success:function(t,i,n){m(e,t,0,n)},error:function(t,n,r,o){i.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _(2,"Failed loading manifest: "+e+", "+r,null,a.MANIFEST_DOWNLOAD_ERROR,o)})}})}},reset:function(){i.off(p.XLINK_READY,y,s),u&&(u.reset(),u=null),l&&(l.abort(),l=null),f&&f.reset()}},i.on(p.XLINK_READY,y,s),l=zt(t).create({errHandler:g,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),u=qi(t).create({errHandler:g,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),d=null,s}Mn.__dashjs_factory_name="ManifestLoader";var Nn=s.a.getClassFactory(Mn);Nn.MANIFEST_LOADER_ERROR_PARSING_FAILURE=1,Nn.MANIFEST_LOADER_ERROR_LOADING_FAILURE=2,s.a.updateClassFactory(Mn.__dashjs_factory_name,Nn);var In=Nn;function vn(){var e,t=void 0;return e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!(!("MediaSource"in window)||!MediaSource.isTypeSupported(e))||!(!("WebKitMediaSource"in window)||!WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}},t=!1,e}vn.__dashjs_factory_name="Capabilities";var Dn=s.a.getSingletonFactory(vn);function _n(){var e=this.context,t=c(e).getInstance(),i=void 0;return{getValue:function(){return i},setValue:function(e){i=e,e&&t.trigger(p.MANIFEST_LOADED,{data:e})}}}_n.__dashjs_factory_name="ManifestModel";var An=s.a.getSingletonFactory(_n),Sn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},wn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},On=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},Ln=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},Cn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=xe.BUFFER_EMPTY},bn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},Rn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null};function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Pn=function e(){xn(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},jn=function e(){xn(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},zn=function e(){xn(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},kn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Un=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]};function Fn(){var e,t=this.context,i=c(t).getInstance(),a=void 0;function o(){i.trigger(p.METRICS_CHANGED)}function s(e){i.trigger(p.METRIC_CHANGED,{mediaType:e}),o()}function l(e,t,n){i.trigger(p.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),s(e)}function u(e,t,n){i.trigger(p.METRIC_ADDED,{mediaType:e,metric:t,value:n}),s(e)}function d(e){var t=void 0;return a.hasOwnProperty(e)?t=a[e]:(t=new Sn,a[e]=t),t}function h(e,t,i){var n=d(e);n[t].push(i),n[t].length>1e3&&n[t].shift()}function f(e,t,i){h(e,t,i),u(e,t,i)}return e={clearCurrentMetricsForType:function(e){delete a[e],s(e)},clearAllCurrentMetrics:function(){a={},o()},getReadOnlyMetricsFor:function(e){return a.hasOwnProperty(e)?a[e]:null},getMetricsFor:d,addTcpConnection:function(e,t,i,n,a,o){var s=new wn;return s.tcpid=t,s.dest=i,s.topen=n,s.tclose=a,s.tconnect=o,f(e,r.TCP_CONNECTION,s),s},addHttpRequest:function e(t,i,n,a,o,s,l,u,c,d,h,p,g,y){var m=new U;return o&&o!==a&&(e(t,null,n,a,null,null,l,u,null,null,null,p,null,null),m.actualurl=o),m.tcpid=i,m.type=n,m.url=a,m.range=l,m.trequest=u,m.tresponse=c,m.responsecode=h,m._tfinish=d,m._stream=t,m._mediaduration=p,m._responseHeaders=g,m._serviceLocation=s,y?y.forEach((function(e){!function(e,t,i,n){var r=new F;r.s=t,r.d=i,r.b=n,e.trace.push(r),e.interval||(e.interval=0),e.interval+=i}(m,e.s,e.d,e.b)})):(delete m.interval,delete m.trace),f(t,r.HTTP_REQUEST,m),m},addRepresentationSwitch:function(e,t,i,n,a){var o=new On;return o.t=t,o.mt=i,o.to=n,a?o.lto=a:delete o.lto,f(e,r.TRACK_SWITCH,o),o},addBufferLevel:function(e,t,i){var n=new Ln;return n.t=t,n.level=i,f(e,r.BUFFER_LEVEL,n),n},addBufferState:function(e,t,i){var n=new Cn;return n.target=i,n.state=t,f(e,r.BUFFER_STATE,n),n},addDVRInfo:function(e,t,i,n){var a=new bn;return a.time=t,a.range=n,a.manifestInfo=i,f(e,r.DVR_INFO,a),a},addDroppedFrames:function(e,t){var i=new Rn,n=d(e).DroppedFrames;return i.time=t.creationTime,i.droppedFrames=t.droppedVideoFrames,n.length>0&&n[n.length-1]==i?n[n.length-1]:(f(e,r.DROPPED_FRAMES,i),i)},addSchedulingInfo:function(e,t,i,n,a,o,s,l,u){var c=new kn;return c.mediaType=e,c.t=t,c.type=i,c.startTime=n,c.availabilityStartTime=a,c.duration=o,c.quality=s,c.range=l,c.state=u,f(e,r.SCHEDULING_INFO,c),c},addRequestsQueue:function(e,t,i){var n=new Un;n.loadingRequests=t,n.executedRequests=i,d(e).RequestsQueue=n,u(e,r.REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,i,a,o,s,l,c,d,f){var p=new Pn;return p.mediaType=e,p.type=t,p.requestTime=i,p.fetchTime=a,p.availabilityStartTime=o,p.presentationStartTime=s,p.clientTimeOffset=l,p.currentTime=c,p.buffered=d,p.latency=f,h(n.STREAM,r.MANIFEST_UPDATE,p),u(e,r.MANIFEST_UPDATE,p),p},updateManifestUpdateInfo:function(e,t){if(e){for(var i in t)e[i]=t[i];l(e.mediaType,r.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,i,n,a){if(e){var o=new jn;return o.id=t,o.index=i,o.start=n,o.duration=a,e.streamInfo.push(o),l(e.mediaType,r.MANIFEST_UPDATE_STREAM_INFO,e),o}return null},addManifestUpdateRepresentationInfo:function(e,t,i,n,a,o,s,u){if(e){var c=new zn;return c.id=t,c.index=i,c.streamIndex=n,c.mediaType=a,c.startNumber=s,c.fragmentInfoType=u,c.presentationTimeOffset=o,e.representationInfo.push(c),l(e.mediaType,r.MANIFEST_UPDATE_TRACK_INFO,e),c}return null},addPlayList:function(e){var t=n.STREAM;return e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,f(t,r.PLAY_LIST,e),e},addDVBErrors:function(e){return f(n.STREAM,r.DVB_ERRORS,e),e},setConfig:function(e){e&&e.adapter&&e.adapter}},a={},e}Fn.__dashjs_factory_name="MetricsModel";var Bn=s.a.getSingletonFactory(Fn);function Yn(){var e=void 0,t=void 0,i=void 0,n=void 0,r=this.context,a=E(r).getInstance().log,o=c(r).getInstance(),s=[];function l(){e&&(e.playbackRate=n||1,e.removeEventListener("canplay",l))}function u(){return s.length>0}function d(){if(e&&u()&&0===e.playbackRate){var t=document.createEvent("Event");t.initEvent("waiting",!0,!1),e.dispatchEvent(t)}}return{initialize:function(){o.on(p.PLAYBACK_PLAYING,d,this)},setCurrentTime:function(t){if(e){if(e.currentTime==t)return;try{e.currentTime=t}catch(i){0===e.readyState&&i.code===i.INVALID_STATE_ERR&&setTimeout((function(){e.currentTime=t}),400)}}},play:function(){if(e){e.autoplay=!0;var t=e.play();t&&"undefined"!=typeof Promise&&t instanceof Promise&&t.catch((function(e){"NotAllowedError"===e.name&&o.trigger(p.PLAYBACK_NOT_ALLOWED),a("Caught pending play exception - continuing ("+e+")")}))}},isPaused:function(){return e?e.paused:null},pause:function(){e&&(e.pause(),e.autoplay=!1)},isSeeking:function(){return e?e.seeking:null},getTime:function(){return e?e.currentTime:null},getPlaybackRate:function(){return e?e.playbackRate:null},getPlayedRanges:function(){return e?e.played:null},getEnded:function(){return e?e.ended:null},setStallState:function(t,i){!function(t,i){i?function(t){var i=void 0;null===t||e.seeking||-1!==s.indexOf(t)||(s.push(t),e&&1===s.length&&((i=document.createEvent("Event")).initEvent("waiting",!0,!1),n=e.playbackRate,e.dispatchEvent(i)))}(t):function(t){var i,r=s.indexOf(t),a=void 0;null!==t&&(-1!==r&&s.splice(r,1),e&&!1===u()&&0===e.playbackRate&&(i=n||1,e&&(e.readyState<=2&&i>0?e.addEventListener("canplay",l):e.playbackRate=i),e.paused||((a=document.createEvent("Event")).initEvent("playing",!0,!1),e.dispatchEvent(a))))}(t)}(t,i)},getElement:function(){return e},setElement:function(t){if(null!=t&&(!t||!t.nodeName||"VIDEO"!==t.nodeName&&"AUDIO"!==t.nodeName))throw"element is not video or audio DOM type!";(e=t)&&(e.preload="auto")},setSource:function(t){e&&(t?e.src=t:(e.removeAttribute("src"),e.load()))},getSource:function(){return e?e.src:null},getVideoContainer:function(){return i},setVideoContainer:function(e){i=e},getTTMLRenderingDiv:function(){return t},setTTMLRenderingDiv:function(e){(t=e).style.position="absolute",t.style.display="flex",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.top=0,t.style.left=0},getPlaybackQuality:function(){if(!e)return null;var t="webkitDroppedFrameCount"in e&&"webkitDecodedFrameCount"in e,i=null;return"getVideoPlaybackQuality"in e?i=e.getVideoPlaybackQuality():t&&(i={droppedVideoFrames:e.webkitDroppedFrameCount,totalVideoFrames:e.webkitDroppedFrameCount+e.webkitDecodedFrameCount,creationTime:new Date}),i},addEventListener:function(t,i){e&&e.addEventListener(t,i)},removeEventListener:function(t,i){e&&e.removeEventListener(t,i)},getReadyState:function(){return e?e.readyState:NaN},getBufferRange:function(){return e?e.buffered:null},getClientWidth:function(){return e?e.clientWidth:NaN},getClientHeight:function(){return e?e.clientHeight:NaN},getTextTracks:function(){return e?e.textTracks:[]},getTextTrack:function(t,i,n,r,a){if(e)for(var o=0;o<e.textTracks.length;o++)if(e.textTracks[o].kind===t&&(!i||e.textTracks[o].label==i)&&e.textTracks[o].language===n&&e.textTracks[o].isTTML===r&&e.textTracks[o].isEmbedded===a)return e.textTracks[o];return null},addTextTrack:function(t,i,n){return e?e.addTextTrack(t,i,n):null},appendChild:function(t){e&&(e.appendChild(t),void 0!==t.isTTML&&(e.textTracks[e.textTracks.length-1].isTTML=t.isTTML,e.textTracks[e.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function(t){e&&e.removeChild(t)},getVideoWidth:function(){return e?e.videoWidth:NaN},getVideoHeight:function(){return e?e.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return e&&e.parentNode?e.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return e&&e.parentNode?e.getBoundingClientRect().left-e.parentNode.getBoundingClientRect().left:NaN},setDataOffsetAttr:function(t){e&&e.setAttribute("data-offset",t)},reset:function(){o.off(p.PLAYBACK_PLAYING,d,this)}}}Yn.__dashjs_factory_name="VideoModel";var Qn=s.a.getSingletonFactory(Yn),Gn=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Vn="dashjs_?_bitrate",Hn="dashjs_?_settings",Wn="localStorage",qn="LastBitrate",Zn="LastMediaSettings";function Kn(e){e=e||{};var t,i=this.context,n=E(i).getInstance().log,r=e.mediaPlayerModel,a=void 0;function o(e){if(void 0!==a)return a;a=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return n("Warning: DOMStorage access denied: "+e.message),a}if(!t||e!==Wn&&"sessionStorage"!==e)return a;try{t.setItem("1","1"),t.removeItem("1"),a=!0}catch(e){n("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return a}function s(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function l(e,t){return o(e)&&r["get"+t+"CachingInfo"]().enabled}function u(){if(!r||!r.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error("Missing config parameter(s)")}return t={getSavedBitrateSettings:function(e){var t=NaN;if(u(),l(Wn,qn)){var i=Vn.replace(/\?/,e);try{var a=JSON.parse(localStorage.getItem(i))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=r.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(a.bitrate);isNaN(s)||o?o&&localStorage.removeItem(i):(t=s,n("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(l(Wn,qn)&&t){var i=Vn.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({bitrate:t.toFixed(3),timestamp:s()}))}catch(e){n(e.message)}}},getSavedMediaSettings:function(e){if(u(),!l(Wn,Zn))return null;var t=null,i=Hn.replace(/\?/,e);try{var n=JSON.parse(localStorage.getItem(i))||{},a=(new Date).getTime()-parseInt(n.timestamp,10)>=r.getLastMediaSettingsCachingInfo().ttl||!1;t=n.settings,a&&(localStorage.removeItem(i),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(l(Wn,Zn)){var i=Hn.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({settings:t,timestamp:s()}))}catch(e){n(e.message)}}}},o(Wn)&&Gn.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){n(e.message)}}})),t}Kn.__dashjs_factory_name="DOMStorage";var $n=s.a.getSingletonFactory(Kn),Xn=i(2),Jn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},er=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null},tr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},ir=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},nr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},rr=i(9),ar=i.n(rr);function or(){var e,t=void 0,i=void 0,r=void 0;function a(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function o(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r[e.streamInfo.id]?r[e.streamInfo.id][e.index]:null}function s(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n];if(e.id===r.id)return r}return null}function l(e){var i=new Jn,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=t.getRepresentationFor(e.index,n);return i.id=e.id,i.quality=e.index,i.bandwidth=t.getBandwidth(r),i.DVRWindow=e.segmentAvailabilityRange,i.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),i.MSETimeOffset=e.MSETimeOffset,i.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,i.mediaInfo=u(e.adaptation),i}function u(e){var i,n=new er,r=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=d(e.period),n.representationCount=t.getRepresentationCount(r),n.lang=t.getLanguageForAdaptation(r),i=t.getViewpointForAdaptation(r),n.viewpoint=i?i.value:void 0,n.accessibility=t.getAccessibilityForAdaptation(r).map((function(e){var t=e.value,i=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==ar.a&&(i=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),i})),n.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(r).map((function(e){return e.value})),n.roles=t.getRolesForAdaptation(r).map((function(e){return e.value})),n.codec=t.getCodec(r),n.mimeType=t.getMimeType(r),n.contentProtection=t.getContentProtectionData(r),n.bitrateList=t.getBitrateListForAdaptation(r),n.contentProtection&&n.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),n.isText=t.getIsTextTrack(n.mimeType),n}function c(e,t,i){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=n.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=i,e.roles=["caption"]}function d(e){var i,n,r=new tr;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(i=e.mpd,(n=new ir).DVRWindowSize=i.timeShiftBufferDepth,n.loadedTime=i.manifest.loadedTime,n.availableFrom=i.availabilityStartTime,n.minBufferTime=i.manifest.minBufferTime,n.maxFragmentDuration=i.maxSegmentDuration,n.duration=t.getDuration(i.manifest),n.isDynamic=t.getIsDynamic(i.manifest),n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function h(){if(!t||!t.hasOwnProperty("getMpd")||!t.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function f(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function p(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function g(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("quality argument is not an integer")}function y(){i=[],r={}}return e={convertDataToRepresentationInfo:l,getDataForMedia:o,getStreamsInfo:function(e,n){var r=[],a=i;if(e){h();var o=t.getMpd(e);a=t.getRegularPeriods(o)}n||(n=a.length);for(var s=0;s<n;s++)r.push(d(a[s]));return r},getMediaInfoForType:function(e,n){if(0===i.length)return null;var a=i[0].mpd.manifest,o=t.getAdaptationForType(a,e.index,n,e);if(!o)return null;var l=s(e,i),c=l.id,d=t.getIndexForAdaptation(o,a,e.index);return r[c]=r[c]||t.getAdaptationsForPeriod(l),u(r[c][d])},getAllMediaInfoForType:function(e,a,o){var l,d=i,f=o,p=[],g=void 0,y=void 0,m=void 0,E=void 0,T=void 0;if(f){h();var M=t.getMpd(f);d=t.getRegularPeriods(M)}else{if(!(i.length>0))return p;f=i[0].mpd.manifest}var N=s(e,d),I=N.id,v=t.getAdaptationsForType(f,e.index,a!==n.EMBEDDED_TEXT?a:n.VIDEO);if(!v)return p;for(r[I]=r[I]||t.getAdaptationsForPeriod(N),E=0,l=v.length;E<l;E++)if(g=v[E],m=t.getIndexForAdaptation(g,f,e.index),y=u(r[I][m]),a===n.EMBEDDED_TEXT){var D=y.accessibility.length;for(T=0;T<D;T++)if(y){var _=y.accessibility[T];if(0===_.indexOf("cea-608:")){var A=_.substring(8).split(";");if("CC"===A[0].substring(0,2))for(T=0;T<A.length;T++)y||(y=u.call(this,r[I][m])),c(y,A[T].substring(0,3),A[T].substring(4)),p.push(y),y=null;else for(T=0;T<A.length;T++)y||(y=u.call(this,r[I][m])),c(y,"CC"+(T+1),A[T]),p.push(y),y=null}else 0===_.indexOf("cea-608")&&(c(y,n.CC1,"eng"),p.push(y),y=null)}}else a===n.IMAGE?(y.type=n.IMAGE,p.push(y),y=null):y&&p.push(y);return p},getCurrentRepresentationInfo:function(e){p(e);var t=e.getCurrentRepresentation();return t?l(t):null},getRepresentationInfoForQuality:function(e,t){p(e),g(t);var i=e.getRepresentationForQuality(t);return i?l(i):null},updateData:function(e){f(e);var n,r=s(e.getStreamInfo(),i),a=e.getMediaInfo(),l=o(a),u=e.getType(),c=void 0;n=a?a.id:null,i.length>0&&(c=n?t.getAdaptationForId(n,i[0].mpd.manifest,r.index):t.getAdaptationForIndex(a.index,i[0].mpd.manifest,r.index),e.getRepresentationController().updateData(c,l,u))},getInitRequest:function(e,t){var i,n=void 0,r=void 0;return f(e),g(t),n=e.getRepresentationController(),r=e.getIndexHandler(),i=n?n.getRepresentationForQuality(t):null,r?r.getInitRequest(i):null},getNextFragmentRequest:function(e,t){var i,n=void 0;return f(e),i=a(t,e.getRepresentationController()),(n=e.getIndexHandler())?n.getNextSegmentRequest(i):null},getFragmentRequestForTime:function(e,t,i,n){var r,o=void 0;return f(e),r=a(t,e.getRepresentationController()),(o=e.getIndexHandler())?o.getSegmentRequestForTime(r,i,n):null},generateFragmentRequestForTime:function(e,t,i){var n,r=void 0;return f(e),n=a(t,e.getRepresentationController()),(r=e.getIndexHandler())?r.generateSegmentRequestForTime(n,i):null},getIndexHandlerTime:function(e){f(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){f(e);var i=e.getIndexHandler();i&&i.setCurrentTime(t)},getEventsFor:function(e,n){var r=[];if(0===i.length)return r;var l=i[0].mpd.manifest;return e instanceof tr?r=t.getEventsForPeriod(s(e,i)):e instanceof er?r=t.getEventStreamForAdaptationSet(l,o(e)):e instanceof Jn&&(r=t.getEventStreamForRepresentation(l,a(e,n.getRepresentationController()))),r},getEvent:function(e,t,i){if(!e||!t)return null;var n=new nr,r=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,l=e.event_duration,u=e.id,c=e.message_data,d=i*o+s;return t[r]?(n.eventStream=t[r],n.eventStream.value=a,n.eventStream.timescale=o,n.duration=l,n.id=u,n.presentationTime=d,n.messageData=c,n.presentationTimeDelta=s,n):null},setConfig:function(e){e&&e.dashManifestModel&&(t=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;h();var n=t.getMpd(e);i=t.getRegularPeriods(n),r={}},reset:y},y(),e}or.__dashjs_factory_name="DashAdapter";var sr=s.a.getSingletonFactory(or),lr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},ur=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};ur.DEFAULT_ID="defaultId";var cr=ur,dr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},hr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};function fr(e){e=e||{};var t=this.context,i=it(t).getInstance(),r=e.mediaController,a=e.timelineConverter,s=e.adapter,l=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function u(e,t){var i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(o=e.ContentComponent_asArray),s=t!==n.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty($e.CODECS)&&(0===(l=e.Representation_asArray[0].codecs).search(n.STPP)||0===l.search(n.WVTT)))return t===n.FRAGMENTED_TEXT;if(o){if(o.length>1)return t===n.MUXED;o[0]&&o[0].contentType===t&&(u=!0,c=!0)}if(e.hasOwnProperty($e.MIME_TYPE)&&(u=s.test(e.mimeType),c=!0),!c)for(i=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!c&&i<r;)(a=e.Representation_asArray[i]).hasOwnProperty($e.MIME_TYPE)&&(u=s.test(a.mimeType),c=!0),i++;return u}function c(e){return u(e,n.AUDIO)}function d(e){return u(e,n.VIDEO)}function h(e){return u(e,n.FRAGMENTED_TEXT)}function f(e){return u(e,n.MUXED)}function p(e){return u(e,n.IMAGE)}function g(e){return"text/vtt"===e||"application/ttml+xml"===e}function y(e){return e&&e.hasOwnProperty($e.ROLE_ASARRAY)?e.Role_asArray:[]}function m(e){return y(e).filter((function(e){return e.value===$e.MAIN}))[0]}function E(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function T(e,t,i){var n,r=e&&e.Period_asArray&&l(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[],a=void 0,o=[];for(a=0,n=r.length;a<n;a++)u(r[a],i)&&o.push(E(r[a]));return o}function M(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===$e.DYNAMIC),t}function N(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function I(e){if(e&&e.period&&l(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&l(e.index))return E(t.AdaptationSet_asArray[e.index])}}function v(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function D(e,t){if(!e)throw new Error("Period cannot be null or undefined");var i=cr.DEFAULT_ID+"_"+t;return e.hasOwnProperty($e.ID)&&e.id.length>0&&"__proto__"!==e.id&&(i=e.id),i}function _(e,t){var i=[],r=void 0;if(!e)return i;for(r=0;r<e.length;r++){var a=new hr;if(a.timescale=1,a.representation=t,!e[r].hasOwnProperty(n.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty($e.TIMESCALE)&&(a.timescale=e[r].timescale),e[r].hasOwnProperty($e.VALUE)&&(a.value=e[r].value),i.push(a)}return i}function A(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var a=new bi,o=n.__text||n;i.isRelative(o)&&(r=!0,e.baseUri&&(o=i.resolve(o,e.baseUri))),a.url=o;for(var s=[],l=1;n["backupUrl"+l];l++)s.push(n["backupUrl"+l]);return a.urls=[a.url].concat(s),n.hasOwnProperty($e.SERVICE_LOCATION)&&n.serviceLocation.length?a.serviceLocation=n.serviceLocation:a.serviceLocation=o,n.hasOwnProperty($e.DVB_PRIORITY)&&(a.dvb_priority=n[$e.DVB_PRIORITY]),n.hasOwnProperty($e.DVB_WEIGHT)&&(a.dvb_weight=n[$e.DVB_WEIGHT]),n.hasOwnProperty($e.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=n[$e.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty($e.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==n[$e.AVAILABILITY_TIME_COMPLETE]),t.push(a),r}})),t}return{getIsTypeOf:u,getIsAudio:c,getIsVideo:d,getIsText:function(e){return u(e,n.TEXT)},getIsMuxed:f,getIsTextTrack:g,getIsFragmentedText:h,getIsImage:p,getIsMain:m,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty($e.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty($e.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:y,getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty($e.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty($e.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,i){var n=t&&t.Period_asArray&&l(i)&&t.Period_asArray[i]?t.Period_asArray[i].AdaptationSet_asArray:null;return n&&l(e)?n[e]:null},getIndexForAdaptation:function(e,i,n){var r=i&&i.Period_asArray&&l(n)&&i.Period_asArray[n]?i.Period_asArray[n].AdaptationSet_asArray:[],a=r.length;if(e)for(var o=0;o<a;o++)if(Ti(t).getInstance().areEqual(r[o],e))return o;return-1},getAdaptationForId:function(e,t,i){var n,r=t&&t.Period_asArray&&l(i)&&t.Period_asArray[i]?t.Period_asArray[i].AdaptationSet_asArray:[],a=void 0;for(a=0,n=r.length;a<n;a++)if(r[a].hasOwnProperty($e.ID)&&r[a].id===e)return r[a];return null},getAdaptationsForType:T,getAdaptationForType:function(e,t,i,n){var a=T(e,t,i);if(!a||0===a.length)return null;if(a.length>1&&n){var o=r.getCurrentTrackFor(i,n),l=s.getAllMediaInfoForType(n,i);if(o)for(var u=0,c=a.length;u<c;u++)if(r.isTracksEqual(o,l[u]))return a[u];for(var d=0,h=a.length;d<h;d++)if(m(a[d]))return a[d]}return a[0]},getCodec:function(e,t,i){if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var n=l(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0],r=n.mimeType+';codecs="'+n.codecs+'"';return i&&void 0!==n.width&&(r+=';width="'+n.width+'";height="'+n.height+'"'),r}return null},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty($e.CENC_DEFAULT_KID)?e[$e.CENC_DEFAULT_KID]:null},getContentProtectionData:function(e){return e&&e.hasOwnProperty($e.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:M,getIsDVB:function(e){return function(e,t){var i=!1;return e&&e.profiles&&e.profiles.length>0&&(i=-1!==e.profiles.indexOf("urn:dvb:dash:profile:dvb-dash:2014")),i}(e)},getDuration:function(e){return e&&e.hasOwnProperty($e.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=NaN;return e&&e.hasOwnProperty($e.MINIMUM_UPDATE_PERIOD)&&(i=e.minimumUpdatePeriod),isNaN(i)?i:Math.max(i-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?E(e).Representation_asArray.map((function(e){return{id:e.id||"",bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}})):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&l(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],i=I(e),n=void 0,r=void 0;if(e&&e.period&&l(e.period.index)){var o=A(e.period.mpd.manifest);o&&(r=o[0])}if(i&&i.Representation_asArray)for(var s=0,u=i.Representation_asArray.length;s<u;++s){var c=i.Representation_asArray[s],d=new Xe;if(d.index=s,d.adaptation=e,c.hasOwnProperty($e.ID)&&(d.id=c.id),c.hasOwnProperty($e.CODECS)&&(d.codecs=c.codecs),c.hasOwnProperty($e.CODEC_PRIVATE_DATA)&&(d.codecPrivateData=c.codecPrivateData),c.hasOwnProperty($e.BANDWITH)&&(d.bandwidth=c.bandwidth),c.hasOwnProperty($e.WIDTH)&&(d.width=c.width),c.hasOwnProperty($e.HEIGHT)&&(d.height=c.height),c.hasOwnProperty($e.SCAN_TYPE)&&(d.scanType=c.scanType),c.hasOwnProperty($e.MAX_PLAYOUT_RATE)&&(d.maxPlayoutRate=c.maxPlayoutRate),c.hasOwnProperty($e.SEGMENT_BASE)?(n=c.SegmentBase,d.segmentInfoType=$e.SEGMENT_BASE):c.hasOwnProperty($e.SEGMENT_LIST)?(n=c.SegmentList).hasOwnProperty($e.SEGMENT_TIMELINE)?(d.segmentInfoType=$e.SEGMENT_TIMELINE,d.useCalculatedLiveEdgeTime=v(n.SegmentTimeline)):(d.segmentInfoType=$e.SEGMENT_LIST,d.useCalculatedLiveEdgeTime=!0):c.hasOwnProperty($e.SEGMENT_TEMPLATE)?((n=c.SegmentTemplate).hasOwnProperty($e.SEGMENT_TIMELINE)?(d.segmentInfoType=$e.SEGMENT_TIMELINE,d.useCalculatedLiveEdgeTime=v(n.SegmentTimeline)):d.segmentInfoType=$e.SEGMENT_TEMPLATE,n.hasOwnProperty($e.INITIALIZATION_MINUS)&&(d.initialization=n.initialization.split("$Bandwidth$").join(c.bandwidth).split("$RepresentationID$").join(c.id))):d.segmentInfoType=$e.BASE_URL,d.essentialProperties=N(c),n){if(n.hasOwnProperty($e.INITIALIZATION)){var h=n.Initialization;h.hasOwnProperty($e.SOURCE_URL)?d.initialization=h.sourceURL:h.hasOwnProperty($e.RANGE)&&(d.range=h.range)}else c.hasOwnProperty($e.MIME_TYPE)&&g(c.mimeType)&&(d.range=0);n.hasOwnProperty($e.TIMESCALE)&&(d.timescale=n.timescale),n.hasOwnProperty($e.DURATION)&&(d.segmentDuration=n.duration/d.timescale),n.hasOwnProperty($e.MEDIA)&&(d.media=n.media),n.hasOwnProperty($e.START_NUMBER)&&(d.startNumber=n.startNumber),n.hasOwnProperty($e.INDEX_RANGE)&&(d.indexRange=n.indexRange),n.hasOwnProperty($e.PRESENTATION_TIME_OFFSET)&&(d.presentationTimeOffset=n.presentationTimeOffset/d.timescale),n.hasOwnProperty($e.AVAILABILITY_TIME_OFFSET)?d.availabilityTimeOffset=n.availabilityTimeOffset:r&&void 0!==r.availabilityTimeOffset&&(d.availabilityTimeOffset=r.availabilityTimeOffset),n.hasOwnProperty($e.AVAILABILITY_TIME_COMPLETE)?d.availabilityTimeComplete="false"!==n.availabilityTimeComplete:r&&void 0!==r.availabilityTimeComplete&&(d.availabilityTimeComplete=r.availabilityTimeComplete)}d.MSETimeOffset=a.calcMSETimeOffset(d),d.path=[e.period.index,e.index,s],t.push(d)}return t},getAdaptationsForPeriod:function(e){var t=e&&l(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,i=[],r=void 0,a=void 0,o=void 0;if(t&&t.AdaptationSet_asArray)for(o=0;o<t.AdaptationSet_asArray.length;o++)a=t.AdaptationSet_asArray[o],r=new lr,a.hasOwnProperty($e.ID)&&(r.id=a.id),r.index=o,r.period=e,f(a)?r.type=n.MUXED:c(a)?r.type=n.AUDIO:d(a)?r.type=n.VIDEO:h(a)?r.type=n.FRAGMENTED_TEXT:p(a)?r.type=n.IMAGE:r.type=n.TEXT,i.push(r);return i},getRegularPeriods:function(e){var t,i=!!e&&M(e.manifest),n=[],r=null,a=null,o=null,s=null,l=void 0;for(l=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;l<t;l++)(a=e.manifest.Period_asArray[l]).hasOwnProperty($e.START)?(s=new cr).start=a.start:null!==r&&a.hasOwnProperty($e.DURATION)&&null!==o?((s=new cr).start=parseFloat((o.start+o.duration).toFixed(5)),s.duration=a.duration):0!==l||i||((s=new cr).start=0),null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((s.start-o.start).toFixed(5))),null!==s&&(s.id=D(a,l)),null!==s&&a.hasOwnProperty($e.DURATION)&&(s.duration=a.duration),null!==s&&(s.index=l,s.mpd=e,n.push(s),r=a,o=s),a=null,s=null;return 0===n.length||null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((function(e){var t=M(e.mpd.manifest),i=void 0;if(e.mpd.manifest.mediaPresentationDuration)i=e.mpd.manifest.mediaPresentationDuration;else if(e.duration)i=e.duration;else{if(!t)throw new Error("Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.");i=Number.POSITIVE_INFINITY}return i}(o)-o.start).toFixed(5))),n},getMpd:function(e){var t=new dr;return e&&(t.manifest=e,e.hasOwnProperty($e.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty($e.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty($e.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty($e.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(n.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty($e.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty($e.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,i=t?t.Period_asArray:null,r=i&&e&&l(e.index)?i[e.index].EventStream_asArray:null,a=[],o=void 0,s=void 0;if(r)for(o=0;o<r.length;o++){var u=new hr;if(u.period=e,u.timescale=1,!r[o].hasOwnProperty(n.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(u.schemeIdUri=r[o].schemeIdUri,r[o].hasOwnProperty($e.TIMESCALE)&&(u.timescale=r[o].timescale),r[o].hasOwnProperty($e.VALUE)&&(u.value=r[o].value),s=0;s<r[o].Event_asArray.length;s++){var c=new nr;c.presentationTime=0,c.eventStream=u,r[o].Event_asArray[s].hasOwnProperty($e.PRESENTATION_TIME)&&(c.presentationTime=r[o].Event_asArray[s].presentationTime),r[o].Event_asArray[s].hasOwnProperty($e.DURATION)&&(c.duration=r[o].Event_asArray[s].duration),r[o].Event_asArray[s].hasOwnProperty($e.ID)&&(c.id=r[o].Event_asArray[s].id),a.push(c)}}return a},getEventStreamForAdaptationSet:function(e,t){var i=void 0,n=void 0,r=void 0;return e&&e.Period_asArray&&t&&t.period&&l(t.period.index)&&(n=e.Period_asArray[t.period.index])&&n.AdaptationSet_asArray&&l(t.index)&&(r=n.AdaptationSet_asArray[t.index])&&(i=r.InbandEventStream_asArray),_(i,null)},getEventStreamForRepresentation:function(e,t){var i=void 0,n=void 0,r=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&l(t.adaptation.period.index)&&(n=e.Period_asArray[t.adaptation.period.index])&&n.AdaptationSet_asArray&&l(t.adaptation.index)&&(r=n.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&l(t.index)&&(a=r.Representation_asArray[t.index])&&(i=a.InbandEventStream_asArray),_(i,t)},getUTCTimingSources:function(e){var t=M(e),i=!!e&&e.hasOwnProperty($e.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,a=[];return(t||i)&&r&&r.forEach((function(e){var t=new o;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty($e.VALUE)&&(t.value=e.value.toString(),a.push(t)))})),a},getBaseURLsFromElement:A,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getLocation:function(e){if(e&&e.hasOwnProperty(n.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=I(e).Representation_asArray[0],i=void 0;return t.hasOwnProperty($e.SEGMENT_LIST)?!(i=t.SegmentList).hasOwnProperty($e.SEGMENT_TIMELINE)||v(i.SegmentTimeline):!(!t.hasOwnProperty($e.SEGMENT_TEMPLATE)||!(i=t.SegmentTemplate).hasOwnProperty($e.SEGMENT_TIMELINE))&&v(i.SegmentTimeline)}}}fr.__dashjs_factory_name="DashManifestModel";var pr=s.a.getSingletonFactory(fr),gr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.round10=function(e,t){return function(e,t,i){return void 0===i||0==+i?Math[e](t):(i=+i,null===(t=+t)||isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+i:i))))}("round",e,t)},e}();function yr(e){var t=(e=e||{}).dashManifestModel,i=e.manifestModel;function n(e){return s(e,r.BUFFER_LEVEL)}function a(e){if(!e)return null;var t=e.HttpList,i=null,n=void 0;if(!t||t.length<=0)return null;for(n=t.length-1;n>=0;){if(t[n].responsecode){i=t[n];break}n--}return i}function o(e){return e&&e.HttpList?e.HttpList:[]}function s(e,t){if(!e)return null;var i=e[t];if(!i)return null;var n=i.length;return n<=0?null:i[n-1]}function l(e){var t={};if(!e)return t;for(var i=e.trim().split("\r\n"),n=0,r=i.length;n<r;n++){var a=i[n],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function u(e,t,i){var n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(e)for(n=e.AdaptationSet_asArray,o=0;o<n.length;o+=1)for(a=n[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(r=a[s]).id)return i?s:r;return null}function c(e,i){return t.getIsTypeOf(e,i)}return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=u(i.getValue().Period_asArray[t],e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return function(e,t){var i=u(e,t,!0);return null!==i?i:-1}(i.getValue().Period_asArray[t],e)},getMaxIndexForBufferType:function(e,t){var n=i.getValue();return n?function(e,t){var i,n=void 0,r=void 0,a=void 0;if(!e||!t)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(r=(n=i[a]).Representation_asArray,c(n,t))return r.length;return-1}(n.Period_asArray[t],e):-1},getCurrentRepresentationSwitch:function(e){return s(e,r.TRACK_SWITCH)},getLatestBufferLevelVO:n,getCurrentBufferLevel:function(e){var t=n(e);return t?gr.round10(t.level/1e3,-3):0},getCurrentHttpRequest:a,getHttpRequests:o,getCurrentDroppedFrames:function(e){return s(e,r.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return s(e,r.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return s(e,r.DVR_INFO)},getCurrentManifestUpdate:function(e){return s(e,r.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var i={},n=a(e);return n&&(i=l(n._responseHeaders)),void 0===i[t]?null:i[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var i,n={},r=void 0,a=void 0;for(a=(i=o(e)).length-1;a>=0;a--)if((r=i[a]).type===U.MPD_TYPE){n=l(r._responseHeaders);break}return void 0===n[t]?null:n[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}yr.__dashjs_factory_name="DashMetrics";var mr=s.a.getSingletonFactory(yr);function Er(){var e=this.context,t=c(e).getInstance(),i=void 0,n=void 0,r=void 0;function a(e){i=e}function o(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-i)):t.availabilityStartTime}function s(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function l(e){n||void 0!==e.offset&&(a(e.offset/1e3),n=!0)}function u(){i=0,n=!1,r=NaN}return{initialize:function(){u(),t.on(p.TIME_SYNCHRONIZATION_COMPLETED,l,this)},isTimeSyncCompleted:function(){return n},setTimeSyncCompleted:function(e){n=e},getClientTimeOffset:function(){return i},setClientTimeOffset:a,getExpectedLiveEdge:function(){return r},setExpectedLiveEdge:function(e){r=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,i){return o.call(this,e,t,i)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,i){return o.call(this,e,t,i,!0)},calcPresentationTimeFromWallTime:s,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var i=e.adaptation.period,r={start:i.start,end:i.start+i.duration};if(!t)return r;if(!n&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var a=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=s(new Date,i),l=i.start+i.duration;r.start=Math.max(o-i.mpd.timeShiftBufferDepth,i.start);var u=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<a?a-e.availabilityTimeOffset:a;return r.end=o>=l&&o-u<l?l:o-u,r},calcWallTimeForSegment:function(e,t){var i=void 0,n=void 0,r=void 0;return t&&(i=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+i,r=new Date(e.availabilityStartTime.getTime()+1e3*n)),r},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){t.off(p.TIME_SYNCHRONIZATION_COMPLETED,l,this),u()}}}Er.__dashjs_factory_name="TimelineConverter";var Tr=s.a.getSingletonFactory(Er),Mr=i(6),Nr=i.n(Mr);function Ir(){var e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",i="You must first call attachView() to set the video element before calling this method",l="You must first call attachSource() with a valid source before calling this method",u="MediaPlayer not initialized!",d=this.context,h=c(d).getInstance(),f=E(d).getInstance(),g=f.log,y=NaN,m=void 0,T=void 0,M=void 0,N=void 0,I=void 0,v=void 0,D=void 0,_=void 0,A=void 0,S=void 0,w=void 0,O=void 0,L=void 0,C=void 0,b=void 0,R=void 0,x=void 0,P=void 0,j=void 0,z=void 0,k=void 0,F=void 0,B=void 0,Y=void 0,Q=void 0,G=void 0,V=void 0,H=void 0,W=void 0,q=void 0,Z=void 0,K=void 0,$=void 0,X=void 0,J={video:{},audio:{}},ee={min:0,video:0,audio:0},te=null,ie={};function ne(){return!!T&&!!Y.getElement()}function re(){return Object(Xn.a)()}function ae(){if(!v)throw t;return z.isPaused()}function oe(e){var t=[n.VIDEO,n.AUDIO,n.FRAGMENTED_TEXT];if(e)return-1!==t.indexOf(e)?ge().getCurrentBufferLevel(me(e))||NaN:(g("Warning  - getBufferLength requested for invalid type"),NaN);var i=t.map((function(e){return Me(e).length>0?ge().getCurrentBufferLevel(me(e)):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return i===Number.MAX_VALUE?NaN:i}function se(e){var t=Ae(),i=z.getLiveDelay();if(!t)return 0;var n=t.range.start+e;return n>t.range.end-i&&(n=t.range.end-i),n}function ue(e,i){if(!v)throw t;var n=Ee().currentTime;if(void 0!==e)n=j.getTimeRelativeToStreamId(n,e);else if(z.getIsDynamic()){var r=Ae();n=null===r?0:ce()-(r.range.end-r.time)}var a=R.getCachedDurationOffset("time");return i&&n-a>0&&(n-=a,n=Math.min(n,ce(void 0))),parseFloat(n.toFixed(5))}function ce(e){if(!v)throw t;var i=Ee().duration;if(z.getIsDynamic()){var n,r=Ae();if(!r)return 0;i=(n=r.range.end-r.range.start)<r.manifestInfo.DVRWindowSize?n:r.manifestInfo.DVRWindowSize}if(e){var a=Ee().currentTime,o=R.getCachedDurationOffset("time"),s=R.getCachedDurationOffset("offset");o?a>o&&(i=a<s?s-o:i-s):i=s?Math.min(i,s):i,i=parseFloat(i.toFixed(5))}return i}function de(e){D=e}function he(e,t){fe(e,t);var i=new o;i.schemeIdUri=e,i.value=t,R.getUTCTimingSources().push(i)}function fe(e,t){var i=R.getUTCTimingSources();i.forEach((function(n,r){n.schemeIdUri===e&&n.value===t&&i.splice(r,1)}))}function pe(){he(di.DEFAULT_UTC_TIMING_SOURCE.scheme,di.DEFAULT_UTC_TIMING_SOURCE.value)}function ge(){return k}function me(e){return b.getReadOnlyMetricsFor(e)}function Ee(){if(!Y.getElement())throw i;return Y.getElement()}function Te(e){if(!N)throw u;Y.setElement(e),e&&(_e(),function(){if(!O){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(d).create();O=t.createMetricsReporting({log:g,eventBus:h,mediaElement:Ee(),dashManifestModel:F,metricsModel:b,events:p,constants:n,metricsConstants:r})}}}(),function(){if(!L){var e=dashjs.MssHandler;"function"==typeof e&&(L=e(d).create({eventBus:h,mediaPlayerModel:R,metricsModel:b,playbackController:z,protectionController:w,errHandler:x,events:p,constants:n,log:g,initSegmentType:U.INIT_SEGMENT_TYPE,BASE64:Nr.a,ISOBoxer:Ne.a}))}}(),j&&j.switchToVideoElement()),v&&ve(),Oe()}function Me(t){if(!I)throw e;var i=j.getActiveStreamInfo();return i?S.getTracksFor(t,i):[]}function Ie(e){if(!N)throw u;"string"==typeof e&&ze(d).getInstance().initialize(e),J.video={},J.audio={},T=e,(I||v)&&ve(),ne()&&Oe()}function ve(){v=!1,I=!1,C.reset(),j.reset(),z.reset(),_.reset(),S.reset(),w&&(w.reset(),w=null,_e())}function De(){return In(d).create({errHandler:x,videoModel:Y,metricsModel:b,mediaPlayerModel:R,requestModifier:Mt(d).getInstance(),mssHandler:L})}function _e(){if(w)return w;var e=dashjs.Protection;if("function"==typeof e){var t=e(d).create();return p.extend(e.events),hi.extend(e.events,{publicOnly:!0}),P||(P=Dn(d).getInstance()),w=t.createProtectionSystem({log:g,errHandler:x,videoModel:Y,capabilities:P,eventBus:h,events:p,BASE64:Nr.a,constants:n})}return null}function Ae(){var e=b.getReadOnlyMetricsFor(n.VIDEO)||b.getReadOnlyMetricsFor(n.AUDIO);return k.getCurrentDVRInfo(e)}function Se(e){var t=Ae();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function we(){if(!I)throw e;var t=j.getActiveStreamInfo();return t?j.getStreamById(t.id):null}function Oe(){var e;!I&&T&&(I=!0,g("Streaming Initialized"),e=De(),j||(j=ki(d).getInstance()),S.setConfig({errHandler:x,domStorage:Q}),j.setConfig({capabilities:P,manifestLoader:e,manifestModel:B,dashManifestModel:F,mediaPlayerModel:R,protectionController:w,adapter:C,metricsModel:b,dashMetrics:k,errHandler:x,timelineConverter:A,videoModel:Y,playbackController:z,domStorage:Q,abrController:_,mediaController:S}),z.setConfig({streamController:j,metricsModel:b,dashMetrics:k,manifestModel:B,mediaPlayerModel:R,dashManifestModel:F,adapter:C,videoModel:Y}),_.setConfig({streamController:j,domStorage:Q,mediaPlayerModel:R,metricsModel:b,dashMetrics:k,dashManifestModel:F,manifestModel:B,videoModel:Y,adapter:C,initializeDate:xe()}),_.createAbrRulesCollection(),j.initialize(D,M),T.video||T.audio||"string"==typeof T?j.load(T,G):j.loadWithManifest(T,G)),!v&&ne()&&(v=!0,g("Playback Initialized"))}function Le(e){var t=R.getCachedDurationOffset("offset");t&&e.time>=t&&K&&(R.setCachedDurationOffset("time",t),K=!1,Y.setDataOffsetAttr(t),h.trigger(p.APPENDED_NEXT_SOURCE_DURATION_CHANGED,{offset:t,totalTime:e.time,totalDuration:ce(),time:ue(void 0,!0),duration:ee.min||ce(!0)}))}function Ce(e){try{if(e&&e.mediaType&&e.segments){var t=e.mediaType,i=J[t],n=e.segments,r=e.representation&&e.representation.index,a=!0,o=[],s={},l=0,u=0;if(i.total&&i.total===n.length&&(i.segments.forEach((function(e,t){e.duration&&e.duration!==n[t].duration&&t<i.total-1&&Math.ceil(1e3*Math.abs(e.duration/e.timescale-n[t].duration/n[t].timescale))>100&&o.push(t)})),o.length)){a=!1,s={old:i.qualityIndex,new:r};var c=Y.getTime(),d=Math.floor(c/5);-1===o.indexOf(d)&&-1===o.indexOf(d+1)&&-1===o.indexOf(d+2)&&(a=!0)}var h=0,f=e.segments&&e.segments[e.segments.length-1];f&&(h=(f.duration+f.startTime)/f.timescale,ee[t]=h,(!ee.min||ee.min>0&&ee.min>h)&&(ee.min=h));var p=0;n&&n.length&&(p=n[0].startTime/n[0].timescale,S.setStartOffsetTimeForType(t,p),l=parseInt(n[0].mediaRange.split("-")[0],10),u=parseInt(n[n.length-1].mediaRange.split("-")[1],10),$=Math.max($,p)),ee.min===h&&R.getCachedDurationOffset("duration")&&p>0&&(ee.min-=p),R.setCachedDurationOffset("duration",ee.min+H);var g={total:n&&n.length,segments:n,isDurationAllEqual:a,qualityIndex:r,realDuration:h,startOffsetTime:p,rangeStart:l,rangeEnd:u};a||(g.notEqualIndexList=o,g.notEqualQualityIndex=s),J[e.mediaType]=g,"function"==typeof te&&te(t,g)}}catch(e){throw new Error("Parse segment loaded error, "+e)}}function be(){W=!0;var e=Y.getBufferRange(),t=Y.getElement().duration,i=e&&e.length&&e.end(e.length-1),n=Y.getTime(),r=[t,i,n+oe("video"),n+oe("audio")],a=r.filter((function(e){return!isNaN(e)})),o=a.reduce((function(e,t){return e+t}))/a.length,s=Math.min.apply(null,a);if(g("onStreamBufferingCompleted",H,r,R.getAppendingSourceState(),q),Math.abs(s-o)<1&&(H=parseFloat(s.toFixed(5)),q.length)){var l=q.splice(0,1)[0];g("Appending delay next source",l),Pe(l.manifest,l.preloadData)}}function Re(e){if(z.getEnded()&&R.getAppendingSourceState()){var t=e.sender.getType();if(ie[t]=e.bufferLevel,ie.audio>0&&ie.video>0){var i=Y.getBufferRange(),n=i&&i.length&&i.end(i.length-1),r=z.getTime();n>r+.01&&(console.log("Playing next appending source after prev playback ended.",ie),z.seek(r+.01),z.play())}}if(R.getAppendingSourceState()&&Z){for(var a=R.getCachedDurationOffset("offset"),o=Y.getBufferRange(),s=z.getTime(),l=0,u=0;u<o.length;u++)o.start(u)<s&&o.end(u)>=s&&(l=o.end(u));a>0&&l>a+1&&(R.setAppendingSourceState(!1),g("Appended Next Source, currentTime: "+s+" , buffered end: "+l),Z=!1,h.trigger(p.APPENDED_NEXT_SOURCE,{time:s,ended:l}))}if(!X){var c=Y.getBufferRange(),d=z.getTime(),f=c&&c.length&&c.start(0);c&&c.length&&f>=$&&(X=!0,d<f&&(h.trigger(p.START_OFFSET_TIME_WARNING,{time:f}),z.seek(f+.2)))}}function xe(){return y}function Pe(e,t){if(g("Append Next Source",Y.getTime(),Y.isSeeking()),!N)throw u;if("string"==typeof e&&ze(d).getInstance().initialize(e),Y.isSeeking())h.on(p.PLAYBACK_SEEKED,(function t(){g("Seeked to append next source"),h.off(p.PLAYBACK_SEEKED,t),Pe(e)}));else{if(!W)return g("Stream buffering is not completed, delay to append!"),void(q=[{manifest:e,preloadData:t}]);R.setAppendingSourceState(!0),R.setCachedDurationOffset("offset",H),h.trigger(p.APPENDING_NEXT_SOURCE,{manifest:e,time:z.getTime(),offset:H}),Z=!0,K=!0,W=!1,J.video={},J.audio={},T=e,ee.min=0,ee.video=0,ee.audio=0,j.load(e,!0,!0)}}return m={initialize:function(e,t,i,n){G=!!n,y=new Date,delete window.__DASH_P2P_TYPE__,P||(P=Dn(d).getInstance()),x=Ct(d).getInstance(),P.supportsMediaSource()?N||(N=!0,A=Tr(d).getInstance(),_||(_=le(d).getInstance()),z||(z=Ue(d).getInstance()),S||(S=ye(d).getInstance()),C=sr(d).getInstance(),F=pr(d).getInstance({mediaController:S,timelineConverter:A,adapter:C}),B=An(d).getInstance(),k=mr(d).getInstance({manifestModel:B,dashManifestModel:F}),b=Bn(d).getInstance(),Q=$n(d).getInstance({mediaPlayerModel:R}),C.setConfig({dashManifestModel:F,mediaPlayerModel:R}),b.setConfig({adapter:C}),pe(),de(void 0===i||i),e&&Te(e),t&&Ie(t),g("[dash.js "+re()+"] MediaPlayer has been initialized")):x.capabilityError("mediasource")},setConfig:function(e){e&&(e.capabilities&&(P=e.capabilities),e.streamController&&(j=e.streamController),e.playbackController&&(z=e.playbackController),e.mediaPlayerModel&&(R=e.mediaPlayerModel),e.abrController&&(_=e.abrController),e.mediaController&&(S=e.mediaController))},on:function(e,t,i){h.on(e,t,i)},off:function(e,t,i){h.off(e,t,i)},extend:function(e,t,i){s.a.extend(e,t,i,d)},attachView:Te,attachSource:Ie,isReady:ne,preload:function(){if(Y.getElement()||I)return!1;if(!T)throw l;Oe()},play:function(){if(!v)throw t;(!D||ae()&&v)&&z.play()},isPaused:ae,pause:function(){if(!v)throw t;z.pause()},isSeeking:function(){if(!v)throw t;return z.isSeeking()},isDynamic:function(){if(!v)throw t;return z.getIsDynamic()},seek:function(e,i){if(!v)throw t;if("number"!=typeof e||isNaN(e))throw"MediaPlayer Invalid Arguments!";var n=z.getIsDynamic()?se(e):e;i&&(n+=R.getCachedDurationOffset("time")),z.seek(n)},setPlaybackRate:function(e){if(!Y.getElement())throw i;Ee().playbackRate=e},getPlaybackRate:function(){if(!Y.getElement())throw i;return Ee().playbackRate},setMute:function(e){if(!Y.getElement())throw i;Ee().muted=e},isMuted:function(){if(!Y.getElement())throw i;return Ee().muted},setVolume:function(e){if(!Y.getElement())throw i;Ee().volume=e},getVolume:function(){if(!Y.getElement())throw i;return Ee().volume},time:ue,duration:ce,timeAsUTC:function(){if(!v)throw t;return ue()<0?NaN:Se(ue())},durationAsUTC:function(){if(!v)throw t;return Se(ce())},getActiveStream:we,getDVRWindowSize:function(){var e=Ae();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:se,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(i<10?"0"+i.toString():i.toString())+":"+(n<10?"0"+n.toString():n.toString())},formatUTC:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new Date(1e3*e),a=r.toLocaleDateString(t),o=r.toLocaleTimeString(t,{hour12:i});return n?o+" "+a:o},getVersion:re,getDebug:function(){return f},getBufferLength:oe,getVideoContainer:function(){return Y?Y.getVideoContainer():null},getTTMLRenderingDiv:function(){return Y?Y.getTTMLRenderingDiv():null},getVideoElement:Ee,getSource:function(){if(!T)throw l;return T},setLiveDelayFragmentCount:function(e){R.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){R.setLiveDelay(e)},getLiveDelay:function(){return R.getLiveDelay()},getCurrentLiveLatency:function(){if(!N)throw u;return v?z.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){R.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){R.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){R.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){_.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return _.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(t){if(!I)throw e;return _.getTopBitrateInfoFor(t)},setMinAllowedBitrateFor:function(e,t){_.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return _.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){_.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return _.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:de,getAutoPlay:function(){return D},setScheduleWhilePaused:function(e){R.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return R.getScheduleWhilePaused()},getDashMetrics:ge,getMetricsFor:me,getQualityFor:function(t){if(!I)throw e;return _.getQualityFor(t,j.getActiveStreamInfo())},setQualityFor:function(t,i){if(!I)throw e;_.setPlaybackQuality(t,j.getActiveStreamInfo(),i)},updatePortalSize:function(){_.setElementSize(),_.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return _.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){_.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return _.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){_.setUsePixelRatioInLimitBitrateByPortal(e)},getBitrateInfoListFor:function(t){if(!I)throw e;var i=we();return i?i.getBitrateListFor(t):[]},setInitialBitrateFor:function(e,t){_.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(t){if(!I)throw e;return _.getInitialBitrateFor(t)},setInitialRepresentationRatioFor:function(e,t){_.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return _.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(t){if(!I)throw e;return C.getStreamsInfo(t)},getTracksFor:Me,getTracksForTypeFromManifest:function(t,i,n){if(!I)throw e;return(n=n||C.getStreamsInfo(i,1)[0])?C.getAllMediaInfoForType(n,t,i):[]},getCurrentTrackFor:function(t){if(!I)throw e;var i=j.getActiveStreamInfo();return i?S.getCurrentTrackFor(t,i):null},setInitialMediaSettingsFor:function(e,t){if(!N)throw u;S.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!N)throw u;return S.getInitialSettings(e)},setCurrentTrack:function(t){if(!I)throw e;S.setTrack(t)},getTrackSwitchModeFor:function(e){if(!N)throw u;return S.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!N)throw u;S.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!N)throw u;S.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!N)throw u;return S.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){R.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return R.getFastSwitchEnabled()},setMovingAverageMethod:function(e){e===n.MOVING_AVERAGE_SLIDING_WINDOW||e===n.MOVING_AVERAGE_EWMA?R.setMovingAverageMethod(e):g("Warning: Ignoring setMovingAverageMethod("+e+") - unknown value.")},getMovingAverageMethod:function(){return R.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return _.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){_.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){e===n.ABR_STRATEGY_DYNAMIC||e===n.ABR_STRATEGY_BOLA||e===n.ABR_STRATEGY_THROUGHPUT?R.setABRStrategy(e):g("Warning: Ignoring setABRStrategy("+e+") - unknown value.")},getABRStrategy:function(){return R.getABRStrategy()},useDefaultABRRules:function(e){R.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,i){R.addABRCustomRule(e,t,i)},removeABRCustomRule:function(e){R.removeABRCustomRule(e)},removeAllABRCustomRule:function(){R.removeAllABRCustomRule()},setBandwidthSafetyFactor:function(e){R.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return R.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=_.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){R.setAbandonLoadTimeout(e)},retrieveManifest:function(e,t){var i=De(),n=this;h.on(p.INTERNAL_MANIFEST_LOADED,(function e(r){r.error?t(null,r.error):t(r.manifest),h.off(p.INTERNAL_MANIFEST_LOADED,e,n),i.reset()}),n),ze(d).getInstance().initialize(e),i.load(e,G)},addUTCTimingSource:he,removeUTCTimingSource:fe,clearDefaultUTCTimingSources:function(){R.setUTCTimingSources([])},restoreDefaultUTCTimingSources:pe,setBufferToKeep:function(e){R.setBufferToKeep(e)},setBufferAheadToKeep:function(e){R.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){R.setBufferPruningInterval(e)},setStableBufferTime:function(e){R.setStableBufferTime(e)},getStableBufferTime:function(){return R.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){R.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return R.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){R.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return R.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){R.setFragmentRetryAttempts(e)},setFragmentLoaderRetryInterval:function(e){R.setFragmentRetryInterval(e)},setManifestLoaderRetryAttempts:function(e){R.setManifestRetryAttempts(e)},setManifestLoaderRetryInterval:function(e){R.setManifestRetryInterval(e)},setXHRWithCredentialsForType:function(e,t){R.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return R.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){R.setJumpGaps(e)},getJumpGaps:function(){return R.getJumpGaps()},setSmallGapLimit:function(e){R.setSmallGapLimit(e)},getSmallGapLimit:function(){return R.getSmallGapLimit()},getLowLatencyEnabled:function(){return R.getLowLatencyEnabled()},setLowLatencyEnabled:function(e){return R.setLowLatencyEnabled(e)},setPreloadData:function(e){return R.setPreloadData(e)},setManifestUpdateRetryInterval:function(e){R.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return R.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){R.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){R.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){R.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return _e()},attachProtectionController:function(e){w=e},setProtectionData:function(e){M=e,j&&j.setProtectionData(M)},enableManifestDateHeaderTimeSource:function(e){R.setUseManifestDateHeaderTimeSource(e)},attachVideoContainer:function(e){if(!Y.getElement())throw i;Y.setVideoContainer(e)},attachTTMLRenderingDiv:function(e){if(!Y.getElement())throw i;Y.setTTMLRenderingDiv(e)},getUseDeadTimeLatencyForAbr:function(){return _.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){_.setUseDeadTimeLatency(e)},getThumbnail:function(e){if(e<0)return null;var t=z.getIsDynamic()?se(e):e,i=j.getStreamForTime(t);if(null===i)return null;var n=i.getThumbnailController(),r=i.getStreamInfo();if(!n||!r)return null;var a=j.getTimeRelativeToStreamId(t,i.getId());return n.get(a)},setDefaultQualityFor:function(e,t){_||(_=le(d).getInstance()),_.setDefaultQualityFor(e,t)},getDefaultQualityFor:function(e){return _.getDefaultQualityFor(e)},getDroppedFramesInfo:function(){return _.getDroppedFramesInfo()},getCurrentSegmentInfoFor:function(e){return _.getCurrentSegmentInfoFor(e)},onInitSegmentsLoaded:function(e){te=e},getThroughputDict:function(e){var t=_.getThroughputHistory();return t?t.getDict(e):{}},getInitializeDate:xe,updateSource:function(e){if(!N)throw u;"string"==typeof e&&ze(d).getInstance().initialize(e),J.video={},J.audio={},T=e,j.load(T,G)},switchSource:function(e){if(!N)throw u;"string"==typeof e&&ze(d).getInstance().initialize(e),J.video={},J.audio={},ee.min=0,ee.video=0,ee.audio=0,T=e,H=0,Y.setDataOffsetAttr(0),R.setCachedDurationOffset("offset",0),R.setCachedDurationOffset("time",0),R.setCachedDurationOffset("duration",0),R.setAppendingSourceState(!1),K=!1,q=[],(I||v)&&ve(),ne()&&Oe()},appendSource:Pe,setEndOfStreamState:function(e){R&&R.setEndOfStreamState(e)},setP2pPermission:function(e){e||R.addBufferingCount()},setP2pType:function(e,t){var i,n=!1;switch(e){case"yf-eg":case"yf-cg2":window.YFDashIO&&(n=!0);break;case"xl-eg":case"xl-cg2":window.xyvp&&(n=!0);break;case"ks-eg":case"ks-cg2":window.KSLoader&&(n=!0);break;case"bili-eg":case"bili-cg2":window.DIYSdk&&(n=!0);break;case"pear-eg":case"pear-cg2":window.PearDownloader&&(n=!0)}n?window.__DASH_P2P_TYPE__=e:t?(i=t,new Promise((function(e,t){var n=document.createElement("script");n.src=i,n.onload=function(){window.clearTimeout(V),e()},n.onerror=function(){window.clearTimeout(V),t(),h.trigger(p.PCDN_LOADED_ERROR,{code:a.DOWNLOAD_PCDN_SCRIPT_ERROR,url:i})},document.body.appendChild(n),V=window.setTimeout((function(){t(),h.trigger(p.PCDN_LOADED_ERROR,{code:a.DOWNLOAD_PCDN_SCRIPT_TIMEOUT,url:i})}),2e3)}))).then((function(){window.__DASH_P2P_TYPE__=e,g("[MediaPlayer] p2p Sdk Scripts Loaded")})).catch((function(){console.warn("load p2p sdk scripts failed")})):console.warn("lack p2p sdk scripts")},reset:function(){Ie(null),Te(null),M=null,Z=!1,K=!1,H=0,q=[],w&&(w.reset(),w=null),O&&(O.reset(),O=null),h.off(p.SEGMENTS_LOADED,Ce,m),h.off(p.BUFFER_LEVEL_UPDATED,Re,m),h.off(p.PLAYBACK_ENDED,be,this),h.off(p.STREAM_BUFFERING_COMPLETED,be,this),h.off(p.PLAYBACK_TIME_UPDATED,Le,this)}},function(){N=!1,v=!1,I=!1,D=!0,w=null,M=null,C=null,p.extend(hi),R=di(d).getInstance(),Y=Qn(d).getInstance(),H=0,W=!1,q=[],ie={video:0,audio:0},$=0,h.on(p.SEGMENTS_LOADED,Ce,m),h.on(p.BUFFER_LEVEL_UPDATED,Re,m),h.on(p.PLAYBACK_ENDED,be,this),h.on(p.STREAM_BUFFERING_COMPLETED,be,this),h.on(p.PLAYBACK_TIME_UPDATED,Le,this)}(),m}Ir.__dashjs_factory_name="MediaPlayer";var vr=s.a.getClassFactory(Ir);vr.events=hi,s.a.updateClassFactory(Ir.__dashjs_factory_name,vr),t.a=vr},function(e,t,i){var n,r,o,l,u,c=function(e){for(var t=[],i=0;i<e.length;++i){var n=e.charCodeAt(i);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},d=function(e){for(var t=[],i=0;i<e.length;){var n=e[i++];n<128||(n<224?(n=(31&n)<<6,n|=63&e[i++]):n<240?(n=(15&n)<<12,n|=(63&e[i++])<<6,n|=63&e[i++]):(n=(7&n)<<18,n|=(63&e[i++])<<12,n|=(63&e[i++])<<6,n|=63&e[i++])),t.push(String.fromCharCode(n))}return t.join("")},h={};n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t=0,i=[],r=0|e.length/3;0<r--;){var a=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,i.push(n.charAt(63&a>>18)),i.push(n.charAt(63&a>>12)),i.push(n.charAt(63&a>>6)),i.push(n.charAt(63&a))}return 2==e.length-t?(a=(e[t]<<16)+(e[t+1]<<8),i.push(n.charAt(63&a>>18)),i.push(n.charAt(63&a>>12)),i.push(n.charAt(63&a>>6)),i.push("=")):1==e.length-t&&(a=e[t]<<16,i.push(n.charAt(63&a>>18)),i.push(n.charAt(63&a>>12)),i.push("==")),i.join("")},o=function(){for(var e=[],t=0;t<n.length;++t)e[n.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),l=function(e){for(var t=0,i=[],n=0|e.length/4;0<n--;){var r=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];i.push(255&r>>16),i.push(255&r>>8),i.push(255&r),t+=4}return i&&("="==e.charAt(t-2)?(i.pop(),i.pop()):"="==e.charAt(t-1)&&i.pop()),i},u={encode:function(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},h.decodeArray=function(e){var t=l(e);return new Uint8Array(t)},h.encodeASCII=function(e){var t=u.encode(e);return r(t)},h.decodeASCII=function(e){var t=l(e);return u.decode(t)},h.encode=function(e){var t=c(e);return r(t)},h.decode=function(e){var t=l(e);return d(t)},t.decode=h.decode,t.decodeArray=h.decodeArray,t.encode=h.encode,t.encodeASCII=h.encodeASCII},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUFFERING=void 0;var n=i(4),r=.5;t.BUFFERING={PLAYBACK:{PLAYING:1,SEEKING:2,SWITCHING_QUALITY:3,SWITCHING_SOURCE:4,UPDATING_SOURCE:5,APPENDING_SOURCE:6},TYPE:{UNKNOWN:0,SEEKING:10,SEEKING_INSIDE_BUFFERED:11,SEEKING_OUTSIDE_BUFFERED:12,NETWORK:20,NETWORK_CONNECT_TIMEOUT:21,NETWORK_READING_TIMEOUT:22,NETWORK_DOWNLOAD_TIMEOUT:23,NETWORK_DOWNLOAD_ERROR:24,NETWORK_POOR:25,MEDIA:30,MEDIA_ERR_ABORTED:31,MEDIA_ERR_NETWORK:32,MEDIA_ERR_DECODE:33,MEDIA_ERR_SRC_NOT_SUPPORTED:34,MEDIA_DECODING_PERFORMANCE:35,GAP:40,GAP_BEFORE_CURRENT:41,GAP_AFTER_CURRENT:42,PERFORMANCE:50,PERFORMANCE_UNKNOWN:51,INTERNAL:60,INTERNAL_STARTING:61,INTERNAL_ENDING:62,INTERNAL_UNNORMAL_RANGES:63}};var a=function(){function e(e){this.video=e}return e.prototype.getInfo=function(e){var i={type:-1};if(!e)return i;try{var n=this.video,a=n.currentTime,o=n.duration,s=n.readyState,l=n.buffered,u=l&&l.length,c=n.seeking,d=t.BUFFERING.TYPE.UNKNOWN,h=e.playbackState||t.BUFFERING.PLAYBACK.PLAYING;if(c&&h===t.BUFFERING.PLAYBACK.PLAYING&&(h=t.BUFFERING.PLAYBACK.SEEKING),i={type:d,isSeeking:c,cTime:a,duration:o,rState:s,nRanges:u,vLength:e.videoBufferLength,aLength:e.audioBufferLength,activity:e.networkActivity,vSpeed:Math.round(e.videoSpeed),aSpeed:Math.round(e.audioSpeed)},h===t.BUFFERING.PLAYBACK.SEEKING)d=0===u?t.BUFFERING.TYPE.SEEKING_OUTSIDE_BUFFERED:t.BUFFERING.TYPE.SEEKING_INSIDE_BUFFERED;else{var f=this.checkGapInfo(),p=f.nativeBufferLength;if(i.nLength=p,i.cRange=f.start+"-"+f.end,f.hasGap)d=f.type,i.gap=f.gapStart+"-"+f.gapEnd,i.gapLength=f.gapLength;else if(p<r){var g=this.checkLackOfBufferInfo(e);d=g.type,i.vCode=g.videoErrorCode,i.aCode=g.audioErrorCode}else d=s>=2?t.BUFFERING.TYPE.PERFORMANCE:t.BUFFERING.TYPE.PERFORMANCE_UNKNOWN}var y=this.checkNativeErrorInfo();y.type&&(d=y.type,i.nCode=y.code);var m=e.fragmentLoadingInfo;if(m&&m.video){var E=m.video;i.vFragment=E.id+"-"+E.index,e.latestPlayurlErrorHTTPCode&&(i.hCode=e.latestPlayurlErrorHTTPCode)}m&&m.audio&&(E=m.audio,i.aFragment=E.id+"-"+E.index,e.latestPlayurlErrorHTTPCode&&(i.hCode=e.latestPlayurlErrorHTTPCode)),i.type=""+h+(d||"00")}catch(e){throw new Error(e.message)}return i},e.prototype.checkGapInfo=function(){var e=this.video,i=e.currentTime,n=e.buffered,r=n&&n.length,a=0,o=!1,s=0,l=0,u={start:0,end:0},c=0,d=t.BUFFERING.TYPE.UNKNOWN;if(r&&r>1)for(var h=0;h<r;h++){var f=n.start(h),p=n.end(h);f<=i&&p>=i&&(a=Math.floor(1e3*(p-i))/1e3,u={start:f,end:p},d===t.BUFFERING.TYPE.GAP_BEFORE_CURRENT?l=f:s=p),f>i&&f-i<=1&&d!==t.BUFFERING.TYPE.GAP_BEFORE_CURRENT&&(o=!0,d=t.BUFFERING.TYPE.GAP_AFTER_CURRENT,l=l?Math.min(l,f):f,s=u.end),i-p<3&&i-p>=0&&(o=!0,d=t.BUFFERING.TYPE.GAP_BEFORE_CURRENT,s=p,l=u.start)}else 1===r&&(p=n.end(0),u={start:n.start(0),end:p},a=Math.floor(1e3*(p-i))/1e3);return o&&(c=Math.round(1e3*(l-s))/1e3),{type:d,start:u.start,end:u.end,nativeBufferLength:a,hasGap:o,gapStart:s,gapEnd:l,gapLength:c}},e.prototype.checkLackOfBufferInfo=function(e){var i=t.BUFFERING.TYPE.UNKNOWN,n=this.video,a=n.currentTime,o=n.buffered,s=n.duration,l=n.readyState,u=0,c=0;if(o&&o.length)if(s&&s-a<r)i=t.BUFFERING.TYPE.INTERNAL_ENDING;else{var d=this.checkNetworkInfo(e);i=d.type,u=d.videoErrorCode,c=d.audioErrorCode}else i=a<=e.startOffsetTime&&l<=1?t.BUFFERING.TYPE.INTERNAL_STARTING:(e.networkActivity.length&&e.networkActivity.reduce((function(e,t){return e+t})))<100?t.BUFFERING.TYPE.NETWORK_POOR:t.BUFFERING.TYPE.INTERNAL_UNNORMAL_RANGES;return{type:i,videoErrorCode:u,audioErrorCode:c}},e.prototype.checkNetworkInfo=function(e){var i=t.BUFFERING.TYPE.UNKNOWN,a=this.video.currentTime,o=e.videoBufferLength||0,s=e.audioBufferLength||0,l=e.networkWarningHistory,u=this.getCurrentNetworkWarningInfo({mediaType:n.STRING.VIDEO,currentQn:e.videoCurrentQn,networkWarningHistory:l,warningTime:a+o,bufferLength:o},r),c=this.getCurrentNetworkWarningInfo({mediaType:n.STRING.AUDIO,currentQn:e.audioCurrentQn,networkWarningHistory:l,warningTime:a+s,bufferLength:s},r),d=u.code,h=c.code,f=this.getBufferingTypeByPoorNetwork(d),p=this.getBufferingTypeByPoorNetwork(h);return f||p?(i=f||"00",p&&(i=""+i+p)):i=t.BUFFERING.TYPE.NETWORK,{type:i,videoErrorCode:d,audioErrorCode:h,videoBufferLength:o,audioBufferLength:s}},e.prototype.checkNativeErrorInfo=function(){var e=this.video.error,i=e&&e.code||0,n=t.BUFFERING.TYPE.UNKNOWN;if(e&&i)switch(i){case 1:n=t.BUFFERING.TYPE.MEDIA_ERR_ABORTED;break;case 2:n=t.BUFFERING.TYPE.MEDIA_ERR_NETWORK;break;case 3:n=t.BUFFERING.TYPE.MEDIA_ERR_DECODE;break;case 4:n=t.BUFFERING.TYPE.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:n=t.BUFFERING.TYPE.MEDIA}return{type:n,code:i}},e.prototype.getCurrentNetworkWarningInfo=function(e,t){if(void 0===t&&(t=1),!e)return{code:0};var i=e.mediaType,n={code:0,type:"",mediaType:e.mediaType},r=e.networkWarningHistory,a=e.warningTime,o=e.bufferLength,s=e.currentQn;if(r.length&&o<t){a+=t;try{var l=r.filter((function(e){return e.mediaType===i&&e.startTime<=a+t&&e.startTime+e.duration>=a&&e.id===s.toString()}));l.length&&(n=l[l.length-1])}catch(e){throw new Error("getCurrentNetworkWarningInfo error, "+JSON.stringify(e))}}return n},e.prototype.getBufferingTypeByPoorNetwork=function(e){var i=t.BUFFERING.TYPE.UNKNOWN;if(e)switch(e){case n.ERROR.CONNECT_FRAGMENT_ERROR_TIMEOUT:i=t.BUFFERING.TYPE.NETWORK_CONNECT_TIMEOUT;break;case n.ERROR.DOWNLOAD_FRAGMENT_ERROR_TIMEOUT:i=t.BUFFERING.TYPE.NETWORK_DOWNLOAD_TIMEOUT;break;case n.ERROR.DOWNLOAD_FRAGMENT_ERROR:i=t.BUFFERING.TYPE.NETWORK_DOWNLOAD_ERROR}return i},e}();t.default=a},function(e,t,i){"use strict";var n=Array.isArray,r=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function e(t,i){if(t===i)return!0;var o,s,l,u=n(t),c=n(i);if(u&&c){if((s=t.length)!=i.length)return!1;for(o=0;o<s;o++)if(!e(t[o],i[o]))return!1;return!0}if(u!=c)return!1;var d=t instanceof Date,h=i instanceof Date;if(d!=h)return!1;if(d&&h)return t.getTime()==i.getTime();var f=t instanceof RegExp,p=i instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==i.toString();if(t instanceof Object&&i instanceof Object){var g=r(t);if((s=g.length)!==r(i).length)return!1;for(o=0;o<s;o++)if(!a.call(i,g[o]))return!1;for(o=0;o<s;o++)if(!e(t[l=g[o]],i[l]))return!1;return!0}return!1}},function(e,t,i){!function(e){"use strict";var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var i=e;return t.hasOwnProperty(e)&&(i=t[e]),String.fromCharCode(i)},n=15,r=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},l={25:2,26:4,29:6,30:8,31:10,27:13,28:15},u=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var i=this.verboseFilter[e];this.verboseLevel>=i&&console.log(this.time+" ["+e+"] "+t)}},d=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t},h=function(e,t,i,n,r){this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=n||"black",this.flash=r||!1};h.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var f=function(e,t,i,n,r,a){this.uchar=e||" ",this.penState=new h(t,i,n,r,a)};f.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<r;e++)this.chars.push(new f);this.pos=0,this.currPenState=new h};p.prototype={equals:function(e){for(var t=!0,i=0;i<r;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>r&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=r)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=r?c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<r;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,i=0;i<r;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var g=function(){this.rows=[];for(var e=0;e<n;e++)this.rows.push(new p);this.currRow=14,this.nrRollUpRows=null,this.reset()};g.prototype={reset:function(){for(var e=0;e<n;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,i=0;i<n;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},copy:function(e){for(var t=0;t<n;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<n;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var i=this.rows[this.currRow];if(null!==e.indent){var n=e.indent,r=Math.max(n-1,0);i.setCursor(e.indent),e.color=i.chars[r].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")}else c.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],i="",r=-1,a=0;a<n;a++){var o=this.rows[a].getTextString();o&&(r=a+1,e?t.push("Row "+r+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i},getTextAndFormat:function(){return this.rows}};var y=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new g,this.nonDisplayedMemory=new g,this.lastOutputScreen=new g,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};y.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,i){this.field=e||1,this.outputs=[t,i],this.channels=[new y(1,t),new y(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var i,n,r,a=!1;this.lastTime=e,c.setTime(e);for(var o=0;o<t.length;o+=2)n=127&t[o],r=127&t[o+1],n>=16&&n<=31&&n===this.lastCmdA&&r===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+d([n,r])+") is dropped")):0!==n||0!==r?(c.log("DATA","["+d([t[o],t[o+1]])+"] -> ("+d([n,r])+")"),(i=this.parseCmd(n,r))||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r)),i||(a=this.parseChars(n,r))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):c.log("WARNING","No channel found yet. TEXT-MODE?")),i?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+d([n,r])+" orig: "+d([t[o],t[o+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var i;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;i=20===e||21===e||23===e?1:2;var n=this.channels[i-1];return 20===e||21===e||28===e||29===e?32===t?n.cc_RCL():33===t?n.cc_BS():34===t?n.cc_AOF():35===t?n.cc_AON():36===t?n.cc_DER():37===t?n.cc_RU(2):38===t?n.cc_RU(3):39===t?n.cc_RU(4):40===t?n.cc_FON():41===t?n.cc_RDC():42===t?n.cc_TR():43===t?n.cc_RTD():44===t?n.cc_EDM():45===t?n.cc_CR():46===t?n.cc_ENM():47===t&&n.cc_EOC():n.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},parseMidrow:function(e,t){var i=null;if((17===e||25===e)&&32<=t&&t<=47){if((i=17===e?1:2)!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[i-1];return n.insertChars([32]),n.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+d([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var i,n;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;i=e<=23?1:2,n=64<=t&&t<=95?1===i?a[e]:s[e]:1===i?o[e]:l[e];var r=this.interpretPAC(n,t);return this.channels[i-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},interpretPAC:function(e,t){var i,n={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},parseChars:function(e,t){var n,r=null,a=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),17<=o&&o<=19?(n=17===o?t+80:18===o?t+112:t+144,c.log("INFO","Special char '"+i(n)+"' in channel "+r),a=[n],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(a=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),a){var s=d(a);c.log("DEBUG","Char codes =  "+s.join(","))}return a},parseBackgroundAttributes:function(e,t){var i,n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=u[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(i),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=c,e.PenState=h,e.CaptionScreen=g,e.Cea608Parser=m,e.findCea608Nalus=function(e,t,i){for(var n=0,r=t,a=[],o=function(e,t,i,n){if(4!==e||t<8)return null;var r=i.getUint8(n),a=i.getUint16(n+1),o=i.getUint32(n+3),s=i.getUint8(n+7);return 181==r&&49==a&&1195456820==o&&3==s};r<t+i;){if(n=e.getUint32(r),6==(31&e.getUint8(r+4)))for(var s=r+5,l=-1;s<r+4+n-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(s),s++;var c=0;for(u=255;255===u;)c+=u=e.getUint8(s),s++;o(l,c,e,s)&&a.push([s,c]),s+=c}r+=n+4}return a},e.extractCea608DataFromRange=function(e,t){var i=t[0],n=[[],[]];i+=8;var r=31&e.getUint8(i);i+=2;for(var a=0;a<r;a++){var o=e.getUint8(i),s=4&o,l=3&o;i++;var u=e.getUint8(i);i++;var c=e.getUint8(i);i++,s&&(127&u)+(127&c)!=0&&(0===l?(n[0].push(u),n[0].push(c)):1===l&&(n[1].push(u),n[1].push(c)))}return n}}(t)},function(e,t,i){var n=i(11).default,r=i(13).default;window.dashjs=n,e.exports=r},function(e,t,i){"use strict";i.r(t),function(e){var n=i(5);i.d(t,"MediaPlayer",(function(){return n.a}));var r=i(0);i.d(t,"FactoryMaker",(function(){return r.a}));var a=i(2),o="undefined"!=typeof window&&window||e,s=o.dashjs;s||(s=o.dashjs={}),s.MediaPlayer=n.a,s.FactoryMaker=r.a,s.Version=Object(a.a)(),t.default=s}.call(this,i(12))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(14),u=i(15),c=s(i(3)),d=i(4),h=s(i(16)),f=o(i(7)),p=s(i(17)),g=function(){function e(e,t){if(this.config={scriptSrc:"https://static.hdslb.com/player/js/dash.mediaplayer.min.js",scriptMaxLoadTime:1e4,minQualityNumberMappingNumber:6,videoInfoScheduleTime:1e3},this.state={defaultVideoQuality:0,defaultAudioQuality:0,setTheDefaultVideoQualityState:!1,stableBufferTime:60,isAutoPlay:!1,abrStrategy:d.STRING.ABR_THROUGHPUT,isAutoSwitch:{video:!1,audio:!1},autoSwitchTopQualityMap:{video:-1,audio:-1},onScriptLoading:!1,initialized:!1,mpd:null,manifest:null,manifestInfo:{},currentQualityIndex:{video:0,audio:0},maxQualityIndex:{video:-1,audio:-1},qualityNumberMap:{video:{},audio:{}},segmentsInfoMap:{video:{},audio:{}},mediaInfo:{},statisticsInfo:{},autoSwitchStartTime:0,preloadData:null,startOffsetTime:0,enforceSSLStream:!1,latestPlayurlExpireTimeStamp:0,latestPlayurlErrorHTTPCode:0,fragmentLoadingInfo:{},appendingSourceState:!1,logHistory:[],networkWarningHistory:[],playbackState:f.BUFFERING.PLAYBACK.PLAYING,enableHEVC:!1,cdnInfo:{cdn:0,p2p:0,nc:0}},this.timer={loadScript:0,videoInfoSchedule:0,removeSwitchSourceTransition:0},this.events={},this.components={networkActivity:new h.default,bufferingInfo:new f.default(e),bufferingStrategy:new p.default},this.video=e,this.mixin(t),!(e&&e instanceof HTMLVideoElement))throw new Error("Video parameter is not a HTMLVideoElement")}return e.prototype.preload=function(){var e=this;this.detectDashJSExists()||this.loadDashPlayerScript().then((function(){e.fire(d.EVENTS.SCRIPT_LOADED)})).catch((function(t){e.error({msg:"Load dash player script error",detail:t})}))},e.prototype.initialize=function(e,t){var i=this;this.mixin(t);var n=this.filterManifestByEnableHEVC(e,this.state.enableHEVC);return this.state.mpd=n.manifest,this.state.enableHEVC=n.isHEVCTypeSupported,this.components.bufferingStrategy.setHEVCEnableFlag(n.isHEVCTypeSupported).setOnOptimizingCallback(this.fire.bind(this)),new Promise((function(t,n){e||n({msg:"Manifest parameter error, manifest: "+JSON.stringify(e)}),i.detectDashJSExists()?i.createPlayer(t,n):i.state.onScriptLoading?i.on(d.EVENTS.SCRIPT_LOADED,(function(){i.off(d.EVENTS.SCRIPT_LOADED),i.createPlayer(t,n)})):i.loadDashPlayerScript().then((function(){i.createPlayer(t,n)})).catch((function(e){i.error(e)}))}))},e.prototype.on=function(e,t){e&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))},e.prototype.off=function(e,t){if(e)if("function"==typeof t){if(this.events[e]&&this.events[e].length){var i=this.events[e].indexOf(t);i>=0&&this.events[e].splice(i,1)}}else this.events[e]=[]},e.prototype.fire=function(e,t){if(e){var i=this.events[e];i&&i.length&&i.forEach((function(e){"function"==typeof e&&e.call(null,t)}))}},e.prototype.play=function(){try{this.player.play()}catch(e){this.error({msg:"Call play function error",detail:e})}},e.prototype.pause=function(){try{this.player.pause()}catch(e){this.error({msg:"Call pause function error",detail:e})}},e.prototype.getCurrentTime=function(e){void 0===e&&(e=!0);try{return this.player.time(void 0,e)}catch(e){this.error({type:d.STRING.WARNING,msg:"Call getCurrentTime function error",detail:e})}return 0},e.prototype.getBufferedTime=function(){this.getCurrentTime();var e=this.video;try{e.buffered}catch(e){this.error({msg:"Call getBufferedTime function error",detail:e})}return 0},e.prototype.getDuration=function(e){void 0===e&&(e=!0);try{return this.player.duration(e)}catch(e){this.error({msg:"Call getDuration function error",detail:e})}},e.prototype.seek=function(e,t){var i=this;return void 0===t&&(t=!1),new Promise((function(n,r){if(isNaN(parseInt(""+e,10))||e<0)r({msg:"Seek time value error, time: "+e});else if(i.state.appendingSourceState)r({msg:"Call seek function error while appending source, time: "+e});else try{var a=i.getCurrentTime(),o=Date.now();i.changePlaybackState(f.BUFFERING.PLAYBACK.SEEKING);var s=i.getStartOffsetTime();e<s&&(e=s+.3);var l=999999,u=i.state.segmentsInfoMap,c=parseInt(i.video.getAttribute("data-offset"),10)||0;if(u)for(var h in u)l=Math.min(u[h].realDuration+c,l);l=Math.min(i.state.manifest.mediaPresentationDuration,l),e>l-.6&&(e=l-.6),i.player.seek(e,t);var p=function(){i.changePlaybackState(f.BUFFERING.PLAYBACK.PLAYING).player.off(d.EVENTS.PLAYBACK_SEEKED,p),n({cost:Math.floor(Date.now()-o),currentTime:a,seekedTime:e,isRelative:t})};i.player.on(d.EVENTS.PLAYBACK_SEEKED,p)}catch(e){i.error({msg:"Call seek function error",detail:e})}}))},e.prototype.getCorePlayer=function(){return this.player},e.prototype.setVolume=function(e){if(isNaN(parseInt(""+e,10))||e<0||e>1)this.error({msg:"SetVolume value error, value: "+e});else try{this.player.setVolume(e)}catch(e){this.error({msg:"Call setVolume function error",detail:e})}},e.prototype.getVolume=function(){try{return this.player.getVolume()}catch(e){this.error({msg:"Call getVolume function error",detail:e})}},e.prototype.setPlaybackRate=function(e){try{this.player.setPlaybackRate(e)}catch(e){this.error({msg:"Call setPlaybackRate function error",detail:e})}},e.prototype.getPlaybackRate=function(){try{return this.player.getPlaybackRate()}catch(e){this.error({msg:"Call getPlaybackRate function error",detail:e})}},e.prototype.getAutoSwitchQualityFor=function(e){try{return this.player.getAutoSwitchQualityFor(e)}catch(e){this.error({msg:"Call getAutoSwitchQualityFor function error",detail:e})}},e.prototype.setAutoSwitchQualityFor=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);try{this.state.isAutoSwitch&&i&&(this.state.isAutoSwitch[e]=t),t||this.setMaxAllowedBitrateFor(e,0),this.player.setAutoSwitchQualityFor(e,t)}catch(e){this.error({msg:"Call setAutoSwitchQualityFor function error",detail:e})}return this},e.prototype.getQualityList=function(e){try{return this.player.getBitrateInfoListFor(e)}catch(e){this.error({msg:"Call getQualityList function error",detail:e})}},e.prototype.setDefaultQualityFor=function(e,t){void 0===t&&(t=0);var i=this.getQualityIndexFromQualityNumber(t,e);try{var n=(this.state.mpd&&this.state.mpd[e]).length;n&&(i=Math.min(i,n-1)),i>=0?(this.state.currentQualityIndex[e]=i,this.player.setDefaultQualityFor(e,i)):this.error({msg:"Call setDefaultQualityFor function error, quality: "+t})}catch(e){this.error({msg:"Call setDefaultQualityFor function error, quality: "+t+", qualityIndex = "+i,detail:e})}},e.prototype.setAutoSwitchTopQualityFor=function(e,t){var i=this;try{if(!this.state.initialized){var n=function(){i.off(d.EVENTS.STREAM_INITIALIZED,n),i.setAutoSwitchTopQualityFor(e,t)};return void this.on(d.EVENTS.STREAM_INITIALIZED,n)}if(!t&&0!==t)return void this.setMaxAllowedBitrateFor(e,0);if(!this.state.isAutoSwitch||!this.state.isAutoSwitch[e])return;var r=this.getQualityIndexFromQualityNumber(t,e),a=this.getQualityList(e),o=a&&a[r],s=Math.floor(o.bitrate/1e3)+1;this.state.autoSwitchTopQualityMap[e]=r,this.setMaxAllowedBitrateFor(e,s)}catch(e){this.error({msg:"Call setAutoSwitchTopQualityFor function error",detail:e})}},e.prototype.setQualityFor=function(e,t){var i=this;return new Promise((function(n,r){if(isNaN(parseInt(""+t,10))||t<0)r({msg:"Set quality value error, quality: "+t});else if(i.detectQualityTypeIsLegal(e))r({msg:"Set quality type error, type: "+e});else if(i.state.appendingSourceState)r({msg:"Reject setQualityFor by appending next source."});else try{(t=i.getQualityIndexFromQualityNumber(t,e))===i.state.currentQualityIndex[e]&&r({msg:"Set quality equal current quality, quality: "+t}),i.player.setQualityFor(e,t);var a=Date.now(),o=function(e){e.newQuality===t&&(i.player.off(d.EVENTS.QUALITY_CHANGE_RENDERED,o),n(i.getQualityChangedData(e,a)))};i.player.on(d.EVENTS.QUALITY_CHANGE_RENDERED,o)}catch(e){r({msg:"Call setQualityFor function error",detail:e})}}))},e.prototype.getQualityFor=function(e){try{return this.player.getQualityFor(e)}catch(e){this.error({msg:"Call getQualityFor function error",detail:e})}},e.prototype.setStableBufferTime=function(e){void 0===e&&(e=60);try{this.player.setStableBufferTime(e),this.player.setBufferTimeAtTopQuality(e),this.player.setBufferTimeAtTopQualityLongForm(e),this.player.setBufferAheadToKeep(e+10)}catch(e){this.error({msg:"Call setStableBufferTime function error",detail:e})}},e.prototype.getStableBufferTime=function(){try{return this.player.getStableBufferTime()}catch(e){this.error({msg:"Call getStableBufferTime function error",detail:e})}},e.prototype.getBufferLength=function(e){try{return this.player.getBufferLength(e)}catch(e){this.error({msg:"Call getBufferLength function error",detail:e})}},e.prototype.getCurrentPlayURLFor=function(e){try{return this.player.getCurrentSegmentInfoFor(e).url||""}catch(t){this.error({msg:"Call getCurrentPlayURLFor function error, type: "+e+", qualityIndex: "+this.state.currentQualityIndex[e],detail:t})}},e.prototype.getVideoInfo=function(){return{mediaInfo:this.state.mediaInfo,statisticsInfo:this.state.statisticsInfo}},e.prototype.getCurrentCodecID=function(e){void 0===e&&(e=d.STRING.VIDEO);var t=0;return e===d.STRING.VIDEO&&(t=7,this.state.enableHEVC&&(t=12)),t},e.prototype.getAverageConnectionSpeed=function(e){void 0===e&&(e=d.STRING.VIDEO);try{return Number(this.player.getAverageThroughput(e))||0}catch(e){this.error({msg:"Call getAverageConnectionSpeed function error",detail:e})}},e.prototype.switchSource=function(e,t,i){var n=this;if(void 0===i&&(i=!1),window.clearTimeout(this.timer.removeSwitchSourceTransition),this.onVideoSwitchSourceEnded(),t&&("string"!=typeof t.videoid||"string"!=typeof t.audioid?this.error({type:d.STRING.WARNING,msg:"Preload data videoid/audioid value must be string type.",detail:t}):this.player&&this.player.setPreloadData(t)),i){var r=document.createElement("canvas"),a=this.video.offsetWidth,o=this.video.offsetHeight,s=this.video.videoWidth/this.video.videoHeight,l=a/o;r.width=a,r.height=o,r.style.zIndex="10",r.style.position="absolute",r.className=d.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME;var u=r.getContext("2d"),c=void 0,h=void 0;l>=s?(c=o*s,h=o):(c=a,h=a/s),u.fillRect(0,0,r.width,r.height),u.drawImage(this.video,Math.abs(a-c)/2,Math.abs(o-h)/2,c,h),this.video.parentNode.appendChild(r),this.timer.removeSwitchSourceTransition=window.setTimeout((function(){n.onVideoSwitchSourceEnded()}),1e4),r=null,u=null,this.video.removeEventListener("canplay",this.onVideoSwitchSourceEnded),this.video.removeEventListener("playing",this.onVideoSwitchSourceEnded),this.video.addEventListener("canplay",this.onVideoSwitchSourceEnded),this.video.addEventListener("playing",this.onVideoSwitchSourceEnded)}return new Promise((function(t,i){try{if(e=n.filterManifestByEnableHEVC(e,n.state.enableHEVC).manifest,n.state.mpd=e,n.player){for(var r in n.state.currentQualityIndex)n.state.currentQualityIndex[r]>=0&&n.setDefaultQualityFor(r,n.state.currentQualityIndex[r]);n.state.defaultVideoQuality=n.state.currentQualityIndex.video,n.state.defaultAudioQuality=n.state.currentQualityIndex.audio,n.bindSwitchSourceEvents(t,i,1e4),n.player.switchSource(e)}else i("Dash Player Error")}catch(e){i(e)}}))},e.prototype.updateSource=function(e){var t=this;return new Promise((function(i,n){try{e=t.filterManifestByEnableHEVC(e,t.state.enableHEVC).manifest,t.player.updateSource(e);var r=window.setTimeout((function(){n({msg:"Update Source Timeout"})}),5e3),a=function(){t.player.off(d.EVENTS.STREAM_INITIALIZED,a),clearTimeout(r),i()};t.player.on(d.EVENTS.STREAM_INITIALIZED,a)}catch(e){n({msg:"Call updateSource function error, "+JSON.stringify(e),detail:e})}}))},e.prototype.appendSource=function(e,t){var i=this,n=this.state.appendingSourceState,r=this.state;return new Promise((function(a,o){n&&o("Dash Player is Appending Next Source!"),i.setAutoSwitchQualityFor("video",!1,!1),i.setAutoSwitchQualityFor("audio",!1,!1);var s=Date.now();t&&("string"!=typeof t.videoid||"string"!=typeof t.audioid?i.error({type:d.STRING.WARNING,msg:"Preload data videoid/audioid value must be string type.",detail:t}):i.player&&i.player.setPreloadData(t));var l=setTimeout((function(){i.state.appendingSourceState=!1,o({msg:"Append source time out."})}),5e3);i.state.appendingSourceState=!0;try{if(i.player){for(var u in i.state.currentQualityIndex)i.state.currentQualityIndex[u]>=0&&i.setDefaultQualityFor(u,i.state.currentQualityIndex[u]);e=i.filterManifestByEnableHEVC(e,r.enableHEVC).manifest,i.player.setEndOfStreamState(!1),i.player.appendSource(e);var c=function(e){clearTimeout(l),i.player.off(d.EVENTS.APPENDED_NEXT_SOURCE,c),a({cost:Date.now()-s})};i.player.on(d.EVENTS.APPENDED_NEXT_SOURCE,c);var h=function(e){i.player.off(d.EVENTS.APPENDED_NEXT_SOURCE_DURATION_CHANGED,h),i.state.appendingSourceState=!1,r.autoSwitchTopQualityMap.video>=0&&i.setAutoSwitchTopQualityFor("video",r.autoSwitchTopQualityMap.video),i.setAutoSwitchQualityFor("video",r.isAutoSwitch[d.STRING.VIDEO],!1),i.setAutoSwitchQualityFor("audio",r.isAutoSwitch[d.STRING.AUDIO],!1)};i.player.on(d.EVENTS.APPENDED_NEXT_SOURCE_DURATION_CHANGED,h)}else clearTimeout(l),i.state.appendingSourceState=!1,o({msg:"Missing dash player instance!"})}catch(e){clearTimeout(l),i.state.appendingSourceState=!1,o({msg:"Append Source Error",detail:e})}}))},e.prototype.getNextFragmentHistoryInfo=function(){var e="";try{var t=function(e){return e?1:0};if(this.state.getNextFragmentHistory){var i=function(i){var r=n.state.getNextFragmentHistory[i],a="";r.forEach((function(e){var i,n,r=[t(e.final),e.currentTime,e.bufferLevel.toFixed(3),(i=[e.bufferResetInProgress,e.isReplacement,e.switchTrack,e.hasTopQualityChanged,e.lastInitQuality,e.bufferLevelRule],n="",i.length&&i.forEach((function(e){n+=""+t(e)})),parseInt(n,2))];a+=r.join(",")+";"})),e+=i+":"+a+"!"},n=this;for(var r in this.state.getNextFragmentHistory)i(r)}}catch(e){}return e},e.prototype.isLoadingFragment=function(e){if(e)return!!this.state.fragmentLoadingInfo[e]},e.prototype.getNetworkActivity=function(){return this.components.networkActivity&&this.components.networkActivity.getNetworkActivity()},e.prototype.getNetworkActivityHistory=function(e){return void 0===e&&(e=0),this.components.networkActivity&&this.components.networkActivity.getNetworkActivityHistory(e)},e.prototype.setEndOfStreamState=function(e){void 0===e&&(e=!1);try{return this.player.setEndOfStreamState(e)}catch(e){this.error({msg:"Call setEndOfStreamState function error",detail:e})}},e.prototype.getLogHistory=function(){var e=this.state&&this.state.logHistory||[],t=e.join("\n");return{length:e.length,log:t,size:function(e){for(var t=[],i=[e],n=0;i.length;){var r=i.pop();if("boolean"==typeof r)n+=4;else if("string"==typeof r)n+=2*r.length;else if("number"==typeof r)n+=8;else if("object"==typeof r&&-1===t.indexOf(r))for(var a in t.push(r),r)i.push(r[a])}return n}(t)}},e.prototype.getBufferingInfo=function(){var e,t={type:-1};try{var i=this.state.currentQualityIndex.video,n=this.state.currentQualityIndex.audio;t=this.components.bufferingInfo&&this.components.bufferingInfo.getInfo({videoBufferLength:this.getBufferLength("video"),audioBufferLength:this.getBufferLength("audio"),videoCurrentIndex:i,audioCurrentIndex:n,videoCurrentQn:this.getQualityNumberFromQualityIndex(i,d.STRING.VIDEO),audioCurrentQn:this.getQualityNumberFromQualityIndex(n,d.STRING.AUDIO),videoSpeed:this.getAverageConnectionSpeed(d.STRING.VIDEO),audioSpeed:this.getAverageConnectionSpeed(d.STRING.AUDIO),networkActivity:this.getNetworkActivityHistory(5),playbackState:this.state.playbackState,latestPlayurlErrorHTTPCode:this.state.latestPlayurlErrorHTTPCode,fragmentLoadingInfo:this.state.fragmentLoadingInfo,networkWarningHistory:this.state.networkWarningHistory,startOffsetTime:this.state.startOffsetTime}),null===(e=this.components)||void 0===e||e.bufferingStrategy.push(t)}catch(e){throw new Error(e.message)}return t},e.prototype.getCDNInfo=function(e){void 0===e&&(e=!1);var t=n({},this.state.cdnInfo);return e&&(this.state.cdnInfo={cdn:0,p2p:0,nc:0}),t},e.prototype.destroy=function(){try{this.player.off(d.EVENTS.FRAGMENT_LOADING_STARTED,this.onFragmentLoading,this),this.player.off(d.EVENTS.FRAGMENT_LOADING_PROGRESS,this.onFragmentLoading,this),this.player.off(d.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoading,this),this.player.off(d.EVENTS.LOG,this.onDashJSLog,this),this.player&&this.player.reset(),this.onVideoSwitchSourceEnded(),this.events={},this.config=null,this.state=null,this.video=null,this.player=null,clearTimeout(this.timer&&this.timer.networkActivity),clearTimeout(this.timer&&this.timer.loadScript),clearTimeout(this.timer&&this.timer.videoInfoSchedule),clearTimeout(this.timer&&this.timer.removeSwitchSourceTransition),this.timer=null}catch(e){this.error({msg:"Call destroy function error, "+(e&&e.message),detail:e})}},e.prototype.mixin=function(e){if(e&&e instanceof Object)for(var t in e)e.hasOwnProperty(t)&&this.state.hasOwnProperty(t)&&(this.state[t]=e[t]);this.state&&this.state.isAutoSwitch||(this.state.isAutoSwitch={video:!1,audio:!1})},e.prototype.loadDashPlayerScript=function(){var e=this,t=this.config.scriptSrc;return new Promise((function(i,n){try{var r=document.createElement("script");r.src=t,r.onload=function(){e.state.onScriptLoading=!1,clearTimeout(e.timer.loadScript),i()},r.onerror=function(i){e.state.onScriptLoading=!1,clearTimeout(e.timer.loadScript),n({msg:"Load dash player script error, src: "+t,detail:i})},document.body.appendChild(r),e.state.onScriptLoading=!0,e.timer.loadScript=window.setTimeout((function(){n({msg:"Call loadDashPlayerScript function timeout"})}),e.config.scriptMaxLoadTime)}catch(e){n({msg:"Call loadDashPlayerScript function error",detail:e})}}))},e.prototype.createPlayer=function(t,i){var n=window.dashjs,r=this.state;this.state.defaultVideoQuality=this.getQualityIndexFromQualityNumber(r.defaultVideoQuality,d.STRING.VIDEO),this.state.defaultAudioQuality=this.getQualityIndexFromQualityNumber(r.defaultAudioQuality,d.STRING.AUDIO);try{var a=n.MediaPlayer().create();this.player=a,this.setDebugLog(),this.bindEvents(t),this.state.logHistory.push("Dash player log history, "+JSON.stringify(e.CONFIG)),r.preloadData&&a.setPreloadData(r.preloadData),a.initialize(this.video,r.mpd,r.isAutoPlay,r.enforceSSLStream),a.setABRStrategy(r.abrStrategy||d.STRING.ABR_THROUGHPUT),a.setAutoSwitchQualityFor(d.STRING.VIDEO,r.isAutoSwitch[d.STRING.VIDEO]),a.setAutoSwitchQualityFor(d.STRING.AUDIO,r.isAutoSwitch[d.STRING.AUDIO]),a.setFastSwitchEnabled(!0),a.enableLastBitrateCaching(!1),a.setBufferPruningInterval(20),r.mpd&&r.mpd.interactive&&a.setEndOfStreamState(!1),a.setJumpGaps(!0),this.setStableBufferTime(this.state.stableBufferTime)}catch(e){i({msg:"Call createPlayer function error",detail:e})}},e.prototype.bindEvents=function(e){var t=this,i=this.player,n=function(){i.off(d.EVENTS.STREAM_INITIALIZED,n,t),t.state.initialized=!0;var r=t.player.getBitrateInfoListFor("video");e&&e(r),t.fire(d.EVENTS.STREAM_INITIALIZED),t.videoInfoSchedule()};i.on(d.EVENTS.STREAM_INITIALIZED,n,this),i.on(d.EVENTS.MANIFEST_LOADED,this.parseManifestInfo,this),i.on(d.EVENTS.GET_NEXT_FRAGMENT,this.getNextFragmentInfo,this),i.on(d.EVENTS.FRAGMENT_LOADING_STARTED,this.onFragmentLoading,this),i.on(d.EVENTS.FRAGMENT_LOADING_PROGRESS,this.onFragmentLoading,this),i.on(d.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoading,this),i.on(d.EVENTS.LOG,this.onDashJSLog,this),i.onInitSegmentsLoaded(this.onInitSegmentsLoaded.bind(this)),i.on(d.EVENTS.DELAY_TO_APPEND_TO_BUFFER,(function(e){})),i.on(d.EVENTS.START_OFFSET_TIME_WARNING,(function(e){var i=e&&e.time;i&&i>t.state.startOffsetTime&&(t.error({type:d.STRING.WARNING,code:d.ERROR.START_OFFSET_TIME_WARNING,msg:"Start offset time is less than buffer.start(0), "+t.state.startOffsetTime+" < "+i}),t.state.startOffsetTime=i+.2)}));var r=function(){var e;null===(e=t.video)||void 0===e||e.removeEventListener("loadedmetadata",r),setTimeout((function(){if(t.video){var e=t.video.buffered,n=e.length&&e.start(0),r=t.video.currentTime;r<n&&(t.error({type:d.STRING.WARNING,code:d.ERROR.START_OFFSET_TIME_WARNING,msg:"Current offset time is less than buffer.start(0), "+r+" < "+n}),t.state.startOffsetTime=n+.2,i.seek(n+.2))}}),3e3)};this.video.addEventListener("loadedmetadata",r),this.bindDashCorePlayerEvents()},e.prototype.bindSwitchSourceEvents=function(e,t,i){var n=this,r=Date.now(),a=window.setTimeout((function(){n.onVideoSwitchSourceEnded(),t({err:"Dash Player Switch Source timeout",cost:Date.now()-r})}),i),o=function(){window.clearTimeout(a),n.player.off(d.EVENTS.STREAM_INITIALIZED,o,n),e({cost:Date.now()-r})};this.player.on(d.EVENTS.STREAM_INITIALIZED,o,this)},e.prototype.error=function(e){e.code=e.code||d.ERROR.INTERNAL_ERROR,e.msg="[Dash] "+e.msg,e.type=e.type||d.STRING.ERROR,this.state&&this.state.logHistory.push("Dash player "+e.type+" - "+e.code+": "+e.msg),d.STRING.ERROR===e.type?this.fire(d.EVENTS.ERROR,e):this.fire(d.EVENTS.WARNING,e)},e.prototype.bindDashCorePlayerEvents=function(){var e=this,t=this.events;this.player.on(d.EVENTS.ERROR,(function(t){e.errorHandler(t)})),this.on(d.EVENTS.QUALITY_CHANGE_REQUESTED,(function(t){e.changePlaybackState(f.BUFFERING.PLAYBACK.SWITCHING_QUALITY)})),this.on(d.EVENTS.QUALITY_CHANGE_RENDERED,(function(t){e.changePlaybackState(f.BUFFERING.PLAYBACK.PLAYING),e.state.currentQualityIndex[t.mediaType]=t.newQuality})),[{key:d.EVENTS.QUALITY_CHANGE_REQUESTED,callbackQueue:function(){return t[d.EVENTS.QUALITY_CHANGE_REQUESTED]}},{key:d.EVENTS.QUALITY_CHANGE_RENDERED,callbackQueue:function(){return t[d.EVENTS.QUALITY_CHANGE_RENDERED]}},{key:d.EVENTS.QUALITY_CHANGE_DOWNLOADED,callbackQueue:function(){return t[d.EVENTS.QUALITY_CHANGE_DOWNLOADED]}}].forEach((function(t){e.player.on(t.key,(function(i){try{var n=t.callbackQueue();n&&n.forEach((function(t){"function"==typeof t&&t(e.getQualityChangedData(i))}))}catch(i){e.error({msg:"Call "+t.key+" callback queue error",detail:i,type:d.STRING.WARNING})}}))})),this.player.on(d.EVENTS.FRAGMENT_LOADED_ERROR,(function(t){if(t){if(!t.code)return;var i=d.STRING.WARNING;t.code===d.ERROR.DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE&&(i=d.STRING.ERROR),e.saveNetworkWarningInfo(t),e.error({code:t.code,detail:t,msg:"Fragment Loaded Error, "+JSON.stringify(t),type:i})}})),this.player.on(d.EVENTS.PCDN_LOADED_ERROR,(function(t){if(t){if(!t.code)return;e.error({code:t.code,detail:t,msg:"Pcdn Loaded Error, "+JSON.stringify(t),type:d.STRING.WARNING})}})),this.player.on(d.EVENTS.CDN_LOAD_INFO,(function(t){if(null==t?void 0:t.loadInfo){var i=t.loadInfo;for(var n in e.state.cdnInfo)i[n]&&(e.state.cdnInfo[n]+=i[n]);e.fire(d.EVENTS.CDN_LOAD_INFO,i)}})),this.player.on(d.EVENTS.QUOTA_EXCEEDED,(function(e){}))},e.prototype.errorHandler=function(e){if(e)try{var t=e.code,i=e.error,n=e.event.message;switch(t){case d.ERROR.DOWNLOAD_ERROR:case d.ERROR.DOWNLOAD_MPD_ERROR:case d.ERROR.DOWNLOAD_XINK_ERROR:case d.ERROR.DOWNLOAD_INIT_SEGMENT_ERROR:case d.ERROR.DOWNLOAD_MEDIA_SEGMENT_ERROR:case d.ERROR.DOWNLOAD_INDEX_SEGMENT_ERROR:case d.ERROR.DOWNLOAD_SWITCHING_SEGMENT_ERROR:case d.ERROR.DOWNLOAD_OTHER_ERROR:var r=e.event.url,a=e.httpCode,o=!0;if(a&&a>=400){var s=0;if(r){var l=r.match(/expires=\d+/g),u=r.match(/deadline=\d+/g);s=l&&parseInt(l[0].substr(8),10)||u&&parseInt(u[0].substr(9),10)}s&&this.state.latestPlayurlExpireTimeStamp===s&&this.state.latestPlayurlErrorHTTPCode===a&&(o=!1),this.state.latestPlayurlExpireTimeStamp=s,this.state.latestPlayurlErrorHTTPCode=a}o&&this.error({code:t,msg:a+" downloadError - "+r,detail:e});break;case d.ERROR.MANIFEST_ERROR:case d.ERROR.MANIFEST_TYPE_ERROR:case d.ERROR.MANIFEST_RESOLVE_ERROR:this.error({code:t,msg:i+" - "+n,detail:e});break;case d.ERROR.MEDIA_ERROR:case d.ERROR.MEDIA_ABORTED_ERROR:case d.ERROR.MEDIA_NETWORK_ERROR:case d.ERROR.MEDIA_DECODE_ERROR:case d.ERROR.MEDIA_SUPPORTED_ERROR:case d.ERROR.MEDIA_ENCRYPTED_ERROR:case d.ERROR.MEDIA_UNKNOWN_ERROR:c.default.setSessionStorage("enableHEVCError","1");var h=e.event;this.error({code:t,msg:i+" - "+h,detail:e});break;default:this.error({msg:"Unknown error.",detail:e}),console.error(e)}}catch(e){this.error({msg:"Unknown error.",detail:e})}},e.prototype.detectDashJSExists=function(){return!(!window.dashjs||!window.dashjs.MediaPlayer)},e.prototype.detectQualityTypeIsLegal=function(e){return!(e===d.STRING.VIDEO||e===d.STRING.AUDIO)},e.prototype.parseManifestInfo=function(e){var t=this;try{var i=e.data;if(this.state.manifest=i,i&&i.Period){var n={baseUri:i.baseUri,representation:{video:[],audio:[]}},r={video:{},audio:{}},a=i.Period.AdaptationSet_asArray;a.length&&a.forEach((function(e){var i=e.Representation_asArray;if(i){var a="";i instanceof Array||(i=[i]),i.length&&(i.sort((function(e,t){return e.bandwidth-t.bandwidth})),i.forEach((function(i,o){var s=i.frameRate,l=i.mimeType||e.mimeType;try{if(s&&(""+s).indexOf("/")>-1){var u=s.split("/");s=(s=parseInt(u[0],10)/parseInt(u[1],10)).toFixed(3)}}catch(e){t.error({msg:"Parse fps error, fps: "+s,detail:e})}var c={id:i.id,baseURL:i.BaseURL,width:i.width,height:i.height,bandwidth:i.bandwidth,codecs:i.codecs,fps:s,mimeType:l,sar:i.sar,startWithSAP:i.startWithSAP,audioSamplingRate:i.audioSamplingRate};l.indexOf(d.STRING.VIDEO)>-1?a=d.STRING.VIDEO:l.indexOf(d.STRING.AUDIO)>-1?a=d.STRING.AUDIO:t.error({msg:"Manifest missing mimeType",detail:i}),a&&(n.representation[a].push(c),r[a][c.id]=o)}))),t.state.maxQualityIndex[a]=i.length-1}})),this.state.manifestInfo=n,this.state.qualityNumberMap=r,this.state.setTheDefaultVideoQualityState||(this.state.setTheDefaultVideoQualityState=!0,this.setDefaultQualityFor("video",this.state.defaultVideoQuality),this.setDefaultQualityFor("audio",this.state.defaultAudioQuality))}}catch(t){this.error({msg:"Parse dash player manifest error",detail:e})}},e.prototype.getQualityIndexFromQualityNumber=function(e,t){void 0===t&&(t=d.STRING.VIDEO);var i=0;try{var n=this.state.qualityNumberMap[t];e=parseInt(""+e,10);var r=this.state.maxQualityIndex[t];if(n&&n[e]>=0&&e>=this.config.minQualityNumberMappingNumber){var a=n[e];a>=0&&(i=a)}else if(-1===r||e>=0&&e<=r)i=e;else if(n){for(var o in n)if(n.hasOwnProperty(o)){var s=parseInt(o,10);s<e&&(i=n[""+Math.max(i,s)])}this.error({msg:"Quality number or index is error, qn or index: "+e+",using lower quality number: "+this.getQualityNumberFromQualityIndex(i)+" with quality index: "+i,type:d.STRING.WARNING})}else this.error({msg:"Quality number or index is error, qn or index: "+e+", qn map: "+JSON.stringify(n)+", max quality index: "+r,type:d.STRING.WARNING})}catch(t){this.error({msg:"Call getQualityIndexFromQualityNumber error, qn: "+e,detail:t})}return i},e.prototype.getQualityNumberFromQualityIndex=function(e,t){void 0===t&&(t=d.STRING.VIDEO);try{var i=this.state.qualityNumberMap[t];if(e=parseInt(""+e,10),i)for(var n in i)if(i.hasOwnProperty(n)&&i[n]===e)return parseInt(n,10)}catch(t){this.error({msg:"Call getQualityNumberFromQualityIndex error, qn: "+e,detail:t})}return 32},e.prototype.getDroppedFramesInfo=function(){try{return this.player.getDroppedFramesInfo()||{}}catch(e){this.error({msg:"Call getDroppedFramesInfo function error",detail:e,type:d.STRING.WARNING})}},e.prototype.getCurrentTrackFor=function(e){try{return this.player.getCurrentTrackFor(e)||{}}catch(e){this.error({msg:"Call getCurrentTrackFor function error, "+(e&&e.message),detail:e,type:d.STRING.WARNING})}},e.prototype.getCurrentSegmentInfoFor=function(e){void 0===e&&(e=d.STRING.VIDEO);try{return this.player.getCurrentSegmentInfoFor(e)||{}}catch(e){this.error({msg:"Call getCurrentSegmentInfoFor function error",detail:e,type:d.STRING.WARNING})}},e.prototype.onInitSegmentsLoaded=function(e,t){try{if(this.state.segmentsInfoMap[e]=t,!t.isDurationAllEqual){var i=t.notEqualQualityIndex;this.error({code:d.ERROR.DURATION_IS_NOT_ALL_EQUAL,msg:"Segments duration is not all equal, type: "+e+", quality index switch: "+i.old+" => "+i.new+", segment index list: "+t.notEqualIndexList+" } "})}var n=this.state.segmentsInfoMap,r=this.state.appendingSourceState;if(n&&n.video&&n.audio&&!r){var a=n.video.realDuration,o=n.audio.realDuration,s=Math.abs(a-o);if(s>3){var l=this.getQualityNumberFromQualityIndex(n.video.qualityIndex,d.STRING.VIDEO),u=this.getQualityNumberFromQualityIndex(n.audio.qualityIndex,d.STRING.AUDIO),c=n.video.segments.length,h=n.audio.segments.length;this.error({type:d.STRING.WARNING,code:d.ERROR.DURATION_DEVIATION_IS_TOO_LARGE,msg:"Video / audio duration deviation is too large, deviation: "+s+"s. Video qn:"+l+", segments:"+c+", duration:"+a+". Audio qn:"+u+", segments:"+h+", duration:"+o})}}if(this.state.startOffsetTime<t.startOffsetTime&&(this.state.startOffsetTime=t.startOffsetTime,t.segments&&t.segments.length)){var f=t.segments[0];f.duration,f.timescale,this.state.startOffsetTime>.1&&(this.player.seek(this.state.startOffsetTime+.2),this.error({type:d.STRING.WARNING,code:d.ERROR.START_OFFSET_TIME_WARNING,msg:e+" start offset time is greater than 0, "+this.state.startOffsetTime}))}}catch(e){this.error({msg:"Call onInitSegmentsLoaded function error",detail:e})}},e.prototype.setMaxAllowedBitrateFor=function(e,t){try{this.player.setMaxAllowedBitrateFor(e,t)}catch(e){this.error({msg:"Call setMaxAllowedBitrateFor function error",detail:e})}},e.prototype.videoInfoSchedule=function(){var e=this,t={},i={};try{var n=this.state,r=n.manifestInfo,a=n.currentQualityIndex,o=r.representation[d.STRING.VIDEO][a[d.STRING.VIDEO]]||{},s=r.representation[d.STRING.AUDIO][a[d.STRING.AUDIO]]||{},l=o.mimeType+';codecs="'+o.codecs+'"',u=this.getCurrentSegmentInfoFor(d.STRING.VIDEO),c=s.mimeType+';codecs="'+s.codecs+'"',h=this.getCurrentSegmentInfoFor(d.STRING.AUDIO),f=this.getDroppedFramesInfo(),p=this.getCurrentCodecID(d.STRING.VIDEO);t={width:o.width,height:o.height,sar:o.sar,mimeType:l+", "+c,fps:o.fps,videoDataRate:o.bandwidth,videoCodec:o.codecs,videoCodecID:p,audioDataRate:s.bandwidth,audioCodec:s.codecs,audioCodecID:0,audioSampleRate:s.audioSamplingRate||0,audioChannelCount:0},i={playerType:"DashPlayer",speed:Math.round(this.getAverageConnectionSpeed(d.STRING.VIDEO)),videoConnectionSpeed:Math.round(this.getAverageConnectionSpeed(d.STRING.VIDEO)),audioConnectionSpeed:Math.round(this.getAverageConnectionSpeed(d.STRING.AUDIO)),networkActivity:this.components.networkActivity&&this.components.networkActivity.getNetworkActivity(),videoBufferHealth:this.getBufferLength("video")||0,audioBufferHealth:this.getBufferLength("audio")||0,droppedFrames:f.droppedFrames||0,decodedFrames:f.totalFrames||0,audioURL:h.url||"",audioCurrentSegmentIndex:h.index||0,audioCurrentSegmentStartTime:h.startTime||0,audioCurrentSegmentDuration:h.duration||0,audioTotalSegmentCount:n.segmentsInfoMap[d.STRING.AUDIO].total||0,videoURL:u.url||"",videoCurrentSegmentIndex:u.index||0,videoCurrentSegmentStartTime:u.startTime||0,videoCurrentSegmentDuration:u.duration||0,videoTotalSegmentCount:n.segmentsInfoMap[d.STRING.VIDEO].total||0},this.state.mediaInfo=t,this.state.statisticsInfo=i,this.fire(d.EVENTS.VIDEO_INFO,{mediaInfo:t,statisticsInfo:i})}catch(e){}clearTimeout(this.timer&&this.timer.videoInfoSchedule),this.config&&this.config.videoInfoScheduleTime&&this.timer&&(this.timer.videoInfoSchedule=window.setTimeout((function(){e.videoInfoSchedule()}),this.config.videoInfoScheduleTime))},e.prototype.getQualityChangedData=function(e,t){var i={};try{var n=e.mediaType,r=e.type,a=e.newQuality,o=e.oldQuality,s=this.state.isAutoSwitch[n];i={mediaType:n,type:r,newQuality:a,newQualityNumber:this.getQualityNumberFromQualityIndex(a,n),oldQuality:o,oldQualityNumber:this.getQualityNumberFromQualityIndex(o,n),currentTime:this.getCurrentTime(),isAutoSwitch:s,dict:this.player.getThroughputDict("video")},d.EVENTS.QUALITY_CHANGE_RENDERED===r?((t=t||this.state.autoSwitchStartTime||0)&&(i.cost=Math.floor(Date.now()-t)),this.state.autoSwitchStartTime=0):d.EVENTS.QUALITY_CHANGE_REQUESTED===r&&(this.state.autoSwitchStartTime=Date.now())}catch(e){this.error({msg:"Call getQualityChangedData error",detail:e,type:d.STRING.WARNING})}return i},e.prototype.onVideoSwitchSourceEnded=function(e){try{var t=void 0;if(e&&e.target){var i=e.target.parentElement;t=i&&i.querySelectorAll("."+d.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME)}else t=document.querySelectorAll("."+d.STRING.SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME);t&&t.length&&t.forEach((function(e){e&&e.parentElement.removeChild(e)}))}catch(e){console.error("Remove transition canvas error.",e)}},e.prototype.getStartOffsetTime=function(){var e=0;try{var t=this.state.segmentsInfoMap;t&&(e=Math.max(t.video.startOffsetTime,t.audio.startOffsetTime))}catch(e){}return e},e.prototype.setDebugLog=function(){try{var e=location.href;e&&e.indexOf("debug=1")>0&&this.player.getDebug().setLogToBrowserConsole(!0)}catch(e){}},e.prototype.getNextFragmentInfo=function(e){if(e&&e.mediaType){var t=e.mediaType;this.state.getNextFragmentHistory||(this.state.getNextFragmentHistory={video:[],audio:[]});var i=!1,n=this.state.getNextFragmentHistory[t].length;if(n){var r=this.state.getNextFragmentHistory[t][this.state.getNextFragmentHistory[t].length-1];for(var a in r)if(r[a]!==e[a]){i=!0;break}}!i&&n||(n>=30&&this.state.getNextFragmentHistory[e.mediaType].splice(0,1),this.state.getNextFragmentHistory[e.mediaType].push(e))}},e.prototype.onFragmentLoading=function(e){if(e&&e.type){var t=e.type,i=e.request,n=this.covertFragmentInfoObject(i);if(n.loadingType=t,t===d.EVENTS.FRAGMENT_LOADING_STARTED)this.state.fragmentLoadingInfo[n.mediaType]=n;else if(t===d.EVENTS.FRAGMENT_LOADING_COMPLETED){var r=this.state.fragmentLoadingInfo[n.mediaType];n.isError=!!e.error;var a=e.response&&e.response.byteLength||0,o=Number(i.firstByteDate)-Number(i.requestStartDate);o=o?Math.max(o,1):1;var s=Number(i.requestEndDate)-Number(i.firstByteDate);s=s?Math.max(s,1):1;var l=Number(i.requestEndDate)-Number(i.requestStartDate);l=l?Math.max(l,1):1;var u=Math.round(8*a/l);n.latencyTime=o,n.downloadTime=s,n.totalTime=l,n.downloadBytes=a,n.connectionSpeed=u,n.data=e.response,n.totalSize=this.state.segmentsInfoMap[n.mediaType].rangeEnd+1;var c=!0;for(var h in r)if(r[h]!==n[h]&&"loadingType"!==h&&!isNaN(r[h])){c=!1;break}c&&(this.state.fragmentLoadingInfo[n.mediaType]=null,this.fire(d.EVENTS.FRAGMENT_LOADING_COMPLETED,n)),this.bpNCSaveData(n)}else this.components.networkActivity&&this.components.networkActivity.onFragmentLoadingProgess(e)}},e.prototype.bpNCSaveData=function(e){if(e&&e.url&&e.range&&e.data){var t=window.bpNC;if(t&&t.saveDataEnabled){var i=(""+e.url).split("?")[0].split("/"),n=i[i.length-1].split(".")[0].slice(-5);if(!n)return;var r=parseInt(n,10);if(isNaN(r))return;if(!(r>3e4&&r<=30080||r>30200&&r<=30280))return;var a={url:e.url,range:e.range,data:e.data,totalSize:e.totalSize,token:t.getToken()};t.saveData(a)}}},e.prototype.covertFragmentInfoObject=function(e){var t={};try{t={loadingType:"",type:e.type,mediaType:e.mediaType,startTime:e.startTime,url:e.url,index:e.index,id:e.representationId,qn:this.getQualityNumberFromQualityIndex(e.quality,e.mediaType),range:e.range,duration:e.duration,isError:!1}}catch(e){}return t},e.prototype.onDashJSLog=function(e){this.state.logHistory||(this.state.logHistory=[]),this.state.logHistory.length>=2e4&&this.state.logHistory.shift(),e&&this.state.logHistory.push(e.message)},e.prototype.changePlaybackState=function(e){return this.state.playbackState=e,this},e.prototype.saveNetworkWarningInfo=function(e){this.state.networkWarningHistory||(this.state.networkWarningHistory=[]),this.state.networkWarningHistory.length>=100&&this.state.networkWarningHistory.shift(),this.state.networkWarningHistory.push(e)},e.prototype.filterManifestByEnableHEVC=function(e,t){void 0===t&&(t=!1);var i=!1;if(t=this.applyEnableHEVCStrategy(t),e&&e.video&&e.video instanceof Array){var n=e.video;if(n.length&&n instanceof Array){var r=7;if(t){var a=n.filter((function(e){return 12===e.codecid}));i=!0,a&&a.length?(r=12,a.forEach((function(e){var t,n;(null===(n=null===(t=window.MediaSource)||void 0===t?void 0:t.isTypeSupported)||void 0===n?void 0:n.call(t,'video/mp4; codecs="'+e.codecs+'"'))||(r=7,i=!1)}))):(r=7,i=!1)}e.video=e.video.filter((function(e){return e.codecid===r}))}}return{manifest:e,isHEVCTypeSupported:i}},e.prototype.applyEnableHEVCStrategy=function(e){if(e){var t=navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase(),i=t.indexOf("edge/")>-1,n=this.state.defaultVideoQuality,r=n>112&&!i&&t.indexOf("chrome/")>0,a=n>116,o=t.indexOf("edg/")>-1,s=c.default.getSessionStorage("enableHEVCError");(r||a)&&(e=!1);var l="bilibili_player_codec_prefer_type",u=parseInt(c.default.getLocalStorage(l),10);if(1===u)e=!0;else if(2===u)e=!1,this.resetHEVCDefaultStrategy().then((function(){c.default.setLocalStorage(l,"0")})).catch((function(){}));else{this.resetHEVCDefaultStrategy().catch((function(){}));var d=parseInt(c.default.getLocalStorage("bilibili_player_codec_prefer_strategy"),10);2===d&&(this.onDashJSLog({type:"HEVCStrategyDisabledByPerf",message:"HEVC perfer strategy disabled by performance, strategy type: "+d}),e=!1)}125===n&&(e=!0),(o||s)&&(e=!1),this.state.logHistory&&(this.state.logHistory.push(t),this.state.logHistory.push("Apply strategy: "+e+" ("+u+", "+r+", "+a+", "+o+", "+s+") \n"))}return e},e.prototype.resetHEVCDefaultStrategy=function(){var e=this;return new Promise((function(t,i){var n="bilibili_player_codec_prefer_reset",r="1.5.2";c.default.getLocalStorage(n)!==r?(e.onDashJSLog({type:"HEVCStrategyReset",message:"Reset HEVC perfer strategy, latest version: 1.5.2"}),c.default.setLocalStorage(n,r),t()):i()}))},e.EVENTS=d.EVENTS,e.ERROR=d.ERROR,e.STRING=d.STRING,e.BUFFERING=f.BUFFERING,e.CONFIG=l.CONFIG,e.isHEVCTypeSupported=u.isHEVCTypeSupported,e.isHEVCHDR10TypeSupported=u.isHEVCHDR10TypeSupported,e}();t.default=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0,t.CONFIG={version:"1.7.0",gitHash:"2eb9db65",build:170,release:"2021-07-08T07:07:35.322Z",mode:"production"}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isHEVCHDR10TypeSupported=t.isHEVCTypeSupported=void 0;var r=n(i(3));t.isHEVCTypeSupported=function(){var e,t;return null===(t=null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported)||void 0===t?void 0:t.call(e,'video/mp4; codecs="hev1.1.6.L120.90"')},t.isHEVCHDR10TypeSupported=function(){var e,t,i,n,a,o,s=!1,l=null===(t=null===(e=window.navigator)||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.toLowerCase(),u=l.indexOf("safari")>-1&&l.indexOf("chrom")<0,c=0,d=l.match(/version\/\d+/);u&&d&&d.length&&(c=Number(d[0].substr(8)));var h=l.indexOf("edge/")>-1,f=0,p=l.match(/edge\/\d+/);h&&p&&p.length&&(f=Number(p[0].substr(5)));var g=null===(n=null===(i=window.MediaSource)||void 0===i?void 0:i.isTypeSupported)||void 0===n?void 0:n.call(i,'video/mp4; codecs="hev1.2.4.H156.90"'),y=null===(a=window.matchMedia("(color-gamut:p3)"))||void 0===a?void 0:a.matches,m=(null===(o=window.screen)||void 0===o||o.colorDepth,parseInt(r.default.getLocalStorage("bilibili_player_force_hdr"),10));return g&&(u&&y&&c>=13||h&&f>=18||m)&&(s=!0),s}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.state={runningInterval:1e3,maxCacheLength:200,fragmentLoadingProgressInfo:{},networkActivityLoadedList:[],networkActivityHistory:[],networkActivityLatestTraceTime:0},this.initalize()}return e.prototype.onFragmentLoadingProgess=function(e){var t=e.request,i=0,n=Math.floor(performance.now()),r=t.quality+"-"+t.index+"-"+t.ts,a=!1;if(this.state.fragmentLoadingProgressInfo[t.mediaType]&&this.state.fragmentLoadingProgressInfo[t.mediaType][r]){var o=this.state.fragmentLoadingProgressInfo[t.mediaType][r],s=!1;for(var l in o)if("bytesLoaded"!==l&&o[l]!==t[l])s=!0;else if(o.bytesLoaded===t.bytesLoaded)return;i=s?t.bytesLoaded:t.bytesLoaded-o.bytesLoaded}else this.state.fragmentLoadingProgressInfo[t.mediaType]||(this.state.fragmentLoadingProgressInfo[t.mediaType]={}),i=t.bytesLoaded;t.bytesLoaded===t.bytesTotal&&(a=!0),a?delete this.state.fragmentLoadingProgressInfo[t.mediaType][r]:this.state.fragmentLoadingProgressInfo[t.mediaType][r]={bytesLoaded:t.bytesLoaded,bytesTotal:t.bytesTotal,quality:t.quality,index:t.index,mediaType:t.mediaType,range:t.range},this.state.networkActivityLoadedList.length>=this.state.maxCacheLength&&this.state.networkActivityLoadedList.splice(0,1),i&&this.state.networkActivityLoadedList.push({time:n,loaded:Math.max(i,0)})},e.prototype.getNetworkActivity=function(){return this.state.networkActivityHistory.length?this.state.networkActivityHistory[this.state.networkActivityHistory.length-1]:0},e.prototype.getNetworkActivityHistory=function(e){return void 0===e&&(e=0),e?this.state.networkActivityHistory.slice(this.state.networkActivityHistory.length-e):this.state.networkActivityHistory},e.prototype.destroy=function(){clearTimeout(this.state&&this.state.networkActivityTimer),this.state=null},e.prototype.initalize=function(){this.runNewWorkActivityTimer()},e.prototype.runNewWorkActivityTimer=function(){var e=this;this.runNetworkActivity(),clearTimeout(this.state.networkActivityTimer),this.state.networkActivityTimer=window.setTimeout((function(){e.runNewWorkActivityTimer()}),this.state.runningInterval)},e.prototype.runNetworkActivity=function(){var e=this.state.runningInterval,t=Math.floor(performance.now()),i=this.state.networkActivityLatestTraceTime,n=this.state.networkActivityLoadedList.filter((function(n){return t-n.time<e&&t>i}));this.state.networkActivityLatestTraceTime=t;var r=0;n&&n.length&&n.forEach((function(e){return r+=e.loaded})),this.state.networkActivityHistory.length>=this.state.maxCacheLength&&this.state.networkActivityHistory.splice(0,1),this.state.networkActivityHistory.push(Math.max(r,0))},e}();t.default=n},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),a=i(7),o=n(i(3)),s=function(){function e(){this.bufferingHistory=[],this.state={enableHEVC:!1}}return e.prototype.setHEVCEnableFlag=function(e){return void 0===e&&(e=!1),this.state.enableHEVC=e,this},e.prototype.push=function(e){this.bufferingHistory.length>=this.MAX_HISTORY_LENGTH&&this.bufferingHistory.shift(),e.timestamp=this.getNow(),this.bufferingHistory.push(e),this.optimize()},e.prototype.setOnOptimizingCallback=function(e){this.state.onOptimizingCallback=e},e.prototype.onOptimzing=function(e,t){"function"==typeof this.state.onOptimizingCallback&&this.state.onOptimizingCallback(e,t)},e.prototype.optimize=function(){var e=this.getNow(),t=this.bufferingHistory.filter((function(t){return e-t.timestamp<=2e4}));if(this.state.enableHEVC){var i=""+a.BUFFERING.PLAYBACK.PLAYING+a.BUFFERING.TYPE.PERFORMANCE,n=t.filter((function(e){return i===e.type}));n&&n.length>=10&&(this.state.enableHEVC=!1,this.disableHEVCFlag())}},e.prototype.disableHEVCFlag=function(){1!==parseInt(o.default.getLocalStorage("bilibili_player_codec_prefer_type"),10)&&(o.default.setLocalStorage("bilibili_player_codec_prefer_strategy","2"),this.onOptimzing(r.EVENTS.BUFFERING_OPTIMIZATION,{type:"hevcPerf"}))},e.prototype.getNow=function(){var e;return(null===(e=window.performance)||void 0===e?void 0:e.now())||Date.now()},e}();t.default=s}])}}]);